"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(n){if(!n||!VRender.Component.ui){var l=n?VRender.Utils:require(""+__vrender__).Utils,s={doAdapter:function(t,e){if(t&&t._vr_adapter_flag)return t;var i=this.options.dataAdapter||this.options.adapter;return l.isFunction(this.getDataAdapter)&&(i=this.getDataAdapter()),l.isFunction(i)&&(t=i(t,e))&&(t._vr_adapter_flag=!0),t},getDataKey:function(t){if(l.isBlank(t))return null;if(l.isPrimitive(t))return t;var e=this.options.keyField;return l.isFunction(this.getKeyField)&&(e=this.getKeyField()),l.isNotBlank(e)?t[e]:t.hasOwnProperty("id")?t.id:t.hasOwnProperty("code")?t.code:t.hasOwnProperty("value")?t.value:null},getDataLabel:function(t,e){var i=this.options.labelFunction;if(l.isFunction(this.getLabelFunction)&&(i=this.getLabelFunction()),l.isFunction(i))return i.call(this,t,e);if(l.isBlank(t))return"";if(l.isPrimitive(t))return""+t;var n=this.options.labelField;return l.isFunction(this.getLabelField)&&(n=this.getLabelField()),l.isNotBlank(n)?l.isNull(t[n])?"":t[n]:t.hasOwnProperty("label")?l.isNull(t.label)?"":t.label:t.hasOwnProperty("name")?l.isNull(t.name)?"":t.name:t.hasOwnProperty("value")?l.isNull(t.value)?"":t.value:""+t},getMapData:function(t){var e=this.options.dataMapper||this.options.mapper;if(l.isFunction(this.getDataMapper)&&(e=this.getDataMapper()),l.isFunction(e))return e(t);if(l.isNull(t))return null;if(l.isPrimitive(t))return t;var i={};return t.hasOwnProperty("id")&&(i.id=t.id),t.hasOwnProperty("code")&&(i.code=t.code),t.hasOwnProperty("name")&&(i.name=t.name),t.hasOwnProperty("value")&&(i.value=t.value),t.hasOwnProperty("label")&&(i.label=t.label),i},isMultiple:function(){return this.options.hasOwnProperty("multiple")?l.isTrue(this.options.multiple):l.isTrue(this.options.multi)},renderData:function(t,e){if(l.isFunction(this.getMapData)&&(e=this.getMapData(e)),e)if(l.isPrimitive(e))t.attr("data-v",e);else for(var i in e)t.attr("data-"+i,l.trimToEmpty(e[i]))},renderFunction:function(t,e,i){!n&&l.isNotBlank(e)&&l.isFunction(i)&&t.write("<div class='ui-fn' style='display:none' name='"+e+"' fn-state='"+(i._state||"")+"' fn-data='"+(i._data||"")+"'>"+escape(i)+"</div>")},getFunction:function(t,e){if(this.options.hasOwnProperty(t))return this.options[t];if(this.hasOwnProperty(t))return this[t];if(e&&this.options.hasOwnProperty(e))return this.options[e];var i=null,n=this.$el.children(".ui-fn[name='"+(e||t)+"']");if(n&&0<n.length){if(i=n.text(),l.isNotBlank(i)&&((i=new Function("var Utils=VRender.Utils;return ("+unescape(i)+");")())._state=n.attr("fn-state")||null,i._data=n.attr("fn-data")||null,i._data))try{i._data=JSON.parse(i._data)}catch(t){}n.remove()}return this[t]=i},renderSubView:function(t,e){e&&(l.isFunction(e.render)?e.render(t):t.append(e.$el||e))},getIntValues:function(t,e,i){l.isArray(t)||(t=l.isBlank(t)?[]:(""+t).split(",")),e=l.isNull(e)?Number.NEGATIVE_INFINITY:e,i=l.isNull(i)?Number.POSITIVE_INFINITY:i;var n=[];return l.each(t,function(t){isNaN(t)||(t=parseInt(t),!isNaN(t)&&n.indexOf(t)<0&&e<=t&&t<=i&&n.push(t))}),n},equalIndex:function(t,e){if(t=s.getIntValues(t,0),e=s.getIntValues(e,0),t.length!=e.length)return!1;t.sort(function(t,e){return t-e}),e.sort(function(t,e){return t-e});for(var i=0,n=t.length;i<n;i++)if(t[i]!=e[i])return!1;return!0}};if(n){var c=VRender.Component;s.init=function(i,n,e){c.register(i,n),n.create||(n.create=function(t){return c.create(t,n,e)}),n.find||(n.find=function(t){return c.find(t,i,n)}),n.findMe||(n.findMe=function(t){var e=c.find(t,i,n);return e&&e[0]||null}),n.instance||(n.instance=function(t){return c.instance(t,i)}),n.prototype._create=function(t){return n.create(t)}},s.isElement=function(t){return t instanceof Element||t instanceof $},s.load=function(t,e,s){var a=this;if(t=t||this.lastLoadApi||this.$el.attr("api-name"),l.isBlank(t))return!1;var r=this.$el.addClass("is-loading"),o=this.loadTimerId=Date.now();return c.load.call(this,t,e,function(t,e){if(o==a.loadTimerId){r.removeClass("is-loading");var i=l.isFunction(a.getPaginator)&&a.getPaginator();if(i&&l.isFunction(i.set)){var n=a._pageInfo||{};i.set(n.total,n.page,n.size)}l.isFunction(s)&&s(t,e)}}),!0},s.snapshoot=function(){var n={},s={},a=this,t={};return this._rootSnapshoot||(this._rootSnapshoot=t),t.shoot=function(t,e){if(t=t||n,l.isFunction(a._snapshoot_shoot)){var i=Array.prototype.slice.call(arguments);i[0]=t,a._snapshoot_shoot.apply(a,i)}else t.data=a.getData()},t.compare=function(t){var e=Array.prototype.slice.call(arguments);return l.isFunction(a._snapshoot_compare)?a._snapshoot_compare.apply(a,[n].concat(e)):(this.shoot.apply(this,[s].concat(e)),n.data==s.data)},t.done=function(t){var e=!1;if(a._rootSnapshoot==this){var i=Array.prototype.slice.call(arguments);this.compare.apply(this,i)||(this.shoot.apply(this,[s].concat(i)),l.isFunction(a._snapshoot_change)&&a._snapshoot_change(s.data,n.data),a.trigger("change",s.data,n.data),a.$el.trigger("change",s.data,n.data),e=!0)}return this.release(),e},t.release=function(){a._rootSnapshoot==this&&(a._rootSnapshoot=null)},t.getState=function(){return n},t.shoot(n),s.data=n.data,t},s.getDropdownHeight=function(t,e){var i=0;i=this._isRenderAsApp()?.8*$(window).height():parseInt(t.css("maxHeight"))||e||300;var n=t.get(0).scrollHeight;return n<i&&(i=n),i},s.mouseDebounce=function(t,e){var i=$(t.currentTarget),n=parseInt(i.attr("timerid"));n&&(clearTimeout(n),i.removeAttr("timerid")),"mouseleave"==t.type&&(n=setTimeout(function(){i.removeAttr("timerid"),e()},500),i.attr("timerid",n))}}n?(VRender.Component.ui={util:l,fn:s},VRender.Component.ui.init=s.init):(exports.util=l,exports.fn=s,require("./base"),require("./items"),require("./selectable"))}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui._base){var e=t?VRender.Component.ui:require("./init"),a=e.fn,r=e.util,i=function(){},n=i.prototype=t?new VRender.EventEmitter:new Object;n._doAdapter=function(t){return t?a.doAdapter.call(this,t):null},n._isRenderAsApp=function(){return t?VRender.ENV.isApp:(this.hasOwnProperty("_isApp")||(this._isApp=!1,this.context&&r.isFunction(this.context.isRenderAsApp)&&(this._isApp=this.context.isRenderAsApp())),this._isApp)},n._isRenderAsIphone=function(){return t?VRender.ENV.isIphone:(this.hasOwnProperty("_isIphone")||(this._isIphone=!1,this.context&&r.isFunction(this.context.isRenderAsIphone)&&(this._isIphone=this.context.isRenderAsIphone())),this._isIphone)},n._isRenderAsRem=function(){return t?VRender.ENV.useRem:(this.hasOwnProperty("_isRem")||(this._isRem=!1,this.context&&r.isFunction(this.context.isRenderAsRem)&&(this._isRem=this.context.isRenderAsRem())),this._isRem)},n.getData=function(){return this.options.data=this._doAdapter(this.options.data),this.options.data},n._getDataKey=function(t){return a.getDataKey.call(this,t)},n._getDataLabel=function(t){return a.getDataLabel.call(this,t)};var s=e._base=function(t,e){if(0<arguments.length&&!1!==t){if(!a.isElement(t))return this._create(t);var i=VRender.Component.get(t);if(i)return i;var n=this.$el=$(t);n.data(VRender.Component.bindName,this),this.options=e||{},this.init(n,this.options)}},o=s.prototype=new i;s.init=function(t,e){var i=this;d.call(this,t,e),setTimeout(function(){i._tryAutoLoad()})},s.getInitParams=function(){if(!this.initParams){var t=null;if(this.options.hasOwnProperty("apiParams"))t=this.options.apiParams;else if(this.options.hasOwnProperty("params"))t=this.options.params;else try{t=JSON.parse(this.$el.attr("api-params")||null),this.$el.removeAttr("api-params")}catch(t){}this.initParams=r.extend({},t)}return r.extend({},this.initParams)},s.isAutoLoad=function(){return this.options.hasOwnProperty("autoLoad")||(this.options.autoLoad=this.$el.attr("api-autoload")),this.$el.removeAttr("api-autoload"),r.isTrue(this.options.autoLoad)},s.tryAutoLoad=function(){var t=this;if(s.isAutoLoad.call(this)&&r.isFunction(this.load)){var e=this.options.apiName||this.options.api||this.$el.attr("api-name"),i=$.extend({},this.getInitParams()),n=r.isFunction(this.getPaginator)&&this.getPaginator();n&&(!i.p_no&&r.isFunction(n.getPage)&&(i.p_no=n.getPage()),!i.p_size&&r.isFunction(n.getSize)&&(i.p_size=n.getSize())),this.load(e,i,function(){setTimeout(function(){s.tryAutoSelect.call(t)})})}},s.tryAutoSelect=function(){function t(t){r.isFunction(i.setSelectedIndex)&&i.setSelectedIndex(t)}function e(t){r.isFunction(i.setSelectedKey)&&i.setSelectedKey(t)}var i=this,n=this.options||{};n.hasOwnProperty("selectedIndex")?t(n.selectedIndex):r.isNotBlank(this.$el.attr("data-tryindex"))?t(this.$el.attr("data-tryindex")):n.hasOwnProperty("selectedId")?e(n.selectedId):r.isNotBlank(this.$el.attr("data-tryid"))&&e(this.$el.attr("data-tryid")),delete n.selectedIndex,delete n.selectedId,this.$el.removeAttr("data-tryindex"),this.$el.removeAttr("data-tryid")},s.loadBefore=function(t,e){this.trigger("load_before",t,e)},s.loadAfter=function(t,e){this.trigger("load_after",t,e)},o.init=function(t,e){s.init.call(this,t,e)},o.getViewId=function(){return this.$el.attr("vid")},o.getInitParams=function(){return s.getInitParams.call(this)},o.setData=function(t){this.options.data=t,this.rerender()},o.getDataAdapter=function(){return a.getFunction.call(this,"dataAdapter","adapter")},o.setDataAdapter=function(t){this.options.dataAdapter=t,delete this.options.adapter,this.$el.children(".ui-fn[name='adapter']").remove(),this.rerender()},o.getDataMapper=function(){return a.getFunction.call(this,"dataMapper","mapper")},o.setDataMapper=function(t){this.options.dataMapper=t,delete this.options.mapper,this.$el.children(".ui-fn[name='mapper']"
).remove(),this.rerender()},o.isDisabled=function(){return this.$el.is(".disabled")},o.setDisabled=function(t){r.isNull(t)||r.isTrue(t)?this.$el.addClass("disabled").attr("disabled","disabled"):this.$el.removeClass("disabled").removeAttr("disabled","disabled")},o.setVisible=function(t){r.isNull(t)||r.isTrue(t)?this.$el.removeClass("ui-hidden"):this.$el.addClass("ui-hidden")},o.destory=function(){this.$el.remove()},o.rerender=function(){},o.isMounted=function(){return 0<$("body").find(this.$el).length},o._snapshoot=function(){return a.snapshoot.call(this)},o._getScrollContainer=function(){return this.$el.attr("opt-box")},o.load=function(t,e,i){var n=this;if(r.isFunction(this._loadBefore)&&this._loadBefore(t,e),!e.p_size&&r.isFunction(this.getPaginator)){var s=this.getPaginator();s&&r.isFunction(s.getSize)&&(e.p_size=s.getSize())}return a.load.call(this,t,e,function(t,e){t||(r.isFunction(n.setData)?n.setData(e):n.options.data=e),setTimeout(function(){r.isFunction(n._loadAfter)&&n._loadAfter(t,e),r.isFunction(i)&&i(t,e),n.trigger("loaded",t,e)})})},o.reload=function(t,e){r.isFunction(t)&&(e=t,t=null);var i=this.lastLoadParams||{};return!isNaN(t)&&0<t&&(i.p_no=t),this.trigger("reload_before",this.lastLoadApi,i),this.load(this.lastLoadApi,i,e)},o.isLoading=function(){return this.$el.is(".is-loading")},o._tryAutoLoad=function(){s.tryAutoLoad.call(this)},o._loadBefore=function(t,e){s.loadBefore.call(this,t,e)},o._loadAfter=function(t,e){s.loadAfter.call(this,t,e)};var l=e._baseRender=function(t,e){0<arguments.length&&!1!==t&&(this.context=e?t:null,this.options=e||t||{})},c=l.prototype=new i;l.render=function(t,e){e.addClass("vrender-ui"),this.renderData(t,e),a.renderFunction.call(this,e,"adapter",this.getDataAdapter()),a.renderFunction.call(this,e,"mapper",this.getDataMapper())},c.render=function(t,e){return l.render.call(this,t,e),this},c.renderData=function(t,e){a.renderData.call(this,e,this.getData())},c.getDataAdapter=function(){return this.options.dataAdapter||this.options.adapter},c.getDataMapper=function(){return this.options.dataMapper||this.options.mapper},c.getMapData=function(t){return a.getMapData.call(this,t)};var d=function(t,e){t.attr("id",r.trimToNull(e.id)||void 0),t.attr("name",r.trimToNull(e.name)||void 0);var i=e.className||e.cls;if(r.isNotBlank(i)&&t.addClass(i),r.isNotBlank(e.style)&&t.addClass(e.style),e.hasOwnProperty("disabled")&&this.setDisabled(r.isTrue(e.disabled)),!1===e.visible||"gone"===e.visible?t.css("display","none"):"hidden"===e.visible&&t.css("visibility","hidden"),t.attr("ref",r.trimToNull(e.ref)||void 0),!e.data){var n=t.attr("data-items");if(n)try{e.data=JSON.parse(unescape(n))}catch(t){}}this.$el.removeAttr("data-items")}}}("undefined"!=typeof window),function(l){if(!l||!VRender.Component.ui._items){var i=l?VRender.Component.ui:require("./init"),o=i.fn,c=i.util,s=i._items=function(t,e){return i._base.call(this,t,e)},t=s.prototype=new i._base(!1);s.init=function(t,e){i._base.init.call(this,t,e),this._initPager(),this._checkIfEmpty()},s.doAdapter=function(t){return a.doAdapter.call(this,t)},s.renderItems=function(t,e){a.renderItems.call(this,$,t,e),this._checkIfEmpty()},s.renderOneItem=function(t,e,i,n){return a.renderOneItem.call(this,$,t,e,i,n)},s.addItem=function(t,e,i){e=c.getIndexValue(e),t=o.doAdapter.call(this,t,e),i=i||this.getData();var n=null,s=this._getItemContainer();if(s&&0<s.length){if(n=this._getNewItem($,s,t,e)){if(0<=e&&e<i.length){var a=this._getItems();a&&0<a.length&&a.eq(e).before(n)}this._renderOneItem($,n,t,e)}this._checkIfEmpty()}return 0<=e&&e<i.length?i.splice(e,0,t):i.push(t),n},s.updateItem=function(t,e,i){if(t=o.doAdapter.call(this,t,e),0<=(e=e||0===e?c.getIndexValue(e):this.getDataIndex(t)))if(e<(i=i||this.getData()).length){var n=this._getItemContainer();if(n&&0<n.length){var s=this._getItems(),a=this._getNewItem($,n,t,e);a?(s.eq(e).before(a).remove(),this._renderOneItem($,a,t,e)):s.eq(e).remove()}this._checkIfEmpty(),i.splice(e,1,t)}else e=-1;return e},s.removeItem=function(t,e,i){if(t&&0<t.length)e=t.index();else{if((e=c.getIndexValue(e))<0)return null;var n=this._getItems();n&&n.length>e&&(t=n.eq(e))}return t&&0<t.length&&(t.remove(),this._checkIfEmpty()),(i=i||this.getData())&&e<i.length?i.splice(e,1):null},s.initPager=function(){if(this.options.hasOwnProperty("pager"))this.setPaginator(this.options.pager);else{var t=this.$el.attr("opt-pager");t&&(t=$(t))&&0<t.length&&(t=VRender.Component.get(t)||VRender.FrontComponent.get(t)||t,this.setPaginator(t)),this.$el.removeAttr("opt-pager")}},s.setPager=function(s){var a=this;this.pager&&c.isFunction(this.pager.off)&&this.pager.off("change"),(this.pager=s)&&c.isFunction(s.on)&&s.on("change",function(t,e){var i=$.extend({},a.lastLoadParams);i.p_no=e&&e.page,i.p_size=e&&e.size,!i.p_no&&c.isFunction(s.getPage)&&(i.p_no=s.getPage()),!i.p_size&&c.isFunction(s.getSize)&&(i.p_size=s.getSize());var n=a._pageInfo||{};i.p_no==n.page&&i.p_size==n.size||a.load(a.lastLoadApi,i)})},s.checkIfEmpty=function(){var t=this._getItems();t&&0<t.length?this.$el.removeClass("is-empty"):this.$el.addClass("is-empty")},s.isDisabled=function(t){if("number"!=typeof t)return"string"==typeof t?this.isDisabled(this.getIndexByName(t)):this.$el.is(".disabled");var e=this._getItemAt(t);return!e||e.is(".disabled")},s.setDisabled=function(t,e){if("string"==typeof e)return this.setDisabled(t,this.getIndexByName(e));var i=this.$el;if("number"==typeof e&&(i=this._getItemAt(e)),i&&((t=!(!c.isNull(t)&&!c.isTrue(t)))?i.addClass("disabled").attr("disabled","disabled"):i.removeClass("disabled").removeAttr("disabled"),c.isFunction(this.getDisableField))){var n=this.getDisableField();if(n){var s=this._getItemData(i);s&&(s[n]=t)}}},t.init=function(t,e){return s.init.call(this,t,e)},t.setData=function(t){this.options.data=this._doAdapter(t),this.rerender()},t.getDataAt=function(t){if((t=c.getIndexValue(t))<0)return null;var e=this.getData()||[];return t<e.length?e[t]:null},t.getDataIndex=function(e){var i=this,t=this.getData();if(t&&0<t.length){var n=this._getDataKey(e);return c.index(t,function(t){return t==e||i._getDataKey(t)==n})}return-1},t.getDataByKey=function(t){return this.getDataAt(this.getIndexByKey(t))},t.getIndexByKey=function(e){var i=this,t=this.getData();return t&&0<t.length?c.index(t,function(t){return i._getDataKey(t)==e}):-1},t.getDataByName=function(t){return this.getDataAt(this.getIndexByName(t))},t.getIndexByName=function(t){var e=this.getData();return e&&0<e.length?c.indexBy(e,"name",t):-1},t.getKeyField=function(){return this.options.keyField||this.$el.attr("opt-key")},t.setKeyField=function(t){t=c.trimToEmpty(t),this.getKeyField()!=t&&(this.options.keyField=t,this.$el.attr("opt-key",this.options.keyField),this.rerender())},t.getLabelField=function(){return this.options.labelField||this.$el.attr("opt-lbl")},t.setLabelField=function(t){t=c.trimToEmpty(t),this.getLabelField()!=t&&(this.options.labelField=t,this.$el.attr("opt-lbl",this.options.labelField),this.rerender())},t.getLabelFunction=function(){return o.getFunction.call(this,"labelFunction","lblfunc")},t.setLabelFunction=function(t){this.getLabelFunction()!=t&&(this.options.labelFunction=t,this.$el.children(".ui-fn[name='lblfunc']").remove(),this.rerender())},t.getItemRenderer=function(){return this.options.hasOwnProperty("renderer")?this.options.renderer:o.getFunction.call(this,"itemRenderer","irender")},t.setItemRenderer=function(t){this.getItemRenderer()!=t&&(this.options.itemRenderer=t,delete this.options.renderer,this.$el.children(".ui-fn[name='irender']").remove(),this.rerender())},t.getPaginator=function(){return this.pager},t.setPaginator=function(t){s.setPager.call(this,t)},t.length=function(){return c.toArray(this.getData()).length},t.isDisabled=function(t){return s.isDisabled.call(this,t)},t.setDisabled=function(t,e){s.setDisabled.call(this,t,e)},t.addItem=function(t,e){var i=s.addItem.call(this,t,e);return this.trigger("itemchange",t),i},t.updateItem=function(t,e){return 0<=(e=s.updateItem.call(this,t,e))&&this.trigger("itemchange",t),e},t.removeItem=function(t){return this.removeItemAt(this.getDataIndex(t))},t.removeItemAt=function(t){var e=s.removeItem.call(this,null,t);return this.trigger("itemchange",e),e},t.addOrUpdateItem=function(t){var e=this.getDataIndex(t);0<=e?this.updateItem(t,e):this.addItem(t,e)},t.getItemData=function(t){var e=$(t);if(e&&0<e.length){var i=this._getItemContainer();if(i&&0<i.length){for(t=e.parent();;){if(!t||0==t.length){e=null;break}if(t.is(i))break;t=(e=t).parent()}if(e&&0<e.length)return this._getItemData(e)}}return null},t.more=function(n){var s=this;if(this.lastLoadApi&&this.hasMore()&&!this.isLoading()){var t=c.extend({},this.lastLoadParams);return t.p_no=parseInt(this._pageInfo&&this._pageInfo.page)||0,t.p_no+=1,c.isFunction(this._moreBefore)?this._moreBefore(this.lastLoadApi,t):c.isFunction(this._loadBefore)&&this._loadBefore(this.lastLoadApi,t),o.load.call(this,this.lastLoadApi,t,function(t,e){if(!t&&c.isArray(e))if(c.isFunction(s.addItem))c.each(e,function(t){s.addItem(t)});else{var i=s.options.data||[];s.options.data=i.concat(e)}setTimeout(function(){c.isFunction(s._moreAfter)?s._moreAfter(t,e):c.isFunction(s._loadAfter)&&s._loadAfter(t,e),c.isFunction(n)&&n(t,e),s.trigger("loaded",t,e)})}),!0}return!1},t.loadPage=function(t,e){if(this.lastLoadApi&&!this.isLoading()){var i=c.extend({},this.lastLoadParams);i.p_no=parseInt(t)||1,this.load(null,i,e)}},t.hasMore=function(){return!!this._pageInfo&&(parseInt(this._pageInfo.page)||1)*(parseInt(this._pageInfo.size)||20)<(parseInt(this._pageInfo.total)||0)},t.isEmpty=function(){if(this.$el.is(".is-empty"))return!0;var t=this.getData();return!t||0==t.length},t.rerender=function(){var e=this;c.debounce("ui_render-"+this.getViewId(),function(){var t=e._getItemContainer();t&&0<t.length&&e._renderItems($,t.empty(),e.getData())})},t._doAdapter=function(t){return s.doAdapter.call(this,t)},t._getItemContainer=function(){return this.$el},t._getNewItem=function(t,e,i,n){return t("<li></li>").appendTo(e)},t._renderItems=function(t,e,i){s.renderItems.call(this,e,i)},t._renderOneItem=function(t,e,i,n){return s.renderOneItem.call(this,e,null,i,n)},t._isDisabled=function(t,e){if(t){var i=this.options;i.hasOwnProperty(
"disableField")||(i.disableField=this.$el.attr("opt-disabled"));var n=i.disableField;if(n&&t.hasOwnProperty(n))return c.isTrue(t[n])}return!1},t._getItems=function(t){var e=this._getItemContainer();if(e&&0<e.length)return e.children(t)},t._getItemAt=function(n){return 0<=(n=c.getIndexValue(n))?c.find(this._getItems(),function(t,e){var i=parseInt(t.attr("opt-ind"));return isNaN(i)&&(i=e),n==i}):null},t._getItemData=function(t,e){var i=t.data("itemData");if(!i){var n=this.getData();c.isArray(n)&&((isNaN(e)||!e&&0!==e)&&(e=parseInt(t.attr("opt-ind")),isNaN(e)&&(e=t.index())),i=n[e])}return c.isEmpty(i)?null:i},t._initPager=function(){s.initPager.call(this)},t._checkIfEmpty=function(){s.checkIfEmpty.call(this)},t._getLoadText=function(){return this.options.loadingText},t._getLoadView=function(){return this.options.loadingView},t._getMoreText=function(){return this.options.moreText},t._getMoreView=function(){return this.options.moreView},t._getEmptyText=function(){return this.options.emptyText||this.options.empty},t._getEmptyView=function(){return this.options.emptyView};var a=i._itemsRender=function(t,e){i._baseRender.call(this,t,e)},e=a.prototype=new i._baseRender(!1);a.render=function(t,e){i._baseRender.render.call(this,t,e),e.attr("opt-key",c.trimToNull(this.getKeyField())),e.attr("opt-lbl",c.trimToNull(this.getLabelField())),e.attr("opt-disable",c.trimToNull(this.options.disableField)),o.renderFunction(e,"lblfunc",this.getLabelFunction()),o.renderFunction(e,"irender",this.getItemRenderer()),this._renderItems(t,e),this._renderEmptyView(t,e),this._renderLoadView(t,e),this._renderPager(t,e)},a.renderData=function(t,e,i){if(0<(i=c.toArray(i)||[]).length){var n=this.getDataMapper();c.isFunction(n)&&(i=c.map(i,n))}e.attr("data-items",escape(JSON.stringify(i)))},a.renderItems=function(n,s,t){var a=this;if((t=t||this.getData())&&0<t.length){var r=this._render_items=[];c.each(t,function(t,e){var i=a._getNewItem(n,s,t,e);i&&(r.push({item:i,data:t,index:e}),a._renderOneItem(n,i,t,e))}),setTimeout(function(){a._render_items=null})}},a.renderOneItem=function(t,e,i,n,s){l?e.data("itemData",n):this.renderItemData(t,e,n),this._isDisabled(n,s)&&e.addClass("disabled").attr("disabled","disabled"),i=i||e;var a=this.getItemRenderer();if(c.isFunction(a)){var r=null;r=(a._state,a.call(this,t,e,n,s)),c.isNotNull(r)&&i.empty().append(r)}else{var o=this._getDataLabel(n,s);i.html(c.isNull(o)?"":o)}},a.renderPager=function(t,e,i){l||(!i&&c.isFunction(this.getPaginator)&&(i=this.getPaginator()),i&&("string"==typeof i?e.attr("opt-pager",c.trimToNull(i)):c.isFunction(i.getViewId)&&e.attr("opt-pager","[vid='"+i.getViewId()+"']")))},a.renderEmptyView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-empty");var s=c.isFunction(this._getEmptyView)?this._getEmptyView():this.options.emptyView;if(s)o.renderSubView.call(this,n,s);else{(s=t("<div></div>").appendTo(n)).addClass((i||"ui")+"-emptydef");var a=this.options.emptyText||this.options.empty;c.isFunction(this._getEmptyText)&&(a=this._getEmptyText()),(a=c.isNull(a)?"没有数据":c.trimToEmpty(a))&&t("<p></p>").appendTo(s).text(a)}return n},a.renderLoadView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-load");var s=c.isFunction(this._getLoadView)?this._getLoadView():this.options.loadingView;if(s)o.renderSubView.call(this,n,s);else{var a=t("<div></div>").appendTo(n);a.addClass((i||"ui")+"-loaddef");var r=c.isFunction(this._getLoadText)?this._getLoadText():this.options.loadingText;(r=c.isNull(r)?"正在加载..":c.trimToEmpty(r))&&t("<p></p>").appendTo(a).html(r)}return n},a.renderMoreView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-more"),this._pageInfo&&n.attr("page-no",this._pageInfo.page);var s=c.isFunction(this._getMoreView)?this._getMoreView():this.options.moreView;if(s)o.renderSubView.call(this,n,s);else{var a=t("<div></div>").appendTo(n);a.addClass((i||"ui")+"-moredef");var r=c.isFunction(this._getMoreText)?this._getMoreText():this.options.moreText;(r=c.isNull(r)?"加载更多":c.trimToEmpty(r))&&t("<p></p>").appendTo(a).html(r)}return n},a.doAdapter=function(t){var i=this;return(t=c.toArray(t))._vr_adapter_flag||((t=c.map(t,function(t,e){return o.doAdapter.call(i,t,e)}))._vr_adapter_flag=!0),t},e.render=function(t,e){a.render.call(this,t,e)},e.renderData=function(t,e){l||a.renderData.call(this,t,e,this.getData())},e.renderItemData=function(t,e,i){o.renderData.call(this,t,e,i)},e._renderItems=function(t,e){var i=this._getItemContainer(t,e);i&&a.renderItems.call(this,t,i)},e._getNewItem=function(t,e,i,n){return t("<li></li>").appendTo(e)},e._renderOneItem=function(t,e,i,n){a.renderOneItem.call(this,t,e,null,i,n)},e._renderPager=function(t,e){a.renderPager.call(this,t,e)},e._renderEmptyView=function(t,e){a.renderEmptyView.call(this,t,e)},e._renderLoadView=function(t,e){a.renderLoadView.call(this,t,e)},e._renderMoreView=function(t,e){a.renderMoreView.call(this,t,e)},e.getPaginator=function(){return this.options.paginator||this.options.pager},e.getKeyField=function(){return this.options.keyField},e.getLabelField=function(){return this.options.labelField},e.getLabelFunction=function(){return this.options.labelFunction},e.getItemRenderer=function(){return this.options.itemRenderer},e._getItemContainer=function(t,e){return e},e._isDisabled=function(t,e){if(t){var i=this.options.disableField||"disabled";if(i&&t.hasOwnProperty(i))return c.isTrue(t[i])}return!1},e._getDataLabel=function(t,e){return o.getDataLabel.call(this,t,e)},e._doAdapter=function(t){return a.doAdapter.call(this,t)}}}("undefined"!=typeof window),function(r){if(!r||!VRender.Component.ui._select){var i=r?VRender.Component.ui:require("./init"),o=i.fn,l=i.util,s=i._select=function(t,e){return i._items.call(this,t,e)},t=s.prototype=new i._items(!1);s.init=function(t,e){return i._items.init.call(this,t,e)},s.getSelectedIndex=function(t){var n=this,s=this.$el.attr("data-inds");if(l.isNull(s)){s=[];var a=this.$el.attr("data-ids");l.isNull(a)?l.each(this.getData(),function(t,e){n._isSelected(t,e,[],[])&&s.push(e)}):0<a.length&&(a=a.split(","),l.each(this.getData(),function(t,e){var i=n._getDataKey(t);0<=l.index(a,function(t){return t==i})&&s.push(e)}))}else s=o.getIntValues(s,0);return this.isMultiple()?0<s.length?s:null:t?0<s.length?[s[0]]:null:0<s.length?s[0]:-1},s.setSelectedIndex=function(t){var e=l.isFunction(this.length)?this.length()-1:null,i=o.getIntValues(t,0,e);return 1<i.length&&!this.isMultiple()&&(i=[i[0]]),this.$el.attr("data-inds",i.join(",")),this.$el.removeAttr("data-ids"),i},s.getSelectedKey=function(t){var i=this,n=this.$el.attr("data-ids"),e=this.$el.attr("data-inds");if(l.isNotNull(e)){if(n=[],0<(e=o.getIntValues(e,0)).length){var s=this.getData()||[];l.each(e,function(t){var e=t<s.length?s[t]:null;e&&n.push(i._getDataKey(e))})}}else l.isNull(n)?(n=[],l.each(this.getData(),function(t,e){i._isSelected(t,e,[],[])&&n.push(i._getDataKey(t))})):l.isArray(n)||(n=n.split(","));if(!n||0==n.length)return null;var a=[];return l.each(n,function(t){!t&&0!==t||a.push(isNaN(t)?t:parseInt(t))}),0==a.length?null:this.isMultiple()?a:t?[a[0]]:a[0]},s.setSelectedKey=function(n){var s=this;l.isArray(n)||(n=l.isBlank(n)?[]:l.trimToEmpty(n).split(","));var a=[];l.each(this.getData(),function(t,e){var i=s._getDataKey(t);0<=l.index(n,function(t){return t==i})&&a.push(e)}),this.setSelectedIndex(a)},s.getSelectedData=function(t,e){var i=this,n=this.getSelectedIndex(!0),s=[];n||(s=this.getSelectedKey(!0)||[]);var a=[];return e=e||this.getData(),l.each(e,function(t,e){i._isSelected(t,e,n,s)&&a.push(t)}),0==a.length?null:this.isMultiple()?a:t?[a[0]]:a[0]},s.updateSelection=function(){var i=this,n=[];return l.each(this._getItems(),function(t,e){i._isItemSelected(t)&&n.push(e)}),s.setSelectedIndex.call(this,n),n},s.addItem=function(t,e){return i._items.addItem.call(this,t,e)},s.updateItem=function(t,e){return i._items.updateItem.call(this,t,e)},s.removeItem=function(t,e){return i._items.removeItem.call(this,t,e)},t.init=function(t,e){return s.init.call(this,t,e)},t.isMultiple=function(){return"multiple"==this.$el.attr("multiple")},t.setMultiple=function(t){t=!(!l.isNull(t)&&!l.isTrue(t)),this.isMultiple()!=t&&(t?this.$el.attr("multiple","multiple"):this.$el.removeAttr("multiple"),this.rerender())},t.getSelectedIndex=function(t){return s.getSelectedIndex.call(this,t)},t.setSelectedIndex=function(t){var i=this,e=this._snapshoot(),n=s.setSelectedIndex.call(this,t);return l.each(this._getItems(),function(t,e){i._setItemSelected(t,0<=n.indexOf(e))}),e.done(),n},t.getSelectedKey=function(t){return s.getSelectedKey.call(this,t)},t.setSelectedKey=function(t){return s.setSelectedKey.call(this,t)},t.getSelectedData=function(t){return s.getSelectedData.call(this,t)},t.setAllSelected=function(){var t=l.map(this.getData(),function(t,e){return e});this.setSelectedIndex(t)},t.isSelectedIndex=function(t){return!((t=l.getIndexValue(t))<0)&&this._isSelected(this.getDataAt(t),t)},t.isSelectedKey=function(e){if(l.isBlank(e))return!1;var t=this.getSelectedKey(!0);return 0<=l.index(t,function(t){return t==e})},t.isAllSelected=function(){var t=this.length();if(0<t){var e=this.getSelectedIndex(!0);return!(!e||e.length!=t)}return!1},t.addItem=function(t,e){var i=s.addItem.call(this,t,e);return i&&s.updateSelection.call(this),this.trigger("itemchange",t),i},t.updateItem=function(t,e){return 0<=(e=s.updateItem.call(this,t,e))&&(s.updateSelection.call(this),this.trigger("itemchange",t)),e},t.removeItem=function(t){return(t=s.removeItem.call(this,t))&&s.updateSelection.call(this),this.trigger("itemchange",t),t},t.removeItemAt=function(t){var e=s.removeItem.call(this,null,t);return e&&s.updateSelection.call(this),this.trigger("itemchange",e),e},t._isSelected=function(t,e,i,n){return a.isSelected.call(this,t,e,i,n)},t._isItemSelected=function(t){return t.is(".selected")},t._setItemSelected=function(t,e){e?t.addClass("selected"):t.removeClass("selected")},t._snapshoot_shoot=function(t,e,i){t.selectedIndex=e||this.getSelectedIndex(),t.selectedData=i||this.getSelectedData(),t.data=t.selectedData},t._snapshoot_compare=function(t,e){return e||(e=this.getSelectedIndex(!0)),o.equalIndex(t.selectedIndex,e)};var a=i._selectRender=function(t,e){i._itemsRender.call(
this,t,e)},e=a.prototype=new i._itemsRender(!1);a.render=function(t,e){i._itemsRender.render.call(this,t,e),this.isMultiple()&&e.attr("multiple","multiple"),this.renderSelection(t,e)},a.renderSelection=function(t,e,i){var n=this,s=this.getSelectedIndex(!0),a=this.getSelectedKey(!0);s&&e.attr("data-inds",s.join(",")),a&&e.attr("data-ids",a.join(",")),!r&&this.options.apiName&&(s&&e.attr("data-tryindex",s.join(",")),a&&e.attr("data-tryid",a.join(","))),i&&0<i.length&&(a=a||[],l.each(i,function(t,e){n._isSelected(t.data,t.index,s,a)&&(l.isFunction(n._setItemSelected)?n._setItemSelected(t.item,!0):t.item.addClass("selected"))}))},a.getSelectedIndex=function(t){var e=this.options.selectedIndex;if(l.isBlank(e))return t||this.isMultiple()?null:-1;l.isArray(e)||(e=(""+e).split(","));var i=[];return l.each(e,function(t){if(!isNaN(t)){var e=parseInt(t);!isNaN(e)&&0<=e&&i.push(e)}}),this.isMultiple()?0<i.length?i:null:i&&0<i.length?t?[i[0]]:i[0]:-1},a.getSelectedKey=function(t){var e=this.options.selectedKey;if(l.isBlank(e))return null;l.isArray(e)||(e=(""+e).split(","));var i=[];return l.each(e,function(t){!t&&0!==t||i.push(isNaN(t)?t:parseInt(t))}),0==i.length?null:this.isMultiple()?i:t?[i[0]]:i[0]},a.getSelectedData=function(t,e){var i=[];if((e=e||this.getData())&&0<e.length)for(var n=this.getSelectedIndex(!0),s=this.getSelectedKey(!0)||[],a=0,r=e.length;a<r;a++){var o=e[a];this._isSelected(o,a,n,s)&&i.push(o)}return 0==i.length?null:this.isMultiple()?i:t?[i[0]]:i[0]},a.isSelected=function(t,e,i,n){if(i||n||(i=this.getSelectedIndex(!0),n=this.getSelectedKey(!0)||[]),i)return!((e=l.getIndexValue(e))<0)&&0<=i.indexOf(e);if(n){var s=this._getDataKey(t);return 0<=l.index(n,function(t){return t==s})}return!1},a.isAllSelected=function(t){if((t=t||this.getData())&&0<t.length){for(var e=this.getSelectedIndex(!0),i=this.getSelectedKey(!0)||[],n=0,s=t.length;n<s;n++)if(!this._isSelected(t[n],n,e,i))return!1;return!0}return!1},e.render=function(t,e){a.render.call(this,t,e)},e.renderSelection=function(t,e){a.renderSelection.call(this,t,e,this._render_items)},e.getSelectedIndex=function(t){return a.getSelectedIndex.call(this,t)},e.getSelectedKey=function(t){return a.getSelectedKey.call(this,t)},e.getSelectedData=function(t){return a.getSelectedData.call(this,t)},e.isMultiple=function(){return o.isMultiple.call(this)},e.isAllSelected=function(){return a.isAllSelected.call(this)},e._isSelected=function(t,e,i,n){return a.isSelected.call(this,t,e,i,n)},e._setItemSelected=function(t,e){e?t.addClass("selected"):t.removeClass("selected")}}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.group){var n=t?VRender.Component.ui:require("../../static/js/init"),h=n.util,e="vertical",u="horizontial",i=n.group=function(t,e){return n._base.call(this,t,e)},s=i.prototype=new n._base(!1);s.getOrientation=function(){return this.$el.attr("opt-orientation")},s.setOrientation=function(t){this.$el.removeClass(u).removeClass(e),this.$el.removeAttr("opt-orientation"),t!==u&&t!==e||this.$el.addClass(t).attr("opt-orientation",t),a.call(this)},s.getGap=function(){return this.$el.attr("opt-gap")||0},s.setGap=function(t){this.$el.attr("opt-gap",h.trimToEmpty(t)),a.call(this)},s.getAlign=function(){return this.$el.attr("opt-align")},s.setAlign=function(t){this.$el.attr("opt-align",h.trimToEmpty(t)),a.call(this)},s.append=function(t){var e=this;if(!arguments||0==arguments.length)return this;for(var i=0,n=arguments.length;i<n;i++){var s=arguments[i];h.isArray(s)?s.forEach(function(t){e.add(t)}):this.add(s)}return this},s.add=function(t,e){if(h.isNotBlank(t)){var i=t.$el||t;this.getOrientation()&&(i=$("<div class='grp-item'></div>").append(i)),e=isNaN(e)||""===e?-1:parseInt(e);var n=this.$el.children();0<=e&&e<n.length?n.eq(e).before(i):this.$el.append(i),a.call(this)}return t},s.removeAt=function(t){var e=this.$el.children().eq(t).remove();return a.call(this),e.children()};var a=function(){var t=this;h.debounce("group_layout-"+this.getViewId(),function(){p.call(t,$,t.$el)})},r=function(t,e){n._baseRender.call(this,t,e)},o=r.prototype=new n._baseRender(!1);o.render=function(t,e){n._baseRender.render.call(this,t,e),e.addClass("ui-group");var i=this.getOrientation();return i&&(e.addClass(i),e.attr("opt-orientation",i)),e.attr("opt-gap",this.getGap()),e.attr("opt-align",this.getAlign()),l.call(this,t,e),this},o.getOrientation=function(){var t=this.options.orientation;return t==u||t==e?t:null},o.getGap=function(){return this.options.gap},o.getAlign=function(){return this.options.align};var l=function(t,e){d.call(this,t,e,c.call(this))},c=function(){return this.options.children||this.options.subViews||this.options.views},d=function(i,n,t){t=h.toArray(t);var s=this.getOrientation();h.each(t,function(t){if(h.isNotNull(t)){var e=n;s&&(e=i("<div class='grp-item'></div>").appendTo(n)),h.isFunction(t.render)?t.render(e):e.append(t.$el||t)}}),p.call(this,i,n)},p=function(t,e){var i="",n="",s="",a="",r="",o=h.getFormatSize(this.getGap(),this._isRenderAsRem())||"",l=this.getOrientation();l==u?(r="inline-block",i=o):n=o;var c=this.getAlign()||"";c=c.toLowerCase(),/left/.test(c)?s="left":/center/.test(c)?s="center":/right/.test(c)&&(s="right"),/top/.test(c)?a="top":/middle/.test(c)?a="middle":/bottom/.test(c)&&(a="bottom"),e.css("text-align",s);var d=e.children();d.css("vertical-align",a),d.css("margin-right",i).css("margin-bottom",n),d.last().css("margin-right","").css("margin-bottom",""),l&&d.css("display",r)};t?(window.UIGroup=i,window.UIHGroup=function(t){return new i(h.extend(t,{orientation:u}))},window.UIVGroup=function(t){return new i(h.extend(t,{orientation:e}))},n.init(".ui-group",i,r)):module.exports=r}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.container){var a=t?VRender.Component.ui:require("../../static/js/init"),r=(a.fn,a.util),e=a.container=function(t,e){return a._base.call(this,t,e)};(e.prototype=new a._base(!1)).init=function(t,e){a._base.init.call(this,t,e)};var i=function(t,e){a._baseRender.call(this,t,e)};(i.prototype=new a._baseRender(!1)).render=function(t,e){a._baseRender.render.call(this,t,e),e.addClass("ui-container");var i=this.options&&this.options.styles||{},n=this._isRenderAsRem();o(e,"display",i.display),o(e,"position",i.position),o(e,"padding",i.padding,n),o(e,"padding-left",i.paddingLeft,n),o(e,"padding-right",i.paddingRight,n),o(e,"padding-top",i.paddingTop,n),o(e,"padding-bottom",i.paddingBottom,n),o(e,"margin",i.margin,n),o(e,"margin-left",i.marginLeft,n),o(e,"margin-right",i.marginRight,n),o(e,"margin-top",i.marginTop,n),o(e,"margin-bottom",i.marginBottom,n),o(e,"border",i.border,n),o(e,"border-radius",i.borderRadius,n),o(e,"border-color",i.borderColor),o(e,"border-width",i.borderWidth,n),o(e,"border-left",i.borderLeft,n),o(e,"border-right",i.borderRight,n),o(e,"border-top",i.borderTop,n),o(e,"border-bottom",i.borderBottom,n),o(e,"background",i.bg||i.background),o(e,"background-color",i.bgcolor||i.backgroundColor),o(e,"background-image",i.image||i.backgroundImage),o(e,"background-size",i.backgroundSize),o(e,"background-position",i.backgroundPosition),o(e,"background-repeat",i.backgroundRepeat),o(e,"width",i.width,n),o(e,"min-width",i.minWidth,n),o(e,"max-width",i.maxWidth,n),o(e,"height",i.height,n),o(e,"min-height",i.minHeight,n),o(e,"max-height",i.maxHeight,n),o(e,"overflow",i.overflow),o(e,"color",i.color),o(e,"font-size",i.fontSize,n),o(e,"text-align",i.align||i.textAlign),o(e,"box-shadow",i.shadow);var s=this.options.content||this.options.view;return r.isNotBlank(s)&&(r.isFunction(s.render)?s.render(e):e.append(s.$el||s)),this};var o=function(t,e,i,n){r.isNotBlank(i)&&(isNaN(i)||(i=r.getFormatSize(i,n)),t.css(e,i))};t?(window.UIContainer=e,a.init(".ui-container",e,i)):module.exports=i}}("undefined"!=typeof window),function(o){if(!o||!VRender.Component.ui.button){var l=o?VRender.Component.ui:require("../../static/js/init"),c=(l.fn,l.util),d=["ui-btn-default","ui-btn-primary","ui-btn-success","ui-btn-danger","ui-btn-warn","ui-btn-info","ui-btn-link","ui-btn-text"],h=["bigger","big","normal","small","tiny"],t=l.button=function(t,e){return l._base.call(this,t,e)},e=t.prototype=new l._base(!1);e.init=function(t,e){l._base.init.call(this,t,e),this._isRenderAsApp()&&t.on("tap",".dropdown",s.bind(this)),t.on("tap",".btn",i.bind(this)),t.on("tap",".dropdownbtn",n.bind(this)),t.on("tap",".dropdown li",a.bind(this))},e.getLabel=function(){return this.options.label},e.setLabel=function(t){this.options.label=t;var e=this.$el.children(".btn");e.children("span").remove(),c.isNotBlank(t)&&$("<span></span>").appendTo(e).text(c.trimToEmpty(t)||" ")},e.waiting=function(t){t=c.isNull(t)||!0===t?parseInt(this.$el.attr("opt-wait"))||-1:Math.max(0,parseInt(t))||0,g.call(this,t)},e.isWaiting=function(){return this.$el.is(".waiting")},e.setWaiting=function(t){t=!0===t||c.isNull(t)?-1:Math.max(0,parseInt(t))||0,this.$el.attr("opt-wait",t)};var i=function(t){if(!this.$el.is(".disabled, .waiting")){var e=this.$el,i=e.attr("data-lnk");if(i)window.open(i,"_self");else{var n=1==e.attr("opt-toggle");if(e.is(".has-items")){if(!n)return void v.call(this)}else n&&(1==e.attr("active")?e.removeAttr("active"):e.attr("active","1"));this.trigger("tap",e.attr("name"));var s=parseInt(e.attr("opt-wait"));s&&g.call(this,s)}}},n=function(t){return this.$el.is(".disabled, .waiting")||v.call(this),!1},s=function(t){$(t.target).is(".dropdown")&&b.call(this)},a=function(t){var e=$(t.currentTarget),i=e.attr("name")||"";return 1==this.$el.attr("opt-toggle")&&(this.$el.attr("name",i),this.$el.children(".btn").find("span").text(e.text())),this.trigger("tap",e.attr("name")),b.call(this),!1},r=function(t){l.fn.mouseDebounce(t,b.bind(this))},u=function(t,e){l._baseRender.call(this,t,e)},p=u.prototype=new l._baseRender(!1);p.render=function(t,e){l._baseRender.render.call(this,t,e),e.addClass("ui-btn");var i=this.options||{},n=i.size;n&&0<=h.indexOf(n)&&e.addClass(n);var s=i.style||"";d.indexOf(s)<0&&e.addClass(y(i.type)),c.isTrue(i.toggle)&&e.attr("opt-toggle","1"),c.isNotBlank(i.link)&&e.attr("data-lnk",c.trimToNull(i.link));var a=t("<button class='btn'></button>").appendTo(e),r=_.call(this);c.isNotBlank(r)&&t("<i class='icon'></i>").appendTo(a).css(
o?"backgroundImage":"background-image","url("+r+")");return c.isNotBlank(i.label)&&t("<span></span>").appendTo(a).text(c.trimToEmpty(i.label)||" "),f.call(this,t,e),m.call(this,t,e),this},p.getItems=function(){return c.toArray(this.options.items)};var f=function(t,e){var i=w.call(this);i&&e.attr("opt-wait",i),c.isTrue(this.options.waiting)&&e.addClass("waiting")},m=function(i,t){t.removeClass("has-items"),t.children(".dropdownbtn").remove(),t.children(".dropdown").remove();var e=this.getItems();if(e&&0<e.length){t.addClass("has-items"),t.append("<span class='dropdownbtn'>&nbsp;</span>");var n=i("<div class='dropdown'></div>").appendTo(t),s=i("<ul></ul>").appendTo(n);c.each(e,function(t){if(c.isNotBlank(t)){c.isPrimitive(t)&&(t={label:t});var e=i("<li></li>").appendTo(s);t.name&&e.attr("name",t.name),i("<span></span>").appendTo(e).text(c.trimToEmpty(t.label)||" ")}})}},g=function(t){var e=this;if(this.t_wait&&(clearTimeout(this.t_wait),this.t_wait=0),t){var i=this.$el.addClass("waiting");0<t&&(this.t_wait=setTimeout(function(){e.t_wait=0,i.removeClass("waiting")},t))}else this.$el.removeClass("waiting")},v=function(){if(!this.$el.is(".show-dropdown")){var t=this.$el.addClass("show-dropdown");if(this._isRenderAsApp())$("html,body").addClass("ui-scrollless");else{t.on("mouseenter",r.bind(this)),t.on("mouseleave",r.bind(this));var e=t.children(".dropdown"),i=l.fn.getDropdownHeight.call(this,e);c.offset(e,this._getScrollContainer(),0,i).isOverflowY&&t.addClass("show-before")}setTimeout(function(){t.addClass("animate-in")})}},b=function(){if(this.$el.is(".show-dropdown")){var t=this.$el.addClass("animate-out");this._isRenderAsApp()?$("html,body").removeClass("ui-scrollless"):t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)}},y=function(t){if(c.isNotBlank(t)){if(0<=["ok","submit","save","primary","major"].indexOf(t))return"ui-btn-primary";if(0<=["danger","error"].indexOf(t))return"ui-btn-danger";if(0<=["success","complete","finish"].indexOf(t))return"ui-btn-success";if(0<=["warn","warning"].indexOf(t))return"ui-btn-warn";if(0<=["info","highlight"].indexOf(t))return"ui-btn-info";if("text"===t)return"ui-btn-text";if("link"===t)return"ui-btn-link"}return"ui-btn-default"},_=function(){var t=this.options.icon;if(!0===t){var e=this.options.type;"success"==e||"submit"==e?t="012b.png":"warn"==e?t="013b.png":"error"==e||"danger"==e?t="014b.png":"info"==e&&(t="015b.png"),!0!==t&&(t="/vrender-ui/icons/"+t)}return"string"==typeof t?t:null},w=function(){var t=0,e=this.options||{};return e.hasOwnProperty("waitTime")?t=e.waitTime:e.hasOwnProperty("wait")&&(t=e.wait),!0===t?-1:Math.max(0,parseInt(t))||0};o?(window.UIButton=t,l.init(".ui-btn",t,u)):module.exports=u}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.checkbox){var s=t?VRender.Component.ui:require("../../static/js/init"),a=(s.fn,s.util),e=s.checkbox=function(t,e){return s._base.call(this,t,e)},i=e.prototype=new s._base(!1);e.create=function(t){return(t=t||{}).tagName="label",VRender.Component.create(t,e,r)},i.init=function(t,e){s._base.init.call(this,t,e),this.input=this.$el.children("input"),this.input.on("change",n.bind(this))},i.val=function(t){return a.isNotNull(t)&&this.input.val(t),this.input.val()},i.isChecked=function(){return this.input.is(":checked")},i.setChecked=function(t){var e=!!a.isNull(t)||a.isTrue(t);this.input[0].checked=e,this.input.trigger("change")},i.setCheckedSilent=function(t){var e=!!a.isNull(t)||a.isTrue(t);(this.input[0].checked=e)?this.$el.addClass("checked"):this.$el.removeClass("checked")},i.getLabel=function(){return this.$el.children("span").text()},i.setLabel=function(t){this.$el.children("span").remove(),a.isNotBlank(t)&&$("<span></span>").appendTo(this.$el).text(t)};var n=function(t){var e=$(t.currentTarget).is(":checked");e?this.$el.addClass("checked"):this.$el.removeClass("checked"),this.trigger("change",e)},r=function(t,e){s._baseRender.call(this,t,e)};(r.prototype=new s._baseRender(!1)).render=function(t,e){s._baseRender.render.call(this,t,e),e.addClass("ui-chkbox");var i=this.options||{},n=t("<input type='checkbox'/>").appendTo(e);return a.isNotNull(i.value)&&n.val(i.value),a.isTrue(i.checked)&&(e.addClass("checked"),n.attr("checked","checked")),a.isNotNull(i.label)&&t("<span></span>").appendTo(e).text(i.label),n.attr("name",a.trimToNull(i.name)),this},t?(window.UICheckbox=e,s.init(".ui-chkbox",e,r)):module.exports=r}}("undefined"!=typeof window),function(a){if(!a||!VRender.Component.ui.checkgroup){var r=a?VRender.Component.ui:require("../../static/js/init"),o=(r.fn,r.util),t=r.checkgroup=function(t,e){return r._select.call(this,t,e)},e=t.prototype=new r._select(!1);e.init=function(t,e){r._select.init.call(this,t,e),this.$el.on("change","input",i.bind(this))},e.setSelectedIndex=function(t){var e=this._snapshoot(),i=r.fn.getIntValues(t,0)||[];o.each(this.$el.children(),function(t,e){VRender.Component.get(t.children()).setChecked(0<=i.indexOf(e))}),e.done()},e.isMultiple=function(){return!0},e.isDisabled=function(t){if("number"!=typeof t)return"string"==typeof t?this.isDisabled(this.getIndexByName(t)):this.$el.is(".disabled");var e=VRender.Component.get(this._getItemAt(t).children());return!!e&&e.isDisabled()},e.setDisabled=function(t,e){if("string"==typeof e)return this.setDisabled(t,this.getIndexByName(e));if("number"==typeof e){var i=VRender.Component.get(this._getItemAt(e).children());i&&i.setDisabled(t)}else(t=!(!o.isNull(t)&&!o.isTrue(t)))?this.$el.addClass("disabled").attr("disabled","disabled"):this.$el.removeClass("disabled").removeAttr("disabled")},e._getItems=function(){return this.$el.children()},e._getNewItem=function(t,e,i,n){return d.call(this,t,e,i,n)},e._renderItems=function(t,e,i){l.call(this,t,e,i)},e._renderOneItem=function(t,e,i,n){c.call(this,t,e,i,n)};var i=function(t){t.stopPropagation();var e=this._snapshoot(),i=[];o.each(this.$el.find("input"),function(t,e){t.is(":checked")&&i.push(e)}),r._select.setSelectedIndex.call(this,i),e.done()},n=function(t,e){r._selectRender.call(this,t,e)},s=n.prototype=new r._selectRender(!1);s.render=function(t,e){return r._selectRender.render.call(this,t,e),e.addClass("ui-chkgrp"),this},s.renderSelection=function(t,e){var i=this.getSelectedIndex(!0);i&&e.attr("data-inds",i.join(","));var n=this.getSelectedKey(!0);n&&e.attr("data-ids",n.join(","))},s.isMultiple=function(){return!0},s._renderItems=function(t,e){var i=this._getItemContainer(t,e);i&&l.call(this,t,i)},s._renderOneItem=function(t,e,i,n){c.call(this,t,e,i,n)},s._getNewItem=function(t,e){return d.call(this,t,e)},s._renderEmptyView=function(){},s._renderLoadView=function(){};var l=function(t,e,i){this._cache_selected_indexs=this.getSelectedIndex(!0),this._cache_selected_ids=this.getSelectedKey(!0)||[],r._itemsRender.renderItems.call(this,t,e,i),delete this._cache_selected_indexs,delete this._cache_selected_ids},c=function(t,e,i,n){"string"==typeof i&&(i={label:i});var s=o.extend({},i);return s.value=this._getDataKey(i),s.label=this._getDataLabel(i,n),s.checked=this._isSelected(i,n,this._cache_selected_indexs,this._cache_selected_ids),a?(s.target=e,r.checkbox.create(s)):new(require("../checkbox/index"))(this.context,s).render(e)},d=function(t,e){return t("<div class='item'></div>").appendTo(e)};a?(window.UICheckGroup=t,r.init(".ui-chkgrp",t,n)):module.exports=n}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.radiobox){var s=t?VRender.Component.ui:require("../../static/js/init"),a=s.util,e=s.radiobox=function(t,e){return s._base.call(this,t,e)},i=e.prototype=new s._base(!1);e.create=function(t){return(t=t||{}).tagName="label",VRender.Component.create(t,e,r)},i.init=function(t,e){s._base.init.call(this,t,e),this.$el.removeAttr("name"),this.input=this.$el.children("input"),this.input.on("change",n.bind(this)),this.input.is(":checked")&&this.input.trigger("change")},i.val=function(t){return a.isNotBlank(t)&&this.input.val(t),this.input.val()},i.isChecked=function(){return this.input.is(":checked")},i.setChecked=function(t){var e=!!a.isNull(t)||a.isTrue(t);this.isChecked()!=e&&(this.input[0].checked=e,this.input.trigger("change"))},i.getLabel=function(){return this.$el.children("span").text()},i.setLabel=function(t){this.$el.children("span").remove(),a.isNotBlank(t)&&$("<span></span>").appendTo(this.$el).text(t)};var n=function(t){if(this.isChecked()){this.input.parent().addClass("checked");var e=this.input.attr("name");if(a.isNotBlank(e))$("input[name='"+e+"']").not(this.input).parent().removeClass("checked")}else this.$el.removeClass("checked");this.trigger("change")},r=function(t,e){s._baseRender.call(this,t,e)};(r.prototype=new s._baseRender(!1)).render=function(t,e){s._baseRender.render.call(this,t,e),e.addClass("ui-radbox");var i=this.options||{},n=t("<input type='radio'/>").appendTo(e);return a.isNotNull(i.value)&&n.val(i.value),a.isTrue(i.checked)&&(e.addClass("checked"),n.attr("checked","checked")),a.isNotNull(i.label)&&t("<span></span>").appendTo(e).text(i.label),n.attr("name",a.trimToNull(i.name)),this},t?(window.UIRadiobox=e,s.init(".ui-radbox",e,r)):module.exports=r}}("undefined"!=typeof window),function(a){if(!a||!VRender.Component.ui.radiogroup){var r=a?VRender.Component.ui:require("../../static/js/init"),o=(r.fn,r.util),t=(Date.now(),r.checkgroup=function(t,e){return r._select.call(this,t,e)}),e=t.prototype=new r._select(!1);e.init=function(t,e){r._select.init.call(this,t,e),this.$el.on("change","input",i.bind(this))},e.setSelectedIndex=function(t){var e=this._snapshoot(),i=this.$el.children(),n=o.getIndexValue(t);if(0<=n)VRender.Component.get(i.eq(n).children()).setChecked(!0);else{var s=e.getState().selectedIndex;0<=s&&VRender.Component.get(i.eq(s).children()).setChecked(!1)}e.done()},e.isMultiple=function(){return!1},e.isDisabled=function(t){if("number"!=typeof t)return"string"==typeof t?this.isDisabled(this.getIndexByName(t)):this.$el.is(".disabled");var e=VRender.Component.get(this._getItemAt(t).children());return!!e&&e.isDisabled()},e.setDisabled=function(t,e){if("string"==typeof e)return this.setDisabled(t,this.getIndexByName(e));if("number"==typeof e){
var i=VRender.Component.get(this._getItemAt(e).children());i&&i.setDisabled(t)}else(t=!(!o.isNull(t)&&!o.isTrue(t)))?this.$el.addClass("disabled").attr("disabled","disabled"):this.$el.removeClass("disabled").removeAttr("disabled")},e._getRadioName=function(){return"rad-"+this.getViewId()},e._getItems=function(){return this.$el.children()},e._getNewItem=function(t,e,i,n){return d.call(this,t,e,i,n)},e._renderItems=function(t,e,i){l.call(this,t,e,i)},e._renderOneItem=function(t,e,i,n){c.call(this,t,e,i,n)};var i=function(t){t.stopPropagation();var e=this._snapshoot(),i=o.index(this.$el.find("input"),function(t){return t.is(":checked")});r._select.setSelectedIndex.call(this,i),e.done()},n=function(t,e){r._selectRender.call(this,t,e)},s=n.prototype=new r._selectRender(!1);s.render=function(t,e){return this.radioGroupId="rad-"+e.attr("vid"),r._selectRender.render.call(this,t,e),e.addClass("ui-radgrp"),this},s.renderSelection=function(t,e){var i=this.getSelectedIndex(!0);i&&e.attr("data-inds",i.join(","));var n=this.getSelectedKey(!0);n&&e.attr("data-ids",n.join(","))},s.isMultiple=function(){return!1},s._getRadioName=function(){return this.radioGroupId},s._renderItems=function(t,e){var i=this._getItemContainer(t,e);i&&l.call(this,t,i)},s._renderOneItem=function(t,e,i,n){c.call(this,t,e,i,n)},s._getNewItem=function(t,e){return d.call(this,t,e)},s._renderEmptyView=function(){},s._renderLoadView=function(){};var l=function(t,e,i){this._cache_selected_indexs=this.getSelectedIndex(!0),this._cache_selected_ids=this.getSelectedKey(!0)||[],r._itemsRender.renderItems.call(this,t,e,i),delete this._cache_selected_indexs,delete this._cache_selected_ids},c=function(t,e,i,n){o.isPrimitive(i)&&(i={label:i});var s=o.extend({},i);return s.name=this._getRadioName(),s.value=this._getDataKey(i),s.label=this._getDataLabel(i,n),s.checked=this._isSelected(i,n,this._cache_selected_indexs,this._cache_selected_ids),a?(s.target=e,r.radiobox.create(s)):new(require("../radiobox/index"))(this.context,s).render(e)},d=function(t,e){return t("<div class='item'></div>").appendTo(e)};a?(window.UIRadioGroup=t,r.init(".ui-radgrp",t,n)):module.exports=n}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.input){var c=t?VRender.Component.ui:require("../../static/js/init"),i=c.fn,u=c.util,e=c.input=function(t,e){return c._base.call(this,t,e)},n=e.prototype=new c._base(!1);n.init=function(t,e){c._base.init.call(this,t,e),this.inputTag=this.$el.children(".ipt"),this.input=this.inputTag.find("input, textarea"),this.input.on("focusin",r.bind(this)),this.input.on("focusout",o.bind(this)),this.input.on("keydown",s.bind(this)),this.input.on("keyup",a.bind(this)),this.input.on("change",function(t){return!1}),this.$el.on("tap",".clear",h.bind(this)),this._isRenderAsApp()||(this.inputTag.on("mouseenter",l.bind(this)),this.inputTag.on("mouseleave",d.bind(this))),1==this.$el.attr("opt-pwd")&&this.setDisplayAsPassword(!0),this.isAutoHeight()&&_.call(this,this.getValue())},n.val=function(t){return u.isNull(t)?this.getValue():(this.setValue(t),this)},n.focus=function(){return this.input.focus(),this},n.select=function(){return this.input.select(),this},n.validate=function(t){var e=this,i=this.getValue();0==i.length?(this.isRequired()?w.call(this,this.getEmptyMsg()||"输入框不能为空"):T.call(this),u.isFunction(t)&&t(this.lastErrorMsg)):b.call(this,i,function(){u.isFunction(t)&&t(e.lastErrorMsg)})},n.getValue=function(){return this.input.val()||""},n.setValue=function(t){t=u.trimToEmpty(t),this.input.val(t),T.call(this),y.call(this,t),_.call(this,t)},n.getPrompt=function(){return this.inputTag.find(".prompt").text()},n.setPrompt=function(t){this.inputTag.find(".prompt").remove(),u.isNotBlank(t)&&$("<span class='prompt'></span>").appendTo(this.inputTag).text(t)},n.getPlaceholder=function(){return this.getPrompt()},n.setPlaceholder=function(t){this.setPrompt(t)},n.getTips=function(){return this.inputTag.find(".tips").text()},n.setTips=function(t){this.inputTag.find(".tips").remove(),u.isNotBlank(t)&&$("<span class='tips'></span>").appendTo(this.inputTag).html(t)},n.getDescription=function(){return this.$el.children(".desc").text()},n.setDescription=function(t){this.$el.children(".desc").remove(),u.isNotBlank(t)&&$("<div class='desc'></div>").appendTo(this.$el).html(t)},n.getDataType=function(){return this.$el.attr("opt-type")||"text"},n.setDataType=function(t){/^(number|num|int)$/.test(t)&&(t="_number"),this.$el.attr("opt-type",t),/^(email|password|tel|url|number)$/.test(t)?this.input.attr("type",t):this.input.removeAttr("type")},n.isReadonly=function(){return 1==this.$el.attr("opt-readonly")},n.setReadonly=function(t){u.isNull(t)||u.isTrue(t)?(this.$el.attr("opt-readonly","1"),this.input.attr("readonly","readonly")):(this.$el.removeAttr("opt-readonly"),this.input.removeAttr("readonly"))},n.isRequired=function(){return 1==this.$el.attr("opt-required")},n.setRequired=function(t){u.isNull(t)||u.isTrue(t)?this.$el.attr("opt-required","1"):this.$el.removeAttr("opt-required")},n.getEmptyMsg=function(){return this.$el.attr("opt-empty")},n.setEmptyMsg=function(t){u.isBlank(t)?this.$el.removeAttr("opt-empty"):this.$el.attr("opt-empty",t)},n.getErrorMsg=function(){return this.$el.attr("opt-errmsg")},n.setErrorMsg=function(t){u.isBlank(t)?this.$el.removeAttr("opt-errmsg"):this.$el.attr("opt-errmsg",t)},n.getMaxSize=function(){return this.hasOwnProperty("maxSize")||(this.maxSize=parseInt(this.$el.attr("opt-size"))||0),this.maxSize},n.setMaxSize=function(t){if(this.maxSize=parseInt(t)||0,this.$el.attr("opt-size",this.maxSize),0<this.maxSize){this.$el.addClass("show-size"),this.inputTag.find(".size").remove();var e=this.getValue()||"";$("<span class='size'></span>").appendTo(this.inputTag).text(e.length+"/"+this.maxSize)}else this.$el.removeClass("show-size"),this.inputTag.find(".size").remove()},n.getValidate=function(){return i.getFunction.call(this,"_validate","validate")},n.setValidate=function(t){this.options._validate=t,this.$el.children(".ui-fn[name='validate']").remove()},n.hasError=function(){return this.$el.is(".is-error")},n.showError=function(t){!0===t&&(t=this.lastErrorMsg||this.$el.attr("opt-errmsg")||"内容不正确！"),t?w.call(this,t):T.call(this)},n.getDecimals=function(){var t=parseFloat(this.$el.attr("opt-decimal"));return isNaN(t)||t<0?-1:t},n.setDecimals=function(t){t=isNaN(t)?2:parseInt(t)||0,this.$el.attr("opt-decimal",t)},n.isMultiline=function(){return this.$el.is(".multi")},n.isAutoHeight=function(){return 1==this.$el.attr("opt-autoheight")},n.isDisplayAsPassword=function(){return 1==this.$el.attr("opt-pwd")},n.setDisplayAsPassword=function(t){var e=window.getComputedStyle(this.input[0]);u.isNull(t)||u.isTrue(t)?(this.$el.attr("opt-pwd","1"),e.webkitTextSecurity||this.input.attr("type","password")):(this.$el.removeAttr("opt-pwd"),"password"==this.input.attr("type")&&this.input.attr("type","text"))};var s=function(t){T.call(this);var e=this.input.val()||"";if(!u.isControlKey(t)){var i=this.getDataType();if("_number"==i||"number"==i||"num"==i){if(!C(t,e))return!1;if("."==t.key&&0==this.getDecimals())return!1}else if("tel"==i||"mobile"==i||"phone"==i){if(!/[0-9]|\-/.test(t.key))return!1;if("-"==t.key&&"mobile"==i)return!1}else if("text"==i){var n=this.getMaxSize();if(0<n&&e.length>=n)return!1}}y.call(this,e),_.call(this,e+(13==t.which?"\n":""))},a=function(t){var e=this.input.val()||"",i=e;if(13===t.which)0===i.length?this.isRequired()&&w.call(this,this.getEmptyMsg()||"输入框不能为空"):b.call(this,i),this.trigger("enter",i),this.$el.trigger("enter",i);else{var n=this.getDataType();"_number"==n||"number"==n||"num"==n?i=e.replace(/[^0-9\.\-]/g,""):"tel"!=n&&"mobile"!=n&&"phone"!=n||(i=e.replace(/[^0-9\-]/g,"")),i!=e&&this.input.val(i),y.call(this,i)}_.call(this,i)},r=function(t){var e=this;this.$el.addClass("focus");var i=this.input.val();this.t_focus=setInterval(function(){var t=e.input.val();t!=i&&(i=t,y.call(e,t),e.trigger("change",t),e.$el.trigger("change",t))},100)},o=function(t){this.$el.removeClass("focus");var e=this.input.val()||"";if(0===e.length)this.isRequired()&&w.call(this,this.getEmptyMsg()||"输入框不能为空");else{var i=this.getDataType();if("_number"==i||"number"==i||"num"==i){var n=parseFloat(e);if(!isNaN(n)){var s=this.getDecimals();0<=s?this.input.val(n.toFixed(s)):this.input.val(n.toFixed(10).replace(/\.?0+$/,"")),e=this.input.val()}}b.call(this,e)}if(this.t_focus){var a=this.t_focus;this.t_focus=null,setTimeout(function(){clearInterval(a)},100)}},l=function(t){this.hasError()&&(this.t_hideerror&&(clearTimeout(this.t_hideerror),this.t_hideerror=null),this.$el.find(".errmsg").removeClass("animate-out"))},d=function(t){var e=this;this.hasError()&&(this.t_hideerror||(this.t_hideerror=setTimeout(function(){e.t_hideerror=null,e.$el.find(".errmsg").addClass("animate-out")},3e3)))},h=function(t){var e=this;this.val(""),this.trigger("change",""),this.$el.trigger("change",""),this.trigger("clear"),this.$el.trigger("clear"),setTimeout(function(){e.input.focus()})},p=function(t,e){c._baseRender.call(this,t,e)},f=p.prototype=new c._baseRender(!1);f.render=function(t,e){c._baseRender.render.call(this,t,e),e.addClass("ui-input");var i=this.options||{},n=t("<div class='ipt'></div>").appendTo(e),s=m.call(this,t,e,n),a=u.getFormatSize(i.width,this._isRenderAsRem());a&&e.attr("opt-fixed","1").css("width",a),u.isTrue(i.readonly)&&(e.attr("opt-readonly","1"),s.attr("readonly","readonly")),u.isTrue(i.required)&&e.attr("opt-required","1"),this.isDisplayAsPassword()&&e.attr("opt-pwd","1");var r=parseInt(i.maxSize)||0;if(0<r){e.addClass("show-size").attr("opt-size",r);var o=u.trimToEmpty(s.val()).length;t("<span class='size'></span>").appendTo(n).text(o+"/"+r)}u.isNotBlank(i.prompt)?t("<span class='prompt'></span>").appendTo(n).text(i.prompt):u.isNotBlank(i.placeholder)&&t("<span class='prompt'></span>").appendTo(n).text(i.placeholder),u.isNotBlank(i.tips)&&t("<span class='tips'></span>").appendTo(n).html(i.tips);var l=i.description||i.desc;return u.isNotBlank(l)&&t("<div class='desc'></div>").appendTo(e).html(l),g.call(this,t,e),u.isTrue(i.autoHeight)&&this.isMultiline()&&v.call(this,t,e,s),this},f.getDecimals=function(){if(this.isDisplayAsPassword())return 0;var t=this.options||{};return"int"===(
t.dataType||t.type)?0:t.hasOwnProperty("decimals")?parseInt(t.decimals)||0:2},f.isDisplayAsPassword=function(){return u.isTrue(this.options.displayAsPwd)},f.isMultiline=function(){var t=this.options||{};return t.hasOwnProperty("multiple")?u.isTrue(t.multiple):u.isTrue(t.multi)};var m=function(t,e,i){var n=this.options||{},s=this.isMultiline(),a=s?"<textarea></textarea>":"<input type='text'/>";a=t(a).appendTo(i),s?e.addClass("multi"):i.append("<span class='clear'></span>");var r=n.value,o=n.dataType||n.type;if(u.isNotBlank(o)&&(/^(number|num|int)$/.test(o)&&(o="_number"),/^(email|password|tel|url|number)$/.test(o)&&a.attr("type",o),e.attr("opt-type",o),"_number"==o)){var l=this.getDecimals();e.attr("opt-decimal",l);var c=parseFloat(n.min),d=parseFloat(n.max);isNaN(c)||e.attr("opt-min",c),isNaN(d)||e.attr("opt-max",d),u.isNotBlank(r)&&(r=parseFloat(r),r=isNaN(r)?"":(!isNaN(c)&&r<c&&(r=c),!isNaN(d)&&d<r&&(r=d),0<=l?r.toFixed(l):r.toFixed(10).replace(/\.?0+$/,"")))}return u.isNotBlank(r)&&(a.val(r),e.addClass("has-val")),a},g=function(t,e){u.isNotBlank(this.options.empty)&&e.attr("opt-empty",this.options.empty),u.isNotBlank(this.options.errmsg)&&e.attr("opt-errmsg",this.options.errmsg),i.renderFunction(e,"validate",this.options.validate)},v=function(t,e,i){e.attr("opt-autoheight","1"),(e=e.children(".ipt")).append("<div class='preview'><pre></pre></div>"),e.find("pre").text(i.val());var n=this.options||{},s=this._isRenderAsRem(),a=u.getFormatSize(n.minHeight,s),r=u.getFormatSize(n.maxHeight,s);a&&i.css("minHeight",a),r&&i.css("maxHeight",r)},b=function(t,e){var i=this,n=this.getValidate(),s=this.getErrorMsg();if(u.isFunction(n)){var a=function(t){!0===t?w.call(i,s||"内容不正确！"):!1===t?T.call(i):t?w.call(i,t):T.call(i),u.isFunction(e)&&setTimeout(e,0)},r=n(this,t,a);u.isNotNull(r)&&a(r)}else{var o=this.getDataType();if("_number"==o||"number"==o||"num"==o)if(isNaN(t))w.call(this,s||"数据格式不正确");else{var l=parseFloat(t),c=parseFloat(this.$el.attr("opt-min"));!isNaN(c)&&l<c&&w.call(this,s||"数据不正确，请输入大于等于"+c+"的值");var d=parseFloat(this.$el.attr("opt-max"));!isNaN(d)&&d<l&&w.call(this,s||"数据不正确，请输入小于等于"+d+"的值")}else if("tel"==o)u.isMobile(t)&&u.isPhone(t)||w.call(this,s||"手机或电话号码不正确");else if("text"==o){var h=this.getMaxSize();0<h&&h<t.length&&w.call(this,s||"输入内容太长，允许最大长度为："+h)}else"email"==o?u.isEmail(t)||w.call(this,s||"电子邮箱格式不正确，请重新输入"):"mobile"==o?u.isMobile(t)||w.call(this,s||"手机号码不正确，必须是1开头的11位数字"):"phone"==o?u.isPhone(t)||w.call(this,s||"电话号码不正确"):"url"==o&&(u.isUrl(t)||w.call(this,s||"url格式不正确"));u.isFunction(e)&&setTimeout(e,0)}},y=function(t){if(t&&0<t.length?this.$el.addClass("has-val"):this.$el.removeClass("has-val"),this.$el.is(".show-size")){var e=this.getMaxSize();0<e&&this.inputTag.find(".size").text(t.length+"/"+e)}},_=function(t){if(this.isAutoHeight()){var e=this.inputTag.find(".preview pre");e&&0<e.length&&(t=t?t.replace(/\n$/,"\n."):"",e.text(t));var i=this.input.get(0),n=u.toPx(this._isRenderAsRem()?"0.32rem":"32px"),s=function(){var t=e[0].scrollHeight;t=Math.max(t,n)+2,i.style.height=t+"px"};window.requestAnimationFrame?window.requestAnimationFrame(s):setTimeout(s,0)}},w=function(t){var e=this;this.lastErrorMsg=t;var i=this.$el.find(".errmsg");i&&0!=i.length||((i=$("<div class='errmsg'></div>").appendTo(this.$el)).insertAfter(this.inputTag),this._isRenderAsApp()||i.css("top",this.inputTag.height()+8)),i.html(t),this.$el.addClass("is-error"),i.removeClass("animate-in").removeClass("animate-out"),setTimeout(function(){i.addClass("animate-in")},0),this._isRenderAsApp()||(this.t_hideerror&&clearTimeout(this.t_hideerror),this.t_hideerror=setTimeout(function(){e.t_hideerror=null,i.addClass("animate-out")},3e3))},T=function(){var t=this;if(this.lastErrorMsg=null,this.hasError()){var e=this.$el.find(".errmsg").addClass("animate-out");setTimeout(function(){t.$el.removeClass("is-error"),e.removeClass("animate-in").removeClass("animate-out")},300)}},C=function(t,e){if(/[0-9]/.test(t.key))return!0;var i=t.target.selectionStart;return"-"==t.key?!/\-/.test(e)&&(isNaN(i)||0===i):"."==t.key&&(!/\./.test(e)&&0<e.length&&(isNaN(i)||0<i))};t?(window.UIInput=e,c.init(".ui-input",e,p)):module.exports=p}}("undefined"!=typeof window),function(n){if(!n||!VRender.Component.ui.select){var d=n?VRender.Component.ui:require("../../static/js/init"),h=d.fn,u=d.util,t=d.select=function(t,e){return d._select.call(this,t,e)},e=t.prototype=new d._select(!1);e.init=function(t,e){d._base.init.call(this,t,e),t=this.$el,this._isRenderAsApp()&&this.isNative()?t.find("select").on("change",m.bind(this)):(this._isRenderAsApp()&&t.on("tap",".dropdown",p.bind(this)),t.on("tap",".ipt",i.bind(this)),t.on("tap",".ipt .clearbtn",f.bind(this)),t.on("tap",".item",s.bind(this)),t.on("tap",".ui-more",a.bind(this))),t.is(".editable")&&(t.on("keydown","input",r.bind(this)),t.on("keyup","input",o.bind(this)),t.on("focusin","input",l.bind(this)),t.on("focusout","input",c.bind(this)))},e.val=function(t){if(u.isNull(t)){var e=this.getSelectedIndex(!0);return e&&0<e.length?this.getSelectedKey():this.isEditable()?this.$el.find(".ipt > input").val():null}var i=this._snapshoot(),n=D.call(this,t);return n?this.setSelectedIndex(n[0]):(this.setSelectedIndex(-1),this.isMatchRequired()||(this.$el.find(".ipt > input").val(t),A.call(this,u.isNotBlank(t)))),i.done(),this},e.getData=function(t){if(t){this.options.data=this._doAdapter(this.options.data);var e=this.getTopItem();return e&&(this.options.data||(this.options.data=[]),this.options.data[0]!=e&&this.options.data.unshift(e)),this.options.data}return M.call(this)},e.setDataSilent=function(t){this.options.data=t,C.call(this)},e.setSelectedIndex=function(t){var e=this._snapshoot(),i=d._select.setSelectedIndex.call(this,t);u.each(this._getItems(),function(t,e){I(t,0<=i.indexOf(e))}),i&&0!=i.length||this.$el.find("select").val(""),x.call(this),e.done()},e.getPrompt=function(){return this.$el.children(".ipt").find(".prompt").text()},e.setPrompt=function(t){var e=this.$el.children(".ipt");e.find(".prompt").remove(),u.isNotBlank(t)&&$("<span class='prompt'></span>").appendTo(e).text(t)},e.getPlaceholder=function(){return this.getPrompt()},e.setPlaceholder=function(t){this.setPrompt(t)},e.isClearable=function(){return 1==this.$el.attr("opt-clearable")},e.setClearable=function(t){u.isNull(t)||u.isTrue(t)?this.$el.attr("opt-clearable","1"):this.$el.removeAttr("opt-clearable")},e.getTopItem=function(){if(!this.options.hasOwnProperty("topItem")){var e=this.$el.attr("opt-top");if(e){try{e=JSON.parse(e)}catch(t){e=null}this.$el.removeAttr("opt-top")}this.options.topItem=e}return this.options.topItem},e.setTopItem=function(t){this.options.topItem=t,this.$el.removeAttr("opt-top")},e.addItem=function(s,a){a=u.getIndexValue(a),s=h.doAdapter.call(this,s,a)||{};var t=this.getData(!0),r=!1;0<=a&&N.call(this,t,function(t,e,i,n){if(a==e)return i.splice(n,0,s),!(r=!0)}),r||(0<t.length?t[t.length-1].push(s):t.push([s]));var e=this._getNewItem($,this._getItemContainer());return this._renderOneItem($,e,s,a),r&&0<=a&&(this._getItems().eq(a).before(e),d._select.updateSelection.call(this)),this.trigger("itemchange",s),e},e.updateItem=function(r,o){var l=this;if(r=h.doAdapter.call(this,r,o),0<=(o=o||0===o?u.getIndexValue(o):this.getDataIndex(r))){var t=this.getData(!0),c=null;N.call(this,t,function(t,e,i,n){if(o==e){i.splice(n,1,r);var s=l._getNewItem($,l._getItemContainer());l._renderOneItem($,s,r,o);var a=l._getItems();return(c=a.eq(o).before(s).remove()).is(".selected")&&I(s,!0),!1}}),d._select.updateSelection.call(this),c&&c.is(".selected")&&x.call(this),this.trigger("itemchange",r)}return o},e.removeItemAt=function(s){if(0<=(s=u.getIndexValue(s))){var t=this._getItems().eq(s);if(t&&0<t.length){var e=t.parent();t.remove(),0==e.children().length&&e.remove()}var a=this.getData(!0),r=null;return N.call(this,a,function(t,e,i,n){if(s==e)return r=i.splice(n,1),0==i.length&&u.remove(a,function(t){return t==i}),!1}),d._select.updateSelection.call(this),t.is(".selected")&&x.call(this),r}return null},e.isNative=function(){return 1==this.$el.attr("opt-native")},e.isEditable=function(){return this.$el.is(".editable")},e.isMatchRequired=function(){return 1==this.$el.attr("opt-match")},e.rerender=function(){var s=this;u.debounce("select_render-"+this.getViewId(),function(){var t=s.$el.find(".ipt > input"),e=t.val()||"",i=s.getSelectedIndex(),n=s._getItemContainer();n&&0<n.length&&s._renderItems($,n.empty(),s.getData()),s.setSelectedIndex(i),s.isEditable()&&s.getSelectedIndex()<0&&(t.val(e||""),A.call(s,u.isNotBlank(e)))})},e._getItemContainer=function(){return this.$el.children(".dropdown").children(".box")},e._renderItems=function(t,e,i){i=i||this.getData(!0),y.call(this,t,this.$el,e,i)},e._renderOneItem=function(t,e,i,n){this._isRenderAsApp()&&this.isNative()?e.text(this._getDataLabel(i,n)):d._items.renderOneItem.call(this,e,null,i,n)},e._getNewItem=function(t,e,i,n){if(this._isRenderAsApp()&&this.isNative()){var s=e.children("select");return t("<option class='item'></option>").appendTo(s)}var a=e.children(".grp").last();return a&&0!=a.length||(a=t("<div class='grp'></div>").appendTo(e)),t("<div class='item'></div>").appendTo(a)},e._getItems=function(t){var e=this._getItemContainer().find(".item");return t&&(e=e.filter(t)),e},e._isItemSelected=function(t){return t.is(".selected")||t.is(":selected")},e._setItemSelected=function(t,e){I.call(this,t,e)},e._loadBefore=function(t,e){if(d._base.loadBefore.call(this,t,e),!this._isRenderAsApp()||!this.isNative()){var i=this._getItemContainer();if(i.find(".ui-load, .ui-more").remove(),this._isRenderAsApp()&&this.isNative()){var n=this._getLoadText();if(n=u.isNull(n)?"正在加载..":u.trimToEmpty(n)){var s=i.children("select");$("<option class='ui-load'></option>").appendTo(s).text(n)}}else d._itemsRender.renderLoadView.call(this,$,i)}},e._loadAfter=function(t,e){if(d._base.loadAfter.call(this,t,e),!this._isRenderAsApp()||!this.isNative()){var i=this._getItemContainer();if(i.find(".ui-load").remove(),this.hasMore())if(this.$el.addClass("has-more"),this._isRenderAsApp()&&this.isNative()){var n=this._getMoreText();if(n=u.isNull(n)?"加载更多":u.trimToEmpty(n)){var s=i.children(".select");$("<option class='ui-more'></option>").appendTo(s).text(n)}
}else d._itemsRender.renderMoreView.call(this,$,i);else this.$el.removeClass("has-more")}},e._snapshoot_shoot=function(t){t.selectedIndex=this.getSelectedIndex(),t.value=this.$el.find(".ipt > input").val()||"",t.data=this.getSelectedData()},e._snapshoot_compare=function(t){var e=this.$el.find(".ipt > input").val()||"";if(t.value!=e)return!1;var i=this.getSelectedIndex();return h.equalIndex(i,t.selectedIndex)},e._doAdapter=function(t){return R.call(this,t)},e._showDropdown=function(){S.call(this)},e._hideDropdown=function(){k.call(this)};var i=function(t){var e=$(t.target);if(this._isRenderAsApp()){if(this.isEditable()&&!e.is(".dropdownbtn"))return}else this.isEditable()&&e.is(".dropdownbtn")&&this.$el.find(".ipt > input").focus();S.call(this)},s=function(t){var e=$(t.currentTarget);if(e.is(".selected")&&!this.isMultiple())return!1;var i=this._snapshoot();return e.is(".selected")?I(e,!1):(this.isMultiple()||I(this._getItems(".selected"),!1),I(e,!0)),d._select.updateSelection.call(this),x.call(this),i.done(),this.isMultiple()||k.call(this),!1},a=function(t){this.more()},r=function(t){if(!this._isRenderAsApp()&&(S.call(this),38==t.which||40==t.which)){if(this.isMultiple())return;var e=this.getSelectedIndex();38==t.which?0<e&&(e-=1):40==t.which&&e<this.length()-1&&(e+=1),this.setSelectedIndex(e)}},o=function(t){var e=$(t.currentTarget);if(13==t.which){k.call(this);var i=this._snapshoot(),n=d._select.updateSelection.call(this);n&&0<n.length?x.call(this):this.isMatchRequired()&&e.val(""),e.select(),i.done()}else if(!u.isControlKey(t)||8==t.which){var s=e.val();A.call(this,s&&0<s.length);var a=D.call(this,s,!0),r=I(this._getItems(),!1);this.$el.find("select").val(""),a&&0<=a[0]&&I(r.eq(a[0]),!0)}},l=function(t){this.t_focus&&(clearTimeout(this.t_focus),this.t_focus=0)},c=function(t){var n=this,s=$(t.currentTarget);this.t_focus=setTimeout(function(){n.t_focus=0;var t=s.val(),e=D.call(n,t,!1);if(e&&0<=e[0])n.setSelectedIndex(e[0]);else if(n.isMatchRequired())e=D.call(n,t,!0),n.setSelectedIndex(e?e[0]:-1);else{var i=n._snapshoot();n.setSelectedIndex(-1),s.val(t),A.call(n,t&&0<t.length),i.done()}F.call(n)&&k.call(n)},200)},p=function(t){$(t.target).is(".dropdown")&&k.call(this)},f=function(t){return this.setSelectedIndex(-1),!1},m=function(t){var e=this._snapshoot();this._getItems().removeClass("selected"),d._select.updateSelection.call(this),x.call(this),e.done()},g=function(t,e){d._selectRender.call(this,t,e)},v=g.prototype=new d._selectRender(!1);v.render=function(t,e){e.addClass("ui-select");var i=this.options||{};return this.isNative()&&e.attr("opt-native","1"),u.isTrue(i.needMatch)&&e.attr("opt-match","1"),u.isTrue(i.clearable)&&e.attr("opt-clearable","1"),i.topItem&&!n&&e.attr("opt-top",JSON.stringify(i.topItem)),e.attr("opt-box",i.container),b.call(this,t,e),e.append("<div class='dropdown'><div class='box'></div></div>"),d._selectRender.render.call(this,t,e),this},v.getSelectedData=function(t){return d._selectRender.getSelectedData.call(this,t,M.call(this))},v.isNative=function(){return u.isTrue(this.options.native)},v.getTopItem=function(){return this.options.topItem},v._getItemContainer=function(t,e){return e.children(".dropdown").children(".box")},v._renderItems=function(t,e){var i=this._getItemContainer(t,e);y.call(this,t,e,i,this.getData())},v._renderEmptyView=function(t,e){},v._renderLoadView=function(t,e){},v._setItemSelected=function(t,e){e?t.addClass("selected").attr("selected","selected"):t.removeClass("selected").removeAttr("selected")},v._doAdapter=function(t){return R.call(this,t)};var b=function(t,e){var i=this,n=t("<div class='ipt'></div>").appendTo(e),s=t("<input type='text'/>").appendTo(n),a=this.getSelectedData(!0);if(a&&0<a.length){e.addClass("has-val");var r=u.map(a,function(t){return i._getDataLabel(t)});s.val(r.join(",")||"")}var o=this.options||{};u.isTrue(o.editable)?e.addClass("editable"):s.attr("readonly","readonly"),n.append("<div class='dropdownbtn'></div>"),n.append("<div class='clearbtn'></div>"),u.isNotBlank(o.prompt)?t("<span class='prompt'></span>").appendTo(n).text(o.prompt):u.isNotBlank(o.placeholder)&&t("<span class='prompt'></span>").appendTo(n).text(o.placeholder)},y=function(t,e,i,n){var s=this;this._render_items=[],this._isRenderAsApp()&&this.isNative()?w.call(this,t,i,n):_.call(this,t,i,n),setTimeout(function(){s._render_items=null})},_=function(n,i,t){var s=this;if(t&&0!=t.length){var a=this._render_items||[],r=function(t,e){var i=n("<div class='item'></div>").appendTo(t);a.push({item:i,data:e,index:a.length}),T.call(s,n,i,e)},o=i.children(".grp").last();u.each(t,function(t,e){u.isArray(t)?(0<t.length&&(o=n("<div class='grp'></div>").appendTo(i),t.title&&n("<div class='title'></div>").appendTo(o).text(t.title),u.each(t,function(t,e){r(o,t)})),o=null):(o&&0!=o.length||(o=n("<div class='grp'></div>").appendTo(i)),r(o,t))})}},w=function(n,t,e){var s=this,i=t.children("select");if(i&&0!=i.length||(i=n("<select size='1'></select>").appendTo(t),this.isMultiple()?i.attr("multiple","multiple"):i.append("<option disabled='disabled' selected='selected'>请选择..</option>")),e&&0<e.length){var a=this._render_items||[],r=function(t,e){var i=n("<option class='item'></option>").appendTo(t);a.push({item:i,data:e,index:a.length}),i.text(s._getDataLabel(e))};u.each(e,function(t){u.isArray(t)?u.each(t,function(t){r(i,t)}):r(i,t)})}},T=function(t,e,i,n){d._itemsRender.renderOneItem.call(this,t,e,e,i,n)},C=function(){var n=this;u.debounce("select_silent-"+this.getViewId(),function(){var t=n.getSelectedIndex(),e=n._getItemContainer();if(e&&0<e.length&&n._renderItems($,e.empty(),n.getData()),0<=t){var i=n._getItems().eq(t);i&&0<i.length&&I.call(n,i,!0)}})},x=function(){var e=this,t=this.getSelectedData(!0),i=u.map(t,function(t){return e._getDataLabel(t)});this.$el.find(".ipt > input").val(i.join(",")||""),A.call(this,t&&0<t.length)},D=function(r,o,l){var c=this;if(u.isBlank(r))return null;var d=null;return N.call(this,this.getData(!0),function(t,e,i,n){var s=c._getDataLabel(t)||"";if(r==s)return!(d=[e,t]);if(o&&r.length<s.length){var a=s.indexOf(r);if(0==a||0<a&&!l)return!(d=[e,t])}}),d},I=function(t,e){return e?t.addClass("selected").attr("selected","selected"):t.removeClass("selected").removeAttr("selected"),t},A=function(t){t?this.$el.addClass("has-val"):this.$el.removeClass("has-val")},F=function(){return this.$el.is(".show-dropdown")},S=function(){var t=this;if(!F.call(this)){var e=this.$el.addClass("show-dropdown");if(this._isRenderAsApp())$("html,body").addClass("ui-scrollless");else{var i=e.children(".dropdown");i.off("click").on("click",function(){return!1}),setTimeout(function(){$("body").on("click."+t.getViewId(),function(){k.call(t)})});var n=h.getDropdownHeight.call(this,i);u.offset(i,this._getScrollContainer(),0,n).isOverflowY&&e.addClass("show-before")}setTimeout(function(){t.t_focus&&(clearTimeout(t.t_focus),t.t_focus=0)},100),setTimeout(function(){e.addClass("animate-in")})}},k=function(){$("html,body").removeClass("ui-scrollless");var t=this.$el.addClass("animate-out");$("body").off("click."+this.getViewId()),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},N=function(t,e){for(var i=0,n=0;n<t.length;n++){var s=t[n];if(u.isArray(s)&&0<s.length)for(var a=0;a<s.length;a++){if(!1===e(s[a],i,s,a))return;i+=1}else{if(!1===e(s,i,t,n))return;i+=1}}},R=function(t){var n=this;if((t=u.toArray(t))._vr_adapter_flag)return t;var s=0,a=[],r=null;return u.each(t,function(t,e){if(u.isArray(t)){if(0<t.length){var i=u.map(t,function(t){return h.doAdapter.call(n,t,s++)});t.title&&(i.title=t.title),a.push(i)}r=null}else r||(r=[],a.push(r)),t=h.doAdapter.call(n,t,s++),r.push(t)}),a._vr_adapter_flag=!0,a},M=function(){var e=[];return u.each(this.getData(!0),function(t){u.isArray(t)?u.each(t,function(t){e.push(t)}):e.push(t)}),e};n?(window.UISelect=t,d.init(".ui-select",t,g)):module.exports=g}}("undefined"!=typeof window),function(i){if(!i||!VRender.Component.ui.datepicker){var r=i?VRender.Component.ui:require("../../static/js/init"),f=(r.fn,r.util),D=["一","二","三","四","五","六","七","八","九","十","十一","十二"],m=["周日","周一","周二","周三","周四","周五","周六"],t=r.datepicker=function(t,e){return r._base.call(this,t,e)},e=t.prototype=new r._base(!1);e.init=function(t,e){if(r._base.init.call(this,t,e),this.$el.on("tap","header .title button",n.bind(this)),this.$el.on("tap","section td",s.bind(this)),this.$el.on("tap","footer .okbtn",a.bind(this)),this.$el.on("tap","footer .cancelbtn",o.bind(this)),this._isRenderAsApp()){this.$el.on("tap",function(t){return!1}),this.$el.on("tap","header .today",l.bind(this)),this.$el.on("tap","header .clear",c.bind(this));var i=this.$el.children("section");i.on("touchstart",d.bind(this)),i.on("touchmove",d.bind(this)),i.on("touchend",d.bind(this))}},e.getDate=function(t){if(!this.isRangeDate()){var e=f.toDate(this.$el.attr("data-dt"));return e&&f.isNotBlank(t)?f.toDateString(e,t):e}var i=f.toDate(this.$el.attr("data-start"));if(i){var n=f.toDate(this.$el.attr("data-end"))||new Date(i.getTime());return n=f.toDate(f.toDateString(n,"yyyy-MM-dd 23:59:59")),f.isNotBlank(t)&&(i=f.toDateString(i,t),n=f.toDateString(n,t)),[i,n]}return null},e.setDate=function(t){var e=this._snapshoot();if(this.isRangeDate()){var i=f.toDate(t),n=null;if(i){n=f.toDate(arguments[1])||new Date(i.getTime());N(i),N(n);N(i)<=N(n)?(i=f.toDateString(i,"yyyy-MM-dd"),n=f.toDateString(n,"yyyy-MM-dd")):i=n=null}this.$el.attr("data-start",i||""),this.$el.attr("data-end",n||"")}else{var s=f.toDate(t);this.$el.attr("data-dt",s?f.toDateString(s,"yyyy-MM-dd"):"")}e.compare()||this.rerender(this.getDate()),e.done()},e.getMinDate=function(){return f.toDate(this.$el.attr("opt-min"))},e.setMinDate=function(t){var e=f.toDate(t);N(e)!=N(this.getMinDate())&&(this.$el.attr("opt-min",e?f.toDateString(e,"yyyy-MM-dd"):""),this.rerender())},e.getMaxDate=function(){return f.toDate(this.$el.attr("opt-max"))},e.setMaxDate=function(t){var e=f.toDate(t);N(e)!=N(this.getMaxDate())&&(this.$el.attr("opt-max",e?f.toDateString(e,"yyyy-MM-dd"):""),this.rerender())},e.isRangeDate=function(){return this.$el.is(".is-range")},e.submit=function(){a.call(this)},e.cancel=function(){o.call(this)},
e.rerender=function(e){var i=this;f.debounce("datepicker_render-"+this.getViewId(),function(){var t=i.lastSelectedDate||i.getDate();e=e||F.call(i),b.call(i,$,i.$el,t,e)})},e._snapshoot_shoot=function(t,e){t.selectedDate=e||this.getDate(),t.pickerDate=F.call(this),t.data=t.selectedDate},e._snapshoot_compare=function(t,e){var i=e||this.getDate();return i&&t.selectedDate?this.isRangeDate()?N(i[0])==N(t.selectedDate[0])&&N(i[1])==N(t.selectedDate[1]):N(i)==N(t.selectedDate):!(i||t.selectedDate)};var n=function(t){var e=$(t.currentTarget),i=null;if(this.isRangeDate()&&!this._isRenderAsApp()){var n=e.parent();n.is(".s")?i=this.$el.find(".table.s"):n.is(".e")&&(i=this.$el.find(".table.e"))}else i=this.$el.find(".table.t0");var s=parseInt(i.attr("data-y")),a=parseInt(i.attr("data-m")),r=new Date(s,a,1);e.is(".y")?r.setFullYear(s+(e.is(".prev")?-1:1)):r.setMonth(a+(e.is(".prev")?-1:1)),i.attr("data-y",r.getFullYear()).attr("data-m",r.getMonth()),this.rerender()},s=function(t){var e=this,i=$(t.currentTarget);if(!i.is(".disabled"))if(this.isRangeDate()){if(this.selectedSnapshoot||(this.selectedSnapshoot=this._snapshoot()),this.lastSelectedDate&&1==this.lastSelectedDate.length){var n=f.toDate(i.attr("data-dt"));n.getTime()>=this.lastSelectedDate[0].getTime()?this.lastSelectedDate.push(n):this.lastSelectedDate.unshift(n)}else this.lastSelectedDate=[],this.lastSelectedDate.push(f.toDate(i.attr("data-dt")));this.rerender(),setTimeout(function(){var t=[];t[0]=e.lastSelectedDate[0].getTime(),t[1]=e.lastSelectedDate[1]?e.lastSelectedDate[1].getTime():0,e.trigger("pre-change",t)})}else{var s=this._snapshoot();this.$el.find("td.selected").removeClass("selected"),i.addClass("selected"),this.$el.attr("data-dt",i.attr("data-dt"));var a=f.toDate(i.attr("data-dt"));this.$el.find(".title .item .val").text(f.toDateString(a,"yyyy.MM.dd")),s.done()}},a=function(){if(this.isRangeDate()){if(this.lastSelectedDate&&0<this.lastSelectedDate.length){var t=this.lastSelectedDate[0],e=this.lastSelectedDate[1]||t;this.$el.attr("data-start",f.toDateString(t,"yyyy-MM-dd")),this.$el.attr("data-end",f.toDateString(e,"yyyy-MM-dd")),this.lastSelectedDate=null}A.call(this,!0)}this.trigger("submit",this.getDate())},o=function(){if(this.isRangeDate())if(this.lastSelectedDate=null,this.selectedSnapshoot){var t=this.selectedSnapshoot.getState();A.call(this);var e=t.selectedDate,i=e&&e[0],n=e&&e[1];this.$el.attr("data-start",i?f.toDateString(i,"yyyy-MM-dd"):""),this.$el.attr("data-end",n?f.toDateString(n,"yyyy-MM-dd"):""),this.rerender(t.pickerDate)}else this.rerender();this.trigger("cancel",this.getDate())},l=function(){this.rerender([new Date])},c=function(){var t=this._snapshoot();this.isRangeDate()?(A.call(this),this.$el.attr("data-start","").attr("data-end","")):this.$el.attr("data-dt",""),this.rerender(),t.done(),this.trigger("clear")},d=function(t){var e=t.touches&&t.touches[0];if("touchstart"==t.type)this.touchData={startX:e.pageX,startY:e.pageY},this.touchData.tableContainer=this.$el.find(".table.t0"),this.touchData.mainTable=this.touchData.tableContainer.children("table.body");else if("touchmove"==t.type){if(1<t.touches.length)return;var i=e.pageX-this.touchData.startX;if(!this.touchData.moving&&(Math.abs(i)<10||15<Math.abs(e.pageY-this.touchData.startY)))return;this.touchData.moving=!0,this.touchData.lastOffset=i,this.touchData.mainTable.css("transform","translate("+i+"px,0px)");var n=0<i?this.touchData.prevTable:this.touchData.nextTable;if(!n){var s=parseInt(this.touchData.tableContainer.attr("data-y")),a=parseInt(this.touchData.tableContainer.attr("data-m"));n=x($,this.$el.children("section")).addClass("t1"),0<i?(a-=1,this.touchData.prevTable=n):(a+=1,this.touchData.nextTable=n);var r=new Date(s,a,1),o=this.lastSelectedDate||this.getDate();T.call(this,$,this.$el,n,r,o)}this.touchData.contentWidth||(this.touchData.contentWidth=this.$el.children("section").width()),i+=this.touchData.contentWidth*(0<i?-1:1),n.css("transform","translate("+i+"px,0px)")}else if("touchend"==t.type&&this.touchData.moving){var l=0;20<Math.abs(this.touchData.lastOffset)&&(l+=this.touchData.contentWidth*(0<this.touchData.lastOffset?1:-1));var c="transform 200ms";this.touchData.mainTable.css("transition",c),this.touchData.mainTable.css("transform","translate("+l+"px,0px)"),0<this.touchData.lastOffset?(this.touchData.prevTable.css("transition",c),this.touchData.prevTable.css("transform","translate(0px,0px)")):(this.touchData.nextTable.css("transition",c),this.touchData.nextTable.css("transform","translate(0px,0px)"));var d=this.touchData;if(20<Math.abs(d.lastOffset)){var h=0<d.lastOffset?".prev.m":".next.m";this.$el.children("header").find(h).eq(0).tap()}setTimeout(function(){d.prevTable&&d.prevTable.remove(),d.nextTable&&d.nextTable.remove(),d.mainTable.css("transition",""),d.mainTable.css("transform","")},200)}},h=function(t,e){r._baseRender.call(this,t,e)},u=h.prototype=new r._baseRender(!1);u.render=function(t,e){r._baseRender.render.call(this,t,e),e.addClass("ui-datepicker");var i=this.options||{},n=f.toDate(i.min);n&&e.attr("opt-min",f.toDateString(n,"yyyy-MM-dd"));var s=f.toDate(i.max);s&&e.attr("opt-max",f.toDateString(s,"yyyy-MM-dd"));var a=S.call(this);return this.isRangeDate()?(e.addClass("is-range"),a&&(e.attr("data-start",f.toDateString(a[0],"yyyy-MM-dd")),e.attr("data-end",f.toDateString(a[1],"yyyy-MM-dd")))):a&&e.attr("data-dt",f.toDateString(a,"yyyy-MM-dd")),p.call(this,t,e),g.call(this,t,e),v.call(this,t,e),b.call(this,t,e,a),this},u.getMinDate=function(){return f.toDate(this.options.min)},u.getMaxDate=function(){return f.toDate(this.options.max)},u.isRangeDate=function(){return f.isTrue(this.options.range)};var p=function(e,t){function i(){var t=e("<dl class='item'></dl>").appendTo(s);return t.append("<dt class='lbl'>-</dt><dd class='val'>-</dd>"),t.append("<button class='prev y'>&nbsp;</button>"),t.append("<button class='prev m'>&nbsp;</button>"),t.append("<button class='next m'>&nbsp;</button>"),t.append("<button class='next y'>&nbsp;</button>"),t}var n=e("<header></header>").appendTo(t),s=e("<div class='title'></div>").appendTo(n);this.isRangeDate()?(i().addClass("s").children(".lbl").html("开始日期<span class='y'></span>"),i().addClass("e").children(".lbl").html("结束日期<span class='y'></span>")):i(),this._isRenderAsApp()&&(n.append("<button class='today'><label>今天</label></button>"),n.append("<button class='clear'><label>清除</label></button>"))},g=function(t,e){var i=t("<section></section>").appendTo(e);this.isRangeDate()&&!this._isRenderAsApp()?(x(t,i).addClass("s"),x(t,i).addClass("e")):x(t,i).addClass("t0")},v=function(t,e){if(this.isRangeDate()){var i=t("<footer></footer>").appendTo(e);if(this._isRenderAsApp())I.call(this,i,{label:"使用日期",type:"primary",cls:"okbtn"});else{i.append("<div class='vals'><span class='s'>-</span> - <span class='e'>-</span></div>");var n=t("<div class='btns'></div>").appendTo(i);I.call(this,n,{label:"确定",type:"primary",size:"small",cls:"okbtn"}),I.call(this,n,{label:"取消",type:"cancel",size:"small",cls:"cancelbtn"})}}},b=function(t,e,i,n){i=f.toArray(i),(n=f.toArray(n))[0]instanceof Date||(n=[],this.isRangeDate()&&!this._isRenderAsApp()?(n.push(i[0]||new Date),n.push(i[1])):n.push(i[0]||new Date)),y.call(this,t,e,n,i),_.call(this,t,e,n,i),w.call(this,t,e,n,i),this.isRangeDate()&&!this._isRenderAsApp()||(k(n[0],new Date)?e.attr("cur-month","1"):e.removeAttr("cur-month"))},y=function(t,e,i,n){var s=e.children("header");if(this.isRangeDate()){var a,r,o="--",l="--",c=" ",d=" ";if(this._isRenderAsApp()){if(n&&0<n.length){a=n[0],r=n[1];var h=(new Date).getFullYear();a&&(a.getFullYear()!=h&&(c=a.getFullYear()),o=f.toDateString(a,"M月d日")+" "+m[a.getDay()]),r&&(r.getFullYear()!=h&&(d=r.getFullYear()),d=r.getFullYear()==h?" ":r.getFullYear(),l=f.toDateString(r,"M月d日")+" "+m[r.getDay()])}s.find(".item.s .y").text(c),s.find(".item.e .y").text(d)}else a=i&&i[0]||new Date,r=i&&i[1]||a,k(a,r)&&(r=new Date(r.getTime())).setMonth(r.getMonth()+1),o=a.getFullYear()+"年 "+D[a.getMonth()]+"月",l=r.getFullYear()+"年 "+D[r.getMonth()]+"月",C(t,e,a,r);s.find(".item.s .val").text(o),s.find(".item.e .val").text(l)}else{var u=i&&i[0]||new Date,p=u.getFullYear()+"年 "+D[u.getMonth()]+"月";s.find(".item .lbl").text(p),u=n&&n[0],s.find(".item .val").text(u?f.toDateString(u,"yyyy.MM.dd"):"-")}},_=function(t,e,i,n){if(this.isRangeDate()&&!this._isRenderAsApp()){var s=i&&i[0]||new Date,a=i&&i[1]||s;k(s,a)&&(a=new Date(a.getTime())).setMonth(a.getMonth()+1),T.call(this,t,e,e.find(".table.s"),s,n),T.call(this,t,e,e.find(".table.e"),a,n)}else{var r=i&&i[0]||new Date;T.call(this,t,e,e.find(".table.t0"),r,n)}},w=function(t,e,i,n){if(this.isRangeDate()&&!this._isRenderAsApp()){var s=" ",a=" ";n&&0<n.length&&(n[0]&&(s=f.toDateString(n[0],"yyyy.MM.dd")),n[1]&&(a=f.toDateString(n[1],"yyyy.MM.dd")));var r=e.find("footer .vals");r.children(".s").text(s),r.children(".e").text(a)}},T=function(t,e,i,n,s){var a=n.getFullYear(),r=n.getMonth();i.attr("data-y",a).attr("data-m",r);var o=new Date,l=N(o),c=s&&s[0],d=s&&s[1],h=N(c),u=N(d)||h,p=N(this.getMinDate()),f=N(this.getMaxDate())||21001231,m=new Date(a,r,1),g=m.getDay();m.setDate(g?2-g:-5);var v=(o.getFullYear()==a?"":a+"年 ")+D[r]+"月";i.find(".month").text(v);for(var b=i.find("table.body tbody").empty();;){for(var y=t("<tr></tr>").appendTo(b),_=0;_<7;_++){var w=m.getFullYear(),T=m.getMonth(),$=m.getDate(),C=1e4*w+100*T+$,x=t("<td></td>").appendTo(y);x.append("<span>"+$+"</span>"),x.attr("data-dt",w+"-"+(T+1)+"-"+$),C==l&&x.addClass("today"),T!=r&&x.addClass("over"),(T!=r||C<p||f<C)&&x.addClass("disabled"),h<=C&&C<=u&&(x.addClass("selected"),C==h&&x.addClass("start"),C==u&&x.addClass("end")),m.setDate($+1)}if(m.getMonth()>r||m.getFullYear()>a)break}},C=function(t,e,i,n){var s=(e=e.children("header")).find(".item.s .next.y, .item.e .prev.y"),a=e.find(".item.s .next.m, .item.e .prev.m"),r=i.getFullYear(),o=i.getMonth(),l=n.getFullYear(),c=n.getMonth();100*(l-1)+c<=100*r+o?s.addClass("disabled"):s.removeClass("disabled"),l<r||r==l&&c-1<=o?a.addClass("disabled"):a.removeClass("disabled")},x=function(t,e){e=t("<div class='table'></div>").appendTo(e);var i=t("<table class='head'></table>").appendTo(e);return i.append(
"<thead><tr><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th><th>日</th></tr></thead>"),(i=t("<table class='body'></table>").appendTo(e)).append("<thead><tr><th colspan='7'><div class='month'>-</div></th></tr></thead>"),i.append("<tbody></tbody>"),e},I=function(t,e){i?r.button.create(f.extend({},e,{target:t})):new(require("../button/index"))(this.context,e).render(t)},A=function(t){this.lastSelectedDate=null,this.selectedSnapshoot&&(t?this.selectedSnapshoot.done():this.selectedSnapshoot.release(),this.selectedSnapshoot=null)},F=function(){var t=[];if(this.isRangeDate()&&!this._isRenderAsApp()){var e=this.$el.find(".table.s");t.push(new Date(parseInt(e.attr("data-y")),parseInt(e.attr("data-m")),1));var i=this.$el.find(".table.e");t.push(new Date(parseInt(i.attr("data-y")),parseInt(i.attr("data-m")),1))}else{var n=this.$el.find(".table.t0");t.push(new Date(parseInt(n.attr("data-y")),parseInt(n.attr("data-m")),1))}return t},S=function(t,e){var i=N(t),n=N(e);if(i&&n&&n<i)return null;if(this.isRangeDate()){var s=f.toDate(this.options.start);if(s){s=new Date(s.getTime());var a=f.toDate(this.options.end)||new Date(s.getTime());a=new Date(a?a.getTime():s.getTime());var r=N(s),o=N(a);if(r<=o&&(i&&r<i&&(s=t),n&&n<o&&(a=e),N(s)<=N(a)))return[s,a]}}else{var l=f.toDate(this.options.date);if(l){l=new Date(l.getTime());var c=N(l);return i&&c<i||n&&n<c?null:l}}return null},k=function(t,e){return!(!t||!e)&&(t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear())},N=function(t){return t?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};i?(window.UIDatePicker=t,r.init(".ui-datepicker",t,h)):module.exports=h}}("undefined"!=typeof window),function(o){if(!o||!VRender.Component.ui.dateinput){var a=o?VRender.Component.ui:require("../../static/js/init"),l=(a.fn,a.util),t=a.dateinput=function(t,e){return a._base.call(this,t,e)},e=t.prototype=new a._base(!1);e.init=function(t,e){a._base.init.call(this,t,e);var i=this.inputTag=this.$el.children(".ipt");i.on("tap",".clear",s.bind(this)),this.$el.on("change",".ui-datepicker",r.bind(this)),this._isRenderAsApp()&&this.isNative()?h.call(this):i.on("tap",n.bind(this))},e.val=function(t,e){return l.isNull(t)?this.getDate(e&&e.format||"yyyy-MM-dd"):(this.setDate(t),this)},e.getDate=function(t){var e=l.toDate(this.$el.attr("data-dt"));return e&&l.isNotBlank(t)?l.toDateString(e,t):e},e.setDate=function(t){var e=t?l.toDate(t):null;m.call(this,e)&&u.call(this,e,this.getMinDate(),this.getMaxDate())},e.getMinDate=function(){return l.toDate(this.$el.attr("opt-min"))},e.setMinDate=function(t){var e=l.toDate(t);v(e)!=v(this.getMinDate())&&(this.$el.attr("opt-min",e?l.toDateString(e,"yyyy-MM-dd"):""),u.call(this,this.getDate(),e,this.getMaxDate()))},e.getMaxDate=function(){return l.toDate(this.$el.attr("opt-max"))},e.setMaxDate=function(t){var e=l.toDate(t);v(e)!=v(this.getMaxDate())&&(this.$el.attr("opt-max",e?l.toDateString(e,"yyyy-MM-dd"):""),u.call(this,this.getDate(),this.getMinDate(),e))},e.getDateFormat=function(){var t=this.options;if(t.hasOwnProperty("dateFormat"))return t.dateFormat;if(t.hasOwnProperty("format"))return t.format;var e=this.$el.children(".format");return e&&0<e.length&&(t.dateFormat=e.text()||null,t.dateFormat&&e.is(".format-fn")&&(t.dateFormat=unescape(t.dateFormat),t.dateFormat="var Utils=VRender.Utils;return ("+t.dateFormat+");",t.dateFormat=new Function(t.dateFormat)()),e.remove()),t.dateFormat},e.setDateFormat=function(t){this.options.dateFormat=t,this.$el.children(".format").remove(),m.call(this,this.getDate())},e.getPrompt=function(){return this.inputTag.children(".prompt").text()},e.setPrompt=function(t){this.inputTag.children(".prompt").remove(),l.isNotNull(t)&&(t=l.trimToEmpty(t),$("<span class='prompt'></span>").appendTo(this.inputTag).text(t))},e.isNative=function(){return 1==this.$el.attr("opt-native")},e._snapshoot_shoot=function(t,e){t.data=e||this.getDate()},e._snapshoot_compare=function(t,e){return(e=e||this.getDate())&&t.data?e.getDate()==t.data.getDate()&&e.getMonth()==t.data.getMonth()&&e.getFullYear()==t.data.getFullYear():e==t.data};var n=function(t){p.call(this)},s=function(t){return m.call(this,null)&&u.call(this,null,this.getMinDate(),this.getMaxDate()),this.trigger("clear"),!1},r=function(t){return!1},i=function(t,e){a._baseRender.call(this,t,e)},c=i.prototype=new a._baseRender(!1);c.render=function(t,e){a._baseRender.render.call(this,t,e),e.addClass("ui-dateipt");var i=this.options||{};l.isTrue(i.native)&&e.attr("opt-native","1"),e.attr("opt-box",i.container);var n=l.toDate(i.min);e.attr("opt-min",n?l.toDateString(n,"yyyy-MM-dd"):null);var s=l.toDate(i.max);return e.attr("opt-max",s?l.toDateString(s,"yyyy-MM-dd"):null),d.call(this,t,e,l.toDate(i.date)),this},c.getDateFormat=function(){return this.options.dateFormat||this.options.format};var d=function(t,e,i){var n=t("<div class='ipt'></div>").appendTo(e),s=t("<input type='text' readonly='readonly'/>").appendTo(n);n.append("<span class='clear'></span>");var a=this.options.prompt;l.isNotBlank(a)&&t("<span class='prompt'></span>").appendTo(n).text(a);var r=this.getDateFormat();i&&(e.addClass("has-val").attr("data-dt",l.toDateString(i,"yyyy-MM-dd")),s.val(g(i,r)||"")),!o&&r&&(l.isFunction(r)?e.write("<div class='ui-hidden format format-fn'>"+escape(r)+"</div>"):e.write("<div class='ui-hidden format'>"+r+"</div>"))},h=function(){var t=$("<input class='origin-dateipt' type='date'/>").appendTo(this.inputTag);u.call(this,this.getDate(),this.getMinDate(),this.getMaxDate()),t.on("change",function(t){m.call(this,l.toDate($(t.currentTarget).val()))}.bind(this))},u=function(e,i,n){var s=this;l.debounce("dateinput_picker-"+this.getViewId(),function(){if(s._isRenderAsApp()&&s.isNative()){var t=s.inputTag.children(".origin-dateipt");t.val(e?l.toDateString(e,"yyyy-MM-dd"):""),t.attr("min",i?l.toDateString(i,"yyyy-MM-dd"):""),t.attr("max",n?l.toDateString(n,"yyyy-MM-dd"):"")}else s.picker&&(s.picker.setMinDate(i),s.picker.setMaxDate(n),s.picker.setDate(e))})},p=function(){var t=this;if(!this.picker){var e={};e.target=$("<div class='picker'></div>").appendTo(this.$el),e.date=this.getDate(),e.min=this.getMinDate(),e.max=this.getMaxDate(),this.picker=a.datepicker.create(e),this.picker.on("change",function(t,e){f.call(this),m.call(this,e)}.bind(this)),this.picker.on("clear",function(t){f.call(this),m.call(this,null)}.bind(this))}if(!this.$el.is(".show-picker")){var i=this.$el.addClass("show-picker"),n=i.children(".picker");if(this._isRenderAsApp())$("html, body").addClass("ui-scrollless"),n.on("tap",f.bind(this));else n.off("click").on("click",function(){return!1}),setTimeout(function(){$("body").on("click."+t.getViewId(),function(){f.call(t)})}),l.offset(n,this._getScrollContainer(),0,n[0].scrollHeight).isOverflowY&&i.addClass("show-before");setTimeout(function(){i.addClass("animate-in")})}},f=function(){var t=this.$el.addClass("animate-out");this._isRenderAsApp()?($("html,body").removeClass("ui-scrollless"),t.children(".picker").off("tap")):$("body").off("click."+this.getViewId()),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},m=function(t){var e=this._snapshoot(),i=this.inputTag.find("input");return t?(this.$el.addClass("has-val").attr("data-dt",l.toDateString(t,"yyyy-MM-dd")),i.val(g(t,this.getDateFormat()))):(this.$el.removeClass("has-val").attr("data-dt",""),i.val("")),e.done()},g=function(t,e){return t?l.isFunction(e)?e(t):(l.isBlank(e)&&(e="yyyy-MM-dd"),l.toDateString(t,e)):""},v=function(t){return t instanceof Date?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};o?(window.UIDateInput=t,a.init(".ui-dateipt",t,i)):module.exports=i}}("undefined"!=typeof window),function(l){if(!l||!VRender.Component.ui.daterange){var c=l?VRender.Component.ui:require("../../static/js/init"),d=(c.fn,c.util),t=c.daterange=function(t,e){return c._base.call(this,t,e)},e=t.prototype=new c._base(!1);e.init=function(t,e){c._base.init.call(this,t,e);var i=this.inputTag=this.$el.children(".ipt");if(i.on("tap",".clear",u.bind(this)),this.$el.on("change",".ui-datepicker",h.bind(this)),this._isRenderAsApp()&&this.isNative())g.call(this);else if(i.on("tap",s.bind(this)),i.on("tap",".picker",function(t){return!1}),!this._isRenderAsApp()){var n=this.$el.children(".tools");n.on("tap",".item",a.bind(this)),n.on("tap",".label",r.bind(this)),n.on("mouseenter",o.bind(this)),n.on("mouseleave",o.bind(this))}},e.val=function(t,e){return d.isNull(t)?this.getDateRange(e&&e.format||"yyyy-MM-dd"):(t=d.toArray(t),this.setDateRange(t[0],t[1]),this)},e.getDateRange=function(t){var e=this.getStartDate(),i=this.getEndDate();return e&&i?(d.isNotBlank(t)&&(e=d.toDateString(e,t),i=d.toDateString(i,t)),[e,i]):null},e.setDateRange=function(t,e){e=((t=d.toDate(t))?d.toDate(e):null)||t,w.call(this,t,e)&&(v.call(this,t,e),b.call(this,t,e,this.getMinDate(),this.getMaxDate()))},e.getStartDate=function(){return d.toDate(this.$el.attr("data-start"))},e.setStartDate=function(t){this.setDateRange(t,this.getEndDate())},e.getEndDate=function(){return d.toDate(this.$el.attr("data-end"))},e.setEndDate=function(t){this.setDateRange(this.getStartDate(),t)},e.getMinDate=function(){return d.toDate(this.$el.attr("opt-min"))},e.setMinDate=function(t){var e=d.toDate(t);I(e)!=I(this.getMinDate())&&(this.$el.attr("opt-min",e?d.toDateString(e,"yyyy-MM-dd"):""),b.call(this,this.getStartDate(),this.getEndDate(),e,this.getMaxDate()))},e.getMaxDate=function(){return d.toDate(this.$el.attr("opt-max"))},e.setMaxDate=function(t){var e=d.toDate(t);I(e)!=I(this.getMaxDate())&&(this.$el.attr("opt-max",e?d.toDateString(e,"yyyy-MM-dd"):""),b.call(this,this.getStartDate(),this.getEndDate(),this.getMinDate(),e))},e.getDateFormat=function(){var t=this.options;if(t.hasOwnProperty("dateFormat"))return t.dateFormat;if(t.hasOwnProperty("format"))return t.format;var e=this.$el.children(".format");return e&&0<e.length&&(t.dateFormat=e.text()||null,t.dateFormat&&e.is(".format-fn")&&(t.dateFormat=unescape(t.dateFormat),t.dateFormat="var Utils=VRender.Utils;return ("+t.dateFormat+");",t.dateFormat=new Function(t.dateFormat)()),e.remove()),t.dateFormat},e.setDateFormat=function(t){this.options.dateFormat=t,this.$el.children(".format").remove()
,w.call(this,this.getStartDate(),this.getEndDate())},e.setShortcuts=function(t){f.call(this,this.$el,t)},e.isNative=function(){return 1==this.$el.attr("opt-native")},e._snapshoot_shoot=function(t){t.data=this.getDateRange(),t.min=this.getMinDate(),t.max=this.getMaxDate()},e._snapshoot_compare=function(t){var e=this.getDateRange();return t.data&&e?I(t.data[0])==I(e[0])&&I(t.data[1])==I(e[1]):!(t.data||e)};var s=function(t){y.call(this)},a=function(t){this.picker&&this.picker.cancel();var e=$(t.currentTarget);e.addClass("selected").siblings().removeClass("selected"),e.parent().parent().children(".label").text(e.text()),this.$el.removeClass("show-dropdown"),T.call(this,e.attr("data-val"))},r=function(t){this.picker&&this.picker.cancel(),this.$el.addClass("show-dropdown")},o=function(t){var e=this;this.t_shortcut&&clearTimeout(this.t_shortcut),"mouseleave"==t.type&&this.$el.is(".show-dropdown")&&(this.t_shortcut=setTimeout(function(){e.t_shortcut=0,e.$el.removeClass("show-dropdown")},1e3))},h=function(t){return!1},u=function(t){return w.call(this,null,null)&&(v.call(this,null,null),b.call(this,null,null,this.getMinDate(),this.getMaxDate())),!1},i=function(t){var e=$(t.currentTarget),i=d.toDate(e.val()),n=e.is(".start")?i:this.getStartDate(),s=e.is(".end")?i:this.getEndDate();w.call(this,n,s),v.call(this,n,s)},n=function(t,e){c._baseRender.call(this,t,e)},p=n.prototype=new c._baseRender(!1);p.render=function(t,e){c._baseRender.render.call(this,t,e),e.addClass("ui-daterange");var i=this.options||{};d.isTrue(i.dropdown)&&e.addClass("tools-dropdown"),d.isTrue(i.native)&&e.attr("opt-native","1");var n=d.toDate(i.min);n&&e.attr("opt-min",d.toDateString(n,"yyyy-MM-dd"));var s=d.toDate(i.max);s&&e.attr("opt-max",d.toDateString(s,"yyyy-MM-dd"));var a=d.toDate(i.start),r=null;a&&(r=d.toDate(i.end)||new Date(a.getTime()),n&&I(n)>I(a)&&(a=n),s&&I(s)<I(r)&&(r=s),I(a)>I(r)&&(a=r=null));var o=parseInt(i.quickDef)||0;return a&&r?o=0:o&&(r=new Date,(a=new Date).setDate(a.getDate()-o)),a&&r&&(e.addClass("has-val"),e.attr("data-start",d.toDateString(a,"yyyy-MM-dd")),e.attr("data-end",d.toDateString(r,"yyyy-MM-dd"))),f.call(this,t,e,this.getShortcutDates(),o),m.call(this,t,e,a,r),this},p.getDateFormat=function(){return this.options.dateFormat||this.options.format},p.getShortcutDates=function(){return this.options.shortcuts||this.options.quickDates};var f=function(n,t,e,s){if(t.removeClass("has-tools").children(".tools").remove(),(e=x(e))&&0<e.length){t.addClass("has-tools");var i=n("<div class='tools'></div>").prependTo(t);i.append("<span class='label'>选择日期</span>");var a=n("<div class='items'></div>").appendTo(i);d.each(e,function(t){var e=parseInt(t.value)||0,i=n("<div class='item'></div>").appendTo(a);i.attr("data-val",e),i.text(d.isBlank(t.label)?"最近"+e+"天":t.label),e==s&&i.addClass("selected")})}},m=function(t,e,i,n){var s=t("<div class='ipt'></div>").appendTo(e),a=t("<input type='text' readonly='readonly'/>").appendTo(s);s.append("<span class='clear'></span>");var r=this.options.prompt;d.isNotBlank(r)&&t("<span class='prompt'></span>").appendTo(s).text(r);var o=this.getDateFormat();a.val(D(i,n,o)||""),!l&&o&&(d.isFunction(o)?e.write("<div class='format format-fn'>"+escape(o)+"</div>"):e.write("<div class='format'>"+o+"</div>"))},g=function(){var t=$("<input class='origin-dateipt start' type='date'/>").appendTo(this.inputTag),e=$("<input class='origin-dateipt end' type='date'/>").appendTo(this.inputTag);b.call(this,this.getStartDate(),this.getEndDate(),this.getMinDate(),this.getMaxDate()),t.on("change",i.bind(this)),e.on("change",i.bind(this))},v=function(t,e){var i=this.$el.children(".tools");if(i&&0<i.length){var n=i.children(".label").text("选择日期"),s=i.find(".item").removeClass("selected");if(t&&e&&0==d.getDays(e,new Date))for(var a=d.getDays(e,t)+1,r=0,o=s.length;r<o;r++){var l=s.eq(r);if(l.attr("data-val")==a){l.addClass("selected"),n.text(l.text());break}}}},b=function(i,n,s,a){var r=this;d.debounce("daterange_renderpicker-"+this.getViewId(),function(){if(r._isRenderAsApp()&&r.isNative()){var t=r.inputTag.children(".origin-dateipt.start"),e=r.inputTag.children(".origin-dateipt.end");t.val(i?d.toDateString(i,"yyyy-MM-dd"):""),e.val(n?d.toDateString(n,"yyyy-MM-dd"):""),s=s?d.toDateString(s,"yyyy-MM-dd"):"",a=a?d.toDateString(a,"yyyy-MM-dd"):"",t.attr("min",s).attr("max",a),e.attr("min",s).attr("max",a)}else r.picker&&(r.picker.setMinDate(s),r.picker.setMaxDate(a),r.picker.setDate(i,n))})},y=function(){var t=this;if(!this.picker){var e={range:!0};e.target=$("<div class='picker'></div>").appendTo(this.inputTag),e.min=this.getMinDate(),e.max=this.getMaxDate(),e.start=this.getStartDate(),e.end=this.getEndDate(),this.picker=c.datepicker.create(e),this.picker.on("submit",function(t,e){_.call(this);var i=e&&e[0]||null,n=e&&e[1]||null;w.call(this,i,n)&&v.call(this,i,n)}.bind(this)),this.picker.on("cancel",function(t){_.call(this)}.bind(this)),this._isRenderAsApp()||this.picker.on("pre-change",function(t,e){var i=e&&e[0]?new Date(e[0]):null,n=e&&e[1]?new Date(e[1]):null;w.call(this,i,n||i)&&v.call(this,i,n||i),this.picker.setDate(i,n),i&&n&&_.call(this)}.bind(this))}if(!this.$el.is(".show-picker")){var i=this.$el.addClass("show-picker");if(this._isRenderAsApp())$("html, body").addClass("ui-scrollless"),this.inputTag.children(".picker").on("tap",function(t){_.call(this),this.picker&&this.picker.cancel()}.bind(this));else{var n=this.inputTag.children(".picker");n.off("click").on("click",function(){return!1}),setTimeout(function(){$("body").on("click."+t.getViewId(),function(){t.picker.cancel()})});var s=d.offset(n,this._getScrollContainer(),0,n[0].scrollHeight);s.isOverflowX&&i.addClass("show-right"),s.isOverflowY&&i.addClass("show-before")}setTimeout(function(){i.addClass("animate-in")})}},_=function(){$("body").off("click."+this.getViewId());var t=this.$el.addClass("animate-out");this._isRenderAsApp()&&($("html, body").removeClass("ui-scrollless"),this.$el.children(".picker").off("tap")),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before").removeClass("show-right"),t.removeClass("animate-in").removeClass("animate-out")},300)},w=function(t,e){var i=this._snapshoot(),n=this.inputTag.find("input");return t&&e?(this.$el.addClass("has-val"),this.$el.attr("data-start",d.toDateString(t,"yyyy-MM-dd")),this.$el.attr("data-end",d.toDateString(e,"yyyy-MM-dd")),n.val(D(t,e,this.getDateFormat())||"")):(this.$el.removeClass("has-val"),this.$el.attr("data-start","").attr("data-end",""),n.val("")),i.done()},T=function(t){if(0<(t=parseInt(t)||0)){var e=new Date,i=new Date;e.setDate(e.getDate()-t+1),w.call(this,e,i)&&b.call(this,e,i,this.getMinDate(),this.getMaxDate())}},C=function(t,e){return d.isFunction(e)?e(t):(d.isBlank(e)&&(e="yyyy-MM-dd"),d.toDateString(t,e))},x=function(t){var e=[];return d.each(d.toArray(t),function(t){d.isNotBlank(t)&&("object"!==_typeof(t)&&(t={value:t}),t.value=parseInt(t&&t.value)||0,0<t.value&&e.push(t))}),e},D=function(t,e,i){return t&&e?C(t,i)+" 至 "+C(e,i):""},I=function(t){return t instanceof Date?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};l?(window.UIDateRange=t,c.init(".ui-daterange",t,n)):module.exports=n}}("undefined"!=typeof window),function(l){if(!l||!VRender.Component.ui.datetime){var f=l?VRender.Component.ui:require("../../static/js/init"),e=f.fn,c=f.util,t=f.datetime=function(t,e){return f._base.call(this,t,e)},i=t.prototype=new f._base(!1);i.init=function(t,e){f._base.init.call(this,t,e);var i=this.inputTag=this.$el.children(".ipt");i.on("tap",n.bind(this)),i.on("tap",".clear",s.bind(this)),this.$el.on("change",".picker",function(t){return!1})},i.val=function(t,e){return c.isNull(t)?this.getDate(e&&e.format||"yyyy-MM-dd HH:mm:ss"):(this.setDate(t),this)},i.getDate=function(t){var e=c.toDate(parseInt(this.$el.attr("data-dt")));return e&&c.isNotBlank(t)?c.toDateString(e,t):e},i.setDate=function(t){var e=t?c.toDate(t):null;T.call(this,e),this.picker&&b.call(this,this.picker,e)},i.getMinDate=function(){return c.toDate(parseInt(this.$el.attr("opt-min")))},i.setMinDate=function(t){var e=c.toDate(t);(e=e&&e.getTime()||"")!=this.$el.attr("opt-min")&&(this.$el.attr("opt-min",e),h.call(this))},i.getMaxDate=function(){return c.toDate(parseInt(this.$el.attr("opt-max")))},i.setMaxDate=function(t){var e=c.toDate(t);(e=e&&e.getTime()||"")!=this.$el.attr("opt-max")&&(this.$el.attr("opt-max",e),h.call(this))},i.getDateFormat=function(){var t=this.options;if(t.hasOwnProperty("dateFormat"))return t.dateFormat;if(t.hasOwnProperty("format"))return t.format;var e=this.$el.children(".format");return e&&0<e.length&&(t.dateFormat=e.text()||null,t.dateFormat&&e.is(".format-fn")&&(t.dateFormat=unescape(t.dateFormat),t.dateFormat="var Utils=VRender.Utils;return ("+t.dateFormat+");",t.dateFormat=new Function(t.dateFormat)()),e.remove()),t.dateFormat},i.setDateFormat=function(t){this.options.dateFormat=t,this.$el.children(".format").remove(),T.call(this,this.getDate())},i.getPrompt=function(){return this.inputTag.children(".prompt").text()},i.setPrompt=function(t){this.inputTag.children(".prompt").remove(),c.isNotNull(t)&&(t=c.trimToEmpty(t),$("<span class='prompt'></span>").appendTo(this.inputTag).text(t))},i.isSecondVisible=function(){return this.options.hasOwnProperty("showSecond")||(this.options.showSecond=!!this.$el.attr("opt-sec")),c.isTrue(this.options.showSecond)},i.setSecondVisible=function(t){(t=!!c.isNull(t)||c.isTrue(t))!=this.isSecondVisible()&&(this.options.showSecond=t,d.call(this))},i.getHours=function(){this.options.hasOwnProperty("hours")||(this.options.hours=this.$el.attr("opt-hours"));var t=e.getIntValues(this.options.hours,0,23);return t&&0<t.length?t:c.map(new Array(24),function(t,e){return e})},i.setHours=function(t){this.options.hours=t,h.call(this)},i.getMinutes=function(){this.options.hasOwnProperty("minutes")||(this.options.minutes=this.$el.attr("opt-minutes"));var t=e.getIntValues(this.options.minutes,0,59);return t&&0<t.length?t:c.map(new Array(60),function(t,e){return e})},i.setMinutes=function(t){this.options.minutes=t,h.call(this)},i.getSeconds=function(){this.options.hasOwnProperty("seconds")||(this.options.seconds=this.$el.attr("opt-seconds"));var t=e.getIntValues(this.options.seconds,0,59)
;return t&&0<t.length?t:c.map(new Array(60),function(t,e){return e})},i.setSeconds=function(t){this.options.seconds=t,h.call(this)},i._snapshoot_shoot=function(t,e){t.data=e||this.getDate()},i._snapshoot_compare=function(t,e){return(e=e||this.getDate())&&t.data?e.getTime()==t.data.getTime():e==t.data},i.rerender=function(){d.call(this)};var n=function(t){m.call(this)},s=function(t){return T.call(this,null),this.picker&&(b.call(this,this.picker,null),w.call(this)),!1},a=function(t){var n=this;if("touchstart"==t.type)this.t_touchend&&clearTimeout(this.t_touchend),this.t_touchend=null;else if("touchend"==t.type&&this.beScrolled){this.beScrolled=!1;var e=v.call(this,this.picker),s=e&&e.getTime()||0;!function i(){n.t_touchend=setTimeout(function(){n.t_touchend=null;var t=v.call(n,n.picker),e=t&&t.getTime()||0;s==e?y.call(n,n.picker,t):(s=e,i())},200)}()}},r=function(t,e){f._baseRender.call(this,t,e)},o=r.prototype=new f._baseRender(!1);o.render=function(t,e){f._baseRender.render.call(this,t,e),e.addClass("ui-datetime");var i=this.options||{};e.attr("opt-box",i.container),this.isSecondVisible()&&e.attr("opt-sec","1");var n=c.toDate(i.min);e.attr("opt-min",n?n.getTime():null);var s=c.toDate(i.max);return e.attr("opt-max",s?s.getTime():null),c.isArray(i.hours)&&e.attr("opt-hours",i.hours.join(",")||null),c.isArray(i.minutes)&&e.attr("opt-minutes",i.minutes.join(",")||null),c.isArray(i.seconds)&&e.attr("opt-seconds",i.seconds.join(",")||null),u.call(this,t,e,i.date),this},o.isSecondVisible=function(){return c.isTrue(this.options.showSecond)},o.getDateFormat=function(){return this.options.dateFormat||this.options.format};var d=function(){var t=this;c.debounce("datetime_render-"+this.getViewId(),function(){T.call(t,t.getDate()),t.picker&&p.call(t,t.picker.empty())})},h=function(){var t=this;this.picker&&c.debounce("datetime_render-"+this.getViewId(),function(){p.call(t,t.picker.empty())})},u=function(t,e,i){var n=t("<div class='ipt'></div>").appendTo(e),s=t("<input type='text' readonly='readonly'/>").appendTo(n);n.append("<span class='clear'></span>");var a=this.options.prompt;c.isNotBlank(a)&&t("<span class='prompt'></span>").appendTo(n).text(a);var r=this.getDateFormat();if(i=c.toDate(i)){var o=this.isSecondVisible();i.setMilliseconds(0),o||i.setSeconds(0),e.addClass("has-val").attr("data-dt",i.getTime()),s.val(x(i,this.getDateFormat(),o))}!l&&r&&(c.isFunction(r)?e.write("<div class='ui-hidden format format-fn'>"+escape(r)+"</div>"):e.write("<div class='ui-hidden format'>"+r+"</div>"))},p=function(t){if(this._isRenderAsApp()){var n=$("<div class='cols'></div>").appendTo(t),e=function(t,e){var i=$("<div class='col'></div>").appendTo(n);i.addClass(t),c.each(e,function(t){$("<div class='item'></div>").appendTo(i).text(t)})};e("year",D.call(this)),e("month",I.call(this)),e("day",[]),e("hour",this.getHours()),e("minute",this.getMinutes()),this.isSecondVisible()&&e("second",this.getSeconds())}else{f.datepicker.create({target:t,min:this.getMinDate(),max:this.getMaxDate()});var i=$("<div class='timebar'></div>").appendTo(t);f.select.create({target:i,name:"hour",data:this.getHours()});i.append("<span class='tip'>时</span>");f.select.create({target:i,name:"minute",data:this.getMinutes()});if(i.append("<span class='tip'>分</span>"),this.isSecondVisible()){f.select.create({target:i,name:"second",data:this.getSeconds()});i.append("<span class='tip'>秒</span>")}}var s=this.getDate();_.call(this,t,s?s.getFullYear():null,s?s.getMonth()+1:null),b.call(this,t,s),w.call(this,t)},m=function(){var t=this;if(this.picker||(this.picker=$("<div class='picker'></div>").appendTo(this.$el),p.call(this,this.picker)),!this.$el.is(".show-picker")){var e=this.$el.addClass("show-picker"),i=this.picker;if(this._isRenderAsApp())$("html,body").addClass("ui-scrollless"),i.on("tap",function(t){$(t.target).is(".picker")&&g.call(this)}.bind(this)),i.on("touchstart",a.bind(this)),i.on("touchend",a.bind(this)),i.find(".col").on("scroll",function(t){this.beScrolled=!0;var e=$(t.currentTarget),i=e.children(),n=i.eq(0).height(),s=e.scrollTop(),a=parseInt(s/n);0<a&&s%n<n/2&&(a-=1);var r=i.eq(a);if(!r.is(".selected")){if(i.filter(".selected").removeClass("selected"),r.addClass("selected"),e.is(".year, .month")){var o=parseInt(this.picker.find(".col.year .selected").text()),l=parseInt(this.picker.find(".col.month .selected").text());_.call(this,this.picker,o,l)}w.call(this,this.picker);var c=v.call(this,this.picker);T.call(this,C.call(this,c))}}.bind(this));else i.on("change",function(t){var e=v.call(this,this.picker);return T.call(this,C.call(this,e)),w.call(this,this.picker),!1}.bind(this)),i.off("click").on("click",function(t){var e=$(t.target),i=this.$el.find(".timebar"),n=i.children("[name=hour]"),s=i.children("[name=minute]"),a=i.children("[name=second]");return 0<n.length&&0==n.find(e).length&&UISelect.instance(n)._hideDropdown(),0<s.length&&0==s.find(e).length&&UISelect.instance(s)._hideDropdown(),0<a.length&&0==a.find(e).length&&UISelect.instance(a)._hideDropdown(),!1}.bind(this)),setTimeout(function(){$("body").on("click."+t.getViewId(),function(){g.call(t)})}),c.offset(i,this._getScrollContainer(),0,i[0].scrollHeight).isOverflowY&&e.addClass("show-before");y.call(this,i,this.getDate()),setTimeout(function(){e.addClass("animate-in")})}},g=function(){var t=this.$el.addClass("animate-out");this._isRenderAsApp()?($("html,body").removeClass("ui-scrollless"),this.picker.off("tap").off("touchstart").off("touchend"),this.picker.find(".col").off("scroll")):($("body").off("click."+this.getViewId()),this.picker.off("change")),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},v=function(t){if(this._isRenderAsApp()){var e=t.children(".cols"),i=parseInt(e.children(".year").find(".selected").text())||0,n=parseInt(e.children(".month").find(".selected").text())||1,s=parseInt(e.children(".day").find(".selected").text())||1,a=parseInt(e.children(".hour").find(".selected").text())||0,r=parseInt(e.children(".minute").find(".selected").text())||0,o=parseInt(e.children(".second").find(".selected").text())||0;return new Date(i,n-1,s,a,r,o)}var l=f.datepicker.find(t)[0];if(!l)return null;var c=l.getDate();if(c){var d=VRender.Component,h=d.get(t.find("[name=hour]"));c.setHours(parseInt(h.getSelectedKey())||0);var u=d.get(t.find("[name=minute]"));if(c.setMinutes(parseInt(u.getSelectedKey())||0),this.isSecondVisible()){var p=d.get(t.find("[name=second]"));c.setSeconds(parseInt(p.getSelectedKey())||0)}}return c},b=function(t,e){if(this._isRenderAsApp()){var s=t.children(".cols");s.find(".selected").removeClass("selected");var i=function(t,e){var i=s.children("."+t),n=c.find(i.children(),function(t){return t.text()==e});n&&0<n.length&&n.addClass("selected")};e?(i("year",e.getFullYear()),i("month",e.getMonth()+1),i("day",e.getDate()),i("hour",e.getHours()),i("minute",e.getMinutes()),i("second",e.getSeconds())):i("year",(new Date).getFullYear())}else{var n=VRender.Component,a=f.datepicker.find(t)[0];a&&a.setDate(e);var r=n.get(t.find("[name=hour]"));r&&r.setSelectedKey(e?e.getHours():"");var o=n.get(t.find("[name=minute]"));o&&o.setSelectedKey(e?e.getMinutes():"");var l=n.get(t.find("[name=second]"));l&&l.setSelectedKey(e?e.getSeconds():"")}},y=function(t,e){function i(t,e){var i=a.children("."+t),n=c.find(i.children(),function(t){return t.text()==e});if(n&&0<n.length){var s=(n.index()+1)*n.height();i.scrollTop(s)}}var a=t.children(".cols");e?(i("year",e.getFullYear()),i("month",e.getMonth()+1),i("day",e.getDate()),i("hour",e.getHours()),i("minute",e.getMinutes()),i("second",e.getSeconds())):(a.children().scrollTop(0),i("year",(new Date).getFullYear()))},_=function(t,e,i){e||(e=(new Date).getFullYear());var n=A.call(this,e,i),s=t.find(".col.day"),a=s.find(".selected").text();s.empty(),c.each(n,function(t){var e=$("<div class='item'></div>").appendTo(s).text(t);t==a&&e.addClass("selected")})},w=function(t){},T=function(t){var e=this._snapshoot();if(t){this.$el.addClass("has-val").attr("data-dt",t.getTime());var i=this.isSecondVisible(),n=x(t,this.getDateFormat(),i);this.inputTag.find("input").val(n)}else this.$el.removeClass("has-val").attr("data-dt",""),this.inputTag.find("input").val("");e.done()},C=function(t){if(t){var e=t.getTime(),i=this.getMinDate();i&&i.getTime()>e&&(e=i.getTime(),t=new Date(e));var n=this.getMaxDate();n&&n.getTime()<e&&(e=n.getTime(),t=new Date(e))}return t||null},x=function(t,e,i){return t?c.isFunction(e)?e(t):(c.isBlank(e)&&(e=i?"yyyy-MM-dd HH:mm:ss":"yyyy-MM-dd HH:mm"),c.toDateString(t,e)):""},D=function(){for(var t=(new Date).getFullYear()+100,e=[],i=0;i<200;i++)e.push(t--);return e},I=function(){return[1,2,3,4,5,6,7,8,9,10,11,12]},A=function(t,e){var i=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28];return 2==e?(t%400==0||t%4==0&&t%100!=0)&&i.push(29):(i.push(29),i.push(30),0<=[1,3,5,7,10,12].indexOf(e)&&i.push(31)),i};l?(window.UIDateTime=t,f.init(".ui-datetime",t,r)):module.exports=r}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.timeinput){var n=t?VRender.Component.ui:require("../../static/js/init"),i=n.fn,g=n.util,e=n.timeinput=function(t,e){return n._base.call(this,t,e)},s=e.prototype=new n._base(!1);s.init=function(t,e){n._base.init.call(this,t,e);var i=this.inputTag=this.$el.children(".ipt");i.on("tap",a.bind(this)),i.on("tap",".clear",r.bind(this)),this._isRenderAsApp()||this.$el.on("tap",".picker .item",c.bind(this))},s.val=function(t){return g.isNull(t)?this.getTime():(this.setTime(t),this)},s.getTime=function(){return this.$el.attr("data-t")||""},s.setTime=function(t){var e=x(t,this.isSecondVisible());m.call(this,e),this.picker&&f.call(this,this.picker.empty())},s.getMinTime=function(){return this.$el.attr("opt-min")||""},s.setMinTime=function(t){var e=x(t,!0);this.$el.attr("opt-min",e),this.picker&&T.call(this,this.picker)},s.getMaxTime=function(){return this.$el.attr("opt-max")||""},s.setMaxTime=function(t){var e=x(t,!0);this.$el.attr("opt-max",e),this.picker&&T.call(this,this.picker)},s.isSecondVisible=function(){return this.options.hasOwnProperty("showSecond")||(this.options.showSecond=!!this.$el.attr("opt-sec")),g.isTrue(
this.options.showSecond)},s.setSecondVisible=function(t){(t=!!g.isNull(t)||g.isTrue(t))!=this.isSecondVisible()&&(this.options.showSecond=t,rerender.call(this))},s.isUse12Hour=function(){return this.options.hasOwnProperty("use12Hour")||(this.options.use12Hour=!!this.$el.attr("opt-h12")),g.isTrue(this.options.use12Hour)},s.setUse12Hour=function(t){(t=!!g.isNull(t)||g.isTrue(t))!=this.isUse12Hour()&&(this.options.use12Hour=t,rerender.call(this))},s.getHours=function(){this.options.hasOwnProperty("hours")||(this.options.hours=this.$el.attr("opt-hours"));var t=this.isUse12Hour(),e=i.getIntValues(this.options.hours,0,t?11:23);return e&&0<e.length?e:g.map(new Array(t?12:24),function(t,e){return e})},s.setHours=function(t){this.options.hours=t,f.call(this)},s.getMinutes=function(){this.options.hasOwnProperty("minutes")||(this.options.minutes=this.$el.attr("opt-minutes"));var t=i.getIntValues(this.options.minutes,0,59);return t&&0<t.length?t:g.map(new Array(60),function(t,e){return e})},s.setMinutes=function(t){this.options.minutes=t,f.call(this)},s.getSeconds=function(){this.options.hasOwnProperty("seconds")||(this.options.seconds=this.$el.attr("opt-seconds"));var t=i.getIntValues(this.options.seconds,0,59);return t&&0<t.length?t:g.map(new Array(60),function(t,e){return e})},s.setSeconds=function(t){this.options.seconds=t,f.call(this)},s.isReadonly=function(){return 1==this.$el.attr("opt-readonly")},s.setReadonly=function(t){g.isNull(t)||g.isTrue(t)?this.$el.attr("opt-readonly","1"):this.$el.removeAttr("opt-readonly")},s.getPrompt=function(){return this.inputTag.find(".prompt").text()},s.setPrompt=function(t){this.inputTag.find(".prompt").remove(),g.isNotBlank(t)&&$("<span class='prompt'></span>").appendTo(this.inputTag).text(t)},s._snapshoot_shoot=function(t){t.data=this.getTime()},s._snapshoot_compare=function(t){return t.data==this.getTime()},s.rerender=function(){var t=this;g.debounce("timeinput_render-"+this.getViewId(),function(){m.call(t,t.getTime()),t.picker&&p.call(t,t.picker.empty())})};var a=function(t){this.isReadonly()||v.call(this)},r=function(t){return m.call(this,null),this.picker&&w.call(this,this.picker,""),!1},o=function(t){i.mouseDebounce(t,b.bind(this))},l=function(t){var i=this;if("touchstart"==t.type)this.t_touchend&&clearTimeout(this.t_touchend),this.t_touchend=null;else if("touchend"==t.type&&this.beScrolled){this.beScrolled=!1;var n=_.call(this,this.picker);!function e(){i.t_touchend=setTimeout(function(){i.t_touchend=null;var t=_.call(i,i.picker);n==t?y.call(i,i.picker,t):(n=t,e())},200)}()}},c=function(t){var e=$(t.currentTarget);if(!e.is(".selected")){e.addClass("selected").siblings().removeClass("selected"),T.call(this,this.picker);var i=_.call(this,this.picker);return m.call(this,C.call(this,i)),!1}},d=function(t,e){n._baseRender.call(this,t,e)},h=d.prototype=new n._baseRender(!1);h.render=function(t,e){n._baseRender.render.call(this,t,e),e.addClass("ui-timeipt");var i=this.options||{};return e.attr("opt-box",i.container),this.isSecondVisible()&&e.attr("opt-sec","1"),this.isUse12Hour()&&e.attr("opt-h12","1"),g.isTrue(i.readonly)&&e.attr("opt-readonly","1"),e.attr("opt-min",x(i.min,!0)||null),e.attr("opt-max",x(i.max,!0)||null),g.isArray(i.hours)&&e.attr("opt-hours",i.hours.join(",")||null),g.isArray(i.minutes)&&e.attr("opt-minutes",i.minutes.join(",")||null),g.isArray(i.seconds)&&e.attr("opt-seconds",i.seconds.join(",")||null),u.call(this,t,e,i.time),this},h.isSecondVisible=function(){return g.isTrue(this.options.showSecond)},h.isUse12Hour=function(){return g.isTrue(this.options.use12Hour)};var u=function(t,e,i){var n=t("<div class='ipt'></div>").appendTo(e),s=t("<input type='text' readonly='readonly'/>").appendTo(n);n.append("<span class='clear'></span>");var a=this.options.prompt;g.isNotBlank(a)&&t("<span class='prompt'></span>").appendTo(n).text(a),(i=x(i,this.isSecondVisible()))&&(s.val(this.isUse12Hour()?D(i):i),e.addClass("has-val").attr("data-t",i))},p=function(t){function e(t,e){var i=$("<div class='col'></div>").appendTo(n);i.addClass(t),g.each(e,function(t){$("<div class='item'></div>").appendTo(i).text(t)})}var n=$("<div class='cols'></div>").appendTo(t);e("hour",this.getHours()),e("minute",this.getMinutes()),this.isSecondVisible()&&e("second",this.getSeconds()),this.isUse12Hour()&&e("apm",["AM","PM"]),w.call(this,t,this.getTime()),T.call(this,t),this._isRenderAsApp()&&n.children(".col").on("scroll",function(t){this.beScrolled=!0;var e=$(t.currentTarget),i=e.children(),n=i.eq(0).height(),s=e.scrollTop(),a=parseInt(s/n);0<a&&s%n<n/2&&(a-=1);var r=i.eq(a);if(!r.is(".selected")){i.filter(".selected").removeClass("selected"),r.addClass("selected"),T.call(this,this.picker);var o=_.call(this,this.picker);m.call(this,C.call(this,o))}}.bind(this))},f=function(){var t=this;this.picker&&g.debounce("timeinput_renderpicker-"+this.getViewId(),function(){p.call(t,t.picker.empty())})},m=function(t){var e=this._snapshoot();this.$el.attr("data-t",t||"");var i=this.inputTag.find("input");t?(t=x(t,this.isSecondVisible()),i.val(this.isUse12Hour()?D(t):t),this.$el.addClass("has-val")):(i.val(""),this.$el.removeClass("has-val")),e.done()},v=function(){if(this.picker||(this.picker=$("<div class='picker'></div>").appendTo(this.$el),p.call(this,this.picker)),!this.$el.is(".show-picker")){var t=this.$el.addClass("show-picker"),e=this.picker;if(this._isRenderAsApp())$("html,body").addClass("ui-scrollless"),e.on("tap",function(t){$(t.target).is(".picker")&&b.call(this)}.bind(this)),e.on("touchstart",l.bind(this)),e.on("touchend",l.bind(this));else t.on("mouseenter",o.bind(this)),t.on("mouseleave",o.bind(this)),g.offset(e,this._getScrollContainer(),0,e[0].scrollHeight).isOverflowY&&t.addClass("show-before");y.call(this,e,this.getTime()),setTimeout(function(){t.addClass("animate-in")})}},b=function(){var t=this.$el.addClass("animate-out");this._isRenderAsApp()?($("html,body").removeClass("ui-scrollless"),this.picker.off("tap").off("touchstart").off("touchend")):t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},y=function(t,e){var a=this._isRenderAsApp(),r=t.children(".cols");if(e){var i=this.isUse12Hour(),n=function(t,e){var i=r.children("."+t),n=g.find(i.children(),function(t){return t.text()==e});if(n&&0<n.length){var s=n.index()*n.height();a&&(s+=n.height()),i.scrollTop(s)}};e=e.split(":");var s=parseInt(e[0])||0;n("hour",11<s&&i?s-12:s),n("minute",parseInt(e[1])||0),n("second",parseInt(e[2])||0),a&&i&&n("apm",s<12?"AM":"PM")}else a&&r.children().scrollTop(0)},_=function(t){var e=t.children(".cols"),i=[],n=parseInt(e.children(".hour").find(".selected").text())||0;this.isUse12Hour()&&"PM"==e.children(".apm").find(".selected").text()&&(n+=12),i.push((n<10?"0":"")+n);var s=parseInt(e.children(".minute").find(".selected").text())||0;if(i.push((s<10?"0":"")+s),this.isSecondVisible()){var a=parseInt(e.children(".second").find(".selected").text())||0;i.push((a<10?"0":"")+a)}return i.join(":")},w=function(t,e){var s=t.children(".cols");if(s.find(".selected").removeClass("selected"),e){var i=function(t,e){var i=s.children("."+t),n=g.find(i.children(),function(t){return t.text()==e});n&&0<n.length&&n.addClass("selected")};e=e.split(":");var n=parseInt(e[0])||0;this.isUse12Hour()&&(i("apm",n<12?"AM":"PM"),11<n&&(n-=12)),i("hour",n),i("minute",parseInt(e[1])||0),this.isSecondVisible()&&i("second",parseInt(e[2])||0)}},T=function(t){var e=t.children(".cols"),i=(this.getMinTime()||"00:00:00").split(":"),n=(this.getMaxTime()||"23:59:59").split(":"),s=parseInt(i[0])||0,a=parseInt(i[1])||0,r=parseInt(i[2])||0,o=parseInt(n[0])||0,l=parseInt(n[1])||0,c=parseInt(n[2])||0,d="PM"==e.children(".apm").find(".selected").text(),h=-1,u=-1,p=1e4*s,f=1e4*o,m=0;g.each(e.children(".hour").children(),function(t){var e=(parseInt(t.text())||0)+(d?12:0),i=m+1e4*e;i<p||f<i?t.addClass("disabled"):t.removeClass("disabled"),t.is(".selected")&&(h=e)}),p+=100*a,f+=100*l,m+=h<0?0:1e4*h,g.each(e.children(".minute").children(),function(t){var e=parseInt(t.text())||0,i=m+100*e;i<p||f<i?t.addClass("disabled"):t.removeClass("disabled"),t.is(".selected")&&(u=e)}),p+=r,f+=c,m+=u<0?0:100*u,g.each(e.children(".second").children(),function(t){t.removeClass("disabled");var e=parseInt(t.text())||0,i=m+e;(i<p||f<i)&&t.addClass("disabled")}),g.each(e.children(".apm").children(),function(t){t.removeClass("disabled"),"AM"==t.text()&&11<s?t.addClass("disabled"):"PM"==t.text()&&o<12&&t.addClass("disabled")})},C=function(t){var e=this.getMinTime();e&&t<e&&(t=e);var i=this.getMaxTime();return i&&i<t&&(t=i),t},x=function(t,e){if(t){t=t.split(":");var i=Math.max(0,parseInt(t[0]))||0,n=Math.max(0,parseInt(t[1]))||0,s=Math.max(0,parseInt(t[2]))||0;59<s&&(n+=parseInt(s/60),s%=60),59<n&&(i+=parseInt(n/60),n%=60),23<i&&(i%=24);var a=[];return a.push((i<10?"0":"")+i),a.push((n<10?"0":"")+n),e&&a.push((s<10?"0":"")+s),a.join(":")}return""},D=function(t){if(t){t=t.split(":");var e=Math.max(0,parseInt(t[0]))||0;return 11<e&&(t[0]=e-12,t[0]<10&&(t[0]="0"+t[0])),I(e)+" "+t.join(":")}return""},I=function(t){return t<6?"凌晨":t<12?"上午":t<14?"中午":t<18?"下午":"晚上"};t?(window.UITimeInput=e,n.init(".ui-timeipt",e,d)):module.exports=d}}("undefined"!=typeof window),function(n){if(!n||!VRender.Component.ui.upload){var s=n?VRender.Component.ui:require("../../static/js/init"),t=s.fn,h=s.util,e=s.upload=function(t,e){return s._base.call(this,t,e)},i=e.prototype=new s._base(!1);i.init=function(t,e){s._base.init.call(this,t,e),this.$el.on("change","input",r.bind(this));var i=this.getBrowser();i&&i.on("click.upload",a.bind(this))},i.browser=function(){this.$el.children("input").click()},i.remove=function(t){h.removeBy(this.files,"localId",t)},i.clear=function(){this.files=[]},i.upload=function(t,e,i){var n=this;return!this.isUploading&&(h.isFunction(t)?(i=t,t=e=null):h.isFunction(e)&&(i=e,e=null),h.isBlank(t)&&(t=this.getAction()),h.isBlank(t)?(y("上传失败：缺少 Action 信息！"),!1):this.files&&0<this.files.length?(this.isUploading=!0,void u.call(this,t,e,function(t,e){n.isUploading=!1,h.isFunction(i)&&i(t,e)})):(h.isFunction(i)&&i("没有文件信息"),!1))},i.cancel=function(){this.isUploading=!1,h.each(this.files,function(t
){t.uploader&&(t.uploader.abort(),t.uploader=null)})},i.isEmpty=function(){return!this.files||0==this.files.length},i.getAction=function(){return this.$el.attr("opt-action")},i.setAction=function(t){this.$el.attr("opt-action",h.trimToEmpty(t))},i.getParams=function(){if(this.options.hasOwnProperty("params"))return this.options.params;var t=null;try{t=JSON.parse(this.$el.attr("opt-params"))}catch(t){}return this.options.params=t,this.options.params},i.setParams=function(t){this.options.params=t,this.$el.removeAttr("opt-params")},i.getUploadName=function(){return h.trimToNull(this.$el.attr("opt-upload"))||"file"},i.setUploadName=function(t){this.$el.attr("opt-upload",h.trimToEmpty(t))},i.getBrowser=function(){if(this.hasOwnProperty("browserBtn"))return this.browserBtn;if(this.options.hasOwnProperty("browser"))return this.options.browser;var t=this.$el.attr("opt-browser");return this.$el.removeAttr("opt-browser"),this.browserBtn=h.isBlank(t)?null:$(t),this.browserBtn},i.setBrowser=function(t){var e=this.getBrowser();e&&e.off("click.upload"),this.browserBtn=h.isBlank(t)?null:t.$el||$(t),this.options.browser=null,this.$el.removeAttr("opt-browser"),initBrowserHandler.call(this,this.browserBtn),this.browserBtn&&this.browserBtn.on("click.upload",a.bind(this))},i.getFilter=function(){return this.$el.attr("opt-filter")},i.setFilter=function(t){this.$el.attr("opt-filter",h.trimToEmpty(t));var e=this.$el.children("input"),i=v.call(this);i?e.attr("accept",i):e.removeAttr("accept")},i.getLimit=function(){return parseInt(this.$el.attr("opt-limit"))||0},i.setLimit=function(t){t&&!isNaN(t)?this.$el.attr("opt-limit",t):this.$el.removeAttr("opt-limit")},i.isMultiple=function(){return"multiple"==this.$el.children("input").attr("multiple")},i.setMultiple=function(t){var e=this.$el.children("input");h.isNull(t)||h.isTrue(t)?e.attr("multiple","multiple"):e.removeAttr("multiple")},i.isAutoUpload=function(){return 1==this.$el.attr("opt-auto")},i.setAutoUpload=function(t){h.isNull(t)||h.isTrue(t)?this.$el.attr("opt-auto","1"):this.$el.removeAttr("opt-auto")},i.isMixed=function(){return 1==this.$el.attr("opt-mixed")},i.setMixed=function(t){h.isNull(t)||h.isTrue(t)?this.$el.attr("opt-mixed","1"):this.$el.removeAttr("opt-mixed")};var a=function(){this.isUploading?y("正在上传，请稍候.."):this.browser()},r=function(t){var e=$(t.currentTarget),i=d.call(this,e[0].files);if(i&&0!=i.length){var n=Date.now(),s="multiple"==e.attr("multiple");if(s){this.files=h.toArray(this.files);for(var a=0;a<i.length;a++)i[a].localId=n++,this.files.push(i[a])}else i[0].localId=n++,this.files=[i[0]];e.remove();var r=$("<input type='file'/>").appendTo(this.$el);s&&r.attr("multiple","multiple"),r.attr("accept",e.attr("accept")),this.trigger("change",this.files),this.isAutoUpload()&&h.isNotBlank(this.getAction())&&this.upload()}},o=function(t,e){s._baseRender.call(this,t,e)},l=o.prototype=new s._baseRender(!1);l.render=function(t,e){s._baseRender.render.call(this,t,e),e.addClass("ui-upload").css("display","none");var i=this.options||{};return e.attr("opt-action",h.trimToNull(i.action)),e.attr("opt-upload",h.trimToNull(i.uploadName)),e.attr("opt-filter",this.getFilter()),e.attr("opt-limit",this.getLimit()||null),e.attr("opt-auto",this.isAutoUpload()?"1":null),e.attr("opt-mixed",this.isMixed()?"1":null),e.attr("opt-browser",this.getBrowser()),c.call(this,t,e),n||i.params&&e.attr("opt-params",JSON.stringify(i.params)),this},l.getBrowser=function(){if(!n){var t=this.options.browser;if(t){if("string"==typeof t)return t;if(h.isFunction(t.getViewId))return"[vid='"+t.getViewId()+"']"}}return null},l.getFilter=function(){return h.trimToNull(this.options.filter)},l.getLimit=function(){return Math.max(0,parseInt(this.options.limit))||0},l.isMultiple=function(){return t.isMultiple.call(this)},l.isAutoUpload=function(){return!this.options.hasOwnProperty("autoUpload")||h.isTrue(this.options.autoUpload)},l.isMixed=function(){return h.isTrue(this.options.mixed)};var c=function(t,e){var i=t("<input type='file'/>").appendTo(e);this.isMultiple()&&i.attr("multiple","multiple"),i.attr("accept",h.trimToNull(v.call(this)))},d=function(t){var i=h.trimToNull(this.getFilter());i&&(i=/image|audio|video|excel|word|powerpoint|text/.test(i)?null:i.split(","));var e=this.getLimit();if(i||0<e)for(var n=0;n<t.length;n++){var s=t[n];if(i){var a=function(){var e=s.name.split(".");if(e=e[e.length-1],h.index(i,function(t){return h.endWith(t,e)})<0)return y("文件类型错误："+s.name),{v:!1}}();if("object"===_typeof(a))return a.v}if(0<e&&e<s.size)return y("允许文件大小上限为："+b(e)),!1}return t},u=function(t,e,i){var n=this,s=0;h.each(this.files,function(t){s+=t.size,t.state=0}),this.totalSize=s,this.totalSend=0;var a=g.call(this,t);p.call(this,a,e,this.files,function(t,e){t?n.trigger("error",t):(n.files=null,n.trigger("success",e)),h.isFunction(i)&&i(t,e)})},p=function(e,n,a,r){function o(t,e){var i=n;return n&&h.isFunction(n.handler)&&(i=n.handler(t,e)),h.extend({},l.getParams(),i)}var l=this;if(1==a.length||this.isMixed()){h.each(a,function(t){t.state=1});var t=o(0,a);f.call(this,e,t,a,function(e,t){var i=[];h.each(a,function(t){t.state=e?3:2,i.push(t.localId)}),(t=t||{}).localId=i.join(","),r(e,t)})}else{var c=[],d=[];!function i(n){if(n<a.length){var s=a[n];if(0==s.state){s.state;var t=o(n,s);f.call(l,e,t,[s],function(t,e){t?(s.state=3,c.push(t)):(s.state=2,e.localId=s.localId,d.push(e)),i(n+1)})}else i(n+1)}else 0==c.length&&(c=null),r(c,d)}(0)}},f=function(s,a,r,o){var l=this,c=m();c?(a=h.extend({},a),function(t,e,i){var n={type:"upload-before"};this.trigger(n,t,e),n.isPreventDefault?i("canceled"):i()}.call(this,r,a,function(t){if(t)o("canceled"==t?"已取消":t);else{(r[0].uploader=c).open("POST",s,!0),c.onload=function(t){(function(t,e,i){e[0].uploader=null,i(e.errorMsg,e.resultMsg)}).call(l,t,r,o)},c.onerror=function(t){(function(t,e,i){e[0].uploader=null,i(t)}).call(l,t,r,o)},c.onreadystatechange=function(t){(function(t,e){var i=e[0].uploader;if(4==i.readyState){var n=i.responseText;if(n)try{n=JSON.parse(n)}catch(t){}200==i.status?e.resultMsg=n||i.responseText:(console.error(i.responseText),e.errorMsg=n||i.responseText||"文件上传失败！")}}).call(l,t,r)},c.upload.onprogress=function(t){(function(t,e){this.totalSend+=t.loaded,this.totalSend>this.totalSize&&(this.totalSend=this.totalSize),this.trigger("progress",e,this.totalSend,this.totalSize)}).call(l,t,r)};var e=new FormData,i=l.getUploadName();for(var n in h.each(r,function(t){e.append(i,t),e.append("filename",t.name)}),a)e.append(n,a[n]);c.send(e)}})):o("当前浏览器版本较低，不支持该上传功能。或者使用其他浏览器（如：chrome）。")},m=function(){return window.XMLHttpRequest?new XMLHttpRequest:!!window.ActiveXObject&&new ActiveXObject("Microsoft.XMLHTTP")},g=function(t){return/^(\/|http)/.test(t)?t:"/upload?n="+t},v=function(){var t=this.getFilter();if(t){if("image"==t)return"image/*";if("audio"==t)return"audio/*";if("video"==t)return"video/*";if("excel"==t)return"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";if("word"==t)return"application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document";if("powerpoint"==t)return"application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation";if("text"==t)return"text/*"}return t},b=function(t){return(t=parseInt(t))&&0<t?t<1024?t+"B":(t/=1024)<1024?t.toFixed(2)+"KB":(t/=1024)<1024?t.toFixed(2)+"MB":(t/=1024)<1024?t.toFixed(2)+"GB":(t/=1024).toFixed(2)+"TB":""},y=function(t,e){s.message.create({type:"danger",content:t,duration:e})};n?(window.UIUpload=e,s.init(".ui-upload",e,o)):module.exports=o}}("undefined"!=typeof window),function(o){if(!o||!VRender.Component.ui.form){var l=o?VRender.Component.ui:require("../../static/js/init"),d=l.fn,h=l.util,e="vertical",i="horizontial",t=l.form=function(t,e){return l._base.call(this,t,e)},n=t.prototype=new l._base(!1);n.init=function(t,e){l._base.init.call(this,t,e),this.$el.children(".btnbar").on("tap",".ui-btn",s.bind(this)),this.$el.on("keydown",".form-item > .content > dd > div > *",a.bind(this)),this.$el.on("focusout",".form-item > .content > dd > div > *",r.bind(this)),this.$el.on("change",".form-item > .content > dd > div > *",p.bind(this)),this.$el.on("keydown",".ui-input > .ipt > *",c.bind(this)),this.$el.on("focusout",".ui-input > .ipt > *",u.bind(this)),this._isRenderAsApp()||(this.$el.on("mouseenter",".form-item > .content > dd > div > *",f.bind(this)),this.$el.on("mouseleave",".form-item > .content > dd > div > *",f.bind(this)))},n.validate=function(e,n){var t=this;h.isFunction(e)&&(n=e,e=null);var i=this._getItems();e&&(i=h.filter(i,function(t){return t.attr("name")==e}));var s=[],a=i.length;h.each(i,function(e,i){w.call(t,e,null,function(t){t&&s.push({index:i,name:e.attr("name"),message:t}),(a-=1)<=0&&h.isFunction(n)&&n(0<s.length&&s)})})},n.submit=function(r,o){var l=this;if(this.$el.is(".is-loading"))return!1;h.isFunction(r)&&(o=r,r=null),h.isBlank(r)&&(r=this.getAction()),this.$el.addClass("is-loading");var c=this.$el.find(".btnbar .is-submit .ui-btn");h.each(c,function(t){VRender.Component.get(t).waiting()});function e(t,e,i){l.$el.removeClass("is-loading"),h.each(c,function(t){VRender.Component.get(t).waiting(0)});var n=null;if(h.isFunction(o)&&(n=o(t,e,i)),r){var s={type:"action_after"};l.trigger(s,t,e,i),s.isPreventDefault&&(n=!1)}if(!1!==n&&t){var a="";a=h.isArray(t)?h.map(t,function(t){return t.message}).join("；"):t.msg||t,new UIMessage({type:"error",content:a})}return!1}this.validate(function(t){!t&&r?L.call(l,r,e):e(t)})},n.add=function(t,e,i){var n=this.$el.children(".items"),s=$("<div class='form-item'></div>").appendTo(n);s.attr("name",h.trimToNull(t));var a=$("<dl class='content'></dl>").appendTo(s),r=$("<dt></dt>").appendTo(a);if(r.text(h.trimToEmpty(e)),r.css("width",h.trimToEmpty(this.getLabelWidth())),a.append("<dd><div></div></dd>"),0<=(i=h.getIndexValue(i))){var o=n.children();i<o.length-1&&o.eq(i).before(s)}return new q(this,s)},n.get=function(e){if(h.isBlank(e))return null;var t=h.find(this._getItems(),function(t){return t.attr("name")==e});return t?new q(this,t):null},n.getAt=function(t){if(0<=(t=h.getIndexValue(t))){var e=this._getItems().eq(t);return e?new q(this,e):null}return null},n.getView=function(t){var e=this.get(t)
;return e&&e.getContentView()||null},n.delete=function(e){if(h.isBlank(e))return null;var t=h.find(this._getItems(),function(t){return t.attr("name")==e});return t&&t.remove(),t},n.deleteAt=function(t){if(0<=(t=h.getIndexValue(t))){var e=this._getItems().eq(t);return e&&e.remove(),e}return null},n.getFormData=function(s){var a={};return a=h.extend(a,this.getParams()),h.each(this._getItems(),function(t){var e=t.attr("name");if(!h.isBlank(e)){var i=t.children(".content").children("dd").children().children();if(i.is("input, textarea"))a[e]=i.val()||"";else{var n=VRender.Component.get(i)||VRender.FrontComponent.get(i);n?n instanceof l.select?a[e]=n.val():n instanceof l._select?a[e]=n.getSelectedKey():h.isFunction(n.getValue)?a[e]=n.getValue():h.isFunction(n.val)&&(h.isFunction(n.isChecked)&&!n.isChecked()||(a[e]=n.val())):a[e]=i.attr("data-val")}s&&a[e]&&"string"==typeof a[e]&&(a[e]=h.trimToEmpty(a[e]))}}),a},n.setFormData=function(a){var r=this;a=a||{},h.each(this._getItems(),function(t){var e=t.attr("name");if(!h.isBlank(e)&&a.hasOwnProperty(e)){var i=a[e],n=t.children(".content").children("dd").children().children();if(n.is("input, textarea"))n.val(h.trimToEmpty(i)),T.call(r,t,n);else{var s=VRender.Component.get(n);s?s instanceof l._select?(s.setSelectedKey(i),I.call(r,t,s)):h.isFunction(s.val)&&(s.val(h.trimToEmpty(i)),w.call(r,t,n)):n.attr("data-val",h.trimToEmpty(i))}}})},n.getColumns=function(){return this._isRenderAsApp()?1:this.options.hasOwnProperty("columns")?parseInt(this.options.columns)||1:(this.options.columns=parseInt(this.$el.attr("opt-cols"))||1,this.$el.removeAttr("opt-cols"),this.options.columns)},n.setColumns=function(t){if(!this._isRenderAsApp()){var i=parseInt(t)||1;i<1&&(i=1),this.options.columns=i,this.$el.removeAttr("opt-cols"),h.each(this._getItems(),function(t){var e=parseInt(t.attr("opt-col"))||1;e<i?t.css("width",(100*e/i).toFixed(6)+"%"):t.css("width","")})}},n.getAction=function(){return this.$el.attr("opt-action")},n.setAction=function(t){this.$el.attr("opt-action",h.trimToEmpty(t))},n.getParams=function(){if(this.options.hasOwnProperty("params"))return this.options.params;var t=null;try{t=JSON.parse(this.$el.attr("opt-params"))}catch(t){}return this.options.params=t,this.options.params},n.setParams=function(t){this.options.params=t,this.$el.removeAttr("opt-params")},n.getMethod=function(){return this.$el.attr("opt-method")},n.setMethod=function(t){this.$el.attr("opt-method",h.trimToEmpty(t))},n.getLabelWidth=function(){if(this.options.hasOwnProperty("labelWidth"))return this.options.labelWidth;var t=this.$el.attr("opt-lw");return this.options.labelWidth=h.getFormatSize(t,this._isRenderAsRem()),this.$el.removeAttr("opt-lw"),this.options.labelWidth},n.setLabelWidth=function(t){this.options.labelWidth=t,this.$el.removeAttr("opt-lw")},n.getLabelAlign=function(){var t=this.$el.attr("opt-la");return/^(center|right)$/.test(t)?t:"left"},n.setLabelAlign=function(t){var e=/^(center|right)$/.test(t)?e:"left";this.options.labelAlign=e,this.$el.attr("opt-la",e)},n.getOrientation=function(){return this.$el.attr("opt-orientate")},n.setOrientation=function(t){e!=t&&i!=t&&(t=this._isRenderAsApp()?e:i),this.$el.removeClass(e),this.$el.removeClass(i),this.$el.addClass(t).attr("opt-orientate",t)},n.setButtons=function(t){_.call(this,$,this.$el,h.toArray(t))},n._getItems=function(){return this.$el.children(".items").children()};var s=function(t){var e=$(t.currentTarget);e.parent().is(".is-submit")&&this.submit();var i=e.attr("name");i&&(this.trigger("btn_"+i),this.trigger("btnclick",i,e))},a=function(t){var e=$(t.currentTarget);if(e.is("input, textarea")){var i=h.parentUntil(e,".form-item");B.call(this,i)}},r=function(t){var e=$(t.currentTarget);if(e.is("input, textarea")){var i=h.parentUntil(e,".form-item");T.call(this,i,e)}},c=function(t){h.parentUntil(t.currentTarget,".form-item").removeClass("is-error")},u=function(t){var e=$(t.currentTarget),i=h.parentUntil(e,".form-item"),n=VRender.Component.get(e.parent().parent());D.call(this,i,n)},p=function(t){var e=$(t.currentTarget);if(!e.is("input, textarea, .ui-input")){var i=h.parentUntil(e,".form-item");w.call(this,i)}},f=function(t){var e=h.parentUntil(t.currentTarget,".form-item");e.is(".is-error")&&(O.call(this,e),"mouseenter"==t.type?e.children(".errmsg").removeClass("animate-out"):P.call(this,e))},m=function(t,e){l._baseRender.call(this,t,e)},g=m.prototype=new l._baseRender(!1);g.render=function(t,e){l._baseRender.render.call(this,t,e),e.addClass("ui-form");var i=this.options||{};v.call(this,t,e);var n=this.getLabelAlign();n&&"left"!=n&&e.attr("opt-la",n),e.attr("opt-action",h.trimToNull(i.action)),e.attr("opt-method",h.trimToNull(i.method));var s=this.getOrientation();if(e.addClass(s).attr("opt-orientate",s),!o){i.params&&e.attr("opt-params",JSON.stringify(i.params));var a=this.getColumns();1<a&&e.attr("opt-cols",a);var r=this.getLabelWidth();r&&e.attr("opt-lw",r)}return this},g.renderData=function(){},g.add=function(t,e,i){var n=h.toArray(this.options.data),s={name:t,label:e};return 0<=(i=h.getIndexValue(i))&&i<n.length?n.splice(i,0,s):n.push(s),this.options.data=n,new z(s)},g.get=function(t){if(h.isBlank(t))return null;var e=h.toArray(this.options.data),i=h.findBy(e,"name",t);return i?new z(i):null},g.getAt=function(t){t=h.getIndexValue(t);var e=h.toArray(this.options.data);return 0<=t&&t<e.length?(e[t]||(e[t]={}),new z(e[t])):null},g.delete=function(t){if(h.isBlank(t))return null;var e=h.toArray(this.options.data),i=h.deleteBy(e,"name",t);return i&&0<i.length?1<i.length?i:i[0]:null},g.deleteAt=function(t){t=h.getIndexValue(t);var e=h.toArray(this.options.data);return 0<=t&&t<e.length?e.splice(t,1)[0]:null},g.getColumns=function(){return this._isRenderAsApp()?1:parseInt(this.options.columns)||1},g.getLabelWidth=function(){return this.hasOwnProperty("labelWidth")||(this.labelWidth=h.getFormatSize(this.options.labelWidth,this._isRenderAsRem())),this.labelWidth},g.getLabelAlign=function(){if(!this.hasOwnProperty("labelAlign")){var t=this.options.labelAlign;this.labelAlign=/^(left|right|center)$/.test(t)?t:null}return this.labelAlign},g.getOrientation=function(){var t=this.options.orientation;return e==t||i==t?t:this._isRenderAsApp()?e:i};var v=function(t,e){b.call(this,t,e,this.options.data),_.call(this,t,e,this.options.buttons)},b=function(n,s,t){var a=this,r=s.children(".items").empty();r&&0!=r.length||(r=n("<div class='items'></div>").appendTo(s));var o=this.getColumns();h.each(h.toArray(t),function(t){var e=n("<div class='form-item'></div>").appendTo(r);y.call(a,n,s,e,t);var i=parseInt(t.colspan)||1;e.attr("opt-col",i),1<o&&i<o&&e.css("width",(100*i/o).toFixed(6)+"%")})},y=function(t,e,i,n){h.isNotBlank(n.name)&&i.attr("name",n.name),h.isTrue(n.required)&&i.attr("opt-required","1");var s=h.trimToNull(n.emptyMsg||n.empty);s&&i.attr("opt-empty",s),h.isNotNull(n.visible)&&!h.isTrue(n.visible)&&i.attr("opt-hide","1");var a=t("<dl class='content'></dl>").appendTo(i),r=t("<dt></dt>").appendTo(a);r.text(h.trimToEmpty(n.label));var o=this.getLabelWidth();o&&r.css("width",o);var l=t("<dd></dd>").appendTo(a);l=t("<div></div>").appendTo(l),!n.top&&0!==n.top||l.css("paddingTop","0px");var c=n.content;c&&(h.isFunction(c.render)?c.render(l):c.hasOwnProperty("$el")?l.append(c.$el):l.append(c)),d.renderFunction.call(this,i,"validator",n.validator)},_=function(i,t,e){var n=this;if(t.children(".btnbar").remove(),e&&0<e.length){var s=i("<div class='btnbar'></div>").appendTo(t),a=this.getLabelWidth();a&&!this._isRenderAsApp()&&s.css("paddingLeft",a),h.each(e,function(t){var e=i("<div></div>").appendTo(s);("submit"==t.type&&e.addClass("is-submit"),o)?new l.button(h.extend({},t,{target:e})):new(require("../button/index"))(n.context,t).render(e)})}},w=function(t,e,i){if(1==t.attr("opt-hide"))return h.isFunction(i)?i(!1):null;e||(e=t.children(".content").children("dd").children().children()),e.is("input, textarea")?T.call(this,t,e,i):(e=VRender.Component.get(e)||VRender.FrontComponent.get(e)||e)instanceof l.input?D.call(this,t,e,i):e instanceof l.dateinput?F.call(this,t,e,i):e instanceof l.datetime?S.call(this,t,e,i):e instanceof l.daterange?k.call(this,t,e,i):e instanceof l.select?A.call(this,t,e,i):e instanceof l._select?I.call(this,t,e,i):h.isFunction(e.validate)?x.call(this,t,e,i):h.isFunction(e.getValue)?C.call(this,t,e,e.getValue(),i):h.isFunction(e.val)?C.call(this,t,e,e.val(),i):h.isFunction(i)&&i(!1)},T=function(t,e,i){N.call(this,t,e.val(),i)},C=function(t,e,i,n){N.call(this,t,i,n)},x=function(t,e,i){i||(i=function(){});var n=setTimeout(function(){n=0,i("组件 validate() 方法调用时间超长，请检测 validate((err) => {}) 方法使用是否正确！！")},5e3),s={name:t.attr("name"),label:t.children(".content").children("dt").text()},a=e.validate(this,s,function(t){n&&(clearTimeout(n),n=0,i(t))});void 0!==a&&(clearTimeout(n),!(n=0)===a?i():i(a||"表单错误！"))},D=function(e,i,n){var s=this;i.validate(function(t){i.hasError()?(e.addClass("is-error"),e.children(".errmsg").remove(),h.isFunction(n)&&n(t)):(e.removeClass("is-error"),N.call(s,e,i.val(),n))})},I=function(t,e,i){N.call(this,t,e.getSelectedKey(),i)},A=function(t,e,i){e.isEditable()?N.call(this,t,e.val(),i):N.call(this,t,e.getSelectedKey(),i)},F=function(t,e,i){N.call(this,t,e.getDate(),i)},S=function(t,e,i){N.call(this,t,e.getDate(),i)},k=function(t,e,i){N.call(this,t,e.getDateRange(),i)},N=function(i,t,n){var s=this;if(h.isBlank(t)){var e=1==i.attr("opt-required")?i.attr("opt-empty")||"不能为空":null;if(e)return void M.call(this,i,e,n)}var a=R.call(this,i);h.isFunction(a)?a.call(this,t,function(t){var e=!!t&&(!0===t?"内容不正确":h.trimToNull(t));M.call(s,i,e,n)}):M.call(this,i,!1,n)},R=function(t){var e=t.data("validator");if(!e){var i=t.children(".ui-fn[name='validator']");if(i&&0<i.length){var n=i.text();h.isNotBlank(n)&&(e=new Function("var Utils=VRender.Utils;return ("+unescape(n)+");")()),i.remove()}e||(e="1"),t.data("validator",e)}return e},M=function(t,e,i){e?V.call(this,t,e):B.call(this,t),h.isFunction(i)&&i(e)},V=function(t,e){t.addClass("is-error");var i=t.children(".errmsg");i&&0!=i.length||(i=$("<div class='errmsg'></div>").appendTo(t)),i.html(e),i.removeClass("animate-in").removeClass("animate-out"),setTimeout(function(){i.addClass("animate-in")}),this._isRenderAsApp(
)||P.call(this,t)},B=function(t){if(O.call(this,t),t.is(".is-error")){var e=t.children(".errmsg");e.addClass("animate-out"),setTimeout(function(){t.removeClass("is-error"),e.removeClass("animate-in").removeClass("animate-out")},300)}},P=function(t){O.call(this,t);var e=setTimeout(function(){t.removeAttr("t-err"),t.children(".errmsg").addClass("animate-out")},3e3);t.attr("t-err",e)},O=function(t){var e=parseInt(t.attr("t-err"));e&&(clearTimeout(e),t.removeAttr("t-err"))},L=function(e,i){var n=this.getFormData(),s=this.getMethod();E.call(this,n,function(t){t?i(t,null,n):/post|put|delete/.test(s)?VRender.send(e,n,function(t,e){i(t,e,n)},!0):VRender.fetch(e,n,function(t,e){i(t,e,n)},!0)})},E=function(t,e){var i={type:"action_before"};this.trigger(i,t),i.isPreventDefault?e("canceled"):e()},z=function(t){this.data=t},H=z.prototype=new Object;H.name=function(t){return h.isNull(t)?this.data.name:(this.data.name=t,this)},H.label=function(t){return h.isNull(t)?this.data.label:(this.data.label=t,this)},H.content=function(t){return void 0===t?this.data.content:(this.data.content=t,this)},H.required=function(t){return this.data.required=!!h.isNull(t)||h.isTrue(t),this},H.isRequired=function(){return h.isTrue(this.data.required)},H.visible=function(t){return this.data.visible=!!h.isNull(t)||h.isTrue(t),this},H.isVisible=function(){return h.isTrue(this.data.visible)},H.show=function(){return this.data.visible=!0,this},H.hide=function(){return this.data.visible=!1,this},H.emptyMsg=function(t){return h.isNull(t)?this.data.emptyMsg:(this.data.emptyMsg=t,this)},H.validator=function(t){return void 0===t?this.data.validator:(this.data.validator=t,this)},H.colspan=function(t){return h.isNull(t)?this.data.colspan:(this.data.colspan=t,this)},H.top=function(t){return this.data.top=!!h.isNull(t)||h.isTrue(t),this};var q=function(t,e){this.form=t,this.item=e},K=q.prototype=new Object;K.name=function(t){return h.isNull(t)?this.item.attr("name"):(this.item.attr("name",h.trimToEmpty(t)),this)},K.label=function(t){var e=this.item.children(".content").children("dt");return h.isNull(t)?e.text()||"":(e.text(h.trimToEmpty(t)),this)},K.container=function(){return this.item.children(".content").children("dd").children("div")},K.content=function(t){var e=this.container();if(void 0!==t)return e.empty(),t&&(h.isFunction(t.render)?t.render(e):e.append(t.$el||t)),this;var i=e.children();return i&&0<i.length?i:null},K.getContentView=function(){var t=this.content();return VRender.FrontComponent&&VRender.FrontComponent.get(t)||VRender.Component.get(t)||t},K.required=function(t){return h.isNull(t)||h.isTrue(t)?this.item.attr("opt-required","1"):this.item.removeAttr("opt-required"),this},K.isRequired=function(){return 1==this.item.attr("opt-required")},K.visible=function(t){return h.isNull(t)||h.isTrue(t)?this.item.removeAttr("opt-hide"):this.item.attr("opt-hide","1"),this},K.isVisible=function(){return 1==this.item.attr("opt-hide")},K.show=function(){return this.visible(!0)},K.hide=function(){return this.visible(!1)},K.emptyMsg=function(t){return h.isNull(t)?this.item.attr("opt-empty"):(this.item.attr("opt-empty",h.trimToEmpty(t)),this)},K.validator=function(t){if(void 0!==t)return this.item.data("validator",h.isFunction(t)?t:"1"),this.item.children(".ui-fn[name=validator]").remove(),this;var e=R.call(this.form,this.item);return h.isFunction(e)?e:null},K.colspan=function(t){if(h.isNull(t))return Math.max(parseInt(this.item.attr("opt-col"))||0,1);var e=Math.max(parseInt(t)||0,1);this.item.attr("opt-col",e);var i=this.form.getColumns();return 1<i&&e<i?this.item.css("width",(100*e/i).toFixed(6)+"%"):this.item.css("width",""),this},K.top=function(t){var e=this.container();return h.isNull(t)||h.isTrue(t)?e.css("paddingTop","0px"):e.css("paddingTop",""),this},o?(window.UIForm=t,l.init(".ui-form",t,m)):module.exports=m}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.message){var n=t?VRender.Component.ui:require("../../static/js/init"),i=(n.fn,n.util),e=n.message=function(t,e){return n._base.call(this,t,e)},s=e.prototype=new n._base(!1);s.init=function(t,e){n._base.init.call(this,t,e),this.open()},s.open=function(){u.call(this),this._isRenderAsApp()?0<this.$el.find(".closebtn").length&&this.$el.on("tap",a.bind(this)):(this.$el.on("tap",".closebtn",r.bind(this)),this.$el.on("tap",".content",o.bind(this)),this.$el.on("mouseenter",l.bind(this)),this.$el.on("mouseleave",l.bind(this)))},s.close=function(){p.call(this)};var a=function(t){$(t.target).is(this.$el)&&p.call(this)},r=function(){p.call(this)},o=function(){this.$el.addClass("active")},l=function(t){"mouseenter"==t.type?this.t_close&&(clearTimeout(this.t_close),this.t_close=null):(this.$el.removeClass("active"),f.call(this))},c=function(t,e){n._baseRender.call(this,t,e)},d=c.prototype=new n._baseRender(!1);d.render=function(t,e){n._baseRender.render.call(this,t,e),e.addClass("ui-message");var i=this.getType();return i&&e.addClass("show-icon").attr("opt-type",i),e.attr("opt-duration",this.getDuration()),h.call(this,t,e),this},d.getType=function(){return"danger"==this.options.type?"error":/^(success|warn|error|info)$/i.test(this.options.type)?this.options.type:null},d.getDuration=function(){return i.isBlank(this.options.duration)?null:isNaN(this.options.duration)?null:parseInt(this.options.duration)||0},d.isClosable=function(){return!!i.isNull(this.options.closable)||i.isTrue(this.options.closable)};var h=function(t,e){var i=t("<div class='container'></div>").appendTo(e),n=t("<i class='img'></i>").appendTo(i),s=t("<div class='content'></div>").appendTo(i);this.options.hasOwnProperty("focusHtmlContent")?s.html(this.options.focusHtmlContent||"无"):s.text(this.options.content||"无"),this.isClosable()&&i.append("<div class='closebtn'></div>"),this.options.icon&&(e.addClass("show-icon"),n.css("backgroundImage","url("+this.options.icon+")"))},u=function(){var t=$("body").children(".ui-message-wrap");t&&0!=t.length||(t=$("<div class='ui-message-wrap'></div>").appendTo("body"));var e=this.$el.appendTo(t);setTimeout(function(){e.addClass("animate-in")},50),f.call(this)},p=function(){var e=this.$el.addClass("animate-out");setTimeout(function(){e.removeClass("animate-in").removeClass("animate-out"),e.remove();var t=$("body").children(".ui-message-wrap");0==t.children().length&&t.remove()},500),this.trigger("close")},f=function(){var t=this;this.t_close&&(clearTimeout(this.t_close),this.t_close=null);var e=this.$el.attr("opt-duration");0<(e=i.isBlank(e)?3e3:parseInt(e)||0)&&(this.t_close=setTimeout(function(){t.t_close=null,p.call(t)},e))};t?(window.UIMessage=e,n.init(".ui-message",e,c)):module.exports=c}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.notice){var n=t?VRender.Component.ui:require("../../static/js/init"),r=(n.fn,n.util),e=n.notice=function(t,e){return n._base.call(this,t,e)},i=e.prototype=new n._base(!1);i.init=function(t,e){n._base.init.call(this,t,e),this.open()},i.open=function(){d.call(this),this.$el.on("tap",".closebtn",s.bind(this)),this._isRenderAsApp()||(this.$el.on("mouseenter",a.bind(this)),this.$el.on("mouseleave",a.bind(this)))},i.close=function(){h.call(this)};var s=function(){h.call(this)},a=function(t){"mouseenter"==t.type?this.t_close&&(clearTimeout(this.t_close),this.t_close=null):u.call(this)},o=function(t,e){n._baseRender.call(this,t,e)},l=o.prototype=new n._baseRender(!1);l.render=function(t,e){n._baseRender.render.call(this,t,e),e.addClass("ui-notice");var i=this.getType();return i&&e.addClass("show-icon").attr("opt-type",i),e.attr("opt-duration",this.getDuration()),c.call(this,t,e),this},l.getType=function(){return"danger"==this.options.type&&(this.options.type="error"),/^(success|warn|error|info)$/i.test(this.options.type)?this.options.type:null},l.getDuration=function(){return r.isBlank(this.options.duration)?null:isNaN(this.options.duration)?null:parseInt(this.options.duration)||0},l.isClosable=function(){return!!r.isNull(this.options.closable)||r.isTrue(this.options.closable)};var c=function(t,e){var i=t("<div class='container'></div>").appendTo(e),n=t("<i class='img'></i>").appendTo(i),s=r.trimToNull(this.options.title);s&&t("<div class='title'></div>").appendTo(i).text(s);var a=t("<div class='content'></div>").appendTo(i);a=t("<div></div>").appendTo(a),this.options.hasOwnProperty("focusHtmlContent")?a.html(this.options.focusHtmlContent||"无内容"):a.text(this.options.content||"无内容"),this.isClosable()&&i.append("<div class='closebtn'></div>"),this.options.icon&&(e.addClass("show-icon"),n.css("backgroundImage","url("+this.options.icon+")"))},d=function(){var t=$("body").children(".ui-notice-wrap");t&&0!=t.length||(t=$("<div class='ui-notice-wrap'></div>").appendTo("body"));var s=this.$el;this._isRenderAsApp()?t.append(s):t.prepend(s),setTimeout(function(){s.addClass("animate-in")},50),this._isRenderAsApp()&&setTimeout(function(){var t=s.find(".content"),e=t.children(),i=(t.width(),e.width()-t.width());if(0<i){t.addClass("over");var n=Math.max(5e3,20*i);e.css("animation","ui-notice-animate "+n+"ms infinite linear")}},1e3),u.call(this)},h=function(){var e=this.$el.addClass("animate-out");setTimeout(function(){e.removeClass("animate-in").removeClass("animate-out"),e.remove();var t=$("body").children(".ui-notice-wrap");0==t.children().length&&t.remove()},1500),this.trigger("close")},u=function(){var t=this;this.t_close&&(clearTimeout(this.t_close),this.t_close=null);var e=this.$el.attr("opt-duration");0<(e=r.isBlank(e)?1e4:parseInt(e)||0)&&(this.t_close=setTimeout(function(){t.t_close=null,h.call(t)},e))};t?(window.UINotice=e,n.init(".ui-notice",e,o)):module.exports=o}}("undefined"!=typeof window),function(r){if(!r||!VRender.Component.ui.dialog){var l=r?VRender.Component.ui:require("../../static/js/init"),c=(l.fn,l.util),d=[],o=[{name:"cancel",label:"取消",type:"cancel"},{name:"ok",label:"确定",type:"primary"}],h=[{name:"ok",label:"确定",type:"primary"},{name:"cancel",label:"取消",type:"cancel"}],s=l.dialog=function(t,e){return l._base.call(this,t,e)},t=s.prototype=new l._base(!1);s.create=function(t){if(!(t=t||{}).target){var e=$("body").children(".ui-dialog-wrap");e&&0!=e.length||(e=$("<div class='ui-dialog-wrap'></div>").appendTo($("body"))),t.target=e}return VRender.Component.create(t,s
,n)},s.close=function(t,e,i){if(t.is(".ui-dialog")||(t=c.parentUntil(t,".ui-dialog")),t&&0<t.length){var n=VRender.Component.get(t);n&&n instanceof s&&n.close(e,i)}},t.init=function(t,e){l._base.init.call(this,t,e),this.dialogParent=this.$el.parent();var i=this.dialogView=this.$el.children().children();i.children("header").on("tap",".closebtn",a.bind(this)),i.children("footer").on("tap",".btnbar > .btn",u.bind(this));var n=C.call(this);n&&0<n.length&&n.on("tap",p.bind(this)),this._isRenderAsApp()?this.$el.on("tap",f.bind(this)):w.call(this),_.call(this)},t.open=function(){if(this.isopened)return this;this.isopened=!0;var t=$("body").addClass("ui-scrollless");if(0==t.children(".ui-dialog-mask").length&&t.append("<div class='ui-dialog-mask'></div>"),1!=this.$el.attr("opt-stay")){0==t.children(".ui-dialog-wrap").length&&t.append("<div class='ui-dialog-wrap'></div>");var e=t.children(".ui-dialog-wrap");this.dialogParent.is(e)||this.$el.appendTo(e)}this.$el.css("display","").addClass("show-dialog"),d.push(this),this._getContentView().trigger("dialog_open");var i=this.$el.attr("opt-trans");if(i){var n=this.$el.addClass(i+"-open");setTimeout(function(){n.addClass(i+"-opened")}),setTimeout(function(){n.removeClass(i+"-open").removeClass(i+"-opened")},300)}return this.trigger("opened"),this},t.close=function(t,s){var a=this;if(this.isopened){c.isFunction(t)&&(s=t,t=!1);var e={type:"dialog_close"};if(this._getContentView().trigger(e),t||!e.isPreventDefault){this.isopened=!1;var r=this.$el.removeClass("show-dialog"),o=r.attr("opt-trans");o&&(r.addClass(o+"-close"),setTimeout(function(){r.addClass(o+"-closed")})),setTimeout(function(){o&&r.removeClass(o+"-close").removeClass(o+"-closed");var t=$("body"),e=t.children(".ui-dialog-wrap");a.dialogParent.is(e)?a.$el.remove():1!=a.$el.attr("opt-stay")&&a.$el.appendTo(a.dialogParent);for(var i=d.length-1;0<=i;i--)d[i]===a&&d.splice(i,1);if(0==d.length){var n=t.removeClass("ui-scrollless").children(".ui-dialog-mask").fadeOut(200);setTimeout(function(){n.remove()},200)}c.isFunction(s)&&s()},o?200:0),this.trigger("closed")}}},t.getTitle=function(){return this.dialogView.children("header").find(".title").text()},t.setTitle=function(t){t=c.isBlank(t)?"&nbsp;":t,this.dialogView.children("header").find(".title").html(t)},t.getContent=function(){var t=this._getContentView();return t&&(t=VRender.Component.get(t)||t),t},t.setContent=function(t){b.call(this,$,this.$el,t),_.call(this)},t.setButtons=function(t){y.call(this,$,this.$el,t)},t.isScrollable=function(){return this.$el.is("scrollable")},t.setScrollable=function(t){c.isNull(t)||c.isTrue(t)?this.$el.addClass("scrollable"):this.$el.removeClass("scrollable")},t.getSize=function(){return this.$el.attr("opt-size")||"normal"},t.setSize=function(t){/^small|big|auto$/.test(t)?this.$el.attr("opt-size",t):this.$el.removeAttr("opt-size")},t.isFill=function(){return 1==this.$el.attr("opt-fill")},t.setFill=function(t){c.isNull(t)||c.isTrue(t)?this.$el.attr("opt-fill","1"):this.$el.removeAttr("opt-fill")},t.isOpen=function(){return!!this.isopened},t.destory=function(){var t=this;this.close(!0,function(){t.$el.remove()})},t.waiting=function(t,e){var i=null;c.isNotBlank(e)&&((i=this.dialogView.children("footer").find(".btnbar > .btn[name='"+e+"']"))&&0<i.length||(i=null));var n=i&&parseInt(i.attr("opt-wait"))||0;n=c.isNull(t)||!0===t?n||-1:t?isNaN(t)?c.isTrue(t)?n||-1:0:Math.max(0,parseInt(t)):0,x.call(this,n,i)},t.setButtonValue=function(t,e){if(c.isNotBlank(t)&&c.isNotNull(e)){var i=this.dialogView.children("footer").find(".btnbar > .btn[name='"+t+"']");i&&0<i.length&&(i=VRender.Component.get(i.children()))&&i.setLabel(e)}},t.isWidthEnabled=function(){return!1},t.isHeightEnabled=function(){return!1},t._getContentView=function(){return this.dialogView.children("section").children(".container").children()},t._isTouchCloseable=function(){return!1!==this.options.touchCloseEnabled};var a=function(t){this.close()},u=function(t){var e=this,i=$(t.currentTarget);if(!i.is(".disabled, .waiting")){var n=i.attr("name")||"";n&&this._getContentView().trigger("dialog_btn_"+n,n,this);var s=!1;if(n){var a="btn_"+n;this.hasListen(a)&&(s=!0,this.trigger(a,n,this))}this.hasListen("btnclk")&&(s=!0,this.trigger("btnclk",n,this));var r=i.attr("opt-wait");r||0==r?(r=parseInt(r)||0,x.call(this,r,i),0<r&&(this.closeTimerId=setTimeout(function(){e.closeTimerId=0,e.close()},r))):s||/^ok|cancel|submit|close|save|finish$/.test(n)&&this.close(/^cancel|close$/.test(n))}},p=function(t){this.isMounted()?this.open():this.activeBtn.off("tap",arguments.callee)},i=function(){this.isMounted()?this.dialogView.children("section").children(".container").css("maxHeight",$(window).height()-200):$(window).off("resize._"+this.getViewId())},f=function(t){$(t.target).is(this.$el)&&this._isTouchCloseable()&&this.close()},n=function(t,e){l._baseRender.call(this,t,e)},e=n.prototype=new l._baseRender(!1);e.render=function(t,e){l._baseRender.render.call(this,t,e),e.addClass("ui-dialog").css("display","none"),e.attr("opt-trans","translate");var i=this.options||{};/^small|big|auto$/.test(i.size)&&e.attr("opt-size",i.size),c.isTrue(i.fill)&&e.attr("opt-fill","1"),c.isTrue(i.scrollable)&&e.addClass("scrollable"),c.isTrue(i.stay)&&e.attr("opt-stay","1"),e.attr("opt-active",c.trimToNull(this.getActiveButton()));var n=t("<div class='dialog-container'></div>").appendTo(e),s=t("<div class='dialog-view'></div>").appendTo(n),a=this._isRenderAsRem(),r=c.getFormatSize(i.width,a);r&&n.css("width",r);var o=c.getFormatSize(i.height,a);return o&&n.css("height",o),m.call(this,t,e,s),g.call(this,t,e,s),v.call(this,t,e,s),this},e.getTitle=function(){var t=this.options.title;return c.isNull(t)?"标题":c.isBlank(t)?"&nbsp;":t},e.getActiveButton=function(){var t=this.options.openbtn;if(!r&&t){if("string"==typeof t)return t;if(c.isFunction(t.getViewId))return"[vid='"+t.getViewId()+"']"}return null};var m=function(t,e,i){var n=t("<header></header>").appendTo(i);t("<div class='title'></div>").appendTo(n).html(this.getTitle()),n.append("<button class='closebtn'>x</button>")},g=function(t,e,i){i.append("<section></section>");var n=this.options.content||this.options.view;b.call(this,t,e,n)},v=function(t,e,i){i.append("<footer></footer>"),y.call(this,t,e,this.options.buttons)},b=function(t,e,i){var n=T(e).children("section").empty();n=t("<div class='container'></div>").appendTo(n),c.isNotBlank(i)&&(c.isFunction(i.render)?i.render(n):i.$el?i.$el.appendTo(n):n.append(i))},y=function(i,t,e){var n=this;t.removeClass("has-btns");var s=T(t).children("footer");if(s.children(".btnbar").remove(),e||(e=this._isRenderAsApp()?h:o,e=JSON.parse(JSON.stringify(e))),(e=c.toArray(e))&&0<e.length){t.addClass("has-btns");var a=i("<div class='btnbar'></div>").appendTo(s);a.attr("opt-len",e.length),c.each(e,function(t){var e=i("<div class='btn'></div>").appendTo(a);(e.attr("name",t.name),!0===t.waitclose?e.attr("opt-wait","-1"):!t.waitclose&&0!==t.waitclose||isNaN(t.waitclose)||e.attr("opt-wait",Math.max(0,parseInt(t.waitclose))),r)?l.button.create(c.extend({},t,{target:e})):new(require("../button/index"))(n.context,t).render(e)})}},_=function(){var i=this,t=this._getContentView();t&&0<t.length&&(t.off("submit_to_dialog"),t.on("submit_to_dialog",function(t,e){i.trigger("view_submit",e),i.close()}))},w=function(){var t="resize._"+this.getViewId(),e=$(window).off(t);"auto"==this.getSize()&&(e.on(t,i.bind(this)),i.call(this))},T=function(t){return t.children(".dialog-container").children(".dialog-view")},C=function(){this.options.hasOwnProperty("openbtn")||(this.options.openbtn=this.$el.attr("opt-active"),this.$el.removeAttr("opt-active"));var t=this.options.openbtn;return t?t.$el?t.$el:$(t):null},x=function t(e,i){var n=this,s=i?VRender.Component.get(i.children()):null;e?(s?(i.addClass("waiting"),s.waiting()):this.$el.addClass("waiting"),0<e&&setTimeout(function(){t.call(n,!1,i)},e)):s?(i.removeClass("waiting"),s.waiting(!1)):this.$el.removeClass("waiting")};r?(window.UIDialog=s,l.init(".ui-dialog",s,n)):module.exports=n}}("undefined"!=typeof window),function(n){if(!n||!VRender.Component.ui.confirm){var s=n?VRender.Component.ui:require("../../static/js/init"),r=(s.fn,s.util),a=s.confirm=function(t,e){return s._base.call(this,t,e)},t=a.prototype=new s._base(!1);t.init=function(t,e){s._base.init.call(this,t,e),this.open()},t.open=function(){d.call(this),this.$el.on("tap",".closebtn",e.bind(this)),this.$el.on("tap",".btnbar .ui-btn",i.bind(this))},t.close=function(){h.call(this)},t.onSubmit=function(t){return this.submitHandler=t,this},t.onCancel=function(t){return this.cancelHandler=t,this},t._isTouchCloseable=function(){return!1!==this.options.touchCloseEnabled};var e=function(t){p.call(this)},i=function(t){"ok"==$(t.currentTarget).attr("name")?u.call(this):p.call(this)},o=function(t,e){s._baseRender.call(this,t,e)},l=o.prototype=new s._baseRender(!1);l.render=function(t,e){return s._baseRender.render.call(this,t,e),e.addClass("ui-confirm"),c.call(this,t,e),this},l.getConfirmLabel=function(){return r.trimToNull(this.options.confirmLabel)||"确认"},l.getCancelLabel=function(){return r.trimToNull(this.options.cancelLabel)||"取消"};var c=function(t,e){var i=t("<div class='container'></div>").appendTo(e),n=r.trimToNull(this.options.title);n&&t("<div class='title'></div>").appendTo(i).text(n);var s=t("<div class='content'></div>").appendTo(i);s=t("<div></div>").appendTo(s),this.options.hasOwnProperty("focusHtmlContent")?s.html(this.options.focusHtmlContent||"无内容"):s.text(this.options.content||"无内容");var a=t("<div class='btnbar'></div>").appendTo(i);f(t,a,{name:"ok",label:this.getConfirmLabel(),type:"primary"}),f(t,a,{name:"cancel",label:this.getCancelLabel()}),t("<span class='closebtn'></span>").appendTo(i)},d=function(){var i=$("body").children(".ui-confirm-wrap");i&&0!=i.length||(i=$("<div class='ui-confirm-wrap'></div>").appendTo("body"),this._isRenderAsApp()&&i.on("tap",function(t){if($(t.target).is(i)){var e=i.children().last();(e=a.instance(e))._isTouchCloseable()&&e.close()}}));var t=this.$el.appendTo(i);setTimeout(function(){t.addClass("animate-in")},50)},h=function(){var e=this.$el.addClass("animate-out");setTimeout(function(){e.removeClass("animate-in").removeClass("animate-out"),e.remove(
);var t=$("body").children(".ui-confirm-wrap");0==t.children().length&&t.remove()},300),this.trigger("close")},u=function(){h.call(this),r.isFunction(this.submitHandler)&&this.submitHandler(),this.trigger("submit")},p=function(){h.call(this),r.isFunction(this.cancelHandler)&&this.cancelHandler(),this.trigger("cancel")},f=function(t,e,i){(e=t("<div></div>").appendTo(e),n)?s.button.create(r.extend(i,{target:e})):new(require("../button/index"))(this.context,i).render(e)};n?(window.UIConfirm=a,s.init(".ui-confirm",a,o)):module.exports=o}}("undefined"!=typeof window),function(a){if(!a||!VRender.Component.ui.popupmenu){var r=a?VRender.Component.ui:require("../../static/js/init"),s=r.fn,o=r.util,t=r.popupmenu=function(t,e){return r._items.call(this,t,e)},e=t.prototype=new r._items(!1);e.init=function(t,e){r._items.init.call(this,t,e),this.options.autoLoad=!1,this.setActionTarget(this.getActionTarget()),this.$el.on("tap",n.bind(this)),this.$el.on("tap",".menu",l.bind(this)),this.$el.on("tap",".more",c.bind(this)),this._isRenderAsApp()?this.$el.on("tap",".back",d.bind(this)):(this.$el.on("mouseenter",".menu",h.bind(this)),this.$el.on("mouseleave",".menu",u.bind(this)),this.$el.on("mouseenter",".menu-container > .btn",p.bind(this)),this.$el.on("mouseleave",".menu-container > .btn",f.bind(this)))},e.open=function(){var t=this,e=this.$el.show();y.call(this,e),this._isRenderAsApp()?($("body").addClass("ui-scrollless"),setTimeout(function(){e.addClass("animate-open")})):setTimeout(function(){$("body").on("click.hide_"+t.getViewId(),function(){t.close(),t.trigger("cancel")})})},e.close=function(){var t=this.$el;this._isRenderAsApp()?($("body").removeClass("ui-scrollless"),t.removeClass("animate-open"),t.children(".menu-container").last().height(0),setTimeout(function(){t.empty().hide()},300)):(t.empty().hide(),$("body").off("click.hide_"+this.getViewId()))},e.destory=function(){var t=this;this.close(),setTimeout(function(){t.$el.remove()},300)},e.getActionTarget=function(){return this.options.hasOwnProperty("actionTarget")||(this.options.actionTarget=o.trimToNull(this.$el.attr("opt-target")),this.$el.removeAttr("opt-target")),this.options.actionTarget},e.setActionTarget=function(t){if(this.actionTarget!=t){var e=(o.trimToNull(this.getActionType())||"tap")+"._"+this.getViewId();this.actionTarget&&("string"==typeof this.actionTarget?$("body").off(e,this.actionTarget):this.actionTarget.off(e)),this.actionTarget=t,this.actionTarget&&("string"==typeof this.actionTarget?$("body").on(e,this.actionTarget,i.bind(this)):(this.actionTarget=$(this.actionTarget),this.actionTarget.on(e,i.bind(this)))),this.$el.removeAttr("opt-target")}},e.getActionType=function(){return this.options.hasOwnProperty("actionType")||(this.options.actionType=o.trimToNull(this.$el.attr("opt-trigger")),this.$el.removeAttr("opt-trigger")),this.options.actionType},e.setActionType=function(t){this.options.actionType=t,this.$el.removeAttr("opt-trigger")},e.getIconField=function(){return this.options.hasOwnProperty("iconField")||(this.options.iconField=o.trimToNull(this.$el.attr("opt-ic"))||"icon",this.$el.removeAttr("opt-ic")),this.options.iconField},e.setIconField=function(t){this.options.iconField=t,this.$el.removeAttr("opt-ic")},e.getIconFunction=function(){return s.getFunction.call(this,"iconFunction","icfunc")},e.setIconFunction=function(t){this.options.iconFunction=t,this.$el.children(".ui-fn[name='icfunc']").remove()},e.getOffsetLeft=function(){return this.options.hasOwnProperty("offsetLeft")||(this.options.offsetLeft=this.$el.attr("opt-offsetl"),this.$el.removeAttr("opt-offsetl")),this.options.offsetLeft?o.getFormatSize(this.options.offsetLeft,this._isRenderAsRem()):null},e.setOffsetLeft=function(t){this.options.offsetLeft=t,this.$el.removeAttr("opt-offsetl")},e.getOffsetTop=function(){return this.options.hasOwnProperty("offsetTop")||(this.options.offsetTop=this.$el.attr("opt-offsett"),this.$el.removeAttr("opt-offsett")),this.options.offsetTop?o.getFormatSize(this.options.offsetTop,this._isRenderAsRem()):null},e.setOffsetTop=function(t){this.options.offsetTop=t,this.$el.removeAttr("opt-offsett")},e._getChildrenField=function(){return"children"},e._getDisabledField=function(){return"disabled"},e._getIcon=function(t){var e=this.getIconFunction();if(o.isFunction(e))return e(t);var i=this.getIconField();return t&&i?t[i]:null},e._isDisabled=function(t){if(t){var e=this._getDisabledField();return!(!e||!o.isTrue(t[e]))}return!0},e._isChecked=function(t){return!!t&&!!t.checked},e._checkIfEmpty=function(){};var i=function(t){this.isMounted(this.$el)?this.open():this.setActionTarget(null)},n=function(t){return this._isRenderAsApp()&&$(t.target).is(".ui-popupmenu")&&(this.close(),this.trigger("cancel")),!1},l=function(t){var i=this,e=$(t.currentTarget);if(!e.is(".disabled"))if(e.is(".has-child"))this._isRenderAsApp()&&y.call(this,e);else{var n=S.call(this,e);if(n.toggle)if(n.checked)n.toggleRadio||(n.checked=!1);else{!function e(t){t&&0<t.length&&o.each(t,function(t){o.isArray(t)?e(t):(t.toggle===n.toggle&&(t.checked=!1),e(N.call(i,t)))})}(this.getData()),n.checked=!0}this.trigger("itemclick",n),this.close()}},c=function(t){var e=$(t.currentTarget),i=e.parent().parent().parent(),n=D.call(this),s=I.call(this);s.p_no=parseInt(e.attr("page-no"))||1,s.p_no+=1;var a=i.data("itemData");s.pid=this._getDataKey(a),e.parent().remove();var r=a?N.call(this,a):this.getData();r.pop(),x.call(this,i,n,s,function(t,e){e&&0<e.length&&o.each(e,function(t){r.push(t)})})},d=function(t){var e=$(t.currentTarget).parent();e.height(0);var i=e.prev();i.height(0),setTimeout(function(){e.remove(),i.height(i.get(0).scrollHeight)},120)},h=function(t){var e=$(t.currentTarget);if(!e.is(".disabled")){var i=e.parent().parent().parent(),n=i.find(".hover");if(n&&0<n.length){n.removeClass("hover"),T.call(this,i);var s=parseInt(n.attr("t-hover"));s&&(clearTimeout(s),n.removeAttr("t-hover"))}e.addClass("hover"),e.is(".has-child")&&y.call(this,e)}},u=function(t){var e=$(t.currentTarget),i=e.data("submenu");if(!i||0==i.length){var n=setTimeout(function(){e.removeClass("hover"),e.removeAttr("t-hover")},100);e.attr("t-hover",n)}},p=function(t){var r=$(t.currentTarget),o=r.parent();o.attr("t_scroll",setTimeout(function(){var i=o.children(".menus"),n=o.height()-i.height(),s=parseInt(o.attr("scroll-top"))||0,a=r.is(".up")?5:-5;!function e(){var t=setTimeout(function(){var t=s+a;r.is(".up")?0<t&&(t=0):t<n&&(t=n),s!=t&&(s=t,o.attr("scroll-top",s),i.css("transform","translate(0px, "+s+"px)")),e()},50);o.attr("t_scroll",t)}()},200))},f=function(t){var e=$(t.currentTarget).parent(),i=parseInt(e.attr("t_scroll"));i&&(clearTimeout(i),e.removeAttr("t_scroll"))},m=function(t,e){r._itemsRender.call(this,t,e)},g=m.prototype=new r._itemsRender(!1);g.render=function(t,e){r._baseRender.render.call(this,t,e),e.addClass("ui-popupmenu");var i=this.options||{};if(!a){var n=i.actionTarget;n&&("string"==typeof n?e.attr("opt-target",o.trimToEmpty(n)):o.isFunction(n.getViewId)&&e.attr("opt-target","[vid='"+n.getViewId()+"']")),i.actionType&&e.attr("opt-trigger",i.actionType);var s=i.iconFunction;o.isFunction(s)?BaseRender.fn.renderFunction(e,"icfunc",s):i.iconField&&e.attr("opt-ic",i.iconField),i.childrenField&&e.attr("opt-child",i.childrenField),i.disabledField&&e.attr("opt-disable",i.disabledField),i.offsetLeft&&e.attr("opt-offsetl",i.offsetLeft),i.offsetTop&&e.attr("opt-offsett",i.offsetTop)}return this},g.doAdapter=function(t,e){var i=this;if(o.isArray(t)){var n=o.map(t,function(t){return s.doAdapter.call(i,t)});return t.title&&(backend?n.unshift({__group__:t.title}):n.title=t.title),n}return s.doAdapter.call(this,t,e)},g._renderItems=function(t,e){},g._renderEmptyView=function(){},g._renderLoadView=function(){};var v=function(n,t){var s=this;if(t&&0!=t.length){var a=n.children(".grp").last();if(o.each(t,function(t,e){if(o.isArray(t)&&0<t.length)a=$("<div class='grp'></div>").appendTo(n),t.title&&$("<div class='title'></div>").appendTo(a).text(t.title),o.each(t,function(t,e){if(0===e&&t.__group__)$("<div class='title'></div>").appendTo(a).text(t.__group__);else if("more"==t.__type__){var i=$("<div class='more'></div>").appendTo(a);i.attr("page-no",t.page),i.text(s.options.moreText||"加载更多")}else{var n=$("<div class='menu'></div>").appendTo(a);b.call(s,n,t)}}),a=null;else{a&&0!=a.length||(a=$("<div class='grp'></div>").appendTo(n));var i=$("<div class='menu'></div>").appendTo(a);b.call(s,i,t)}}),this._isRenderAsApp()){var e=n.parent();e.height(0),setTimeout(function(){e.height(e.get(0).scrollHeight)})}}},b=function(t,e){t.data("itemData",e);var i=this._getIcon(e);o.isNotBlank(i)&&$("<i></i>").appendTo(t).css("backgroundImage","url("+i+")");var n=$("<div></div>").appendTo(t),s=this.getItemRenderer();if(o.isFunction(s)){var a=s($,n,e);o.isNotNull(a)&&n.empty().append(a)}else{var r=this._getDataLabel(e);n.text(o.trimToEmpty(r))}N.call(this,e)&&t.addClass("has-child"),this._isDisabled(e)&&t.addClass("disabled").attr("disabled","disabled"),this._isChecked(e)&&t.addClass("checked")},y=function(t){var e=S.call(this,t),i=k.call(this,t),n=_.call(this,t,e,i);if(o.isNull(n)){if(!C.call(this,t))return}else if(!(n&&0<n.length||C.call(this,t)))return;var s=$("<div class='menu-container'></div>").appendTo(this.$el);s.append("<div class='btn up'></div><div class='btn down'></div>"),this._isRenderAsApp()&&!A(t)&&$("<div class='back'></div>").appendTo(s).text(this.options.backText||"返回");var a=$("<div class='menus'></div>").appendTo(s);v.call(this,a,n),t.data("submenu",s),s.data("itemData",e),w.call(this,t,s),this.trigger("open",e)},_=function(t,e,i){var n={type:"open_before"};this.trigger(n,e,i),n.hasOwnProperty("returnValue")&&(i=n.returnValue);var s=i?o.toArray(i):null;e&&(e[this._getChildrenField()]=s);return s},w=function(t,e){if(!this._isRenderAsApp()){var i=A(t);if(i)e.css("left",this.getOffsetLeft()||""),e.css("top",this.getOffsetTop()||"");else{var n=t.offset();n.top-=3,n.left+=t.outerWidth()+1,e.offset(n)}var s=o.offset(e),a=s.windowHeight;if(i&&(a-=s.top),e.css("maxHeight",a+"px"),!i){var r=e.offset();s.isOverflowX&&(r.left-=s.width+t.outerWidth()),s.isOverflowY&&(r.top-=s.top+s.height-s.windowHeight),e.offset({left:r.left,top:r.top})}e.height()<e.children(".menus").height(
)&&e.addClass("scroll").css("minHeight","80px")}},T=function(t){for(var e=this.$el.children(".menu-container"),i=t.index(),n=e.length-1;0<=n;n--){if(n<=i)return;e.eq(n).remove()}},C=function(a){var r=this,t=D.call(this);if(o.isBlank(t))return!1;var e=I.call(this)||{};return e.p_no=1,e.pid=F.call(this,a),setTimeout(function(){var s=a.data("submenu");x.call(r,s,t,e,function(t,e){var i=!1;if(e&&0!=e.length||(i=!0,(e=[{label:"没有选项"}])[0][r._getDisabledField()]=!0),A(a))r.options.data=e;else{var n=S.call(r,a);n&&(n[r._getChildrenField()]=e)}i&&v.call(r,s.children(".menus"),e)})},0),!0},x=function(t,e,i,n){var s=this,a=t.children(".menus"),r=$("<div class='grp'></div>").appendTo(a);$("<div class='loading'></div>").appendTo(r).append(this.options.loadingText||"正在加载..."),VRender.Component.load.call(this,e,i,function(t,e){r.remove();var i=t?null:o.toArray(e);i&&0<i.length&&(i[0].children=[],s.hasMore()&&i.push([{__type__:"more",page:s._pageInfo.page}]),v.call(s,a,i)),n(t,i)})},D=function(){return this.lastLoadApi?this.lastLoadApi:this.options.hasOwnProperty("api")?this.options.api:this.$el.attr("api-name")},I=function(){if(this.lastLoadParams)return this.lastLoadParams;if(this.options.hasOwnProperty("params"))return this.options.params;try{return JSON.parse(this.$el.attr("api-params")||null)}catch(t){}return null},A=function(t){return t.is(".ui-popupmenu")},F=function(t){return this._getDataKey(S.call(this,t))},S=function(t){return A(t)?null:t.data("itemData")},k=function(t){if(A(t))return this.getData();var e=S.call(this,t);return N.call(this,e)},N=function(t){if(t){var e=this._getChildrenField();if(o.isArray(t[e]))return t[e]}return null};a?(window.UIPopupMenu=t,r.init(".ui-popupmenu",t,m)):module.exports=m}}("undefined"!=typeof window),function(s){if(!s||!VRender.Component.ui.paginator){var a=s?VRender.Component.ui:require("../../static/js/init"),r=a.fn,o=a.util,t=a.paginator=function(t,e){return a._base.call(this,t,e)},e=t.prototype=new a._base(!1);e.init=function(t,e){a._base.init.call(this,t,e),this.$el.on("tap","button.btn",i.bind(this)),this.$el.on("tap",".pagebar .page",n.bind(this)),this.$el.on("tap",".pagebar .lbl",l.bind(this)),this._isRenderAsApp()?this.$el.on("tap",".pagebar .dropdown",d.bind(this)):(this.$el.on("tap",".sizebar .lbl",h.bind(this)),this.$el.on("tap",".sizebar li",u.bind(this)),this.$el.on("keydown",".skipbar input",f.bind(this)))},e.set=function(t,e,i){var n=this._snapshoot();N.call(this,t,e,i),n.done()},e.getPage=function(){return parseInt(this.$el.attr("data-no"))||1},e.setPage=function(t){var e=this._snapshoot();N.call(this,null,t),e.done()},e.getSize=function(){return parseInt(this.$el.attr("data-size"))||0},e.setSize=function(t){N.call(this,null,null,t)},e.getTotal=function(){return parseInt(this.$el.attr("data-total"))||0},e.setTotal=function(t){var e=this._snapshoot();N.call(this,t),e.done()},e.getPageNo=function(){return this.getPage()},e.setPageNo=function(t){this.setPage(t)},e.getPageCount=function(){return parseInt(this.$el.attr("data-pages"))||1},e.getMode=function(){return this.$el.attr("opt-mode")||!1},e.setMode=function(t){this.$el.attr("opt-mode",B(t)||""),I.call(this)},e.getSizes=function(){var t=this.$el.attr("opt-sizes")||"";return O(t.split(","))},e.setSizes=function(t){var e=o.isArray(t)?t:null;e&&(e=O(e)),e&&0<e.length?this.$el.attr("opt-sizes",e.join(",")):this.$el.removeAttr("opt-sizes"),I.call(this)},e.getShowNum=function(){return parseInt(this.$el.attr("opt-nums"))||P(-1)},e.setShowNum=function(t){0<(t=parseInt(t)||0)&&(this.$el.attr("opt-nums",t),I.call(this))},e.getStatus=function(){var t=this.$el.attr("opt-status");return"_default"===t?"共{totalCount}条":t||""},e.setStatus=function(t){(t=L(t))?this.$el.attr("opt-status",t):this.$el.removeAttr("opt-status"),I.call(this)},e.getSkip=function(){var t=this.$el.attr("opt-skip");return 1==t||!!t&&t.split("♮")},e.setSkip=function(t){(t=E(t))?this.$el.attr("opt-skip",t):this.$el.removeAttr("opt-skip"),I.call(this)},e.getButtons=function(){if(this.options.hasOwnProperty("buttons"))return this.options.buttons;var t=this.$el.attr("opt-btns");return""!==t&&(t?JSON.parse(t):null)},e.setButtons=function(t){this.options.buttons=t,this.$el.removeAttr("opt-btn"),I.call(this)},e.rerender=function(){I.call(this)},e._snapshoot_shoot=function(t){t.data={page:this.getPageNo(),size:this.getSize()}},e._snapshoot_compare=function(t){return t.data.page==this.getPageNo()},e._isFirst=function(){return this.$el.is(".is-first")},e._isLast=function(){return this.$el.is(".is-last")};var i=function(t){var e=$(t.currentTarget);if(e.is(".disabled"))return!1;if(e.is(".skip")){var i=this.$el.find(".skipbar input"),n=parseInt(i.val())||0;0<n&&n!=this.getPageNo()&&this.setPageNo(n),i.val("")}else{var s=this.getPageNo();e.is(".prev")?this._isFirst()||this.setPageNo(s-1):e.is(".next")?this._isLast()||this.setPageNo(s+1):e.is(".first")?this._isFirst()||this.setPageNo(1):e.is(".last")&&(this._isLast()||this.setPageNo(this.getPageCount()))}},n=function(t){var e=this,i=$(t.currentTarget);return i.is(".selected")||("dropdown"==this.getMode()?(F.call(this),setTimeout(function(){e.setPageNo(i.text())},300)):this.setPageNo(i.text())),!1},l=function(t){A.call(this)},c=function(t){r.mouseDebounce(t,F.bind(this))},d=function(t){F.call(this)},h=function(t){S.call(this)},u=function(t){var e=parseInt($(t.currentTarget).text());e&&e!=this.getSize()&&this.setSize(e),k.call(this)},p=function(t){r.mouseDebounce(t,k.bind(this))},f=function(t){if("keydown"==t.type){if(13!=t.which)return o.isControlKey(t)||o.isNumberKey(t);var e=$(t.currentTarget),i=parseInt(e.val())||0;return 0<i&&i!=this.getPageNo()&&this.setPageNo(i),e.val(""),!0}},m=function(t,e){a._baseRender.call(this,t,e)},g=m.prototype=new a._baseRender(!1);g.render=function(t,e){a._baseRender.render.call(this,t,e),e.addClass("ui-paginator");var i=R.call(this);if(e.attr("data-no",i.pageNo),e.attr("data-size",i.pageSize),e.attr("data-pages",i.pageCount),e.attr("data-total",i.totalCount),e.attr("opt-mode",i.mode||""),e.attr("opt-nums",i.showNum),i.status&&e.attr("opt-status",i.status),i.skip&&e.attr("opt-skip",i.skip),1<i.pageSizes.length&&e.attr("opt-sizes",i.pageSizes.join(",")),v.call(this,t,e,i),!s){var n=this.options.buttons;!1===n?e.attr("opt-btns",""):!0!==n&&o.isNotBlank(n)&&e.attr("opt-btns",JSON.stringify(n))}return this},g.getButtons=function(){return this.options.buttons},g.getTotal=function(){return Math.max(0,parseInt(this.options.total)||0)},g.getSize=function(){return parseInt(this.options.size)||0},g.getSizes=function(){return O(this.options.sizes)||[]},g.getPageNo=function(){return parseInt(this.options.page)||0},g.getMode=function(){return B(this.options.mode)},g.getShowNum=function(){return P(this.options.showNum)},g.getStatus=function(){return L(this.options.status)},g.getSkip=function(){return E(this.options.skip)};var v=function(t,e,i){var n=t("<div class='pagebar'></div>").appendTo(e);if(b.call(this,t,e,n,i),!this._isRenderAsApp()){if(1<i.pageSizes.length){var s=t("<div class='sizebar'></div>").appendTo(e);C.call(this,t,e,s,i)}if(o.isNotBlank(i.status)){var a=t("<div class='statusbar'></div>").appendTo(e);x.call(this,t,e,a,i)}if(o.isNotBlank(i.skip)){var r=t("<div class='skipbar'></div>").appendTo(e);D.call(this,t,e,r,i)}}},b=function(t,e,i,n){var s=M.call(this,"first");s&&t("<button class='btn first'></button>").appendTo(i).text(s);var a=M.call(this,"prev");a&&t("<button class='btn prev'></button>").appendTo(i).text(a),y.call(this,t,e,i,n);var r=M.call(this,"next");r&&t("<button class='btn next'></button>").appendTo(i).text(r);var o=M.call(this,"last");o&&t("<button class='btn last'></button>").appendTo(i).text(o),e.removeClass("is-first").removeClass("is-last"),n.isFirstPage&&e.addClass("is-first"),n.isLastPage&&e.addClass("is-last")},y=function(t,e,i,n){var s=n.mode;if(!1!==s&&"false"!==s){var a=t("<div class='pages'></div>").appendTo(i);"spread"==s?w.call(this,t,e,a,n):"dropdown"==s?T.call(this,t,e,a,n):_.call(this,t,e,a,n)}},_=function(t,e,i,n){var s=[];s.push("<span class='pageno'>"+n.pageNo+"</span>"),s.push("<span class='pagecount'>"+n.pageCount+"</span>"),i.html(s.join("/"))},w=function(t,e,i,n){var s=n.showNum;3<(s=0<s?s:10)&&this._isRenderAsApp()&&(s=3);var a=n.pageNo-Math.floor(s/2);a+s-1>n.pageCount&&(a=n.pageCount-s+1),a<1&&(a=1),i.removeClass("has-prev").removeClass("has-next"),1<a&&i.addClass("has-prev");for(var r=0;r<s&&a<=n.pageCount;r++){var o=t("<span class='page'></span>").appendTo(i);o.text(a),a==n.pageNo&&o.addClass("selected"),a+=1}a-1<n.pageCount&&i.addClass("has-next")},T=function(t,e,i,n){t("<div class='lbl'></div>").appendTo(i).text(n.pageNo+"/"+n.pageCount);for(var s=this._isRenderAsApp(),a=t("<div class='dropdown'></div>").appendTo(i),r=t("<ul></ul>").appendTo(a),o=1;o<=n.pageCount;o++){var l=t("<li class='page'></li>").appendTo(r);s?l.append("<span>"+o+"</span>"):l.text(o),o==n.pageNo&&l.addClass("selected")}},C=function(t,e,i,n){t("<div class='lbl'></div>").appendTo(i).text(n.pageSize);var s=t("<div class='dropdown'></div>").appendTo(i),a=t("<ul></ul>").appendTo(s);o.each(n.pageSizes,function(t){a.append("<li>"+t+"</li>")})},x=function(t,e,i,n){i.html(V.call(this,n.status,n))},D=function(t,e,i,n){var s=/♮/.test(n.skip)?n.skip.split("♮"):["",""];o.isBlank(s[0])&&n.status&&(s[0]="到第"),o.isNotBlank(s[0])&&t("<span class='txt t1'></span>").appendTo(i).text(s[0]),i.append("<input type='number'/>"),o.isBlank(s[1])&&n.status&&(s[1]="页"),o.isNotBlank(s[1])&&t("<span class='txt t2'></span>").appendTo(i).text(s[1]);var a=M.call(this,"skip")||"GO";t("<button class='btn skip'></button>").appendTo(i).text(a)},I=function(){var t=this;this.t_renderview&&(clearTimeout(this.t_renderview),this.t_renderview=0),this.t_renderpage&&(clearTimeout(this.t_renderpage),this.t_renderpage=0),this.t_renderview=setTimeout(function(){t.t_renderview=0,v.call(t,$,t.$el.empty(),R.call(t))},0)},A=function(){var t=this.$el.children(".pagebar");if(!t.is(".show-dropdown")){t.addClass("show-dropdown");var e=t.find(".dropdown");if(this._isRenderAsApp())$("html,body").addClass("ui-scrollless"),e=e.children("ul");else{t.on("mouseenter",c.bind(this)),t.on("mouseleave",c.bind(this));var i=r.getDropdownHeight.call(this,e);o.offset(e,
this._getScrollContainer(),0,i).isOverflowY&&t.addClass("show-before")}var n=e.find(".selected");if(n&&0<n.length){var s=e.scrollTop();s+=n.offset().top-e.offset().top,e.scrollTop(s)}setTimeout(function(){t.addClass("animate-in")},0)}},F=function(){var t=this.$el.children(".pagebar");t.find(".dropdown");this._isRenderAsApp()?$("html,body").removeClass("ui-scrollless"):t.off("mouseenter").off("mouseleave"),t.addClass("animate-out"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},S=function(){var t=this.$el.children(".sizebar");if(!t.is(".show-dropdown")){t.addClass("show-dropdown"),t.on("mouseenter",p.bind(this)),t.on("mouseleave",p.bind(this));var e=t.children(".dropdown"),i=r.getDropdownHeight.call(this,e,210);o.offset(e,this._getScrollContainer(),0,i).isOverflowY&&t.addClass("show-before"),setTimeout(function(){t.addClass("animate-in")},0)}},k=function(){var t=this.$el.children(".sizebar");t.off("mouseenter").off("mouseleave"),t.addClass("animate-out"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},N=function(t,e,i){t=Math.max(0,o.isBlank(t)||isNaN(t)?this.getTotal():parseInt(t)),e=Math.max(1,o.isBlank(e)||isNaN(e)?this.getPageNo():parseInt(e)),i=o.isBlank(i)||isNaN(i)?this.getSize():parseInt(i);var n=Math.ceil(t/i)||1;e=Math.min(e,n),this.$el.attr("data-total",t),this.$el.attr("data-size",i),this.$el.attr("data-no",e),this.$el.attr("data-pages",n),function(){var n=this;this.t_renderview||(this.t_renderpage&&(clearTimeout(this.t_renderpage),this.t_renderpage=0),this.t_renderpage=setTimeout(function(){n.t_renderpage=0;var t=R.call(n),e=n.$el.children(".pagebar").empty();b.call(n,$,n.$el,e,t);var i=n.$el.children(".statusbar");i&&0<i.length&&x.call(n,$,n.$el,i,t)},0))}.call(this),this.$el.find(".sizebar .lbl").text(i)},R=function(){var t={};return t.totalCount=this.getTotal(),t.pageSize=this.getSize(),t.pageSizes=this.getSizes()||[],t.pageSize<=0&&t.pageSizes&&0<t.pageSizes.length&&(t.pageSize=t.pageSizes[0]),t.pageSize<=0&&(t.pageSize=20),t.pageSizes.indexOf(t.pageSize)<0&&t.pageSizes.push(t.pageSize),t.pageSizes.sort(function(t,e){return t-e}),t.pageNo=this.getPageNo(),t.pageCount=Math.ceil(t.totalCount/t.pageSize)||1,t.pageNo=Math.max(1,Math.min(t.pageNo,t.pageCount)),t.pageStart=Math.min((t.pageNo-1)*t.pageSize+1,t.totalCount),t.pageEnd=Math.min(t.pageNo*t.pageSize,t.totalCount),t.mode=this.getMode(),t.showNum=this.getShowNum(),t.status=this.getStatus(),t.skip=this.getSkip(),t.isFirstPage=1==t.pageNo,t.isLastPage=t.pageNo==t.pageCount,t},M=function(t){var e=this.getButtons();if(!1===e)return!1;var i=null;return o.isArray(e)&&("first"==t?i=e[0]:"prev"==t?i=e[1]:"next"==t?i=e[2]:"last"==t?i=e[3]:"skip"==t&&(i=e[4])),!1!==i&&(!0!==i&&o.isNotBlank(i)?""+i:"first"==t?"|<":"last"==t?">|":"prev"==t?"<":"next"==t?">":"skip"==t?"GO":""+t)},V=function(t,e){return!0===t||"_default"==t?"共"+e.totalCount+"条":(o.isNotBlank(t)&&(t=(t=(t=(t=(t=(t=t.replace(/\{pageNo\}/g,e.pageNo)).replace(/\{pageSize\}/g,e.pageSize)).replace(/\{pageCount\}/g,e.pageCount)).replace(/\{totalCount\}/g,e.totalCount)).replace(/\{pageStart\}/g,e.pageStart)).replace(/\{pageEnd\}/g,e.pageEnd)),o.trimToEmpty(t))},B=function(t){return!1!==t&&("spread"==t||"dropdown"==t?t:"normal")},P=function(t){return 0<(t=parseInt(t)||0)?t:10},O=function(t){if(t){var e=[];return o.each(o.toArray(t),function(t){0<(t=parseInt(t)||0)&&e.indexOf(t)<0&&e.push(t)}),0<e.length?e:null}return null},L=function(t){return!0===t?"_default":!1===t?null:o.trimToNull(t)},E=function(t){return o.isNull(t)||!0===t?"1":o.isArray(t)?o.trimToEmpty(t[0])+"♮"+o.trimToEmpty(t[1]):null};s?(window.UIPaginator=t,a.init(".ui-paginator",t,m)):module.exports=m}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.tabbar){var r=t?VRender.Component.ui:require("../../static/js/init"),o=(r.fn,r.util),e=r.tabbar=function(t,e){return r._select.call(this,t,e)},i=e.prototype=new r._select(!1);i.init=function(t,e){r._select.init.call(this,t,e),this.tabsView=this.$el.find(".tabs"),this.$el.on("tap",".tab",n.bind(this)),this.$el.on("tap",".close",l.bind(this)),this._isRenderAsApp()?(this.$el.on("touchstart",a.bind(this)),this.$el.on("touchmove",a.bind(this)),this.$el.on("touchend",a.bind(this))):(this.$el.on("mousedown",".btn",s.bind(this)),this.$el.on("mouseup",".btn",s.bind(this)),this.$el.on("mouseleave",".btn",s.bind(this)),f.call(this)),m.call(this)},i.close=function(t){var e=null;if("number"==typeof t?0<=t&&(e=this.tabsView.find(".tab").eq(t)):o.isNotBlank(t)&&(e=this.tabsView.find(".tab[name='"+t+"']")),e&&0<e.length){var i=this._getItemData(e);return _.call(this,e),i}return null},i.setSelectedIndex=function(t){var e=o.getIndexValue(t);y.call(this,0<=e?this._getItems().eq(e):null),m.call(this)},i.removeItemAt=function(t){this.close(o.getIndexValue(t))},i.isMultiple=function(){return!1},i.isClosable=function(t){if("number"!=typeof t)return"string"==typeof t&&this.isClosable(this.getIndexByName(t));var e=this._getItemAt(t);return e&&e.is(".closable")},i.setColsable=function(t,e){if("string"==typeof t)return this.setColsable(e,this.getIndexByName(t));if("number"==typeof t){var i=this._getItemAt(t);i&&0<i.length&&(o.isNull(e)||o.isTrue(e)?i.is(".closable")||i.addClass("closable").append("<i class='close'></i>"):i.is(".closable")&&i.removeClass("closable").children(".close").remove())}},i._getItemContainer=function(){return this.$el.find(".tabs")},i._getItems=function(){return this.$el.find(".tab")},i._getNewItem=function(t,e,i,n){return w.call(this,t,e,i,n)},i._renderOneItem=function(t,e,i,n){return u.call(this,t,e,i,n)};var n=function(t){var e=$(t.currentTarget);e.is(".disabled")||(this.trigger("itemclick",this._getItemData(e)),y.call(this,e))},s=function(t){var e=this;$(t.currentTarget);if(this.btnMouseTimerId&&(clearInterval(this.btnMouseTimerId),this.btnMouseTimerId=0),"mousedown"==t.type){var i=this.tabsView,n=parseInt(i.attr("opt-l"))||0,s=20*($(t.currentTarget).is(".prev")?1:-1);this.btnMouseTimerId=setInterval(function(){n+=s,v.call(e,n)},50)}},a=function(t){var e=t.touches&&t.touches[0];if("touchstart"===t.type)this.touchData={startX:e.pageX},this.touchData.startL=parseInt(this.tabsView.attr("opt-l"))||0;else if("touchmove"===t.type){if(1<t.touches.length||!this.$el.is(".over"))return;var i=e.pageX-this.touchData.startX;if(!this.touchData.moving&&Math.abs(i)<10)return;this.touchData.moving=!0;var n=this.touchData.startL+i;v.call(this,n)}else t.type},l=function(t){var e=$(t.currentTarget).parent();return _.call(this,e),!1},c=function(t){this.isMounted()?g.call(this):$(window).off("resize._"+this.getViewId())},d=function(t,e){r._selectRender.call(this,t,e)},h=d.prototype=new r._selectRender(!1);h.render=function(t,e){e.addClass("ui-tabbar");var i=t("<div class='bar'></div>").appendTo(e);return i.append("<ul class='tabs'></ul>"),i.append("<div class='thumb'></div>"),r._selectRender.render.call(this,t,e),p.call(this,t,e),this},h.isMultiple=function(){return!1},h._renderOneItem=function(t,e,i,n){u.call(this,t,e,i,n)},h._getItemContainer=function(t,e){return e.find(".tabs")},h._getNewItem=function(t,e){return w.call(this,t,e)},h._renderEmptyView=function(){},h._renderLoadView=function(){};var u=function(t,e,i,n){var s=e.children(".box");r._itemsRender.renderOneItem.call(this,t,e,s,i,n),i=i||{},o.isNotBlank(i.name)&&e.attr("name",i.name),o.isTrue(i.closable)&&e.addClass("closable").append("<i class='close'></i>")},p=function(t,e){(e=t("<div class='btns'></div>").appendTo(e)).append("<span class='btn prev'>&lt;</span>"),e.append("<span class='btn next'>&gt;</span>")},f=function(){var t="resize._"+this.getViewId();$(window).off(t).on(t,c.bind(this)),c.call(this)},m=function(){if(g.call(this),this.$el.is(".over")){var t=this.tabsView.find(".tab.selected");if(t&&0<t.length){var e=this.tabsView.parent(),i=t.offset().left,n=e.offset().left,s=parseInt(this.tabsView.attr("opt-l"))||0;i<n?v.call(this,s+n-i):i-n>e.width()&&v.call(this,s-(i-n-e.width()+t.outerWidth()))}}b.call(this)},g=function(){var t=this.tabsView;t.width()<=this.$el.width()?(this.$el.removeClass("over over-l over-r"),v.call(this,0)):(this.$el.addClass("over"),v.call(this,parseInt(t.attr("opt-l"))||0))},v=function(t){var e=this.tabsView.width(),i=this.tabsView.parent().width();0<=t?t=0:t+e<i&&(t=i-e),this.$el.removeClass("over-l over-r"),t<0&&this.$el.addClass("over-l"),i<t+e&&this.$el.addClass("over-r"),t?(this.tabsView.css("transform","translate("+t+"px,0px)"),this.tabsView.attr("opt-l",t)):this.tabsView.css("transform","").removeAttr("opt-l"),b.call(this)},b=function(){var r=this;this.thumbTimerId&&clearTimeout(this.thumbTimerId),this.thumbTimerId=setTimeout(function(){r.thumbTimerId=0;var t=r.$el.find(".thumb"),e=r.tabsView.find(".tab.selected");if(e&&0<e.length){var i=e.offset().left;i-=r.tabsView.parent().offset().left;var n=e.outerWidth(),s=r.options.thumbWidth;if(s)o.isFunction(s)?s=s(e,n):/%$/.test(s)&&(s=parseFloat(s)*n),isNaN(s)||(i+=(n-s)/2,n=s);else if(r._isRenderAsApp()){var a=e.width();i+=(n-a)/2,n=a}t.css("left",i+"px"),t.width(n)}else t.width(0)},100)},y=function(t){var e=t&&0<t.length;if(!e||!t.is(".selected")){var i=e?t.index():[];r._select.setSelectedIndex.call(this,i);var n=T.call(this),s=null;n&&0<n.length&&(n.removeClass("selected"),s=this._getItemData(n),this.trigger("hide",s));var a=null;e&&(t.addClass("selected"),a=this._getItemData(t),this.trigger("show",a)),b.call(this),this.trigger("change",a,s)}},_=function(t){var e=t.is(".selected"),i=this._getItemData(t),n=null,s=null;e&&((n=t.next())&&0!=n.length||(n=t.prev()),this.trigger("hide",i)),this.removeItem(t),this.trigger("close",i),n&&0<n.length?(n.addClass("selected"),s=this._getItemData(n),this.trigger("show",s),r._select.setSelectedIndex.call(this,n.index())):r._select.setSelectedIndex.call(this,[]),e&&this.trigger("change",s,i),g.call(this)},w=function(t,e){var i=t("<li class='tab'></li>").appendTo(e);return i.append("<div class='box'></div>"),i},T=function(){return this.tabsView.find(".tab.selected")};t?(window.UITabbar=e,r.init(".ui-tabbar",e,d)):module.exports=d}}("undefined"!=typeof window),
function(t){if(!t||!VRender.Component.ui.panel){var i=t?VRender.Component.ui:require("../../static/js/init"),c=(i.fn,i.util),e=i.panel=function(t,e){return i._base.call(this,t,e)},n=e.prototype=new i._base(!1);n.init=function(t,e){i._base.init.call(this,t,e),this.header=this.$el.children("header"),this.container=this.$el.children("section").children(),this.header.on("tap",".tabbar > .tab",d.bind(this)),this._isRenderAsApp()?this.header.on("tap",".btnbar > .popbtn",a.bind(this)):(this.header.on("tap",".btnbar > .item > .btn",s.bind(this)),this.header.on("tap",".btnbar > .item > ul > li",o.bind(this))),y.call(this)},n.getTitle=function(){return this.header.children(".title").text()},n.setTitle=function(t){if(c.isNotNull(t)){t=c.trimToEmpty(t);var e=this.header.children(".title");e&&0<e.length?t?e.empty().append(t):e.remove():t&&(e=$("<div class='title'></div>").prependTo(this.header)).append(t)}},n.getButtons=function(){if(this.options.hasOwnProperty("buttons"))return c.toArray(this.options.buttons);var t=this.$el.attr("data-btns");if(t)try{t=JSON.parse(t)}catch(t){}return this.$el.removeAttr("data-btns"),this.options.buttons=c.toArray(t),t},n.setButtons=function(t){this.options.buttons=t,m.call(this,$,this.$el,c.toArray(t)),this.popupMenu&&(this.popupMenu.destory(),this.popupMenu=null)},n.setViewports=function(t,e){var i=D.call(this,t);f.call(this,$,this.$el,i),b.call(this,$,this.container,i),this.setViewActive(e)},n.isViewActive=function(t){return this.getViewActive()==t},n.getViewActive=function(){var t=this.header.find(".tabbar .selected");return t&&t.attr("name")},n.setViewActive=function(t){c.isNotBlank(t)&&_.call(this,t)},n.isFill=function(){return 1==this.$el.attr("opt-fill")},n.setFill=function(t){c.isNull(t)||c.isTrue(t)?this.$el.attr("opt-fill","1"):this.$el.removeAttr("opt-fill")};var s=function(t){var e=$(t.currentTarget),i=e.parent();1==i.attr("has-dropdown")?T.call(this,i):1==i.attr("opt-toggle")&&i.toggleClass("active");var n=i.attr("name");c.isNotBlank(n)&&(this.trigger("btn_"+n,e.is(".active")),this.trigger("btnclick",n,e.is(".active")))},a=function(t){if(this.popupMenu)this.popupMenu.open();else{var e=x.call(this,this.getButtons());e&&0<e.length&&(this.popupMenu=i.popupmenu.create({target:this.$el,data:e}),this.popupMenu.on("itemclick",r.bind(this))),this.popupMenu&&this.popupMenu.open()}},r=function(t,e){e&&c.isNotBlank(e.name)&&(this.trigger("btn_"+e.name,!!e.checked),this.trigger("btnclick",e.name,!!e.checked))},o=function(t){var e=$(t.currentTarget),i=e.parent().parent();if(1==i.attr("opt-toggle")&&!e.is(".active")){e.addClass("active").siblings().removeClass("active");var n=i.children(".btn"),s=n.children("span");s&&0<s.length&&s.text(e.children("span").text());var a=n.children("i");if(a&&0<a.length){a.attr("data-src")||a.attr("data-src",a.css("backgroundImage"));var r=e.children("i").css("backgroundImage")||a.attr("data-src");a.css("backgroundImage",r)}}C.call(this,i);var o=e.attr("name");c.isNotBlank(o)&&(this.trigger("btn_"+o,e.is(".active")),this.trigger("btnclick",o,e.is(".active")))},l=function(t){var e=this,i=$(t.currentTarget),n=parseInt(i.attr("timerid"));n&&(clearTimeout(n),i.removeAttr("timerid")),"mouseleave"==t.type&&(n=setTimeout(function(){i.removeAttr("timerid"),C.call(e,i)},400),i.attr("timerid",n))},d=function(t){var e=$(t.currentTarget);e.is(".selected")||_.call(this,e.attr("name"))},h=function(t,e){i._baseRender.call(this,t,e)},u=h.prototype=new i._baseRender(!1);u.render=function(t,e){return i._baseRender.render.call(this,t,e),e.addClass("ui-panel"),c.isTrue(this.options.fill)&&e.attr("opt-fill","1"),this._viewports=D.call(this,this.options.viewports),p.call(this,t,e),v.call(this,t,e),this},u.getTitle=function(){return this.options.hasOwnProperty("title")?this.options.title:!(this._viewports&&0<this._viewports.length)&&"标题"};var p=function(t,e){var i=this.options||{},n=t("<header></header>").appendTo(e);if(i.focusHtmlTitle)t("<div class='title'></div>").appendTo(n).html(i.focusHtmlTitle);else{var s=this.getTitle();!1!==s&&c.isNotBlank(s)&&t("<div class='title'></div>").appendTo(n).text(s)}f.call(this,t,e,this._viewports);var a=c.toArray(this.options.buttons);m.call(this,t,e,a)},f=function(n,t,e){var i=t.children("header");if(i.children(".tabbar").remove(),e&&0<e.length){var s=n("<div class='tabbar'></div>").prependTo(i);i.children(".title").after(s),s.append("<div class='thumb'></div>");var a=c.getIndexValue(this.options.viewIndex);c.each(e,function(t,e){var i=n("<div class='tab'></div>").appendTo(s);i.attr("name",t.name),t.focusHtmlLabel?i.html(t.focusHtmlLabel):n("<span></span>").appendTo(i).text(t.label||t.name),e==a&&i.addClass("selected")})}},m=function(e,t,i){var n=this,s=t.children("header");if(s.children(".btnbar").remove(),i&&0<i.length){var a=e("<div class='btnbar'></div>").appendTo(s);this._isRenderAsApp()?(a.append("<button class='popbtn'>&nbsp;</button>"),t.attr("data-btns",JSON.stringify(i))):c.each(i,function(t){g.call(n,e,a,t)})}},g=function(s,t,a){if(!c.isBlank(a)){"string"==typeof a&&(a={name:a});var e=s("<div class='item'></div>").appendTo(t);e.attr("name",c.trimToNull(a.name));var r=c.isTrue(a.toggle);r&&e.attr("opt-toggle","1"),c.isNotBlank(a.tooltip)&&e.attr("title",a.tooltip);var i=s("<button class='btn'></button>").appendTo(e);if(a.icon){var n=s("<i>&nbsp;</i>").appendTo(i);"string"==typeof a.icon&&n.css("backgroundImage","url("+a.icon+")")}if(!a.icon||!1!==a.label)s("<span></span>").appendTo(i).text(c.trimToNull(a.label)||"按钮");if(c.isArray(a.items)&&0<a.items.length){var o=s("<ul></ul>").appendTo(e.attr("has-dropdown","1")),l=!1;c.each(a.items,function(t,e){var i=s("<li></li>").appendTo(o);i.attr("name",c.trimToNull(t.name)),c.isNotBlank(t.icon)&&(l=!0,s("<i>&nbsp;</i>").appendTo(i).css("backgroundImage","url("+t.icon+")"));var n=c.trimToNull(t.label);s("<span></span>").appendTo(i).text(n||"选项"),r&&n&&n==a.label&&i.addClass("active")}),l&&o.attr("show-ic","1")}}},v=function(t,e,i){var n=t("<section></section>").appendTo(e);n=t("<div class='container'></div>").appendTo(n);var s=t("<div></div>").appendTo(n),a=this.options.content||this.options.view;c.isNotNull(a)&&(c.isFunction(a.render)?a.render(s):s.append(a.$el||a)),i=i||this._viewports,b.call(this,t,n,i),0==n.children(".selected").length&&s.addClass("selected")},b=function(n,s,t){if(s.children(":not(:first-child)").remove(),t&&0<t.length){var a=c.getIndexValue(this.options.viewIndex);c.each(t,function(t,e){if(contentView=t.content||t.view,c.isNotNull(contentView)){var i=n("<div></div>").appendTo(s);i.attr("name",t.name),e==a&&i.addClass("selected"),c.isFunction(contentView.render)?contentView.render(i):i.append(contentView.$el||contentView)}})}},y=function(){this.getButtons();var t=this.header.find(".tabbar .tab.selected");t&&0<t.length&&w.call(this,t)},_=function(e){var t=this.header.find(".tabbar .tab"),i=c.find(t,function(t){return t.attr("name")==e});if(i&&0!=i.length&&!i.is(".selected")){var n=t.filter(".selected").removeClass("selected");i.addClass("selected"),w.call(this,i);var s=this.container.children(),a=c.find(s,function(t){return t.attr("name")==e});if(a&&0!=a.length||(a=s.eq(0)),!a.is(".selected")){var r=s.filter(".selected"),o=n.index()<i.index();a.addClass("animate-in"),a.addClass(o?"animate-in-right":"animate-in-left"),r.addClass("animate-out"),setTimeout(function(){a.removeClass("animate-in-left animate-in-right"),r.addClass(o?"animate-out-left":"animate-out-right"),setTimeout(function(){a.addClass("selected").removeClass("animate-in"),r.removeClass("selected animate-out animate-out-left animate-out-right")},400)},0)}this.trigger("change",i.attr("name"),n.attr("name"))}},w=function(t){var e=this.header.children(".tabbar").children(".thumb");if(e&&0<e.length){var i=t.position().left,n=t.outerWidth(),s=this.options.thumbWidth;s&&(c.isFunction(s)?s=s(t,n):/%$/.test(s)&&(s=parseFloat(s)*n/100),isNaN(s)||(i+=(n-s)/2,n=s)),e.css("left",i+"px"),e.css("width",n+"px")}},T=function(t){t.is(".show-dropdown")||(t.addClass("show-dropdown"),t.on("mouseenter",l.bind(this)),t.on("mouseleave",l.bind(this)),setTimeout(function(){t.addClass("animate-in")},0))},C=function(t){t.addClass("animate-out"),t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-dropdown"),t.removeClass("animate-in").removeClass("animate-out")},300)},x=function(t){if(t&&0<t.length){var i=function(t){var e={};return e.name=t.name,e.label=t.label||t.name||"按钮",t.icon&&(e.icon=t.icon),t.toggle&&(e.toggle=t.toggle),t.disabled&&(e.disabled=t.disabled),e};return c.map(t,function(t){var e=i(t);return e.children=c.map(t.items,i),0==e.children.length&&delete e.children,e})}return null},D=function(t){var i=[];return c.each(c.toArray(t),function(t,e){c.isNotBlank(t)&&"object"==_typeof(t)&&(t.name=t.name||"view_"+e,i.push(t))}),i};t?(window.UIPanel=e,i.init(".ui-panel",e,h)):module.exports=h}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.list){var p=t?VRender.Component.ui:require("../../static/js/init"),f=(p.fn,p.util),e=p.list=function(t,e){return p._select.call(this,t,e)},i=e.prototype=new p._select(!1);i.init=function(t,e){p._select.init.call(this,t,e),(this.list=this.$el.children("ul")).on("tap","li",n.bind(this))},i.isChkboxVisible=function(){return this.$el.is(".show-chkbox")},i._getItemContainer=function(){return this.$el.children("ul")},i._renderOneItem=function(t,e,i,n,s){o.call(this,t,e,i,n,s)};var n=function(t){var e=$(t.currentTarget);if(!(0<e.find(".btnbar").find(t.target).length)&&e.parent().is(this.list)){if(e.is(".disabled"))return;var i=this._snapshoot();e.is(".selected")?e.removeClass("selected"):(e.addClass("selected"),this.isMultiple()||e.siblings().removeClass("selected"));var n=f.map(this.list.children(".selected"),function(t){return t.index()});p._select.setSelectedIndex.call(this,n),i.done()}},s=function(t,e){p._selectRender.call(this,t,e)},a=s.prototype=new p._selectRender(!1);s.itemRenderer_simple=function(t){var e={style:"ui-list-item1",title:null,desc:null};return"string"==typeof t?(e.title=t,e.desc=arguments&&arguments[1]):t&&(e.title=t.titleField,e.desc=t.descField),r.call(this,e)},s.itemRenderer_icon=function(t){var e={style:"ui-list-item2",icon:null,title:null,desc:null}
;return"string"==typeof t?(e.icon=t,e.title=arguments&&arguments[1],e.desc=arguments&&arguments[2]):t&&(e.icon=t.iconField,e.title=t.titleField,e.desc=t.descField,e.defIcon=t.defaultIconUrl),r.call(this,e)},s.itemRenderer_button=function(t){var e={style:"ui-list-item3",buttons:null,title:null,desc:null};return"string"==typeof t?(e.title=t,e.desc=arguments&&arguments[1]):f.isArray(t)?(e.buttons=t,e.title=arguments&&arguments[1],e.desc=arguments&&arguments[2]):t&&(e.buttons=t.buttons,e.title=t.titleField,e.desc=t.descField),r.call(this,e)},s.itemRenderer_icon_button=function(t){var e={style:"ui-list-item4",buttons:null,icon:null,title:null,desc:null};return"string"==typeof t?(e.icon=t,e.buttons=arguments&&arguments[1],e.title=arguments&&arguments[2],e.desc=arguments&&arguments[3]):f.isArray(t)?(e.buttons=t,e.title=arguments&&arguments[1],e.desc=arguments&&arguments[2]):t&&(e.icon=t.iconField,e.buttons=t.buttons,e.title=t.titleField,e.desc=t.descField),r.call(this,e)};var r=function(u){function t(t,e,s,a){function i(t,e){if(f.isNotNull(t))return s&&s[t];if(s&&e)for(var i in e){var n=e[i];if(f.isNotBlank(n)&&s.hasOwnProperty(n))return s[n]}return"title"==t&&f.isFunction(r._getDataLabel)?r._getDataLabel(s,a):void 0}var r=this,n=u||{};if(e=t("<div></div>").addClass(n.style),n.hasOwnProperty("icon")){var o=i(n.icon,["icon","image","img"]);t("<img class='icon'/>").appendTo(e).attr("src",f.trimToEmpty(o)||n.defIcon||null)}var l=t("<div class='content'></div>").appendTo(e),c=i(n.title,["title"]);t("<div class='title'></div>").appendTo(l).html(c||"&nbsp;");var d=i(n.desc,["desc","description","remark"]);if(f.isNotBlank(d)&&t("<div class='desc'></div>").appendTo(l).html(d),n.hasOwnProperty("buttons")){var h=t("<div class='btnbar'></div>").appendTo(e);f.each(f.toArray(n.buttons),function(t){"undefined"==typeof VRender?new(require("../button/index"))(r.context,t).render(h):p.button.create(f.extend({},t,{target:h}))})}return e}return t._state=1,t._data=JSON.stringify(u),t};a.render=function(t,e){return e.addClass("ui-list"),this.isChkboxVisible()&&e.addClass("show-chkbox"),e.append("<ul></ul>"),p._selectRender.render.call(this,t,e),this},a.isChkboxVisible=function(){return f.isTrue(this.options.chkbox)},a._renderOneItem=function(t,e,i,n){o.call(this,t,e,i,n)},a._getItemContainer=function(t,e){return e.children("ul")},a._renderEmptyView=function(t,e){p._itemsRender.renderEmptyView.call(this,t,e)},a._renderLoadView=function(t,e){p._itemsRender.renderLoadView.call(this,t,e)};var o=function(t,e,i,n){var s=t("<div class='box'></div>").appendTo(e);p._itemsRender.renderOneItem.call(this,t,e,s,i,n),this.isChkboxVisible()&&e.prepend("<span class='chkbox'></span>")};t?(window.UIList=e,p.init(".ui-list",e,s)):module.exports=s}}("undefined"!=typeof window),function(d){if(!d||!VRender.Component.ui.table){var l=d?VRender.Component.ui:require("../../static/js/init"),s=l.fn,h=l.util,r={date:"yyyy-MM-dd",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss"},u={asc:"/vrender-ui/icons/020c.png",desc:"/vrender-ui/icons/021c.png"},t=l.table=function(t,e){return l._select.call(this,t,e)},e=t.prototype=new l._select(!1);e.init=function(t,e){l._select.init.call(this,t,e),this.__columns=this.getColumns(),t=this.$el;var i=this.gridHead=t.children(".table").children("header").children(),n=this.gridBody=t.children(".table").children("section").children(),s=this._isRenderAsApp(),a=s?"tap":"click";i.on(a,"th.col-chk",p.bind(this)),n.on(a,"tr",o.bind(this)),n.on(a,"td.col-exp .expbtn",f.bind(this)),s?(i.on(a,"th",c.bind(this)),t.on(a,".sort-and-filter",y.bind(this)),t.on(a,".sort-and-filter .item",_.bind(this)),t.on(a,".sort-and-filter input",w.bind(this)),t.on(a,".sort-and-filter .clearbtn",T.bind(this)),t.on(a,".sort-and-filter .submitbtn",C.bind(this)),t.on("keyup",".sort-and-filter input",x.bind(this))):(i.on(a,".toolbar > *",m.bind(this)),i.on(a,".toolbar .dropdown li",v.bind(this)),i.on("mouseenter",".toolbar > *",g.bind(this)),i.on("mouseleave",".toolbar > *",g.bind(this))),E.call(this),this.renderComplete=!0},e.getData=function(t){if(t)return this.options.data=this._doAdapter(this.options.data),this.options.data;var n=this.getData(!0);return h.map(this._getItems(),function(t){var e=t.data("itemData");if(!e){var i=parseInt(t.attr("opt-ind"))||0;e=n[i]}return e})},e.setData=function(t){var e=this._snapshoot();this.options.data=this._doAdapter(t),l._select.setSelectedIndex.call(this,[]),this._getItems().removeClass("selected").removeClass("expand"),O.call(this),e.done([],[])},e.getColumns=function(){if(this.options.hasOwnProperty("columns"))return this.options.columns;function e(t){return new Function("var Utils=VRender.Utils;return ("+unescape(t)+");")()}var i=this.$el.children("[name='columns']");if(i&&0<i.length)try{i=JSON.parse(i.remove().attr("data")),h.each(i,function(t){t.html&&(t.html=unescape(t.html)),/^function/.test(t.sortable)?t.sortable=e(t.sortable):h.isArray(t.sortable)&&h.each(t.sortable,function(t){/^function/.test(t.handler)&&(t.handler=e(t.handler))}),/^function/.test(t.sortFunction)&&(t.sortFunction=e(t.sortFunction)),/^function/.test(t.filter)?t.filter=e(t.filter):h.isArray(t.filter)&&h.each(t.filter,function(t){/^function/.test(t.handler)&&(t.handler=e(t.handler))}),/^function/.test(t.filterFunction)&&(t.filterFunction=e(t.filterFunction))})}catch(t){i=[]}else i=[];return this.options.columns=i,this.options.columns},e.setColumns=function(t){this.options.columns=nt(t);var i=this.__columns=this.options.columns;if(this.currentSort&&this.currentSort.name){var e=h.findBy(i,"name",this.currentSort.name);e&&h.isTrue(e.sortable)&&e.sortType==this.currentSort.type?this.currentSort.column=e:this.currentSort=null}this.currentFilters&&h.remove(this.currentFilters,function(t){if(t.name){var e=h.findBy(i,"name",t.name);if(!e)return!0;t.column=e}}),B.call(this)},e.isHeaderVisible=function(){return!this.$el.is(".no-head")},e.setHeaderVisible=function(t){h.isNull(t)||h.isTrue(t)?this.isHeaderVisible()||(this.$el.removeClass("no-head"),P.call(this)):this.isHeaderVisible()&&(this.$el.addClass("no-head"),P.call(this))},e.isChkboxVisible=function(){return"1"==this.$el.attr("opt-chk")},e.setChkboxVisible=function(t){h.isNull(t)||h.isTrue(t)?this.isChkboxVisible()||(this.$el.attr("opt-chk","1"),B.call(this)):this.isChkboxVisible()&&(this.$el.removeAttr("opt-chk"),B.call(this))},e.getItemRenderer=function(){return i.rowRenderer},e.setItemRenderer=function(t){},e.getHeadRenderer=function(){return s.getFunction.call(this,"headRenderer","hrender")},e.setHeadRenderer=function(t){var e=this.getHeadRenderer()!=t;this.options.headRenderer=t,e&&P.call(this)},e.getColumnRenderer=function(){return this.options.hasOwnProperty("renderer")?this.options.renderer:s.getFunction.call(this,"columnRenderer","crender")},e.setColumnRenderer=function(t){var e=this.getColumnRenderer()!=t;this.options.columnRenderer=t,delete this.options.renderer,e&&O.call(this)},e.getExpandRenderer=function(){return s.getFunction.call(this,"expandRenderer","erender")},e.setExpandRenderer=function(t){var e=this.getExpandRenderer()!=t;if(this.options.expandRenderer=t,e){var i=this._getItemContainer();i.children(".row-expand").remove(),i.children(".expand").removeClass("expand").children(".col-exp").children(".expbtn").trigger("tap")}},e.getExpandColspan=function(){return parseInt(this.$el.attr("opt-expcols"))||0},e.setExpandColsapn=function(t){if(!isNaN(t)&&(t||0===t)&&(t=parseInt(t),!isNaN(t)&&0<t&&this.getExpandColspan()!=t)){this.$el.attr("opt-expcols",t);var e=this._getItemContainer();e.children(".row-expand").remove(),e.children(".expand").removeClass("expand").children(".col-exp").children(".expbtn").trigger("tap")}},e.getRowStyleFunction=function(){return s.getFunction.call(this,"rowStyleFunction","rstyle")},e.setRowStyleFunction=function(t){var e=this.getRowStyleFunction()!=t;this.options.rowStyleFunction=t,e&&O.call(this)},e.getCellStyleFunction=function(){return s.getFunction.call(this,"cellStyleFunction","cstyle")},e.setCellStyleFunction=function(){var t=this.getCellStyleFunction()!=value;this.options.cellStyleFunction=value,t&&O.call(this)},delete e.getLabelField,delete e.setLabelField,delete e.getLabelFunction,delete e.setLabelFunction,delete e.setItemRenderer,e.sort=function(t,e,i){h.isFunction(t)&&(i=t,t=e=null),h.isFunction(e)&&(i=e,e=null),t&&(t=et.call(this,""+t)),z.call(this,t,e,i)},e.filter=function(t,e,i){h.isFunction(t)&&(i=t,t=e=null),h.isFunction(e)&&(i=e,e=null),t&&(t=et.call(this,""+t)),H.call(this,t,e,i)},e.addItem=function(t,e){if(!h.isNull(t)){e=h.getIndexValue(e);var i=this.getData(!0);t=s.doAdapter.call(this,t,e),0<=e&&e<i.length?i.splice(e,0,t):i.push(t);var n=this._snapshoot();O.call(this),n.done(),this.trigger("itemchange",t)}},e.updateItem=function(t,e){if(!h.isNull(t)){var i=this.getData(!0);if(e||0===e?(e=h.getIndexValue(e),t=s.doAdapter.call(this,t,e)):(t=s.doAdapter.call(this,t),e=this.getDataRealIndex(t,i)),0<=e){i.splice(e,1,t);var n=this._snapshoot();O.call(this),n.done(),this.trigger("itemchange",t)}}},e.removeItem=function(t){h.isNotNull(t)&&this.removeItemAt(this.getDataRealIndex(t))},e.removeItemAt=function(t){if(0<=(t=h.getIndexValue(t))){var e=this.getData(!0);if(t<e.length){var i=e.splice(t,1),n=this._snapshoot();O.call(this),n.done(),this.trigger("itemchange",i)}}},e.addOrUpdateItem=function(t){var e=this.getDataRealIndex(t);0<=e?this.updateItem(t,e):this.addItem(t,e)},e.getDataRealIndex=function(e,t){var i=this;if((t=t||this.getData(!0))&&0<t.length){var n=this._getDataKey(e);return h.index(t,function(t){return t==e||i._getDataKey(t)==n})}return-1},e.rerender=function(){B.call(this)},e._getItemContainer=function(){if(!this.itemContainer){var t=this.$el.children(".table").children("section").children();this.itemContainer=t.children("table").children("tbody")}return this.itemContainer},e._getNewItem=function(t,e,i,n){return t("<tr class='table-row'></tr>").appendTo(e)},e._getItemData=function(t){var e=t.data("itemData");if(!e){var i=this.getData(!0);if(h.isArray(i)&&0<i.length){var n=parseInt(t.attr("opt-ind"));if(!isNaN(n)&&0<=n)return i[n]}}return e},e._getSortFunction=function(t,e){return ot.call(this,t,e)},e._getFilterFunction=function(t,e){return lt.call(this,t,e)},
e._hasExpand=function(){return 0<=h.index(this.__columns,function(t){return!!t.expand})},e._snapshoot_change=function(){tt.call(this)};var o=function(t){var e=$(t.currentTarget);if(e.parent().is(this._getItemContainer())){if(e.is(".disabled")||this.isDisabled())return;var i={type:"itemclick",detail:this._getItemData(e),target:t.target};this.trigger(i),i.isPreventDefault||(e.is(".selected")?e.removeClass("selected"):(e.addClass("selected"),this.isMultiple()||e.siblings().removeClass("selected")),tt.call(this))}},c=function(t){var e=$(t.currentTarget),i=e.attr("col-name"),n=i&&et.call(this,i);if(n)if(n.filter||h.isArray(n.sortable))Y.call(this,n,e);else if(n.sortable){var s=e.attr("opt-sort");s="desc"==s?null:"asc"==s?"desc":"asc",z.call(this,n,s)}},p=function(t){if(!this.isDisabled()){var e=this.gridHead.find("tr"),i=[];if(e.is(".selected"))e.removeClass("selected");else{e.addClass("selected");for(var n=0,s=this.length();n<s;n++)i.push(n)}this.setSelectedIndex(i)}},f=function(t){var e=$(t.currentTarget).parent().parent();if(e.parent().is(this._getItemContainer())){if(e.is(".disabled"))return!1;if(e.is(".expand"))e.removeClass("expand"),e.next().remove();else{e.addClass("expand");var i=parseInt(e.attr("opt-ind"))||0,n=this._getItemData(e,i);V.call(this,$,e,n,i)}return!1}},m=function(t){var e=$(t.currentTarget),i=e.parent().parent(),n=et.call(this,i.attr("col-name")),s=e.children(".dropdown");if(s&&0<s.length)e.addClass("show-dropdown"),s.is(".ipt")&&s.find("input").focus().off("keydown").on("keydown",b.bind(this));else if(e.is(".sort")){var a=i.attr("opt-sort");a="desc"==a?null:"asc"==a?"desc":"asc",z.call(this,n,a)}else e.is(".filter")},g=function(t){var e=$(t.currentTarget),i=parseInt(e.attr("opt-t"))||0;i&&(clearTimeout(i),e.removeAttr("opt-t")),"mouseleave"==t.type&&(i=setTimeout(function(){if(e.removeClass("show-dropdown"),e.removeAttr("opt-t"),e.is(".filter")){var t=e.find("input");t&&0<t.length&&VRender.onInputChange(t,null)}},400),e.attr("opt-t",i))},v=function(t){var e=$(t.currentTarget),i=e.parent().parent(),n=i.parent().parent(),s=et.call(this,n.attr("col-name")),a=parseInt(i.attr("opt-t"))||0;return a&&clearTimeout(a),i.removeClass("show-dropdown").removeAttr("opt-t"),i.is(".sort")?z.call(this,s,e.is(".selected")?null:e.attr("data-type")):i.is(".filter")&&H.call(this,s,e.is(".selected")?null:e.attr("data-val")),!1},b=function(t){if(13==t.which){var e=$(t.currentTarget),i=h.parentUntil(e,"th").attr("col-name");if(i){var n=et.call(this,i);H.call(this,n,e.val()||null)}}},y=function(t){if($(t.target).is(".sort-and-filter"))return X.call(this),!1},_=function(t){var e=$(t.currentTarget),i=this.$el.children(".sort-and-filter").data("column");if(e.parent().parent().is(".sort")){var n=e.is(".selected")?null:e.attr("data-type");z.call(this,i,n)}else{var s=e.is(".selected")?null:e.attr("data-val");H.call(this,i,s)}X.call(this)},w=function(t){this.$el.children(".sort-and-filter").addClass("inputing")},T=function(t){var e=this.$el.children(".sort-and-filter"),i=e.find("input").val("");e.is(".inputing")&&setTimeout(function(){i.focus()},0)},C=function(t){var e=this.$el.children(".sort-and-filter"),i=e.data("column"),n=e.find("input").val()||null;H.call(this,i,n),X.call(this)},x=function(t){13==t.which&&this.$el.children(".sort-and-filter").find(".submitbtn").tap()},i=function(t,e){l._selectRender.call(this,t,e)},n=i.prototype=new l._selectRender(!1);i.rowRenderer=function(t,e,i,n){N.call(this,t,e,this.__columns,i,n)},i.rowRenderer._state=1,n.render=function(t,e){e.addClass("ui-table");var i=h.getFormatSize(this.options.height,this._isRenderAsRem());i&&e.attr("opt-fixed","1").css("height",i),this.isChkboxVisible()&&e.attr("opt-chk","1");var n=parseInt(this.options.expandcols);n&&e.attr("opt-expcols",n);var s=t("<div class='table'></div>").appendTo(e);s.append("<header><div></div></header>"),s.append("<section><div><table><thead></thead><tbody></tbody></table></div></section>");var a=this.__columns=this.getColumns();return l._selectRender.render.call(this,t,e),D.call(this,t,e,a),M.call(this,t,e,a),this.renderComplete=!0,this},n.getColumns=function(){return nt(this.options.columns)},n.isChkboxVisible=function(){return h.isTrue(this.options.chkbox)},n.isHeaderVisible=function(){return!this.options.hasOwnProperty("showHeader")||h.isTrue(this.options.showHeader)},n.getHeadRenderer=function(){return this.options.headRenderer},n.getColumnRenderer=function(){return this.options.columnRenderer||this.options.renderer},n.getExpandRenderer=function(){return this.options.expandRenderer},n.getRowStyleFunction=function(){return this.options.rowStyleFunction},n.getCellStyleFunction=function(){return this.options.cellStyleFunction},n.getItemRenderer=function(){return i.rowRenderer},n._getItemContainer=function(t,e){return(e=e.children(".table").children("section").children()).children("table").children("tbody")},n._getNewItem=function(t,e,i,n){return t("<tr class='table-row'></tr>").appendTo(e)},n._renderItems=function(t,e){var s=this,i=this.getData(),a=!1,n=null,r=[].concat(i);if(i&&0<i.length){h.each(this.__columns,function(i){if(h.isTrue(i.filter)&&h.isNotBlank(i.filterValue)){var n=s._getFilterFunction(i,i.filterValue);r=h.filter(r,function(t,e){return n(i,t,i.filterValue)}),a=!0}});var o=h.find(this.__columns,function(t){return h.isTrue(t.sortable)&&t.sortType});if(o){var l=this._getSortFunction(o,o.sortType);r.sort(function(t,e){return l(o,t,e,o.sortType)}),a=!0}}a&&(n=h.map(r,function(e){return h.index(i,function(t){return t==e})})),this._renderDatas=r,k.call(this,t,e,r,n)},n._renderEmptyView=function(t,e){l._itemsRender.renderEmptyView.call(this,t,e)},n._renderLoadView=function(t,e){l._itemsRender.renderLoadView.call(this,t,e)},n._getSortFunction=function(t,e){return ot.call(this,t,e)},n._getFilterFunction=function(t,e){return lt.call(this,t,e)},n._hasExpand=function(){return 0<=h.index(this.__columns,function(t){return!!t.expand})};var D=function(s,t,e){var a=this;if(this.isHeaderVisible()){var i=this._isRenderAsApp(),n=(t=t.removeClass("no-head").children(".table")).children("section").children().children("table").children("thead").empty(),r=s("<tr></tr>").appendTo(n);this.isAllSelected(this._renderDatas||[])&&r.addClass("selected"),this._hasExpand()&&!i&&r.append("<th class='col-exp'></th>"),this.isChkboxVisible()&&r.append("<th class='col-chk'><div><span class='chkbox'></span></div></th>"),h.each(e,function(t,e){if(!t.expand){var i=s("<th></th>").appendTo(r);i.addClass("col-"+e),h.isNotBlank(t.name)&&i.attr("col-name",t.name),h.isNotBlank(t.dataType)&&i.attr("col-type",t.dataType);var n=h.getFormatSize(t.width,a._isRenderAsRem());n&&i.css("width",n),I.call(a,s,i,t,e),A.call(a,s,i,t,e)}}),this._hasExpand()&&i&&r.append("<th class='col-exp'></th>");var o=t.children("header").children().empty();d?o.html("<table><thead>"+n.html()+"</thead></table>"):o.write("<table><thead>"+n.html()+"</thead></table>"),r.find(".dropdown").remove()}else t.addClass("no-head")},I=function(t,e,i,n){if(!i.html){var s=this.getHeadRenderer();if(h.isFunction(s)){var a=s(i,n);if(a)return void(!d&&h.isFunction(a.render)?a.render(e):e.append(a.$el||a))}}i.icon&&t("<i>&nbsp;</i>").appendTo(e).css("backgroundImage","url("+i.icon+")");var r=t("<div class='title'></div>").appendTo(e);i.html?r.html(i.html):r.text(i.title||i.name||"列 "+(n+1))},A=function(t,e,i,n){if(i.sortable||i.filter){var s=t("<div class=toolbar></div>").appendTo(e);i.sortable&&(i.sortType&&e.attr("opt-sort",i.sortType),a.call(this,t,s,i)),i.filter&&(i.filterValue&&e.attr("opt-filter",i.filterValue),F.call(this,t,s,i))}},a=function(t,e,i){var n=t("<div class='sort'><i title='排序'></i></div>").appendTo(e);this._isRenderAsApp()||h.isArray(i.sortable)&&0<i.sortable.length&&S.call(this,t,n,i.sortable,i.sortType,"无")},F=function(t,e,i){var n=t("<div class='filter'><i title='筛选'></i></div>").appendTo(e),s=i.filter;if("enum"==s&&(s=(s=it.call(this,i))&&0<s.length?h.map(s,function(t){return{label:t,value:t}}):[{label:"无选项",value:""}]),!this._isRenderAsApp())if(h.isArray(s))S.call(this,t,n,s,i.filterValue,"空");else{var a=t("<div class='dropdown ipt'></div>").appendTo(n),r=t("<input/>").appendTo(a);i.filterValue&&r.val(i.filterValue)}},S=function(r,o,t,l,c){var d=r("<ul class='dropdown'></ul>").appendTo(o);h.each(t,function(t){var e=r("<li></li>").appendTo(d),i=!1;t.hasOwnProperty("type")&&(e.attr("data-type",t.type),i=t.type==l),t.hasOwnProperty("value")&&(e.attr("data-val",t.value),i=t.value==l);var n=r("<i></i>").appendTo(e),s=t.icon||u[t.type];if(s&&n.css("backgroundImage","url("+s+")"),r("<span></span>").appendTo(e).text(t.label||c),i){e.addClass("selected");var a=o.children("i");s&&a.css("backgroundImage","url("+s+")"),t.label&&a.attr("title",t.label)}})},k=function(s,t,e,a,i){var r=this,o=this._getItemContainer(s,t).empty(),l=i||this.getSelectedIndex(!0),c=this.getSelectedKey(!0)||[];h.each(e,function(t,e){var i=a?a[e]:e,n=r._getNewItem(s,o,t,i);n&&(r._renderOneItem(s,n,t,i),r._isSelected(t,e,l,c)&&n.addClass("selected"))})},N=function(n,s,t,a,r){var o=this;s.attr("opt-ind",r);var e=this._isRenderAsApp(),i=this.getRowStyleFunction();if(h.isFunction(i)){var l=i(a,r);l&&s.css(l)}this._hasExpand()&&!e&&s.append("<td class='col-exp'><span class='expbtn'></span></td>"),this.isChkboxVisible()&&s.append("<td class='col-chk'><div><span class='chkbox'></span></div></td>"),h.each(t,function(t,e){if(!t.expand){var i=n("<td></td>").appendTo(s);R.call(o,n,i,t,a,r,e)}}),this._hasExpand()&&e&&s.append("<td class='col-exp'><span class='expbtn'></span></td>")},R=function(t,e,i,n,s,a){var r=this.getCellStyleFunction();if(h.isFunction(r)){var o=r(i.name,n,s,a);o&&e.css(o)}e.addClass("col-"+a),h.isNotBlank(i.name)&&e.attr("col-name",i.name);var l=null,c=this.getColumnRenderer();h.isFunction(c)&&(l=c(i.name,n,s,a,i)),h.isNull(l)&&(l=ht.call(this,i,n,a)),h.isBlank(l)&&(l="&nbsp;"),!d&&h.isFunction(l.render)?l.render(e):e.append(l.$el||l)},M=function(t,e,i){if(!d){var n=h.map(i,function(t){var e=h.extend({},t);return e.html&&(e.html=escape(e.html)),h.isFunction(e.sortFunction)?e.sortFunction=escape(e.sortFunction):h.isArray(e.sortable)&&h.each(e.sortable,function(t){h.isFunction(t.handler)&&(t.handler=escape(t.handler))}),h.isFunction(
e.filterFunction)?e.filterFunction=escape(e.filterFunction):h.isArray(e.filter)&&h.each(e.filter,function(t){h.isFunction(t.handler)&&(t.handler=escape(t.handler))}),e});e.write("<div class='ui-hidden' name='columns' data='"+JSON.stringify(n)+"'></div>"),s.renderFunction(e,"hrender",this.getHeadRenderer()),s.renderFunction(e,"crender",this.getColumnRenderer()),s.renderFunction(e,"erender",this.getExpandRenderer()),s.renderFunction(e,"rstyle",this.getRowStyleFunction()),s.renderFunction(e,"cstyle",this.getCellStyleFunction())}},V=function(s,t,a,r){var o=this,e=s("<tr class='row-expand'></tr>").insertAfter(t),i=s("<td></td>").appendTo(e);i.attr("colspan",t.children().length);var n=s("<div class='container'></div>").appendTo(i),l=this.getExpandRenderer();if(h.isFunction(l)){var c=l(a,r);h.isNotNull(c)&&n.append(c.$el||c)}else{var d=s("<div class='table-expand'></div>").appendTo(n);d.attr("cols",this.getExpandColspan()),h.each(this.__columns,function(t,e){if(h.isTrue(t.expand)){var i=s("<div></div>").appendTo(d);i.addClass("col-"+e).attr("col-name",t.name),i=s("<dl></dl>").appendTo(i),s("<dt></dt>").appendTo(i).text(t.title||t.name||"");var n=s("<dd></dd>").appendTo(i);R.call(o,s,n,t,a,r,e),i.removeClass("col-"+e).removeAttr("col-name")}})}},B=function(){var t=this;this.t_rerender&&(clearTimeout(this.t_rerender),this.t_rerender=0),this.t_rerenderheader&&(clearTimeout(this.t_rerenderheader),this.t_rerenderheader=0),this.t_rerenderitems&&(clearTimeout(this.t_rerenderitems),this.t_rerenderitems=0),this.t_rerender=setTimeout(function(){t.t_rerender=0,D.call(t,$,t.$el,t.__columns),q.call(t,!0)},0)},P=function(){var t=this;this.t_rerender||(this.t_rerenderheader&&(clearTimeout(this.t_rerenderheader),this.t_rerenderheader=0),this.t_rerenderheader=setTimeout(function(){t.t_rerenderheader=0,D.call(t,$,t.$el,t.__columns)},0))},O=function(){var t=this;this.t_rerender||(this.t_rerenderitems&&(clearTimeout(this.t_rerenderitems),this.t_rerenderitems=0),this.t_rerenderitems=setTimeout(function(){t.t_rerenderitems=0,q.call(t,!0),L.call(t)},0))},L=function(){var a=this;this._isRenderAsApp()||h.each(j.call(this),function(t){if(t.attr("col-name")){var e=et.call(a,t.attr("col-name"));if(e&&"enum"==e.filter){var i=t.find(".toolbar .filter"),n=it.call(a,e),s=t.attr("opt-filter");n=n&&0<n.length?h.map(n,function(t){return{label:t,value:t}}):[{label:"无选项",value:""}],i.children(".dropdown").remove(),S.call(a,$,i,n,s,"空")}}})},E=function(){this.$el.children("[name='irender']").remove(),G.call(this)},z=function(t,e,i){var n=j.call(this);n.removeAttr("opt-sort"),n.find(".sort > i").css("backgroundImage",""),n.find(".sort .dropdown li").removeClass("selected");var s=t&&"custom"==t.sortable;if(t&&t.name&&h.isNotNull(e)){var a=n.filter("[col-name='"+t.name+"']");if(a&&0<a.length){a.attr("opt-sort",e);var r=u[e];if(h.isArray(t.sortable)){this._isRenderAsApp()||a.find(".sort li[data-type='"+e+"']").addClass("selected");var o=h.findBy(t.sortable,"type",e)||{};r=o.icon||r,s=h.isTrue(o.custom)}r&&a.find(".sort > i").css("backgroundImage","url("+r+")")}}if(this.currentSort={column:t,type:e,fn:i,name:t&&t.name},h.isFunction(i)){var l=i;this.currentSort.fn=function(t,e,i,n){return l(e,i,n,t)}}else h.isNotNull(e)&&!s&&(this.currentSort.fn=this._getSortFunction(t,e));!h.isFunction(this.currentSort.fn)&&s||q.call(this),this.trigger("sort",t&&t.name,e)},H=function(t,e,i){var n=t&&"custom"==t.filter,s=h.isNull(e)||!1===e;if(t&&t.name){var a=j.call(this).filter("[col-name='"+t.name+"']");if(a&&0<a.length&&(a.removeAttr("opt-filter"),a.find(".filter > i").css("backgroundImage",""),a.find(".filter li").removeClass("selected"),(!s||h.isFunction(i))&&(a.attr("opt-filter",!!s||e),this._isRenderAsApp()||(a.find(".filter .dropdown").is(".ipt")?a.find(".filter input").val(s?"":e):s||a.find(".filter li[data-val='"+e+"']").addClass("selected")),h.isArray(t.filter)))){var r=h.findBy(t.filter,"value",e)||{};r.icon&&a.find(".filter > i").css("backgroundImage","url("+r.icon+")"),n=h.isTrue(r.custom)}}if(h.isFunction(i)){var o=i;i=function(t,e,i){return o(e,i,t)}}else s||n||(i=this._getFilterFunction(t,e));var l=t&&t.name||"";if(this.currentFilters)if(!s||h.isFunction(i)){var c=h.findBy(this.currentFilters,"name",l);c||(c={name:l,column:t},this.currentFilters.push(c)),c.value=e,c.fn=i}else h.removeBy(this.currentFilters,"name",l);n||q.call(this,!0),this.trigger("filter",l,e)},q=function(t){var n=this.getData(!0);if(t||!this.lastFilterDatas){var i=[].concat(n);i&&0<i.length&&(this.currentFilters||U.call(this),h.each(this.currentFilters,function(e){i=h.filter(i,function(t){return e.fn(e.column,t,e.value)})})),this.lastFilterDatas=i}var s=this.lastFilterDatas;if(this.currentSort||K.call(this),this.currentSort&&h.isFunction(this.currentSort.fn)){var a=this.currentSort;s=s.slice(0).sort(function(t,e){return a.fn(a.column,t,e,a.type)})}var e=h.map(s,function(e){return h.index(n,function(t){return t==e})}),r=[],o=[];h.each(this._getItems(),function(t){if(t.is(".selected")){var e=parseInt(t.attr("opt-ind"))||0,i=n&&n[e];i&&0<=(e=h.index(s,function(t){return t==i}))&&r.push(e)}t.is(".expand")&&o.push(t.attr("opt-ind"))}),k.call(this,$,this.$el,s,e,r),tt.call(this),t&&l._items.checkIfEmpty.call(this),0<o.length&&h.each(this._getItems(),function(t){0<=o.indexOf(t.attr("opt-ind"))&&t.children(".col-exp").children(".expbtn").trigger("tap")})},K=function(){var t=h.find(j.call(this),function(t){return!!t.attr("opt-sort")});if(this.currentSort=null,t&&0<t.length){var e=t.attr("col-name"),i=t.attr("opt-sort"),n=et.call(this,e),s=this._getSortFunction(n,i);this.currentSort={name:e,column:n,type:i,fn:s}}},U=function(){var a=this,r=this.currentFilters=[];h.each(j.call(this),function(t){var e=t.attr("col-name"),i=t.attr("opt-filter");if(e&&h.isNotNull(i)&&!1!==i){var n=et.call(a,e),s=a._getFilterFunction(n,i);r.push({name:e,column:n,value:i,fn:s})}})},j=function(){return this.gridHead.children("table").children("thead").children("tr").children("th")},Y=function(t,e){$("body").addClass("ui-scrollless");var i=$("<div class='sort-and-filter'></div>").appendTo(this.$el),n=$("<div class='container'></div>").appendTo(i);i.data("column",t);var s=h.isTrue(t.sortable),a=h.isTrue(t.filter);s&&W.call(this,n,t,e.attr("opt-sort")),a&&J.call(this,n,t,e.attr("opt-filter")),s||!a||"enum"==t.filter||h.isArray(t.filter)||(i.addClass("inputing"),i.find(".filter").focus()),setTimeout(function(){i.addClass("show")},0)},W=function(t,e,s){var i=$("<div class='sort'></div>").appendTo(t);i.append("<div class='title'>排序</div>");var n=e.sortable;h.isArray(n)||(n=[{label:"升序",type:"asc"},{label:"降序",type:"desc"}]);var a=$("<div class='content'></div>").appendTo(i);h.each(n,function(t){var e=$("<div class='item'></div>").appendTo(a);e.attr("data-type",t.type);var i=$("<i></i>").appendTo(e),n=t.icon||u[t.type];n&&i.css("backgroundImage","url("+n+")"),$("<span></span>").appendTo(e).text(t.label||"无"),t.type==s&&e.addClass("selected")})},J=function(t,e,n){var i=$("<div class='filter'></div>").appendTo(t);i.append("<div class='title'>筛选</div>");var s=e.filter;"enum"==e.filter&&(s=(s=it.call(this,e))&&0<s.length?h.map(s,function(t){return{label:t,value:t}}):[{label:"无选项",value:""}]);var a=$("<div class='content'></div>").appendTo(i);if(h.isArray(s))h.each(s,function(t){var e=$("<div class='item'></div>").appendTo(a);e.attr("data-val",t.value);var i=$("<i></i>").appendTo(e);t.icon&&i.css("backgroundImage","url("+t.icon+")"),$("<span></span>").appendTo(e).text(t.label||"空"),t.value==n&&e.addClass("selected")});else{var r=$("<div class='filterinput'></div>").appendTo(a);r.append("<input placeholder='请输入文本'/>"),r.append("<div class='clearbtn'></div>"),r.append("<div class='submitbtn'>确定</div>"),n&&r.children("input").val(n)}},X=function(){$("body").removeClass("ui-scrollless");var t=this.$el.children(".sort-and-filter");t.removeClass("show").removeClass("inputing"),setTimeout(function(){t.remove()},300)},G=function t(){var e=this;this.t_layout&&(clearTimeout(this.t_layout),this.t_layout=0),this.t_layout=setTimeout(function(){e.t_layout=0,e.isMounted()&&(Q.call(e),Z.call(e),t.call(e))},50)},Q=function(){if(this.isHeaderVisible()){var s=j.call(this),t=this.gridBody.children("table").children("thead").children("tr").children("th");h.each(t,function(t,e){var i=s.eq(e);if(t.is(".is-expand"))i.addClass("is-expand");else{var n=t.width();n!=parseInt(i.attr("opt-w"))&&i.attr("opt-w",n).width(n)}})}},Z=function(){},tt=function(){var t=this._snapshoot(),e=h.map(this._getItems(".selected"),function(t){return t.index()});if(l._select.setSelectedIndex.call(this,e),this.isMultiple()){var i=this.gridHead.find("tr");this.isAllSelected()?i.addClass("selected"):i.removeClass("selected")}t.done()},et=function(t){return h.findBy(this.__columns,"name",t)},it=function(t,e){var i=[],n=t&&t.name;return n&&(e=e||this.getData(!0),h.each(e,function(t){var e=t&&t[n];h.index(i,function(t){return t==e})<0&&i.push(e)})),i.sort()},nt=function(t){t=h.map(h.toArray(t),st);var e=null,i=!0;return h.each(t,function(t){t.sortType&&(e&&(e.sortType=null),e=t),t.expand||(i=!1)}),i&&0<t.length&&(t[0].expand=!1),t},st=function(t,e){var i={};return h.isNull(t)?i.title="列 "+(e+1):h.isPrimitive(t)?i.name=h.trimToEmpty(t):(i.name=h.trimToEmpty(t.name),i.title=h.trimToNull(t.title),i.html=h.trimToNull(t.focusHtmlTitle),i.dataType=h.trimToNull(t.dataType||t.type),i.icon=h.trimToNull(t.icon),i.width=h.trimToNull(t.width),i.expand=h.isTrue(t.expand),h.isTrue(t.sortable)&&at(i,t),h.isTrue(t.filter)&&rt(i,t)),i},at=function(t,e){h.isFunction(e.sortFunction)?t.sortFunction=e.sortFunction:h.isFunction(e.sortable)&&(t.sortFunction=e.sortable),h.isArray(e.sortable)&&0<e.sortable.length?t.sortable=h.map(e.sortable,function(t){return{type:t.type,label:t.label,icon:t.icon,handler:t.handler,custom:t.custom}}):t.sortable="custom"!=e.sortable||"custom",t.sortType=e.sortType?h.trimToNull(e.sortType):null},rt=function(t,e){h.isFunction(e.filterFunction)?t.filterFunction=e.filterFunction:h.isFunction(e.filter)&&(t.filterFunction=e.filter),h.isArray(e.filter)&&0<e.filter.length?t.filter=h.map(e.filter,function(t){return{label:t.label,value:t.value,icon:t.icon,handler:t.handler,custom:t.custom}}):t.filter=!/^(custom|enum)$/.test(
e.filter)||e.filter,t.filterValue=e.filterValue?h.trimToNull(e.filterValue):null},ot=function(s,t){if(s){if(h.isNotNull(t)&&h.isArray(s.sortable)){var a=h.findBy(s.sortable,"type",t);if(a&&h.isFunction(a.handler))return function(t,e,i,n){return a.handler(e,i,n)}}if(h.isFunction(s.sortFunction))return function(t,e,i,n){return s.sortFunction(e,i,n)}}if(h.isFunction(this.options.sortFunction)){var r=this.options.sortFunction;return function(t,e,i,n){return r(e,i,n,t)}}return ct},lt=function(n,t){if(n){if(h.isNotNull(t)&&h.isArray(n.filter)){var s=h.findBy(n.filter,"value",t);if(s&&h.isFunction(s.handler))return function(t,e,i){return s.handler(e,i)}}if(h.isFunction(n.filterFunction))return function(t,e,i){return n.filterFunction(e,i)}}if(h.isFunction(this.options.filterFunction)){var a=this.options.filterFunction;return function(t,e,i){return a(e,i,t)}}return dt},ct=function(i,t,e,n){if(i&&i.name&&/^(asc|desc)$/i.test(n)){var s=t?t[i.name]:null,a=e?e[i.name]:null;return function(){if(h.isNull(s))return h.isNull(a)?0:-1;if(h.isNull(a))return h.isNull(s)?0:1;var t=i.dataType;if(/date/i.test(t)){if(s=h.toDate(s),a=h.toDate(a),!s)return a?1:0;if(!a)return s?-1:0;var e=/^date$/i.test(t)?"yyyyMMddHHmmss":"yyyyMMdd";return s=h.toDateString(s,e),a=h.toDateString(a,e),s<a?-1:a<s?1:0}return/num/i.test(t)||!isNaN(s)&&!isNaN(a)?parseFloat(s)-parseFloat(a):s.localeCompare(a)}()*(/^asc$/i.test(n)?1:-1)}return 0},dt=function(t,e,i){if(!t&&!t.name)return!0;if(h.isNull(e))return!1;var n=e[t.name];if(n===i)return!0;var s=t.dataType;if(/date/i.test(s)){if(!(i=h.toDate(i)))return!0;if(n=h.toDate(n)){var a=/^date$/i.test(s)?"yyyyMMdd":"yyyyMMddHHmmss";return i=h.toDateString(i,a),0===(n=h.toDateString(n,a)).indexOf(i)}return!1}return h.isNull(n)?h.isNull(i):h.isNull(i)?h.isNull(n):/num/i.test(s)||!isNaN(i)&&!isNaN(n)?parseFloat(i)==parseFloat(n):i==n||(i=h.trimToEmpty(i),0<=(n=h.trimToEmpty(n)).indexOf(i))},ht=function(t,e,i){if(h.isBlank(e))return null;if(h.isBlank(t.name))return""+e;var n=e[t.name];if(t.dataType&&h.isNotBlank(n)){var s=t.dataType;if("localtime"===s)n=h.toLocalDateString(h.toDate(n));else if(/^(date|datetime|time)$/.test(s))(n=h.toDate(n))&&(n=h.toDateString(n,r[s]));else if("money"===s)n=parseFloat(n),n=isNaN(n)?null:"<span class='val'>￥<span class='v1'>"+(n=n.toFixed(2).split("."))[0]+"</span>.<span class='v2'>"+n[1]+"</span></span>";else if("number"===s||"num"===s)if(n=parseFloat(n),isNaN(n))n=null;else{var a=parseFloat(t.decimals);(isNaN(a)||a<0)&&(a=0),n=n.toFixed(a)}}return n};d?(window.UITable=t,l.init(".ui-table",t,i)):module.exports=i}}("undefined"!=typeof window),function(s){if(!s||!VRender.Component.ui.scroll){var a=s?VRender.Component.ui:require("../../static/js/init"),r=a.fn,l=a.util,t=a.scroll=function(t,e){return a._base.call(this,t,e)},e=t.prototype=new a._base(!1);e.init=function(t,e){a._base.init.call(this,t,e),f.call(this)},e.reset=function(){y.call(this)},e.getContentView=function(){if(!this.contentView){var t=this.$el.children(".container").children();t&&0<t.length?(1===t.length&&(this.contentView=VRender.Component.get(t)),this.contentView||(this.contentView=t)):this.contentView=this.$el.children(".container")}return this.contentView},e.setContentView=function(t){b.call(this);var e=this.options.content=t;delete this.options.view,this.contentView=null,e&&this.$el.children(".container").empty().append(e.$el||e);v.call(this)},e.getScrollContainer=function(){return this.scroller||(this.options.hasOwnProperty("scroller")?this.scroller=this.options.scroller:this.scroller=this.$el.attr("opt-scroll"),this.$el.removeAttr("opt-scroll"),this.scroller=this.scroller?$(this.scroller):this.$el),this.scroller},e.setScrollContainer=function(t){g.call(this),this.options.scroller=t,this.scroller=null,m.call(this)},e.getRefreshFunction=function(){return r.getFunction.call(this,"refreshFunction","refresh")},e.setRefreshFunction=function(t){this.options.refreshFunction=t},e.getMoreFunction=function(){return r.getFunction.call(this,"moreFunction","more")},e.setMoreFunction=function(t){this.options.moreFunction=t},e.getTopDistance=function(){return l.isNull(this.topDistance)&&(this.options.hasOwnProperty("topDistance")?this.topDistance=this.options.topDistance:(this.topDistance=this.$el.attr("opt-top"),this.$el.removeAttr("opt-top")),this.topDistance||(this.topDistance=this._isRenderAsRem()?"0.5rem":"50px"),this.topDistance=l.toPx(this.topDistance)),this.topDistance},e.setTopDistance=function(t){this.options.topDistance=t,this.$el.removeAttr("opt-top"),this.topDistance=null},e.getBottomDistance=function(){return l.isNull(this.bottomDistance)&&(this.options.hasOwnProperty("bottomDistance")?this.bottomDistance=this.options.bottomDistance:(this.bottomDistance=this.$el.attr("opt-bottom"),this.$el.removeAttr("opt-bottom")),this.bottomDistance||0===this.bottomDistance||(this.bottomDistance=this._isRenderAsRem()?"0.7rem":"70px"),this.bottomDistance=l.toPx(this.bottomDistance)),this.bottomDistance},e.setBottomDistance=function(t){this.options.bottomDistance=t,this.$el.removeAttr("opt-bottom"),this.bottomDistance=null};var i=function(t){"mousedown"==t.type?w.call(this,t):"mousemove"==t.type?T.call(this,t):"mouseup"==t.type?C.call(this,t):"mouseleave"==t.type&&C.call(this,t)},n=function(t){"touchstart"==t.type?w.call(this,t):"touchmove"==t.type?T.call(this,t):"touchend"==t.type?C.call(this,t):"touchcancel"==t.type&&C.call(this,t)},o=function(t,e){a._baseRender.call(this,t,e)};(o.prototype=new a._baseRender(!1)).render=function(t,e){if(e.addClass("ui-scroll"),e.append("<div class='top'></div>"),e.append("<div class='container'></div>"),e.append("<div class='bottom'></div>"),a._baseRender.render.call(this,t,e),c.call(this,t,e),d.call(this,t,e),h.call(this,t,e),u.call(this,t,e),!s){var i=this.options||{},n=I.call(this);n&&e.attr("opt-scroll",n),!i.topDistance&&0!==i.topDistance||e.attr("opt-top",i.topDistance),!i.bottomDistance&&0!==i.bottomDistance||e.attr("opt-bottom",i.bottomDistance),r.renderFunction(e,"refresh",i.refreshFunction),r.renderFunction(e,"more",i.moreFunction)}return this};var c=function(t,e){e=e.children(".container");var i=this.options.content||this.options.view;i&&p(e,i)},d=function(t,e){e=e.children(".top").empty();var i=this.options||{};if(i.refreshView)p(e,this.options.refreshView);else{var n=t("<div class='scroll-refreshdef'></div>").appendTo(e),s=l.isNull(i.refreshPullText)?"下拉刷新":l.trimToEmpty(i.refreshPullText);s&&t("<div class='pull'></div>").appendTo(n).text(s);var a=l.isNull(i.refreshDropText)?"松开刷新":l.trimToEmpty(i.refreshDropText);a&&t("<div class='drop'></div>").appendTo(n).text(a);var r=l.isNull(i.refreshLoadText)?"正在刷新..":l.trimToEmpty(i.refreshLoadText);r&&t("<div class='load'></div>").appendTo(n).text(r)}},h=function(t,e){e=e.children(".bottom").empty();var i=t("<div class='scroll-load'></div>").appendTo(e);if(this.options.loadingView)p(i,this.options.loadingView);else{var n=t("<div class='scroll-loaddef'></div>").appendTo(i),s=this.options.loadingText;(s=l.isNull(s)?"正在加载..":l.trimToEmpty(s))&&t("<p></p>").appendTo(n).text(s)}if(i=t("<div class='scroll-bottom'></div>").appendTo(e),this.options.bottomView)p(i,this.options.bottomView);else{var a=t("<div class='scroll-bottomdef'></div>").appendTo(i),r=this.options.bottomText;(r=l.isNull(r)?"没有更多了":l.trimToEmpty(r))&&t("<p></p>").appendTo(a).text(r)}},u=function(t,e){a._itemsRender.renderEmptyView.call(this,t,e)},p=function(t,e){l.isFunction(e.render)?e.render(t):t.append(e.$el||e)},f=function(){var t=this;m.call(this),v.call(this),setTimeout(function(){F.call(t),k.call(t)&&t.$el.addClass("is-loading")},50)},m=function(){var t=this.getScrollContainer();t.on("scroll.scroll",function(t){var e=A.call(this,t);e.isUp&&e.bottom<=this.getBottomDistance()&&_.call(this,e)}.bind(this)),this._isRenderAsApp()?(t.on("touchstart.scroll",n.bind(this)),t.on("touchend.scroll",n.bind(this)),t.on("touchmove.scroll",n.bind(this)),t.on("touchcancel.scroll",n.bind(this))):(t.on("mousedown.scroll",i.bind(this)),t.on("mouseup.scroll",i.bind(this)),t.on("mousemove.scroll",i.bind(this)),t.on("mouseleave.scroll",i.bind(this)))},g=function(){var t=this.getScrollContainer();t.off("scroll.scroll"),this._isRenderAsApp()?(t.off("touchstart.scroll"),t.off("touchend.scroll"),t.off("touchmove.scroll"),t.off("touchcancel.scroll")):(t.off("mousedown.scroll"),t.off("mouseup.scroll"),t.off("mousemove.scroll"),t.off("mouseleave.scroll"))},v=function(){var t=this.getContentView();if(t&&l.isFunction(t.on)){t.scroll_loaded=function(){(function(){var t=this;this.$el.removeClass("is-loading").removeClass("is-refresh"),F.call(this)&&this.$el.addClass("no-more"),this.$el.is(".no-more")||this.$el.children(".container").outerHeight()<this.$el.height()&&setTimeout(function(){_.call(t)},10)}).call(this)}.bind(this),t.on("loaded",t.scroll_loaded);t.scroll_itemchange=function(){(function(){var t=this;this.itemChangeTimer&&clearTimeout(this.itemChangeTimer),this.itemChangeTimer=setTimeout(function(){t.itemChangeTimer=0,F.call(t)},0)}).call(this)}.bind(this),t.on("itemchange",t.scroll_itemchange)}},b=function(){var t=this.getContentView();t&&l.isFunction(t.off)&&(t.scroll_loaded&&t.off("loaded",t.scroll_loaded),t.scroll_itemchange&&t.off("itemchange",t.scroll_itemchange))},y=function(){var t=this;if(!this.$el.is(".is-refresh, .is-loading")){var e=this.$el.addClass("is-refresh"),i=function(){e.removeClass("is-refresh"),D.call(t),F.call(t)},n=!1,s=this.getContentView();if(s&&l.isFunction(s.reload))var a=n=s.reload(1,function(){setTimeout(function(){!1!==a&&i()},0)});if(!1===n){var r=this.getRefreshFunction();if(l.isFunction(r))var o=n=r(function(){setTimeout(function(){!1!==o&&i()},0)})}this.trigger("refresh"),!1===n&&i()}},_=function(t){var e=this;if(!this.$el.is(".is-loading, .is-refresh, .no-more")){var i=this.$el.addClass("is-loading"),n=function(t){t||i.addClass("no-more"),i.removeClass("is-loading"),F.call(e)},s=!1,a=this.getContentView();if(a)l.isFunction(a.more)&&(s=a.more(function(){!1!==s&&(l.isFunction(a.hasMore)?n(a.hasMore()):n(!0))}));else{var r=a.$el||a;if(!l.isFunction(r.is)||!r.is(".no-more")){var o=this.getMoreFunction();l.isFunction(o)&&(s=o(function(t){!1!==s&&(t&&t.hasOwnProperty("hasMore")?n(l.isTrue(t.hasMore)):n(!0)
)}))}}!1===s&&n(!1),this.trigger("more")}},w=function(t){if("touchstart"==t.type){if(1<t.touches.length)return;t=t.touches[0]}var e=this.dragData={};e.scroller=this.getScrollContainer(),e.startTop=e.scroller.scrollTop(),e.startX=t.pageX,e.startY=t.pageY},T=function(t){if("touchmove"==t.type&&(t=t.touches[0]),this.dragData){var e=this.dragData,i=t.pageY-e.startY;if(e.offset=i,!e.moveing)if("mousemove"==t.type){if(-10<i&&i<10)return;var n=t.pageX-e.startX;if(n<-10||10<n)return;e.moveing=!0}else{if(-20<i&&i<20)return;e.moveing=!0}if(e.moveing){var s=this.$el.is(".is-loading, .is-refresh"),a=e.startTop-i;0==a?(e.scroller.scrollTop(0),s||this.$el.children(".top").height(0)):0<a?e.scroller.scrollTop(a):(e.scroller.scrollTop(0),s||x.call(this,0-a))}}},C=function(t){if(this.dragData){var e=this.dragData;e.moveing&&e.startTop-e.offset<0&&(this.$el.is(".is-refresh")||D.call(this)),this.dragData=null}},x=function(t){this.$el.addClass("show-top");var e=this.$el.children(".top"),i=e.children();if(i&&0<i.length){var n=this.getTopDistance();if(t<=n)i.attr("state","pull");else{i.attr("state","drop");var s=(t-n-1)/(t-n+2);t=n+s*s*40}var a=Math.min(1,t/n);i.css("transform","scale("+a.toFixed(5)+")")}e.height(t)},D=function(){var t=this;if(this.$el.is(".show-top")){var e=this.$el.children(".top"),i=e.children();e.addClass("animate");var n=function(){e.height(0),i.removeAttr("state"),setTimeout(function(){t.$el.removeClass("show-top"),e.removeClass("animate")},200)};i&&0<i.length?(i.css("transform",""),"drop"==i.attr("state")?(i.attr("state","load"),e.height(this.getTopDistance()),y.call(this)):n()):n()}},I=function(){var t=this.options.scroller;if(t){if(l.isFunction(t.getViewId))return"[vid='"+t.getViewId()+"']";if("string"==typeof t)return l.trimToNull(t)}return null},A=function(t){var e={offset:0,isUp:!0};e.time=Date.now();var i=this.getScrollContainer();e.scrollerHeight=i.height();var n=this.$el.children(".container");return e.containerHeight=n.height(),e.top=0-i.scrollTop(),e.bottom=e.containerHeight+e.top-e.scrollerHeight,e.isTop=0<=e.offsetTop,e.isBottom=e.offsetBottom<=0,this.lastState?(e.offset=e.top-this.lastState.top,30<e.time-this.lastState.time?(e.isUp=e.offset<0,this.lastState=e):e.isUp=this.lastState.isUp):this.lastState=e,e},F=function(){var t=S.call(this);return t?this.$el.addClass("is-empty"):this.$el.removeClass("is-empty"),t},S=function(){var t=this.getContentView();return!t||(l.isFunction(t.isEmpty)?t.isEmpty():t.children().length<=0)},k=function(){var t=this.getContentView();if(t){if(l.isFunction(t.isLoading))return t.isLoading();if(t.$el)return t.$el.is(".is-loading");if(t instanceof $)return t.is(".is-loading")}return!1};s?(window.UIScroll=t,a.init(".ui-scroll",t,o)):module.exports=o}}("undefined"!=typeof window),function(d){if(!d||!VRender.Component.ui.tree){var h=d?VRender.Component.ui:require("../../static/js/init"),o=h.fn,p=h.util,t=h.tree=function(t,e){return h._select.call(this,t,e)},e=t.prototype=new h._select(!1);e.init=function(t,e){h._select.init.call(this,t,e),this.$el.on("tap",".tree-node",i.bind(this)),this.$el.on("tap",".tree-node > .chkbox",s.bind(this)),this.$el.on("tap","li.more > div",a.bind(this)),this._isRenderAsApp()||this.$el.on("tap",".tree-node > .ep",n.bind(this)),v.call(this)},e.getDataAt=function(t,e){var i=A.call(this,t,e);return i?this._getItemData(i):null},e.getDataIndex=function(t,e){var i=S.call(this,t,e);return i?k.call(this,i,e):-1},e.getDataByKey=function(t,e){var i=F.call(this,t,e);return i?this._getItemData(i):null},e.getIndexByKey=function(t,e){var i=F.call(this,t,e);return i?k.call(this,i,e):-1},e.getDataByName=function(i,n){var s=this;if(p.isBlank(i))return null;var a=null;return M.call(this,function(t){var e=s._getItemData(t);return e&&e.name==i?(a=e,!1):!n&&!t.is(".open")||void 0}),a},e.getIndexByName=function(n,s){var a=this;if(p.isBlank(n))return-1;var r=-1;return M.call(this,function(t,e){var i=a._getItemData(t);return i&&i.name==n?(r=e,!1):!s&&!t.is(".open")||void 0}),r},e.isChkboxVisible=function(){return"1"==this.$el.attr("opt-chk")},e.setChkboxVisible=function(t){if(t=!!p.isNull(t)||p.isTrue(t),this.isChkboxVisible()!=t){var e=this._snapshoot(),i=this.$el.find(".tree-node");t?(this.$el.attr("opt-chk","1"),i.children(".ep").after("<span class='chkbox'><i></i></span>")):(this.$el.removeAttr("opt-chk"),i.parent().removeClass("selected").removeClass("selected_"),i.children(".chkbox").remove()),e.done()}},e.getChildrenField=function(){return this.$el.attr("opt-child")||null},e.getLeafField=function(){return this.options.leafField},e.getSelectedIndex=function(t,i){var n=[],s=this.isChkboxVisible(),a=this.isMultiple();return M.call(this,function(t,e){if(s){if(t.is(".selected")){if(n.push(e),!a)return!1;if(!i)return!0}}else if(t.children(".tree-node").is(".active"))return n.push(e),!1;if(!i&&!t.is(".open"))return!0}),t||a?0<n.length?n:null:0<n.length?n[0]:-1},e.setSelectedIndex=function(t,i){var n=this.isChkboxVisible(),s=this.isMultiple(),a=o.getIntValues(t,0);!(1<a.length)||n&&s||(a=[a.pop()]);var e=this._snapshoot(),r=this.$el.find(".tree-node");n?r.parent().removeClass("selected").removeClass("selected_"):r.removeClass("active"),0<a.length&&M.call(this,function(t,e){if(0<=a.indexOf(e)){if(!n)return t.children(".tree-node").addClass("active"),!1;if(!t.is(".selected")){if(t.addClass("selected"),C(t),!s)return!1;T(t,!0)}}if(!i&&!t.is(".open"))return!0}),e.done()},e.getSelectedKey=function(t,e){var i=this,n=[],s=this.isChkboxVisible(),a=this.isMultiple();return M.call(this,function(t){if(s){if(t.is(".selected")){if(n.push(N.call(i,t)),!a)return!1;if(!e)return!0}}else if(t.children(".tree-node").is(".active"))return n.push(N.call(i,t)),!1;if(!e&&!t.is(".open"))return!0}),t||a?0<n.length?n:null:0<n.length?n[0]:null},e.setSelectedKey=function(t,n){var s=this,a=this.isChkboxVisible(),r=this.isMultiple(),o=p.isArray(t)?t:p.isBlank(t)?[]:p.trimToEmpty(t).split(",");!(1<o.length)||a&&r||(o=[o.pop()]);var e=this._snapshoot(),i=this.$el.find(".tree-node");a?i.parent().removeClass("selected").removeClass("selected_"):i.removeClass("active"),0<o.length&&M.call(this,function(t,e){var i=N.call(s,t);if(0<=p.index(o,function(t){return t==i})){if(!a)return t.children(".tree-node").addClass("active"),!1;if(!t.is(".selected")){if(t.addClass("selected"),C(t),!r)return!1;T(t,!0)}}if(!n&&!t.is(".open"))return!0}),e.done()},e.getSelectedData=function(t,e){var i=this,n=[],s=this.isChkboxVisible(),a=this.isMultiple();return M.call(this,function(t){if(s){if(t.is(".selected")){if(n.push(R.call(i,t)),!a)return!1;if(!e)return!0}}else if(t.children(".tree-node").is(".active"))return n.push(R.call(i,t)),!1;if(!e&&!t.is(".open"))return!0}),t||a?0<n.length?n:null:0<n.length?n[0]:null},e.isAllSelected=function(){var e=!0;return M.call(this,function(t){return!!t.is(".selected")||(e=!1)}),e},e.open=function(t){var e=S.call(this,t,!0);e&&y.call(this,e)},e.openAt=function(t,e){var i=A.call(this,t,e);i&&y.call(this,i)},e.openByKey=function(t){var e=F.call(this,t,!0);e&&y.call(this,e)},e.close=function(t){var e=S.call(this,t,!0);e&&_.call(this,e)},e.closeAt=function(t,e){var i=A.call(this,t,e);i&&_.call(this,i)},e.closeByKey=function(t){var e=F.call(this,t,!0);e&&_.call(this,e)},e.addItem=function(t,e,i){if(p.isBlank(t))return!1;var n=this._getItemContainer();if(p.isNotBlank(e)){var s=S.call(this,e,!0);s&&((n=s.children("ul"))&&0<n.length||(n=$("<ul></ul>").appendTo(s)).attr("level",parseInt(s.parent().attr("level"))+1))}var a=n.children(),r=n.is(".root")?0:k.call(this,n.parent(),!0);0<=(i=p.getIndexValue(i))&&i<a.length-1&&(r+=i);var o=this._snapshoot();return x.call(this,n,t,i,r),o.done(),this.trigger("itemchange",t),!0},e.updateItem=function(i,t,e){var n=this;if(p.isBlank(i))return!1;isNaN(t)||!t&&0!==t||(e=t,t=null);var s=this._snapshoot();if(t){var a=S.call(this,t,!0);if(!a)return s.release(),!1;var r=a.children("ul").children();if(p.isBlank(e)){var o=this._getDataKey(i),l=p.find(r,function(t){var e=n._getItemData(t);return i==e||o==n._getDataKey(e)});l&&D.call(this,l,i)}else isNaN(e)||0<=(e=parseInt(e))&&e<r.length&&D.call(this,r.eq(e),i)}else if(p.isBlank(e)){var c=S.call(this,i,!0);c&&D.call(this,c,i)}else if(!isNaN(e)){e=parseInt(e);var d=A.call(this,e);d&&D.call(this,d,i)}return s.done(),this.trigger("itemchange",i),!0},e.removeItem=function(i,t){var n=this;if(p.isBlank(i))return!1;var e=this._snapshoot();if(t){var s=S.call(this,t,!0);if(!s)return e.release(),!1;var a=this._getDataKey(i),r=s.children("ul").children(),o=p.find(r,function(t){var e=n._getItemData(t);return i==e||a==n._getDataKey(e)});o&&I.call(this,o)}else{var l=S.call(this,i,!0);l&&I.call(this,l)}return e.done(),this.trigger("itemchange",i),!0},e.removeItemAt=function(t,e){if((t=p.getIndexValue(t))<0)return!1;var i=this._snapshoot();if(e){var n=S.call(this,e,!0);if(!n)return i.release(),!1;var s=n.children("ul").children();t<s.length&&I.call(this,s.eq(t))}else{var a=A.call(this,t);a&&I.call(this,a)}return i.done(),!0},e.addOrUpdateItem=function(t,e){p.isBlank(t)||this.updateItem(t,e)||this.addItem(t,e)},e.setItems=function(t,e){if(t=p.toArray(t),e){var i=S.call(this,e,!0);if(!i)return;for(var n=this._snapshoot(),s=i.children("ul").children(),a=s.length-1;0<=a;a--)I.call(this,s.eq(a));if(t&&0<t.length){var r=i.children("ul");r&&0<r.length||(r=$("<ul></ul>").appendTo(i)).attr("level",parseInt(i.parent().attr("level"))+1);for(var o=k.call(this,i,!0),l=0,c=t.length;l<c;l++)x.call(this,r,t[l],l,o),o+=1}n.done()}else this.setData(t)},e.load=function(t,e,i){var n=this;if(t=t||this.lastLoadApi||this.$el.attr("api-name"),p.isBlank(t))return!1;var s=this._getItemContainer().empty();O.call(this,s,t,e,function(t,e){t?p.isFunction(i)&&i(t):p.isFunction(i)&&i(!1,e),n.trigger("loaded",t,e)})},e.length=function(){return Number.POSITIVE_INFINITY},e._renderItems=function(t,e,i){c.call(this,t,this.$el,e,i)},e._getItemContainer=function(){return this.$el.children("ul")},e._getNewItem=function(t,e,i,n){return P.call(this,t,e,i,n)},e._isIconVisible=function(){if(p.isTrue(this.options.icon))return!0},e._getIcon=function(t,e,i){return U.call(this,this.options.icon,t,e)},e._getOpenProps=function(){var t={},e=this.$el.attr("opt-openinds");if(p.isNotBlank(e)&&(e=q.call(this,e),
t.indexs=e&&0<e.length?e:null),!t.indexs){var i=this.$el.attr("opt-openids");p.isNotBlank(i)&&(i=K.call(this,i),t.ids=i&&0<i.length?i:null)}return t},e._getItemData=function(t){return R.call(this,t)},e._doAdapter=function(t){var n=this,e=p.toArray(t);if(e._vr_adapter_flag)return e;var s=0,a=this.getChildrenField()||"children";return(e=function i(t){return p.map(t,function(t,e){return t=o.doAdapter.call(n,t,s++),p.isArray(t[a])&&(t[a]=i(t[a])),t})}(e))._vr_adapter_flag=!0,e},e._snapshoot_shoot=function(t){t.selectedIndex=this.getSelectedIndex(!0,!0)},e._snapshoot_compare=function(t){var e=this.getSelectedIndex(!0,!0);return o.equalIndex(t.selectedIndex,e)};var i=function(t){var e=$(t.currentTarget);if(e.is(".active")||(this.$el.find(".tree-node.active").removeClass("active"),e.addClass("active"),this.trigger("itemclick",this._getItemData(e.parent()))),this._isRenderAsApp()){var i=e.parent();i.is(".open")?_.call(this,i):y.call(this,i)}},n=function(t){var e=$(t.currentTarget).parent().parent();return e.is(".open")?_.call(this,e):y.call(this,e),!1},s=function(t){var e=this._snapshoot(),i=$(t.currentTarget).parent().parent();return w.call(this,i,!i.is(".selected")),e.done(),!1},a=function(t){var i=this,e=$(t.currentTarget).parent(),n={p_no:parseInt(e.attr("page-no"))+1},s=e.parent();s.is(".root")?n.pid=null:(s=s.parent(),n.pid=N.call(this,s)),n=p.extend(this.lastLoadParams,n);var a=this._getItemData(s);b.call(this,s,this.lastLoadApi,n,function(t,e){i.trigger("loaded",t,e,a)})},r=function(t,e){h._selectRender.call(this,t,e)},l=r.prototype=new h._selectRender(!1);l.render=function(t,e){return e.addClass("ui-tree"),e.append("<ul class='root' level='0'></ul>"),h._selectRender.render.call(this,t,e),g.call(this,t,e),this},l.getData=function(){var n=this,t=p.toArray(this.options.data);if(t._vr_adapter_flag)return t;var s=0,a=this.getChildrenField()||"children";return(t=function i(t){return p.map(t,function(t,e){return t=o.doAdapter.call(n,t,s++),p.isArray(t[a])&&(t[a]=i(t[a])),t})}(t))._vr_adapter_flag=!0,this.options.data=t},l.isChkboxVisible=function(){return p.isTrue(this.options.chkbox)},l.getChildrenField=function(){return this.options.childrenField},l.getLeafField=function(){return this.options.leafField},l._getItemContainer=function(t,e){return e.children("ul")},l._renderItems=function(t,e){var i=this._getItemContainer(t,e);c.call(this,t,e,i,this.getData())},l._renderEmptyView=function(){},l._renderLoadView=function(){},l._getNewItem=function(t,e,i,n){return P.call(this,t,e,i,n)},l._isIconVisible=function(){return p.isTrue(this.options.icon)},l._getIcon=function(t,e){return U.call(this,this.options.icon,t,e)},l._getOpenProps=function(){var t=q.call(this,this.options.openIndex);t=t&&0<t.length?t:null;var e=K.call(this,this.options.openKey);return{indexs:t,ids:e=e&&0<e.length?e:null}};var c=function(t,e,i,n){u.call(this,t,i,n,0,1),m.call(this,t,e,i),d||i.find("li").removeData("_node_data")},u=function s(a,r,t,o,l){var c=this,d=this.getChildrenField()||"children";return p.each(t,function(t){var e=c._getNewItem(a,r,t,o);f.call(c,a,e,t,o,l),o+=1;var i=t&&t[d];if(p.isArray(i)&&0<i.length){var n=a("<ul></ul>").appendTo(e);n.attr("level",l),o=s.call(c,a,n,i,o,l+1)}}),o},f=function(t,e,i,n,s){d||e.data("_node_data",i);var a=this.getLeafField()||"leaf";p.isTrue(i&&i[a])&&e.addClass("is-leaf");var r=e.children(".tree-node"),o=r.children(".ic");if(o&&0<o.length){var l=this._getIcon(i,n);p.isNotBlank(l)&&o.children("i").css("backgroundImage","url("+l+")")}var c=r.children(".lbl");h._itemsRender.renderOneItem.call(this,t,r,c,i,n)},m=function(t,e,i){function n(t){s?t.addClass("selected"):t.children(".tree-node").addClass("active")}var s=this.isChkboxVisible(),a=this.isMultiple(),r=this.getSelectedIndex(!0);if(r){for(var o=0,l=r.length;o<l;o++){var c=V.call(this,i,r[o],!0);if(c&&(n(c),!a))break}e.attr("opt-loadinds",r.join(","))}else{var d=this.getSelectedKey(!0);if(d){for(var h=0,u=d.length;h<u;h++){var p=B.call(this,i,d[h]);if(p&&(n(p),!a))break}e.attr("opt-loadids",d.join(","))}}H.call(this,i,!1)},g=function(t,e){this.isChkboxVisible()&&e.attr("opt-chk","1");var i=this.getChildrenField();p.isNotBlank(i)&&e.attr("opt-child",i);var n=this._getOpenProps()||{},s=n.indexs&&n.indexs.join(",");e.attr("opt-openinds",s||null);var a=n.ids&&n.ids.join(",");if(e.attr("opt-openids",a||null),!d){var r=this.options.icon;p.isFunction(r)?r=escape(r):"string"!=typeof r&&(r=p.isTrue(r)?1:0),r&&e.attr("opt-icon",r)}},v=function(){if(!this.options.hasOwnProperty("icon")){var t=this.$el.attr("opt-icon");"1"==t?t=!0:/^function/.test(t)?t=new Function("var Utils=VRender.Utils;return ("+unescape(t)+");")():p.isBlank(t)&&(t=!1),this.options.icon=t}this.$el.removeAttr("opt-icon"),this.$el.removeAttr("data-inds").removeAttr("data-ids"),this.lastLoadParams=this.getInitParams(),this.openProps=this._getOpenProps(),L.call(this)},b=function(a,t,e,r){var o=this,l=a;if(a.is("li")&&((l=a.children("ul"))&&0<l.length||(l=$("<ul></ul>").appendTo(a)).attr("level",parseInt(a.parent().attr("level"))+1)),a.is(".is-loaded,.is-loading"))return!1;a.addClass("is-loading");var c=$("<li class='loading'></li>").appendTo(l);c.append("<div>"+(this.loadingText||"正在加载...")+"</div>"),l.children(".more").remove();var d=this.$el.attr("opt-loadids")||"";d=d?d.split(","):[];var h=this.$el.attr("opt-loadinds")||"";h=h?h.split(","):null;var u=k.call(this,a.is("li")?a:a.children().last());VRender.Component.load.call(this,t,e,function(t,e){c.remove();var i=t?null:p.toArray(e);if(i&&0<i.length){var n=o._snapshoot();if(p.each(i,function(t){var e=x.call(o,l,t,-1,u);if(!e.is(".selected")){var i=h?k.call(o,e):-1;o._isSelected(t,i,h,d)&&w.call(o,e,!0)}u+=1}),o.hasMore()){var s=$("<li class='more'></li>").appendTo(l);s.append("<div>"+(o.moreText||"加载更多..")+"</div>"),s.attr("page-no",o._pageInfo.page)}else a.addClass("is-loaded");n.done()}else a.addClass("is-loaded"),0==l.children().length&&a.addClass("is-leaf").removeClass("open");a.removeClass("is-loading"),p.isFunction(r)&&r(t,i)})},y=function(t){for(var i=this,e=[],n=t.parent();!n.is(".root");)n=n.parent(),e.push(n),n=n.parent();if(p.each(e,function(t){t.is(".open")||(t.addClass("open"),i.trigger("open",i._getItemData(t)))}),!t.is(".open")&&!t.is(".is-leaf")){E.call(this,t);var s=this._getItemData(t),a=this.lastLoadApi||this.$el.attr("api-name");if(a&&!t.is(".is-loaded")&&0==t.children("ul").children().length){var r={pid:N.call(this,t),p_no:1};r=p.extend(this.lastLoadParams,r),b.call(this,t,a,r,function(t,e){i.trigger("loaded",t,e,s)})}this.trigger("open",s)}},_=function(t){t.is(".open")&&(z.call(this,t),this.trigger("close",this._getItemData(t)))},w=function(t,e){var i=this.isChkboxVisible(),n=this.isMultiple(),s=t.children(".tree-node");if(e)if(i){if(t.is(".selected"))return;if(n||(this.$el.find("li.selected").removeClass("selected"),this.$el.find("li.selected_").removeClass("selected_")),t.addClass("selected").removeClass("selected_"),n)T(t,!0),C(t);else for(;;){var a=t.parent();if(a.is(".root"))break;(t=a.parent()).addClass("selected_")}}else{if(s.is(".active"))return;this.$el.find(".active").removeClass("active"),s.addClass("active")}else if(i){if(t.is(".selected"))t.removeClass("selected");else{if(!t.is(".selected_"))return;t.removeClass(".selected_")}n&&T(t,!1),C(t)}else s.removeClass("active")},T=function e(t,i){p.each(t.children("ul").children(),function(t){t.is(".more,.loading")||(t.removeClass("selected_"),i?t.addClass("selected"):t.removeClass("selected"),e(t,i))})},C=function t(e){var i=e.parent();if(!i.is(".root")){var n=!1,s=!0;p.each(i.children(),function(t){t.is(".more,.loading")||(t.is(".selected")?n=!0:s=!!t.is(".selected_")&&!(n=!0))});var a=i.parent();a.removeClass("selected").removeClass("selected_"),s?a.addClass("selected"):n&&a.addClass("selected_"),t(a)}},x=function(t,e,i,n){i=p.getIndexValue(i);var s=this._getNewItem($,t,e,n);0<=i&&i<t.children().length-1&&t.children().eq(i).before(s);var a=parseInt(t.attr("level"));if(f.call(this,$,s,e,n,a),!t.is(".root")){var r=t.parent().removeClass("is-leaf");this.isChkboxVisible()&&this.isMultiple()&&r.is(".selected")&&s.addClass("selected")}var o=null;if(t.is(".root"))o=this.getData();else if(o=this._getItemData(t.parent())){var l=this.getChildrenField()||"children";p.isArray(o[l])||(o[l]=[]),o=o[l]}return p.isArray(o)&&(0<=i&&i<o.length?o.splice(i,0,e):o.push(e)),s},D=function(t,e){var i=t.parent(),n=k.call(this,t,!0);t.children(".tree-node .lbl").empty();var s=parseInt(i.attr("level"));f.call(this,$,t,e,n,s);var a=null;a=i.is(".root")?this.getData():this._getItemData(i.parent());var r=t.index();if(p.isArray(a)&&r<a.length){var o=this.getChildrenField()||"children";p.isArray(e[o])||(e[o]=a[r][o]),a.splice(r,1,e)}},I=function(e){z.call(this,e);var i=e.parent(),t=e.index();if(i.is(".root")){var n=this.getData();n&&t<n.length&&n.splice(t,1)}else{var s=this._getItemData(i.parent()),a=this.getChildrenField()||"children";p.isArray(s[a])&&t<s[a].length&&s[a].splice(t,1)}setTimeout(function(){if(e.remove(),!i.is(".root")){e=i.parent();var t=i.children();0<t.length?C(t.eq(0)):(i.remove(),e.is(".selected_")&&(e.removeClass("selected_"),C(e)))}},220)},A=function(i,n){if((i=p.getIndexValue(i))<0)return null;var s=null;return M.call(this,function(t,e){return i==e?(s=t,!1):!n&&!t.is(".open")||void 0}),s},F=function(i,n){var s=this;if(p.isBlank(i))return null;var a=null;return M.call(this,function(t){var e=N.call(s,t);return i==e?(a=t,!1):!n&&!t.is(".open")||void 0}),a},S=function(n,s){var a=this,r=null,o=this._getDataKey(n);return M.call(this,function(t){var e=a._getItemData(t),i=n==e;i||(i=a._getDataKey(e)==o);return i?(r=t,!1):!s&&!t.is(".open")||void 0}),r},k=function(i,n){var s=-1;return i&&0<i.length&&M.call(this,function(t,e){return t.is(i)?(s=e,!1):!n&&!t.is(".open")||void 0}),s},N=function(t){return this._getDataKey(this._getItemData(t))},R=function(t){var e=t.children(".tree-node").data("itemData");if(p.isBlank(e)){var a=0,r=k.call(this,t,!0),o=this.getChildrenField()||"children";e=function t(e){for(var i=0,n=e.length;i<n;i++){var s=e[i];if(a==r)return s;if(a+=1,p.isArray(s[o])&&(s=t(s[o])))return s}}(this.getData())}return e},M=function(l){var c=0;!function t(e){for(var i=parseInt(e.attr("level"))||0,n=e.children(),
s=0,a=n.length;s<a;s++){var r=n.eq(s);if(!r.is(".more,.loading")){var o=l(r,c,i);if(c+=1,!1===o)return!0;if(!0!==o&&(o=t(r.children("ul"))))return!0}}}(this._getItemContainer())},V=function(t,r,o){var l=0;return function t(e){for(var i=e.children(),n=0,s=i.length;n<s;n++){var a=i.eq(n);if(l==r)return a;if(l+=1,(!o||a.is(".open"))&&(a=t(a.children("ul"))))return a}return null}(t)},B=function(t,o,l){var c=this;return function t(e){for(var i=e.children(),n=0,s=i.length;n<s;n++){var a=i.eq(n),r=a.data(d?"itemData":"_node_data");if(c._getDataKey(r)==o)return a;if((!l||a.is(".open"))&&(a=t(a.children("ul"))))return a}return null}(t)},P=function(t,e,i,n){var s=t("<li></li>").appendTo(e),a=t("<div class='tree-node'></div>").appendTo(s);return a.append("<span class='ep'></span>"),this.isChkboxVisible()&&a.append("<span class='chkbox'><i></i></span>"),this._isIconVisible()&&a.append("<span class='ic'><i></i></span>"),a.append("<div class='lbl'></div>"),s},O=function(t,e,i,n){var s=this;b.call(this,t,e,i,function(t,e){p.isFunction(n)&&n(t,e),L.call(s)})},L=function t(){var e=null,i=this.openProps||{};if(i.indexs&&0<i.indexs.length)(e=A.call(this,i.indexs[0],!0))&&i.indexs.shift();else if(i.ids)for(var n=0;n<i.ids.length;n++)if(e=F.call(this,i.ids[n],!0)){i.ids.splice(n,1);break}if(e){e.addClass("open");for(var s=e.parent();s&&0<s.length&&!s.is(".root");)s=s.parent().addClass("open").parent();if(e.is(".is-loaded")||0!=e.children("ul").children().length)t.call(this);else{var a=this.lastLoadApi||this.$el.attr("api-name");if(p.isBlank(a))t.call(this);else{var r=this.lastLoadParams||this.getInitParams();r=p.extend({},r,{pid:N.call(this,e)}),O.call(this,e,a,r)}}}},E=function(t){t.addClass("open");var e=t.children("ul");e&&0<e.length&&(e.height(0),p.nextTick(function(){e.addClass("animate-in"),e.height(e[0].scrollHeight),setTimeout(function(){e.css("height","")},300)}))},z=function(t){var e=t.children("ul");e&&0<e.length?(e.addClass("animate-out"),e.height(e[0].scrollHeight),setTimeout(function(){e.height(0),setTimeout(function(){t.removeClass("open"),e.removeClass("animate-in").removeClass("animate-out"),e.css("height","")},300)},0)):t.removeClass("open")},H=function t(e,i){var n=e.children();if(n&&0<n.length){for(var s=!1,a=!0,r=0,o=n.length;r<o;r++){var l=n.eq(r),c=l.children("ul");if(i||l.is(".selected"))s=!0,l.addClass("selected"),this.isMultiple()&&t.call(this,c,!0);else{var d=t.call(this,c,!1);"all"==d?(l.addClass(this.isMultiple()?"selected":"selected_"),s=!0):a="part"==d&&(l.addClass("selected_"),!(s=!0))}}return a?"all":s?"part":null}return null},q=function(t){if(p.isBlank(t))return[];p.isArray(t)||(t=(""+t).split(","));var e=[];return p.each(t,function(t){isNaN(t)||(t=parseInt(t),!isNaN(t)&&0<=t&&e.push(t))}),e},K=function(t){if(p.isBlank(t))return[];p.isArray(t)||(t=(""+t).split(","));var e=[];return p.each(t,function(t){!t&&0!==t||e.push(isNaN(t)?t:parseInt(t))}),e},U=function(t,e,i){return p.isFunction(t)?t(e,i):(!0!==t&&1!=t||(t="icon"),"string"==typeof t?/\/|\./.test(t)?t:e&&e[t]||null:null)};d?(window.UITree=t,h.init(".ui-tree",t,r)):module.exports=r}}("undefined"!=typeof window),function(n){if(!n||!VRender.Component.ui.treeselect){var s=n?VRender.Component.ui:require("../../static/js/init"),a=s.fn,r=s.util,t=s.treeselect=function(t,e){return s._base.call(this,t,e)},e=t.prototype=new s._base(!1);e.init=function(t,e){s._base.init.call(this,t,e),this.tree=s.tree.find(this.$el)[0],this.$el.on("tap",".ipt",o.bind(this)),this.$el.on("tap",".ipt .clearbtn",l.bind(this)),this.$el.on("change",".dropdown",function(){return!1}),this.tree.on("change",d.bind(this)),this.tree.on("itemclick",h.bind(this)),this._isRenderAsApp()&&this.$el.on("tap",".dropdown",c.bind(this));var i=this.getSelectedIndex();i&&0<i.length&&v.call(this)},e.getData=function(){return this.tree.getData()},e.setData=function(t){this.tree.setData(t)},e.getPrompt=function(){return this.$el.children(".ipt").find(".prompt").text()},e.setPrompt=function(t){var e=this.$el.children(".ipt");e.find(".prompt").remove(),r.isNotBlank(t)&&$("<span class='prompt'></span>").appendTo(e).text(t)},e.isClearable=function(){return 1==this.$el.attr("opt-clearable")},e.setClearable=function(t){r.isNull(t)||r.isTrue(t)?this.$el.attr("opt-clearable","1"):this.$el.removeAttr("opt-clearable")},e.getDataAdapter=function(){return this.tree.getDataAdapter()},e.setDataAdapter=function(t){this.tree.setDataAdapter(t)},e.getDataMapper=function(){return this.tree.getDataMapper()},e.setDataMapper=function(t){this.tree.setDataMapper(t)},e.load=function(t,e,i){this.tree.load(t,e,i)},e.reload=function(t,e){this.tree.reload(t,e)},e.isLoading=function(){return this.tree.isLoading()},e.getDataAt=function(t){return this.tree.getDataAt(t)},e.getDataIndex=function(t){return this.tree.getDataIndex(t)},e.getDataByKey=function(t){return this.tree.getDataByKey(t)},e.getIndexByKey=function(t){return this.tree.getIndexByKey(t)},e.getDataByName=function(t){return this.tree.getDataByName(t)},e.getIndexByName=function(t){return this.tree.getIndexByName(t)},e.getKeyField=function(){return this.tree.getKeyField()},e.setKeyField=function(t){this.tree.setKeyField(t)},e.getLabelField=function(){return this.tree.getLabelField},e.setLabelField=function(t){this.tree.setLabelField(t)},e.getLabelFunction=function(){return this.tree.getLabelFunction()},e.setLabelFunction=function(t){this.tree.setLabelFunction(t)},e.getItemRenderer=function(){return this.tree.getItemRenderer()},e.setItemRenderer=function(t){this.tree.setItemRenderer(t)},e.isDisabled=function(t){return this.tree.isDisabled(t)},e.setDisabled=function(t,e){this.tree.setDisabled(t,e)},e.addItem=function(t,e){var i=this.tree.addItem(t,e);return i&&this.trigger("itemchange",t),i},e.updateItem=function(t,e){var i=this.tree.updateItem(t,e);return i&&this.trigger("itemchange",t),i},e.removeItem=function(t){var e=this.tree.removeItem(t);return this.trigger("itemchange",t),e},e.removeItemAt=function(t){var e=this.tree.removeItemAt(t);return this.trigger("itemchange",data),e},e.addOrUpdateItem=function(t){this.tree.addOrUpdateItem(t)},e.getItemData=function(t){return this.tree.getItemData(t)},e.isEmpty=function(){return this.tree.isEmpty()},e.open=function(t){this.tree.open(t)},e.openAt=function(t,e){this.tree.openAt(t,e)},e.openByKey=function(t){this.tree.openByKey(t)},e.close=function(t){this.tree.close(t)},e.closeAt=function(t,e){this.tree.closeAt(t,e)},e.closeByKey=function(t){this.tree.closeByKey(t)},e.isMultiple=function(){return"multiple"==this.$el.attr("multiple")},e.setMultiple=function(t){t=!(!r.isNull(t)&&!r.isTrue(t)),this.isMultiple()!=t&&(t?this.$el.attr("multiple","multiple"):this.$el.removeAttr("multiple"),this.tree.setMultiple(t))},e.getSelectedIndex=function(t){return this.tree.getSelectedIndex(t,!0)},e.setSelectedIndex=function(t){this.tree.setSelectedIndex(t,!0)},e.getSelectedKey=function(t){return this.tree.getSelectedKey(t,!0)},e.setSelectedKey=function(t){this.tree.setSelectedKey(t,!0)},e.getSelectedData=function(t){return this.tree.getSelectedData(t,!0)},e.isSelectedIndex=function(t){return this.tree.isSelectedIndex(t)},e.isSelectedKey=function(t){return this.tree.isSelectedKey(t)},e.isAllSelected=function(){return this.tree.isAllSelected()},e.length=function(){return this.tree.length()};var o=function(t){m.call(this)},l=function(t){return this.setSelectedIndex(-1),!1},c=function(t){$(t.target).is(".dropdown")&&g.call(this)},d=function(t){v.call(this)},h=function(t,e){this.isMultiple()||(v.call(this),!e.leaf&&this._isRenderAsApp()||g.call(this))},i=function(t,e){s._baseRender.call(this,t,e)},u=i.prototype=new s._baseRender(!1);u.render=function(t,e){return s._baseRender.render.call(this,t,e),e.addClass("ui-treeselect"),e.attr("opt-box",this.options.container),r.isTrue(this.options.clearable)&&e.attr("opt-clearable","1"),this.isMultiple()&&e.attr("multiple","multiple"),p.call(this,t,e),f.call(this,t,e),this},u.renderData=function(){},u.getDataAdapter=function(){return null},u.getDataMapper=function(){return null},u.isMultiple=function(){return a.isMultiple.call(this)};var p=function(t,e){var i=t("<div class='ipt'></div>").appendTo(e);t("<input type='text'/>").appendTo(i).attr("readonly","readonly"),i.append("<div class='dropdownbtn'></div>"),i.append("<div class='clearbtn'></div>"),i.append("<span class='prompt'>"+r.trimToEmpty(this.options.prompt)+"</span>")},f=function(t,e){e=t("<div class='dropdown'></div>").appendTo(e);var i=b.call(this,this.options);n?(i.target=e,s.tree.create(i)):new(require("../tree/index"))(this,i).render(e)},m=function(){var t=this;if(!function(){return this.$el.is(".show-dropdown")}.call(this)){var e=this.$el.addClass("show-dropdown");if(this._isRenderAsApp())$("html,body").addClass("ui-scrollless");else{var i=e.children(".dropdown");i.off("click").on("click",function(){return!1}),setTimeout(function(){$("body").on("click."+t.getViewId(),function(){g.call(t)})});var n=a.getDropdownHeight.call(this,i);r.offset(i,this._getScrollContainer(),0,n).isOverflowY&&e.addClass("show-before")}setTimeout(function(){e.addClass("animate-in")},0)}},g=function(){$("html,body").removeClass("ui-scrollless");var t=this.$el.addClass("animate-out");$("body").off("click."+this.getViewId()),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},v=function(){var e=this,t=this.getSelectedData(),i=r.map(r.toArray(t),function(t){return e.tree._getDataLabel(t)});i=i.join(", "),this.$el.children(".ipt").find("input").val(i||""),i?this.$el.addClass("has-val"):this.$el.removeClass("has-val"),this.trigger("change",t),this.$el.trigger("change",t)},b=function(t){var e={};return e.data=t.data,e.keyField=t.keyField,e.labelField=t.labelField,e.labelFunction=t.labelFunction,e.itemRenderer=t.itemRenderer,e.selectedIndex=t.selectedIndex,e.selectedKey=t.selectedKey,e.multiple=this.isMultiple(),e.chkbox=!!e.multiple,e.dataAdapter=t.dataAdapter,e.dataMapper=t.dataMapper,e.loadingView=t.loadingView,e.loadingText=t.loadingText,e.emptyView=t.emptyView,e.emptyText=t.emptyText,e.moreView=t.moreView,e.moreText=t.moreText,e.apiName=t.apiName,e.apiParams=t.apiParams,e.autoLoad=t.autoLoad,e.icon=t.icon,
e.openIndex=t.openIndex,e.openKey=t.openKey,e};n?(window.UITreeSelect=t,s.init(".ui-treeselect",t,i)):module.exports=i}}("undefined"!=typeof window);