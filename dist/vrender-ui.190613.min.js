"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(n){if(!n||!VRender.Component.ui){var l=n?VRender.Utils:require(""+__vrender__).Utils,s={doAdapter:function(t,e){if(t&&t._vr_adapter_flag)return t;var i=this.options.dataAdapter||this.options.adapter;return l.isFunction(this.getDataAdapter)&&(i=this.getDataAdapter()),l.isFunction(i)&&(t=i(t,e))&&(t._vr_adapter_flag=!0),t},getDataKey:function(t){if(l.isBlank(t))return null;if(l.isPrimitive(t))return t;var e=this.options.keyField;return l.isFunction(this.getKeyField)&&(e=this.getKeyField()),l.isNotBlank(e)?t[e]:t.hasOwnProperty("id")?t.id:t.hasOwnProperty("code")?t.code:t.hasOwnProperty("value")?t.value:null},getDataLabel:function(t,e){var i=this.options.labelFunction;if(l.isFunction(this.getLabelFunction)&&(i=this.getLabelFunction()),l.isFunction(i))return i.call(this,t,e);if(l.isBlank(t))return"";if(l.isPrimitive(t))return""+t;var n=this.options.labelField;return l.isFunction(this.getLabelField)&&(n=this.getLabelField()),l.isNotBlank(n)?l.isNull(t[n])?"":t[n]:t.hasOwnProperty("label")?l.isNull(t.label)?"":t.label:t.hasOwnProperty("name")?l.isNull(t.name)?"":t.name:t.hasOwnProperty("value")?l.isNull(t.value)?"":t.value:""+t},getMapData:function(t){var e=this.options.dataMapper||this.options.mapper;if(l.isFunction(this.getDataMapper)&&(e=this.getDataMapper()),l.isFunction(e))return e(t);if(l.isNull(t))return null;if(l.isPrimitive(t))return t;var i={};return t.hasOwnProperty("id")&&(i.id=t.id),t.hasOwnProperty("code")&&(i.code=t.code),t.hasOwnProperty("name")&&(i.name=t.name),t.hasOwnProperty("value")&&(i.value=t.value),t.hasOwnProperty("label")&&(i.label=t.label),i},isMultiple:function(){return this.options.hasOwnProperty("multiple")?l.isTrue(this.options.multiple):l.isTrue(this.options.multi)},renderData:function(t,e){if(l.isFunction(this.getMapData)&&(e=this.getMapData(e)),e)if(l.isPrimitive(e))t.attr("data-v",e);else for(var i in e)t.attr("data-"+i,l.trimToEmpty(e[i]))},renderFunction:function(t,e,i){!n&&l.isNotBlank(e)&&l.isFunction(i)&&t.write("<div class='ui-fn' style='display:none' name='"+e+"' fn-state='"+(i._state||"")+"' fn-data='"+(i._data||"")+"'>"+escape(i)+"</div>")},getFunction:function(t,e){if(this.options.hasOwnProperty(t))return this.options[t];if(this.hasOwnProperty(t))return this[t];if(e&&this.options.hasOwnProperty(e))return this.options[e];var i=null,n=this.$el.children(".ui-fn[name='"+(e||t)+"']");if(n&&0<n.length){if(i=n.text(),l.isNotBlank(i)&&((i=new Function("var Utils=VRender.Utils;return ("+unescape(i)+");")())._state=n.attr("fn-state")||null,i._data=n.attr("fn-data")||null,i._data))try{i._data=JSON.parse(i._data)}catch(t){}n.remove()}return this[t]=i},renderSubView:function(t,e){e&&(l.isFunction(e.render)?e.render(t):t.append(e.$el||e))},getIntValues:function(t,e,i){l.isArray(t)||(t=l.isBlank(t)?[]:(""+t).split(",")),e=l.isNull(e)?Number.NEGATIVE_INFINITY:e,i=l.isNull(i)?Number.POSITIVE_INFINITY:i;var n=[];return l.each(t,function(t){isNaN(t)||(t=parseInt(t),!isNaN(t)&&n.indexOf(t)<0&&e<=t&&t<=i&&n.push(t))}),n},equalIndex:function(t,e){if(t=s.getIntValues(t,0),e=s.getIntValues(e,0),t.length!=e.length)return!1;t.sort(function(t,e){return t-e}),e.sort(function(t,e){return t-e});for(var i=0,n=t.length;i<n;i++)if(t[i]!=e[i])return!1;return!0}};if(n){var d=VRender.Component;s.init=function(i,n,e){d.register(i,n),n.create||(n.create=function(t){return d.create(t,n,e)}),n.find||(n.find=function(t){return d.find(t,i,n)}),n.findMe||(n.findMe=function(t){var e=d.find(t,i,n);return e&&e[0]||null}),n.instance||(n.instance=function(t){return d.instance(t,i)}),n.prototype._create=function(t){return t=t||{},l.isFunction(this.isWidthEnabled)&&(t.widthDisabled=!this.isWidthEnabled()),l.isFunction(this.isHeightEnabled)&&(t.heightDisabled=!this.isHeightEnabled()),d.create(t,null,e)}},s.isElement=function(t){return t instanceof Element||t instanceof $},s.load=function(t,e,s){var a=this;if(t=t||this.lastLoadApi||this.$el.attr("api-name"),l.isBlank(t))return!1;var r=this.$el.addClass("is-loading"),o=this.loadTimerId=Date.now();return d.load.call(this,t,e,function(t,e){if(o==a.loadTimerId){r.removeClass("is-loading");var i=l.isFunction(a.getPaginator)&&a.getPaginator();if(i&&l.isFunction(i.set)){var n=a._pageInfo||{};i.set(n.total,n.page,n.size)}l.isFunction(s)&&s(t,e)}}),!0},s.snapshoot=function(){var n={},s={},a=this,t={};return this._rootSnapshoot||(this._rootSnapshoot=t),t.shoot=function(t,e){if(t=t||n,l.isFunction(a._snapshoot_shoot)){var i=Array.prototype.slice.call(arguments);i[0]=t,a._snapshoot_shoot.apply(a,i)}else t.data=a.getData()},t.compare=function(t){var e=Array.prototype.slice.call(arguments);return l.isFunction(a._snapshoot_compare)?a._snapshoot_compare.apply(a,[n].concat(e)):(this.shoot.apply(this,[s].concat(e)),n.data==s.data)},t.done=function(t){var e=!1;if(a._rootSnapshoot==this){var i=Array.prototype.slice.call(arguments);this.compare.apply(this,i)||(this.shoot.apply(this,[s].concat(i)),l.isFunction(a._snapshoot_change)&&a._snapshoot_change(s.data,n.data),a.trigger("change",s.data,n.data),a.$el.trigger("change",s.data,n.data),e=!0)}return this.release(),e},t.release=function(){a._rootSnapshoot==this&&(a._rootSnapshoot=null)},t.getState=function(){return n},t.shoot(n),s.data=n.data,t},s.getDropdownHeight=function(t,e){var i=0;i=this._isRenderAsApp()?.8*$(window).height():parseInt(t.css("maxHeight"))||e||300;var n=t.get(0).scrollHeight;return n<i&&(i=n),i},s.mouseDebounce=function(t,e){var i=$(t.currentTarget),n=parseInt(i.attr("timerid"));n&&(clearTimeout(n),i.removeAttr("timerid")),"mouseleave"==t.type&&(n=setTimeout(function(){i.removeAttr("timerid"),e()},500),i.attr("timerid",n))}}n?(VRender.Component.ui={util:l,fn:s},VRender.Component.ui.init=s.init):(exports.util=l,exports.fn=s,require("./base"),require("./items"),require("./selectable"))}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui._base){var e=t?VRender.Component.ui:require("./init"),s=e.fn,a=e.util,i=function(){},n=i.prototype=t?new VRender.EventEmitter:new Object;n._doAdapter=function(t){return t?s.doAdapter.call(this,t):null},n._isRenderAsApp=function(){return t?VRender.ENV.isApp:(this.hasOwnProperty("_isApp")||(this._isApp=!1,this.context&&a.isFunction(this.context.isRenderAsApp)&&(this._isApp=this.context.isRenderAsApp())),this._isApp)},n._isRenderAsIphone=function(){return t?VRender.ENV.isIphone:(this.hasOwnProperty("_isIphone")||(this._isIphone=!1,this.context&&a.isFunction(this.context.isRenderAsIphone)&&(this._isIphone=this.context.isRenderAsIphone())),this._isIphone)},n._isRenderAsRem=function(){return t?VRender.ENV.useRem:(this.hasOwnProperty("_isRem")||(this._isRem=!1,this.context&&a.isFunction(this.context.isRenderAsRem)&&(this._isRem=this.context.isRenderAsRem())),this._isRem)},n.getData=function(){return this.options.data=this._doAdapter(this.options.data),this.options.data},n._getDataKey=function(t){return s.getDataKey.call(this,t)},n._getDataLabel=function(t){return s.getDataLabel.call(this,t)};var r=e._base=function(t,e){if(0<arguments.length&&!1!==t){s.isElement(t)||(e=null,t=this._create(t));var i=VRender.Component.get(t);if(i)return i;var n=this.$el=$(t);n.data(VRender.Component.bindName,this),this.options=e||{},this.init(n,this.options)}},o=r.prototype=new i;r.init=function(t,e){var i=this;h.call(this,t,e),setTimeout(function(){c.call(i)})},r.getInitParams=function(){if(!this.initParams){var t=null;if(this.options.hasOwnProperty("params"))t=this.options.params;else try{t=JSON.parse(this.$el.attr("api-params")||null),this.$el.removeAttr("api-params")}catch(t){}this.initParams=a.extend({},t)}return a.extend({},this.initParams)},r.isAutoLoad=function(){return this.options.hasOwnProperty("autoLoad")||(this.options.autoLoad=this.$el.attr("api-autoload")),this.$el.removeAttr("api-autoload"),a.isTrue(this.options.autoLoad)},o.init=function(t,e){r.init.call(this,t,e)},o.getViewId=function(){return this.$el.attr("vid")},o.getInitParams=function(){return r.getInitParams.call(this)},o.setData=function(t){this.options.data=t,this.rerender()},o.getDataAdapter=function(){return s.getFunction.call(this,"dataAdapter","adapter")},o.setDataAdapter=function(t){this.options.dataAdapter=t,delete this.options.adapter,this.$el.children(".ui-fn[name='adapter']").remove(),this.rerender()},o.getDataMapper=function(){return s.getFunction.call(this,"dataMapper","mapper")},o.setDataMapper=function(t){this.options.dataMapper=t,delete this.options.mapper,this.$el.children(".ui-fn[name='mapper']").remove(),this.rerender()},o.isDisabled=function(){return this.$el.is(".disabled")},o.setDisabled=function(t){a.isNull(t)||a.isTrue(t)?this.$el.addClass("disabled").attr("disabled","disabled"):this.$el.removeClass("disabled").removeAttr("disabled","disabled")},o.setVisible=function(t){a.isNull(t)||a.isTrue(t)?this.$el.removeClass("ui-hidden"):this.$el.addClass("ui-hidden")},o.destory=function(){this.$el.remove()},o.rerender=function(){},o.isMounted=function(){return 0<$("body").find(this.$el).length},o._snapshoot=function(){return s.snapshoot.call(this)},o._getScrollContainer=function(){return this.$el.attr("opt-box")},o.load=function(t,e,i){var n=this;return a.isFunction(this._loadBefore)&&this._loadBefore(t,e),s.load.call(this,t,e,function(t,e){t||(a.isFunction(n.setData)?n.setData(e):n.options.data=e),setTimeout(function(){a.isFunction(n._loadAfter)&&n._loadAfter(t,e),a.isFunction(i)&&i(t,e),n.trigger("loaded",t,e)})})},o.reload=function(t,e){a.isFunction(t)&&(e=t,t=null);var i=this.lastLoadParams||{};return!isNaN(t)&&0<t&&(i.p_no=t),this.load(this.lastLoadApi,i,e)},o.isLoading=function(){return this.$el.is(".is-loading")};var l=e._baseRender=function(t,e){0<arguments.length&&!1!==t&&(this.context=e?t:null,this.options=e||t||{})},d=l.prototype=new i
;l.render=function(t,e){e.addClass("vrender-ui"),this.renderData(t,e),s.renderFunction.call(this,e,"adapter",this.getDataAdapter()),s.renderFunction.call(this,e,"mapper",this.getDataMapper())},d.render=function(t,e){return l.render.call(this,t,e),this},d.renderData=function(t,e){s.renderData.call(this,e,this.getData())},d.getDataAdapter=function(){return this.options.dataAdapter||this.options.adapter},d.getDataMapper=function(){return this.options.dataMapper||this.options.mapper},d.getMapData=function(t){return s.getMapData.call(this,t)};var h=function(t,e){t.attr("id",a.trimToNull(e.id)||void 0),t.attr("name",a.trimToNull(e.name)||void 0);var i=e.className||e.cls;if(a.isNotBlank(i)&&t.addClass(i),a.isNotBlank(e.style)&&t.addClass(e.style),e.hasOwnProperty("disabled")&&this.setDisabled(a.isTrue(e.disabled)),!1===e.visible||"gone"===e.visible?t.css("display","none"):"hidden"===e.visible&&t.css("visibility","hidden"),t.attr("ref",a.trimToNull(e.ref)||void 0),!e.data){var n=t.attr("data-items");if(n)try{e.data=JSON.parse(unescape(n))}catch(t){}}this.$el.removeAttr("data-items")},c=function(){var t=this;if(r.isAutoLoad.call(this)&&a.isFunction(this.load)){var e=this.options.api||this.$el.attr("api-name"),i=$.extend({},this.getInitParams()),n=a.isFunction(this.getPaginator)&&this.getPaginator();n&&(!i.p_no&&a.isFunction(n.getPage)&&(i.p_no=n.getPage()),!i.p_size&&a.isFunction(n.getSize)&&(i.p_size=n.getSize())),this.load(e,i,function(){setTimeout(function(){u.call(t)})})}},u=function(){function t(t){a.isFunction(i.setSelectedIndex)&&i.setSelectedIndex(t)}function e(t){a.isFunction(i.setSelectedKey)&&i.setSelectedKey(t)}var i=this,n=this.options||{};n.hasOwnProperty("selectedIndex")?t(n.selectedIndex):a.isNotBlank(this.$el.attr("data-tryindex"))?t(this.$el.attr("data-tryindex")):n.hasOwnProperty("selectedId")?e(n.selectedId):a.isNotBlank(this.$el.attr("data-tryid"))&&e(this.$el.attr("data-tryid")),delete n.selectedIndex,delete n.selectedId,this.$el.removeAttr("data-tryindex"),this.$el.removeAttr("data-tryid")}}}("undefined"!=typeof window),function(l){if(!l||!VRender.Component.ui._items){var i=l?VRender.Component.ui:require("./init"),o=i.fn,d=i.util,s=i._items=function(t,e){return i._base.call(this,t,e)},t=s.prototype=new i._base(!1);s.init=function(t,e){i._base.init.call(this,t,e),this._initPager(),this._checkIfEmpty()},s.doAdapter=function(t){return a.doAdapter.call(this,t)},s.renderItems=function(t,e){a.renderItems.call(this,$,t,e),this._checkIfEmpty()},s.renderOneItem=function(t,e,i,n){return a.renderOneItem.call(this,$,t,e,i,n)},s.addItem=function(t,e,i){e=d.getIndexValue(e),t=o.doAdapter.call(this,t,e),i=i||this.getData();var n=null,s=this._getItemContainer();if(s&&0<s.length){if(n=this._getNewItem($,s,t,e)){if(0<=e&&e<i.length){var a=this._getItems();a&&0<a.length&&a.eq(e).before(n)}this._renderOneItem($,n,t,e)}this._checkIfEmpty()}return 0<=e&&e<i.length?i.splice(e,0,t):i.push(t),n},s.updateItem=function(t,e,i){if(t=o.doAdapter.call(this,t,e),0<=(e=e||0===e?d.getIndexValue(e):this.getDataIndex(t)))if(e<(i=i||this.getData()).length){var n=this._getItemContainer();if(n&&0<n.length){var s=this._getItems(),a=this._getNewItem($,n,t,e);a?(s.eq(e).before(a).remove(),this._renderOneItem($,a,t,e)):s.eq(e).remove()}this._checkIfEmpty(),i.splice(e,1,t)}else e=-1;return e},s.removeItem=function(t,e,i){if(t&&0<t.length)e=t.index();else{if((e=d.getIndexValue(e))<0)return null;var n=this._getItems();n&&n.length>e&&(t=n.eq(e))}return t&&0<t.length&&(t.remove(),this._checkIfEmpty()),(i=i||this.getData())&&e<i.length?i.splice(e,1):null},s.initPager=function(){if(this.options.hasOwnProperty("pager"))this.setPaginator(this.options.pager);else{var t=this.$el.attr("opt-pager");t&&(t=$(t))&&0<t.length&&(t=VRender.Component.get(t)||VRender.FrontComponent.get(t)||t,this.setPaginator(t)),this.$el.removeAttr("opt-pager")}},s.setPager=function(s){var a=this;this.pager&&d.isFunction(this.pager.off)&&this.pager.off("change"),(this.pager=s)&&d.isFunction(s.on)&&s.on("change",function(t,e){var i=$.extend({},a.lastLoadParams);i.p_no=e&&e.page,i.p_size=e&&e.size,!i.p_no&&d.isFunction(s.getPage)&&(i.p_no=s.getPage()),!i.p_size&&d.isFunction(s.getSize)&&(i.p_size=s.getSize());var n=a._pageInfo||{};i.p_no==n.page&&i.p_size==n.size||a.load(a.lastLoadApi,i)})},s.checkIfEmpty=function(){var t=this._getItems();t&&0<t.length?this.$el.removeClass("is-empty"):this.$el.addClass("is-empty")},s.isDisabled=function(t){if("number"!=typeof t)return"string"==typeof t?this.isDisabled(this.getIndexByName(t)):this.$el.is(".disabled");var e=this._getItemAt(t);return!e||e.is(".disabled")},s.setDisabled=function(t,e){if("string"==typeof e)return this.setDisabled(t,this.getIndexByName(e));var i=this.$el;if("number"==typeof e&&(i=this._getItemAt(e)),i&&((t=!(!d.isNull(t)&&!d.isTrue(t)))?i.addClass("disabled").attr("disabled","disabled"):i.removeClass("disabled").removeAttr("disabled"),d.isFunction(this.getDisableField))){var n=this.getDisableField();if(n){var s=this._getItemData(i);s&&(s[n]=t)}}},t.init=function(t,e){return s.init.call(this,t,e)},t.setData=function(t){this.options.data=this._doAdapter(t),this.rerender()},t.getDataAt=function(t){if((t=d.getIndexValue(t))<0)return null;var e=this.getData()||[];return t<e.length?e[t]:null},t.getDataIndex=function(e){var i=this,t=this.getData();if(t&&0<t.length){var n=this._getDataKey(e);return d.index(t,function(t){return t==e||i._getDataKey(t)==n})}return-1},t.getDataByKey=function(t){return this.getDataAt(this.getIndexByKey(t))},t.getIndexByKey=function(e){var i=this,t=this.getData();return t&&0<t.length?d.index(t,function(t){return i._getDataKey(t)==e}):-1},t.getDataByName=function(t){return this.getDataAt(this.getIndexByName(t))},t.getIndexByName=function(t){var e=this.getData();return e&&0<e.length?d.indexBy(e,"name",t):-1},t.getKeyField=function(){return this.options.keyField||this.$el.attr("opt-key")},t.setKeyField=function(t){t=d.trimToEmpty(t),this.getKeyField()!=t&&(this.options.keyField=t,this.$el.attr("opt-key",this.options.keyField),this.rerender())},t.getLabelField=function(){return this.options.labelField||this.$el.attr("opt-lbl")},t.setLabelField=function(t){t=d.trimToEmpty(t),this.getLabelField()!=t&&(this.options.labelField=t,this.$el.attr("opt-lbl",this.options.labelField),this.rerender())},t.getLabelFunction=function(){return o.getFunction.call(this,"labelFunction","lblfunc")},t.setLabelFunction=function(t){this.getLabelFunction()!=t&&(this.options.labelFunction=t,this.$el.children(".ui-fn[name='lblfunc']").remove(),this.rerender())},t.getItemRenderer=function(){return this.options.hasOwnProperty("renderer")?this.options.renderer:o.getFunction.call(this,"itemRenderer","irender")},t.setItemRenderer=function(t){this.getItemRenderer()!=t&&(this.options.itemRenderer=t,delete this.options.renderer,this.$el.children(".ui-fn[name='irender']").remove(),this.rerender())},t.getPaginator=function(){return this.pager},t.setPaginator=function(t){s.setPager.call(this,t)},t.length=function(){return d.toArray(this.getData()).length},t.isDisabled=function(t){return s.isDisabled.call(this,t)},t.setDisabled=function(t,e){s.setDisabled.call(this,t,e)},t.addItem=function(t,e){return s.addItem.call(this,t,e)},t.updateItem=function(t,e){return s.updateItem.call(this,t,e)},t.removeItem=function(t){return this.removeItemAt(this.getDataIndex(t))},t.removeItemAt=function(t){return s.removeItem.call(this,null,t)},t.addOrUpdateItem=function(t){var e=this.getDataIndex(t);0<=e?this.updateItem(t,e):this.addItem(t,e)},t.getItemData=function(t){var e=$(t);if(e&&0<e.length){var i=this._getItemContainer();if(i&&0<i.length){for(t=e.parent();;){if(!t||0==t.length){e=null;break}if(t.is(i))break;t=(e=t).parent()}if(e&&0<e.length)return this._getItemData(e)}}return null},t.more=function(n){var s=this;if(this.lastLoadApi&&this.hasMore()&&!this.isLoading()){var t=d.extend({},this.lastLoadParams);return t.p_no=parseInt(this._pageInfo&&this._pageInfo.page)||0,t.p_no+=1,d.isFunction(this._moreBefore)?this._moreBefore(this.lastLoadApi,t):d.isFunction(this._loadBefore)&&this._loadBefore(this.lastLoadApi,t),o.load.call(this,this.lastLoadApi,t,function(t,e){if(!t&&d.isArray(e))if(d.isFunction(s.addItem))d.each(e,function(t){s.addItem(t)});else{var i=s.options.data||[];s.options.data=i.concat(e)}setTimeout(function(){d.isFunction(s._moreAfter)?s._moreAfter(t,e):d.isFunction(s._loadAfter)&&s._loadAfter(t,e),d.isFunction(n)&&n(t,e),s.trigger("loaded",t,e)})}),!0}return!1},t.loadPage=function(t,e){if(this.lastLoadApi&&!this.isLoading()){var i=d.extend({},this.lastLoadParams);i.p_no=parseInt(t)||1,this.load(null,i,e)}},t.hasMore=function(){return!!this._pageInfo&&(parseInt(this._pageInfo.page)||1)*(parseInt(this._pageInfo.size)||20)<(parseInt(this._pageInfo.total)||0)},t.isEmpty=function(){if(this.$el.is(".is-empty"))return!0;var t=this.getData();return!t||0==t.length},t.rerender=function(){var e=this;d.debounce("ui_render-"+this.getViewId(),function(){var t=e._getItemContainer();t&&0<t.length&&e._renderItems($,t.empty(),e.getData())})},t._doAdapter=function(t){return s.doAdapter.call(this,t)},t._getItemContainer=function(){return this.$el},t._getNewItem=function(t,e,i,n){return t("<li></li>").appendTo(e)},t._renderItems=function(t,e,i){s.renderItems.call(this,e,i)},t._renderOneItem=function(t,e,i,n){return s.renderOneItem.call(this,e,null,i,n)},t._isDisabled=function(t,e){if(t){var i=this.options;i.hasOwnProperty("disableField")||(i.disableField=this.$el.attr("opt-disabled"));var n=i.disableField;if(n&&t.hasOwnProperty(n))return d.isTrue(t[n])}return!1},t._getItems=function(t){var e=this._getItemContainer();if(e&&0<e.length)return e.children(t)},t._getItemAt=function(n){return 0<=(n=d.getIndexValue(n))?d.find(this._getItems(),function(t,e){var i=parseInt(t.attr("opt-ind"));return isNaN(i)&&(i=e),n==i}):null},t._getItemData=function(t,e){var i=t.data("itemData");if(!i){var n=this.getData();d.isArray(n)&&((isNaN(e)||!e&&0!==e)&&(e=parseInt(t.attr("opt-ind")),isNaN(e)&&(e=t.index())),i=n[e])}return d.isEmpty(i)?null:i},t._initPager=function(){s.initPager.call(this)},t._checkIfEmpty=function(){s.checkIfEmpty.call(this)},t._getLoadText=function(){return this.options.loadingText},
t._getLoadView=function(){return this.options.loadingView},t._getMoreText=function(){return this.options.moreText},t._getMoreView=function(){return this.options.moreView},t._getEmptyText=function(){return this.options.emptyText||this.options.empty},t._getEmptyView=function(){return this.options.emptyView};var a=i._itemsRender=function(t,e){i._baseRender.call(this,t,e)},e=a.prototype=new i._baseRender(!1);a.render=function(t,e){i._baseRender.render.call(this,t,e),e.attr("opt-key",d.trimToNull(this.getKeyField())),e.attr("opt-lbl",d.trimToNull(this.getLabelField())),e.attr("opt-disable",d.trimToNull(this.options.disableField)),o.renderFunction(e,"lblfunc",this.getLabelFunction()),o.renderFunction(e,"irender",this.getItemRenderer()),this._renderItems(t,e),this._renderEmptyView(t,e),this._renderLoadView(t,e),this._renderPager(t,e)},a.renderData=function(t,e,i){if(0<(i=d.toArray(i)||[]).length){var n=this.getDataMapper();d.isFunction(n)&&(i=d.map(i,n))}e.attr("data-items",escape(JSON.stringify(i)))},a.renderItems=function(n,s,t){var a=this;if((t=t||this.getData())&&0<t.length){var r=this._render_items=[];d.each(t,function(t,e){var i=a._getNewItem(n,s,t,e);i&&(r.push({item:i,data:t,index:e}),a._renderOneItem(n,i,t,e))}),setTimeout(function(){a._render_items=null})}},a.renderOneItem=function(t,e,i,n,s){l?e.data("itemData",n):this.renderItemData(t,e,n),this._isDisabled(n,s)&&e.addClass("disabled").attr("disabled","disabled"),i=i||e;var a=this.getItemRenderer();if(d.isFunction(a)){var r=null;r=(a._state,a.call(this,t,e,n,s)),d.isNotNull(r)&&i.empty().append(r)}else{var o=this._getDataLabel(n,s);i.html(d.isNull(o)?"":o)}},a.renderPager=function(t,e,i){l||(!i&&d.isFunction(this.getPaginator)&&(i=this.getPaginator()),i&&("string"==typeof i?e.attr("opt-pager",d.trimToNull(i)):d.isFunction(i.getViewId)&&e.attr("opt-pager","[vid='"+i.getViewId()+"']")))},a.renderEmptyView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-empty");var s=d.isFunction(this._getEmptyView)?this._getEmptyView():this.options.emptyView;if(s)o.renderSubView.call(this,n,s);else{(s=t("<div></div>").appendTo(n)).addClass((i||"ui")+"-emptydef");var a=this.options.emptyText||this.options.empty;d.isFunction(this._getEmptyText)&&(a=this._getEmptyText()),(a=d.isNull(a)?"没有数据":d.trimToEmpty(a))&&t("<p></p>").appendTo(s).text(a)}return n},a.renderLoadView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-load");var s=d.isFunction(this._getLoadView)?this._getLoadView():this.options.loadingView;if(s)o.renderSubView.call(this,n,s);else{var a=t("<div></div>").appendTo(n);a.addClass((i||"ui")+"-loaddef");var r=d.isFunction(this._getLoadText)?this._getLoadText():this.options.loadingText;(r=d.isNull(r)?"正在加载..":d.trimToEmpty(r))&&t("<p></p>").appendTo(a).html(r)}return n},a.renderMoreView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-more"),this._pageInfo&&n.attr("page-no",this._pageInfo.page);var s=d.isFunction(this._getMoreView)?this._getMoreView():this.options.moreView;if(s)o.renderSubView.call(this,n,s);else{var a=t("<div></div>").appendTo(n);a.addClass((i||"ui")+"-moredef");var r=d.isFunction(this._getMoreText)?this._getMoreText():this.options.moreText;(r=d.isNull(r)?"加载更多":d.trimToEmpty(r))&&t("<p></p>").appendTo(a).html(r)}return n},a.doAdapter=function(t){var i=this;return(t=d.toArray(t))._vr_adapter_flag||((t=d.map(t,function(t,e){return o.doAdapter.call(i,t,e)}))._vr_adapter_flag=!0),t},e.render=function(t,e){a.render.call(this,t,e)},e.renderData=function(t,e){l||a.renderData.call(this,t,e,this.getData())},e.renderItemData=function(t,e,i){o.renderData.call(this,t,e,i)},e._renderItems=function(t,e){var i=this._getItemContainer(t,e);i&&a.renderItems.call(this,t,i)},e._getNewItem=function(t,e,i,n){return t("<li></li>").appendTo(e)},e._renderOneItem=function(t,e,i,n){a.renderOneItem.call(this,t,e,null,i,n)},e._renderPager=function(t,e){a.renderPager.call(this,t,e)},e._renderEmptyView=function(t,e){a.renderEmptyView.call(this,t,e)},e._renderLoadView=function(t,e){a.renderLoadView.call(this,t,e)},e._renderMoreView=function(t,e){a.renderMoreView.call(this,t,e)},e.getPaginator=function(){return this.options.paginator||this.options.pager},e.getKeyField=function(){return this.options.keyField},e.getLabelField=function(){return this.options.labelField},e.getLabelFunction=function(){return this.options.labelFunction},e.getItemRenderer=function(){return this.options.itemRenderer},e._getItemContainer=function(t,e){return e},e._isDisabled=function(t,e){if(t){var i=this.options.disableField||"disabled";if(i&&t.hasOwnProperty(i))return d.isTrue(t[i])}return!1},e._getDataLabel=function(t,e){return o.getDataLabel.call(this,t,e)},e._doAdapter=function(t){return a.doAdapter.call(this,t)}}}("undefined"!=typeof window),function(r){if(!r||!VRender.Component.ui._select){var i=r?VRender.Component.ui:require("./init"),o=i.fn,l=i.util,s=i._select=function(t,e){return i._items.call(this,t,e)},t=s.prototype=new i._items(!1);s.init=function(t,e){return i._items.init.call(this,t,e)},s.getSelectedIndex=function(t){var n=this,s=this.$el.attr("data-inds");if(l.isNull(s)){s=[];var a=this.$el.attr("data-ids");l.isNull(a)?l.each(this.getData(),function(t,e){n._isSelected(t,e,[],[])&&s.push(e)}):0<a.length&&(a=a.split(","),l.each(this.getData(),function(t,e){var i=n._getDataKey(t);0<=l.index(a,function(t){return t==i})&&s.push(e)}))}else s=o.getIntValues(s,0);return this.isMultiple()?0<s.length?s:null:t?0<s.length?[s[0]]:null:0<s.length?s[0]:-1},s.setSelectedIndex=function(t){var e=l.isFunction(this.length)?this.length()-1:null,i=o.getIntValues(t,0,e);return 1<i.length&&!this.isMultiple()&&(i=[i[0]]),this.$el.attr("data-inds",i.join(",")),this.$el.removeAttr("data-ids"),i},s.getSelectedKey=function(t){var i=this,n=this.$el.attr("data-ids"),e=this.$el.attr("data-inds");if(l.isNotNull(e)){if(n=[],0<(e=o.getIntValues(e,0)).length){var s=this.getData()||[];l.each(e,function(t){var e=t<s.length?s[t]:null;e&&n.push(i._getDataKey(e))})}}else l.isNull(n)?(n=[],l.each(this.getData(),function(t,e){i._isSelected(t,e,[],[])&&n.push(i._getDataKey(t))})):l.isArray(n)||(n=n.split(","));if(!n||0==n.length)return null;var a=[];return l.each(n,function(t){!t&&0!==t||a.push(isNaN(t)?t:parseInt(t))}),0==a.length?null:this.isMultiple()?a:t?[a[0]]:a[0]},s.setSelectedKey=function(n){var s=this;l.isArray(n)||(n=l.isBlank(n)?[]:l.trimToEmpty(n).split(","));var a=[];l.each(this.getData(),function(t,e){var i=s._getDataKey(t);0<=l.index(n,function(t){return t==i})&&a.push(e)}),this.setSelectedIndex(a)},s.getSelectedData=function(t,e){var i=this,n=this.getSelectedIndex(!0),s=[];n||(s=this.getSelectedKey(!0)||[]);var a=[];return e=e||this.getData(),l.each(e,function(t,e){i._isSelected(t,e,n,s)&&a.push(t)}),0==a.length?null:this.isMultiple()?a:t?[a[0]]:a[0]},s.updateSelection=function(){var i=this,n=[];return l.each(this._getItems(),function(t,e){i._isItemSelected(t)&&n.push(e)}),s.setSelectedIndex.call(this,n),n},s.addItem=function(t,e){return i._itemsRender.addItem.call(this,t,e)},s.updateItem=function(t,e){return i._itemsRender.updateItem.call(this,t,e)},s.removeItem=function(t,e){return i._itemsRender.removeItem.call(this,t,e)},t.init=function(t,e){return s.init.call(this,t,e)},t.isMultiple=function(){return"multiple"==this.$el.attr("multiple")},t.setMultiple=function(t){t=!(!l.isNull(t)&&!l.isTrue(t)),this.isMultiple()!=t&&(t?this.$el.attr("multiple","multiple"):this.$el.removeAttr("multiple"),this.rerender())},t.getSelectedIndex=function(t){return s.getSelectedIndex.call(this,t)},t.setSelectedIndex=function(t){var i=this,e=this._snapshoot(),n=ComponentSelect.setSelectedIndex.call(this,t);return l.each(this._getItems(),function(t,e){i._setItemSelected(t,0<=n.indexOf(e))}),e.done(),n},t.getSelectedKey=function(t){return s.getSelectedKey.call(this,t)},t.setSelectedKey=function(t){return s.setSelectedKey.call(this,t)},t.getSelectedData=function(t){return s.getSelectedData.call(this,t)},t.isSelectedIndex=function(t){return!((t=l.getIndexValue(t))<0)&&this._isSelected(this.getDataAt(t),t)},t.isSelectedKey=function(e){if(l.isBlank(e))return!1;var t=this.getSelectedKey(!0);return 0<=l.index(t,function(t){return t==e})},t.isAllSelected=function(){var t=this.length();if(0<t){var e=this.getSelectedIndex(!0);return e&&e.length==t}return!1},t.addItem=function(t,e){var i=s.addItem.call(this,t,e);return i&&s.updateSelection.call(this),i},t.updateItem=function(t,e){return 0<=(e=s.updateItem.call(this,t,e))&&s.updateSelection.call(this),e},t.removeItem=function(t){return(t=s.removeItem.call(this,t))&&s.updateSelection.call(this),t},t.removeItemAt=function(t){var e=s.removeItem.call(this,null,t);return e&&s.updateSelection.call(this),e},t._isSelected=function(t,e,i,n){return a.isSelected.call(this,t,e,i,n)},t._isItemSelected=function(t){return t.is(".selected")},t._setItemSelected=function(t,e){e?t.addClass("selected"):t.removeClass("selected")},t._snapshoot_shoot=function(t,e,i){t.selectedIndex=e||this.getSelectedIndex(),t.selectedData=i||this.getSelectedData(),t.data=t.selectedData},t._snapshoot_compare=function(t,e){return e||(e=this.getSelectedIndex(!0)),o.equalIndex(t.selectedIndex,e)};var a=i._selectRender=function(t,e){i._itemsRender.call(this,t,e)},e=a.prototype=new i._itemsRender(!1);a.render=function(t,e){i._itemsRender.render.call(this,t,e),this.isMultiple()&&e.attr("multiple","multiple"),this.renderSelection(t,e)},a.renderSelection=function(t,e,i){var n=this,s=this.getSelectedIndex(!0),a=this.getSelectedKey(!0);s&&e.attr("data-inds",s.join(",")),a&&e.attr("data-ids",a.join(",")),!r&&this.options.apiName&&(s&&e.attr("data-tryindex",s.join(",")),a&&e.attr("data-tryid",a.join(","))),i&&0<i.length&&(a=a||[],l.each(i,function(t,e){n._isSelected(t.data,t.index,s,a)&&(l.isFunction(n._setItemSelected)?n._setItemSelected(t.item,!0):t.item.addClass("selected"))}))},a.getSelectedIndex=function(t){var e=this.options.selectedIndex;if(l.isBlank(e))return t||this.isMultiple()?null:-1;l.isArray(e)||(e=(""+e).split(","));var i=[];return l.each(e,function(t){if(!isNaN(t)){var e=parseInt(t);!isNaN(e)&&0<=e&&i.push(e)}}),this.isMultiple()?0<i.length?i:null:i&&0<i.length?t?[i[0]]:i[0]:-1},
a.getSelectedKey=function(t){var e=this.options.selectedKey;if(l.isBlank(e))return t||this.isMultiple()?[]:null;l.isArray(e)||(e=(""+e).split(","));var i=[];return l.each(e,function(t){!t&&0!==t||i.push(isNaN(t)?t:parseInt(t))}),0==i.length?null:this.isMultiple()?i:t?[i[0]]:i[0]},a.getSelectedData=function(t,e){var i=[];if((e=e||this.getData())&&0<e.length)for(var n=this.getSelectedIndex(!0),s=this.getSelectedKey(!0)||[],a=0,r=e.length;a<r;a++){var o=e[a];this._isSelected(o,a,n,s)&&i.push(o)}return 0==i.length?null:this.isMultiple()?i:t?[i[0]]:i[0]},a.isSelected=function(t,e,i,n){if(i||n||(i=this.getSelectedIndex(!0),n=this.getSelectedKey(!0)||[]),i)return!((e=l.getIndexValue(e))<0)&&0<=i.indexOf(e);if(n){var s=this._getDataKey(t);return 0<=l.index(n,function(t){return t==s})}return!1},a.isAllSelected=function(t){if((t=t||this.getData())&&0<t.length){for(var e=this.getSelectedIndex(!0),i=this.getSelectedKey(!0)||[],n=0,s=t.length;n<s;n++)if(!this._isSelected(t[n],n,e,i))return!1;return!0}return!1},e.render=function(t,e){a.render.call(this,t,e)},e.renderSelection=function(t,e){a.renderSelection.call(this,t,e,this._render_items)},e.getSelectedIndex=function(t){return a.getSelectedIndex.call(this,t)},e.getSelectedKey=function(t){return a.getSelectedKey.call(this,t)},e.getSelectedData=function(t){return a.getSelectedData.call(this,t)},e.isMultiple=function(){return o.isMultiple.call(this)},e.isAllSelected=function(){return a.isAllSelected.call(this)},e._isSelected=function(t,e,i,n){return a.isSelected.call(this,t,e,i,n)},e._setItemSelected=function(t,e){e?t.addClass("selected"):t.removeClass("selected")}}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.group){var n=t?VRender.Component.ui:require("../../static/js/init"),c=n.util,e="vertical",u="horizontial",i=n.group=function(t,e){return n._base.call(this,t,e)},s=i.prototype=new n._base(!1);s.getOrientation=function(){return this.$el.attr("opt-orientation")},s.setOrientation=function(t){this.$el.removeClass(u).removeClass(e),this.$el.removeAttr("opt-orientation"),t!==u&&t!==e||this.$el.addClass(t).attr("opt-orientation",t),a.call(this)},s.getGap=function(){return this.$el.attr("opt-gap")||0},s.setGap=function(t){this.$el.attr("opt-gap",c.trimToEmpty(t)),a.call(this)},s.getAlign=function(){return this.$el.attr("opt-align")},s.setAlign=function(t){this.$el.attr("opt-align",c.trimToEmpty(t)),a.call(this)},s.append=function(t){var e=this;if(!arguments||0==arguments.length)return this;for(var i=0,n=arguments.length;i<n;i++){var s=arguments[i];c.isArray(s)?s.forEach(function(t){e.add(t)}):this.add(s)}return this},s.add=function(t,e){if(c.isNotBlank(t)){var i=t.$el||t;this.getOrientation()&&(i=$("<div class='grp-item'></div>").append(i)),e=isNaN(e)||""===e?-1:parseInt(e);var n=this.$el.children();0<=e&&e<n.length?n.eq(e).before(i):this.$el.append(i),a.call(this)}return t},s.removeAt=function(t){var e=this.$el.children().eq(t).remove();return a.call(this),e.children()};var a=function(){var t=this;c.debounce("group_layout-"+this.getViewId(),function(){p.call(t,$,t.$el)})},r=function(t,e){n._baseRender.call(this,t,e)},o=r.prototype=new n._baseRender(!1);o.render=function(t,e){n._baseRender.render.call(this,t,e),e.addClass("ui-group");var i=this.getOrientation();return i&&(e.addClass(i),e.attr("opt-orientation",i)),e.attr("opt-gap",this.getGap()),e.attr("opt-align",this.getAlign()),l.call(this,t,e),this},o.getOrientation=function(){var t=this.options.orientation;return t==u||t==e?t:null},o.getGap=function(){return this.options.gap},o.getAlign=function(){return this.options.align};var l=function(t,e){h.call(this,t,e,d.call(this))},d=function(){return this.options.children||this.options.subViews||this.options.views},h=function(i,n,t){t=c.toArray(t);var s=this.getOrientation();c.each(t,function(t){if(c.isNotNull(t)){var e=n;s&&(e=i("<div class='grp-item'></div>").appendTo(n)),c.isFunction(t.render)?t.render(e):e.append(t.$el||t)}}),p.call(this,i,n)},p=function(t,e){var i="",n="",s="",a="",r="",o=c.getFormatSize(this.getGap(),this._isRenderAsRem())||"",l=this.getOrientation();l==u?(r="inline-block",i=o):n=o;var d=this.getAlign()||"";d=d.toLowerCase(),/left/.test(d)?s="left":/center/.test(d)?s="center":/right/.test(d)&&(s="right"),/top/.test(d)?a="top":/middle/.test(d)?a="middle":/bottom/.test(d)&&(a="bottom"),e.css("text-align",s);var h=e.children();h.css("vertical-align",a),h.css("margin-left",i).css("margin-top",n),h.eq(0).css("margin-left","").css("margin-top",""),l&&h.css("display",r)};t?(window.UIGroup=i,window.UIHGroup=function(t){return new i(c.extend(t,{orientation:u}))},window.UIVGroup=function(t){return new i(c.extend(t,{orientation:e}))},n.init(".ui-group",i,r)):module.exports=r}}("undefined"!=typeof window),function(o){if(!o||!VRender.Component.ui.button){var l=o?VRender.Component.ui:require("../../static/js/init"),d=l.util,h=["ui-btn-default","ui-btn-primary","ui-btn-success","ui-btn-danger","ui-btn-warn","ui-btn-info","ui-btn-link","ui-btn-text"],c=["bigger","big","normal","small","tiny"],t=l.button=function(t,e){return l._base.call(this,t,e)},e=t.prototype=new l._base(!1);e.init=function(t,e){l._base.init.call(this,t,e),this._isRenderAsApp()&&t.on("tap",".dropdown",r.bind(this)),t.on("tap",".btn",s.bind(this)),t.on("tap",".dropdownbtn",a.bind(this)),t.on("tap",".dropdown li",u.bind(this))},e.getLabel=function(){return this.options.label},e.setLabel=function(t){this.options.label=t;var e=this.$el.children(".btn");e.children("span").remove(),d.isNotBlank(t)&&$("<span></span>").appendTo(e).text(d.trimToEmpty(t)||" ")},e.waiting=function(t){t=d.isNull(t)||!0===t?parseInt(this.$el.attr("opt-wait"))||-1:Math.max(0,parseInt(t))||0,g.call(this,t)},e.isWaiting=function(){return this.$el.is(".waiting")},e.setWaiting=function(t){t=!0===t||d.isNull(t)?-1:Math.max(0,parseInt(t))||0,this.$el.attr("opt-wait",t)};var i=function(t,e){l._baseRender.call(this,t,e)},n=i.prototype=new l._baseRender(!1);n.render=function(t,e){l._baseRender.render.call(this,t,e),e.addClass("ui-btn");var i=this.options||{},n=i.size;n&&0<=c.indexOf(n)&&e.addClass(n);var s=i.style||"";h.indexOf(s)<0&&e.addClass(y(i.type)),d.isTrue(i.toggle)&&e.attr("opt-toggle","1"),d.isNotBlank(i.link)&&e.attr("data-lnk",d.trimToNull(i.link));var a=t("<button class='btn'></button>").appendTo(e),r=_.call(this);d.isNotBlank(r)&&t("<i class='icon'></i>").appendTo(a).css(o?"backgroundImage":"background-image","url("+r+")");return d.isNotBlank(i.label)&&t("<span></span>").appendTo(a).text(d.trimToEmpty(i.label)||" "),f.call(this,t,e),m.call(this,t,e),this},n.getItems=function(){return d.toArray(this.options.items)};var s=function(t){if(!this.$el.is(".disabled, .waiting")){var e=this.$el,i=e.attr("data-lnk");if(i)window.open(i,"_self");else{var n=1==e.attr("opt-toggle");if(e.is(".has-items")){if(!n)return void v.call(this)}else n&&(1==e.attr("active")?e.removeAttr("active"):e.attr("active","1"));this.trigger("tap",e.attr("name"));var s=parseInt(e.attr("opt-wait"));s&&g.call(this,s)}}},a=function(t){return this.$el.is(".disabled, .waiting")||v.call(this),!1},r=function(t){$(t.target).is(".dropdown")&&b.call(this)},u=function(t){var e=$(t.currentTarget),i=e.attr("name")||"";return 1==this.$el.attr("opt-toggle")&&(this.$el.attr("name",i),this.$el.children(".btn").find("span").text(e.text())),this.trigger("tap",e.attr("name")),b.call(this),!1},p=function(t){l.fn.mouseDebounce(t,b.bind(this))},f=function(t,e){var i=w.call(this);i&&e.attr("opt-wait",i),d.isTrue(this.options.waiting)&&e.addClass("waiting")},m=function(i,t){t.removeClass("has-items"),t.children(".dropdownbtn").remove(),t.children(".dropdown").remove();var e=this.getItems();if(e&&0<e.length){t.addClass("has-items"),t.append("<span class='dropdownbtn'>&nbsp;</span>");var n=i("<div class='dropdown'></div>").appendTo(t),s=i("<ul></ul>").appendTo(n);d.each(e,function(t){if(d.isNotBlank(t)){d.isPrimitive(t)&&(t={label:t});var e=i("<li></li>").appendTo(s);t.name&&e.attr("name",t.name),i("<span></span>").appendTo(e).text(d.trimToEmpty(t.label)||" ")}})}},g=function(t){var e=this;if(this.t_wait&&(clearTimeout(this.t_wait),this.t_wait=0),t){var i=this.$el.addClass("waiting");0<t&&(this.t_wait=setTimeout(function(){e.t_wait=0,i.removeClass("waiting")},t))}else this.$el.removeClass("waiting")},v=function(){if(!this.$el.is(".show-dropdown")){var t=this.$el.addClass("show-dropdown");if(this._isRenderAsApp())$("html,body").addClass("ui-scrollless");else{t.on("mouseenter",p.bind(this)),t.on("mouseleave",p.bind(this));var e=t.children(".dropdown"),i=l.fn.getDropdownHeight.call(this,e);d.offset(e,this._getScrollContainer(),0,i).isOverflowY&&t.addClass("show-before")}setTimeout(function(){t.addClass("animate-in")})}},b=function(){if(this.$el.is(".show-dropdown")){var t=this.$el.addClass("animate-out");this._isRenderAsApp()?$("html,body").removeClass("ui-scrollless"):t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)}},y=function(t){if(d.isNotBlank(t)){if(0<=["ok","submit","save","primary","major"].indexOf(t))return"ui-btn-primary";if(0<=["danger","error"].indexOf(t))return"ui-btn-danger";if(0<=["success","complete","finish"].indexOf(t))return"ui-btn-success";if(0<=["warn","warning"].indexOf(t))return"ui-btn-warn";if(0<=["info","highlight"].indexOf(t))return"ui-btn-info";if("text"===t)return"ui-btn-text";if("link"===t)return"ui-btn-link"}return"ui-btn-default"},_=function(){var t=this.options.icon;if(!0===t){var e=this.options.type;"success"==e||"submit"==e?t="012b.png":"warn"==e?t="013b.png":"error"==e||"danger"==e?t="014b.png":"info"==e&&(t="015b.png"),!0!==t&&(t="/vrender-ui/icons/"+t)}return"string"==typeof t?t:null},w=function(){var t=0,e=this.options||{};return e.hasOwnProperty("waitTime")?t=e.waitTime:e.hasOwnProperty("wait")&&(t=e.wait),!0===t?-1:Math.max(0,parseInt(t))||0};o?(window.UIButton=t,l.init(".ui-btn",t,i)):module.exports=i}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.checkbox){var s=t?VRender.Component.ui:require("../../static/js/init"),a=s.util,e=s.checkbox=function(t,e){return s._base.call(this,t,e)},i=e.prototype=new s._base(!1)
;i.init=function(t,e){s._base.init.call(this,t,e),this.input=this.$el.children("input"),this.input.on("change",r.bind(this))},i.val=function(t){return a.isNotNull(t)&&this.input.val(t),this.input.val()},i.isChecked=function(){return this.input.is(":checked")},i.setChecked=function(t){var e=!!a.isNull(t)||a.isTrue(t);this.input[0].checked=e,this.input.trigger("change")},i.getLabel=function(){return this.$el.children("span").text()},i.setLabel=function(t){this.$el.children("span").remove(),a.isNotBlank(t)&&$("<span></span>").appendTo(this.$el).text(t)};var n=function(t,e){s._baseRender.call(this,t,e)};(n.prototype=new s._baseRender(!1)).render=function(t,e){s._baseRender.render.call(this,t,e),e.addClass("ui-chkbox");var i=this.options||{},n=t("<input type='checkbox'/>").appendTo(e);return a.isNotNull(i.value)&&n.val(i.value),a.isTrue(i.checked)&&(e.addClass("checked"),n.attr("checked","checked")),a.isNotNull(i.label)&&t("<span></span>").appendTo(e).text(i.label),n.attr("name",a.trimToNull(i.name)),this};var r=function(t){$(t.currentTarget).is(":checked")?this.$el.addClass("checked"):this.$el.removeClass("checked")};t?(window.UICheckbox=e,s.init(".ui-chkbox",e,n)):module.exports=n}}("undefined"!=typeof window),function(a){if(!a||!VRender.Component.ui.checkgroup){var r=a?VRender.Component.ui:require("../../static/js/init"),o=(r.fn,r.util),t=r.checkgroup=function(t,e){return r._select.call(this,t,e)},e=t.prototype=new r._select(!1);e.init=function(t,e){r._select.init.call(this,t,e),this.$el.on("change","input",s.bind(this))},e.setSelectedIndex=function(t){var e=this._snapshoot(),i=n.fn.getIntValues(t,0)||[];o.each(this.$el.children(),function(t,e){VRender.Component.get(t.children()).setChecked(0<=i.indexOf(e))}),e.done()},e.isMultiple=function(){return!0},e.isDisabled=function(t){if("number"!=typeof t)return"string"==typeof t?this.isDisabled(this.getIndexByName(t)):this.$el.is(".disabled");var e=VRender.Component.get(this._getItemAt(t).children());return!!e&&e.isDisabled()},e.setDisabled=function(t,e){if("string"==typeof e)return this.setDisabled(t,this.getIndexByName(e));if("number"==typeof e){var i=VRender.Component.get(this._getItemAt(e).children());i&&i.setDisabled(t)}else(t=!(!o.isNull(t)&&!o.isTrue(t)))?this.$el.addClass("disabled").attr("disabled","disabled"):this.$el.removeClass("disabled").removeAttr("disabled")},e._getItems=function(){return this.$el.children()},e._getNewItem=function(t,e,i,n){return h.call(this,t,e,i,n)},e._renderItems=function(t,e,i){l.call(this,t,e,i)},e._renderOneItem=function(t,e,i,n){d.call(this,t,e,i,n)};var n=function(t,e){r._selectRender.call(this,t,e)},i=n.prototype=new r._selectRender(!1);i.render=function(t,e){return r._selectRender.render.call(this,t,e),e.addClass("ui-chkgrp"),this},i.renderSelection=function(t,e){var i=this.getSelectedIndex(!0);i&&e.attr("data-inds",i.join(","));var n=this.getSelectedKey(!0);n&&e.attr("data-ids",n.join(","))},i.isMultiple=function(){return!0},i._renderItems=function(t,e){var i=this._getItemContainer(t,e);i&&l.call(this,t,i)},i._renderOneItem=function(t,e,i,n){d.call(this,t,e,i,n)},i._getNewItem=function(t,e){return h.call(this,t,e)},i._renderEmptyView=function(){},i._renderLoadView=function(){};var s=function(t){t.stopPropagation();var e=this._snapshoot(),i=[];o.each(this.$el.find("input"),function(t,e){t.is(":checked")&&i.push(e)}),r._select.setSelectedIndex.call(this,i),e.done()},l=function(t,e,i){this._cache_selected_indexs=this.getSelectedIndex(!0),this._cache_selected_ids=this.getSelectedKey(!0)||[],r._itemsRender.renderItems.call(this,t,e,i),delete this._cache_selected_indexs,delete this._cache_selected_ids},d=function(t,e,i,n){"string"==typeof i&&(i={label:i});var s=o.extend({},i);return s.value=this._getDataKey(i),s.label=this._getDataLabel(i,n),s.checked=this._isSelected(i,n,this._cache_selected_indexs,this._cache_selected_ids),a?(s.target=e,r.checkbox.create(s)):new(require("../checkbox/index"))(this.context,s).render(e)},h=function(t,e){return t("<div class='item'></div>").appendTo(e)};a?(window.UICheckGroup=t,r.init(".ui-chkgrp",t,n)):module.exports=n}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.radiobox){var s=t?VRender.Component.ui:require("../../static/js/init"),a=s.util,e=s.radiobox=function(t,e){return s._base.call(this,t,e)},i=e.prototype=new s._base(!1);i.init=function(t,e){s._base.init.call(this,t,e),this.input=this.$el.children("input"),this.input.on("change",r.bind(this)),this.input.is(":checked")&&this.input.trigger("change")},i.val=function(t){return a.isNotBlank(t)&&this.input.val(t),this.input.val()},i.isChecked=function(){return this.input.is(":checked")},i.setChecked=function(t){var e=!!a.isNull(t)||a.isTrue(t);this.isChecked()!=e&&(this.input[0].checked=e,this.input.trigger("change"))},i.getLabel=function(){return this.$el.children("span").text()},i.setLabel=function(t){this.$el.children("span").remove(),a.isNotBlank(t)&&$("<span></span>").appendTo(this.$el).text(t)};var n=function(t,e){s._baseRender.call(this,t,e)};(n.prototype=new s._baseRender(!1)).render=function(t,e){s._baseRender.render.call(this,t,e),e.addClass("ui-radbox");var i=this.options||{},n=t("<input type='radio'/>").appendTo(e);return a.isNotNull(i.value)&&n.val(i.value),a.isTrue(i.checked)&&(e.addClass("checked"),n.attr("checked","checked")),a.isNotNull(i.label)&&t("<span></span>").appendTo(e).text(i.label),n.attr("name",a.trimToNull(i.name)),this};var r=function(t){if(this.isChecked()){this.input.parent().addClass("checked");var e=this.input.attr("name");if(a.isNotBlank(e))$("input[name='"+e+"']").not(this.input).parent().removeClass("checked")}else this.$el.removeClass("checked");this.trigger("change")};t?(window.UIRadiobox=e,s.init(".ui-radbox",e,n)):module.exports=n}}("undefined"!=typeof window),function(a){if(!a||!VRender.Component.ui.radiogroup){var r=a?VRender.Component.ui:require("../../static/js/init"),o=(r.fn,r.util),t=(Date.now(),r.checkgroup=function(t,e){return r._select.call(this,t,e)}),e=t.prototype=new r._select(!1);e.init=function(t,e){r._select.init.call(this,t,e),this.$el.on("change","input",s.bind(this))},e.setSelectedIndex=function(t){var e=this._snapshoot(),i=this.$el.children(),n=o.getIndexValue(t);if(0<=n)VRender.Component.get(i.eq(n).children()).setChecked(!0);else{var s=e.getState().selectedIndex;0<=s&&VRender.Component.get(i.eq(s).children()).setChecked(!1)}e.done()},e.isMultiple=function(){return!1},e.isDisabled=function(t){if("number"!=typeof t)return"string"==typeof t?this.isDisabled(this.getIndexByName(t)):this.$el.is(".disabled");var e=VRender.Component.get(this._getItemAt(t).children());return!!e&&e.isDisabled()},e.setDisabled=function(t,e){if("string"==typeof e)return this.setDisabled(t,this.getIndexByName(e));if("number"==typeof e){var i=VRender.Component.get(this._getItemAt(e).children());i&&i.setDisabled(t)}else(t=!(!o.isNull(t)&&!o.isTrue(t)))?this.$el.addClass("disabled").attr("disabled","disabled"):this.$el.removeClass("disabled").removeAttr("disabled")},e._getRadioName=function(){return this.getViewId()},e._getItems=function(){return this.$el.children()},e._getNewItem=function(t,e,i,n){return h.call(this,t,e,i,n)},e._renderItems=function(t,e,i){l.call(this,t,e,i)},e._renderOneItem=function(t,e,i,n){d.call(this,t,e,i,n)};var i=function(t,e){r._selectRender.call(this,t,e)},n=i.prototype=new r._selectRender(!1);n.render=function(t,e){return this.radioGroupId="rad-"+e.attr("vid"),r._selectRender.render.call(this,t,e),e.addClass("ui-radgrp"),this},n.renderSelection=function(t,e){var i=this.getSelectedIndex(!0);i&&e.attr("data-inds",i.join(","));var n=this.getSelectedKey(!0);n&&e.attr("data-ids",n.join(","))},n.isMultiple=function(){return!1},n._getRadioName=function(){return this.radioGroupId},n._renderItems=function(t,e){var i=this._getItemContainer(t,e);i&&l.call(this,t,i)},n._renderOneItem=function(t,e,i,n){d.call(this,t,e,i,n)},n._getNewItem=function(t,e){return h.call(this,t,e)},n._renderEmptyView=function(){},n._renderLoadView=function(){};var s=function(t){t.stopPropagation();var e=this._snapshoot(),i=o.index(this.$el.find("input"),function(t){return t.is(":checked")});r._select.setSelectedIndex.call(this,i),e.done()},l=function(t,e,i){this._cache_selected_indexs=this.getSelectedIndex(!0),this._cache_selected_ids=this.getSelectedKey(!0)||[],r._itemsRender.renderItems.call(this,t,e,i),delete this._cache_selected_indexs,delete this._cache_selected_ids},d=function(t,e,i,n){o.isPrimitive(i)&&(i={label:i});var s=o.extend({},i);return s.name=this._getRadioName(),s.value=this._getDataKey(i),s.label=this._getDataLabel(i,n),s.checked=this._isSelected(i,n,this._cache_selected_indexs,this._cache_selected_ids),a?(s.target=e,r.radiobox.create(s)):new(require("../radiobox/index"))(this.context,s).render(e)},h=function(t,e){return t("<div class='item'></div>").appendTo(e)};a?(window.UIRadioGroup=t,r.init(".ui-radgrp",t,i)):module.exports=i}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.textview){var d=t?VRender.Component.ui:require("../../static/js/init"),i=d.fn,p=d.util,e=d.textview=function(t,e){return d._base.call(this,t,e)},n=e.prototype=new d._base(!1);n.init=function(t,e){d._base.init.call(this,t,e),this.inputTag=this.$el.children(".ipt"),this.input=this.inputTag.find("input, textarea"),this.input.on("focusin",l.bind(this)),this.input.on("focusout",h.bind(this)),this.input.on("keydown",r.bind(this)),this.input.on("keyup",o.bind(this)),this.input.on("change",function(t){return!1}),this.$el.on("tap",".clear",f.bind(this)),this._isRenderAsApp()||(this.inputTag.on("mouseenter",c.bind(this)),this.inputTag.on("mouseleave",u.bind(this))),1==this.$el.attr("opt-pwd")&&this.setDisplayAsPassword(!0),this.isAutoHeight()&&_.call(this,this.getValue())},n.val=function(t){return p.isNull(t)?this.getValue():(this.setValue(t),this)},n.focus=function(){return this.input.focus(),this},n.select=function(){return this.input.select(),this},n.validate=function(t){var e=this,i=this.getValue();0==i.length?(this.isRequired()?w.call(this,this.getEmptyMsg()||"输入框不能为空"):D.call(this),p.isFunction(t)&&t(this.lastErrorMsg)):b.call(this,i,function(){p.isFunction(t)&&t(e.lastErrorMsg)})},n.getValue=function(){return this.input.val(
)||""},n.setValue=function(t){t=p.trimToEmpty(t),this.input.val(t),D.call(this),y.call(this,t)},n.getPrompt=function(){return this.inputTag.find(".prompt").text()},n.setPrompt=function(t){this.inputTag.find(".prompt").remove(),p.isNotBlank(t)&&$("<span class='prompt'></span>").appendTo(this.inputTag).text(t)},n.getTips=function(){return this.inputTag.find(".tips").text()},n.setTips=function(t){this.inputTag.find(".tips").remove(),p.isNotBlank(t)&&$("<span class='tips'></span>").appendTo(this.inputTag).html(t)},n.getDescription=function(){return this.$el.children(".desc").text()},n.setDescription=function(t){this.$el.children(".desc").remove(),p.isNotBlank(t)&&$("<div class='desc'></div>").appendTo(this.$el).html(t)},n.getDataType=function(){return this.$el.attr("opt-type")||"text"},n.setDataType=function(t){/^(number|num|int)$/.test(t)&&(t="_number"),this.$el.attr("opt-type",t),/^(email|password|tel|url|number)$/.test(t)?this.input.attr("type",t):this.input.removeAttr("type")},n.isReadonly=function(){return 1==this.$el.attr("opt-readonly")},n.setReadonly=function(t){p.isNull(t)||p.isTrue(t)?(this.$el.attr("opt-readonly","1"),this.input.attr("readonly","readonly")):(this.$el.removeAttr("opt-readonly"),this.input.removeAttr("readonly"))},n.isRequired=function(){return 1==this.$el.attr("opt-required")},n.setRequired=function(t){p.isNull(t)||p.isTrue(t)?this.$el.attr("opt-required","1"):this.$el.removeAttr("opt-required")},n.getEmptyMsg=function(){return this.$el.attr("opt-empty")},n.setEmptyMsg=function(t){p.isBlank(t)?this.$el.removeAttr("opt-empty"):this.$el.attr("opt-empty",t)},n.getErrorMsg=function(){return this.$el.attr("opt-errmsg")},n.setErrorMsg=function(t){p.isBlank(t)?this.$el.removeAttr("opt-errmsg"):this.$el.attr("opt-errmsg",t)},n.getMaxSize=function(){return this.hasOwnProperty("maxSize")||(this.maxSize=parseInt(this.$el.attr("opt-size"))||0),this.maxSize},n.setMaxSize=function(t){if(this.maxSize=parseInt(t)||0,this.$el.attr("opt-size",this.maxSize),0<this.maxSize){this.$el.addClass("show-size"),this.inputTag.find(".size").remove();var e=this.getValue()||"";$("<span class='size'></span>").appendTo(this.inputTag).text(e.length+"/"+this.maxSize)}else this.$el.removeClass("show-size"),this.inputTag.find(".size").remove()},n.getValidate=function(){return i.getFunction.call(this,"_validate","validate")},n.setValidate=function(t){this.options._validate=t,this.$el.children(".ui-fn[name='validate']").remove()},n.hasError=function(){return this.$el.is(".is-error")},n.showError=function(t){!0===t&&(t=this.lastErrorMsg||this.$el.attr("opt-errmsg")||"内容不正确！"),t?w.call(this,t):D.call(this)},n.getDecimals=function(){var t=parseFloat(this.$el.attr("opt-decimal"));return isNaN(t)||t<0?-1:t},n.setDecimals=function(t){t=isNaN(t)?2:parseInt(t)||0,this.$el.attr("opt-decimal",t)},n.isMultiline=function(){return this.$el.is(".multi")},n.isAutoHeight=function(){return 1==this.$el.attr("opt-autoheight")},n.isDisplayAsPassword=function(){return 1==this.$el.attr("opt-pwd")},n.setDisplayAsPassword=function(t){var e=window.getComputedStyle(this.input[0]);p.isNull(t)||p.isTrue(t)?(this.$el.attr("opt-pwd","1"),e.webkitTextSecurity||this.input.attr("type","password")):(this.$el.removeAttr("opt-pwd"),"password"==this.input.attr("type")&&this.input.attr("type","text"))};var s=function(t,e){d._baseRender.call(this,t,e)},a=s.prototype=new d._baseRender(!1);a.render=function(t,e){d._baseRender.render.call(this,t,e),e.addClass("ui-textview");var i=this.options||{},n=t("<div class='ipt'></div>").appendTo(e),s=m.call(this,t,e,n),a=p.getFormatSize(i.width,this._isRenderAsRem());a&&e.attr("opt-fixed","1").css("width",a),p.isTrue(i.readonly)&&(e.attr("opt-readonly","1"),s.attr("readonly","readonly")),p.isTrue(i.required)&&e.attr("opt-required","1"),this.isDisplayAsPassword()&&e.attr("opt-pwd","1");var r=parseInt(i.maxSize)||0;if(0<r){e.addClass("show-size").attr("opt-size",r);var o=p.trimToEmpty(s.val()).length;t("<span class='size'></span>").appendTo(n).text(o+"/"+r)}p.isNotBlank(i.prompt)&&t("<span class='prompt'></span>").appendTo(n).text(i.prompt),p.isNotBlank(i.tips)&&t("<span class='tips'></span>").appendTo(n).html(i.tips);var l=i.description||i.desc;return p.isNotBlank(l)&&t("<div class='desc'></div>").appendTo(e).html(l),g.call(this,t,e),p.isTrue(i.autoHeight)&&this.isMultiline()&&v.call(this,t,e,s),this},a.getDecimals=function(){if(this.isDisplayAsPassword())return 0;var t=this.options||{};return"int"===(t.dataType||t.type)?0:t.hasOwnProperty("decimals")?parseInt(t.decimals)||0:2},a.isDisplayAsPassword=function(){return p.isTrue(this.options.displayAsPwd)},a.isMultiline=function(){var t=this.options||{};return t.hasOwnProperty("multiple")?p.isTrue(t.multiple):p.isTrue(t.multi)};var r=function(t){if(D.call(this),p.isControlKey(t))return!0;var e=this.input.val()||"",i=this.getDataType();if("_number"==i||"number"==i||"num"==i){if(!T(t,e))return!1;if("."==t.key&&0==this.getDecimals())return!1}else if("tel"==i||"mobile"==i||"phone"==i){if(!/[0-9]|\-/.test(t.key))return!1;if("-"==t.key&&"mobile"==i)return!1}else if("text"==i){var n=this.getMaxSize();if(0<n&&e.length>=n)return!1}y.call(this,e+".")},o=function(t){var e=this.input.val()||"",i=e;if(13===t.which)0===i.length?this.isRequired()&&w.call(this,this.getEmptyMsg()||"输入框不能为空"):b.call(this,i),this.trigger("enter",i),this.$el.trigger("enter",i);else{var n=this.getDataType();"_number"==n||"number"==n||"num"==n?i=e.replace(/[^0-9\.\-]/g,""):"tel"!=n&&"mobile"!=n&&"phone"!=n||(i=e.replace(/[^0-9\-]/g,"")),i!=e&&this.input.val(i),y.call(this,i)}},l=function(t){var e=this;this.$el.addClass("focus");var i=this.input.val();this.t_focus=setInterval(function(){var t=e.input.val();t!=i&&(i=t,y.call(e,t),e.trigger("change",t),e.$el.trigger("change",t))},100)},h=function(t){this.$el.removeClass("focus");var e=this.input.val()||"";if(0===e.length?this.isRequired()&&w.call(this,this.getEmptyMsg()||"输入框不能为空"):b.call(this,e),this.t_focus){var i=this.t_focus;this.t_focus=null,setTimeout(function(){clearInterval(i)},100)}},c=function(t){this.hasError()&&(this.t_hideerror&&(clearTimeout(this.t_hideerror),this.t_hideerror=null),this.$el.find(".errmsg").removeClass("animate-out"))},u=function(t){var e=this;this.hasError()&&(this.t_hideerror||(this.t_hideerror=setTimeout(function(){e.t_hideerror=null,e.$el.find(".errmsg").addClass("animate-out")},3e3)))},f=function(t){var e=this;this.val(""),this.trigger("change",""),this.$el.trigger("change",""),this.trigger("clear"),this.$el.trigger("clear"),setTimeout(function(){e.input.focus()})},m=function(t,e,i){var n=this.options||{},s=this.isMultiline(),a=s?"<textarea></textarea>":"<input type='text'/>";a=t(a).appendTo(i),s?e.addClass("multi"):i.append("<span class='clear'></span>");var r=n.value,o=n.dataType||n.type;if(p.isNotBlank(o)&&(/^(number|num|int)$/.test(o)&&(o="_number"),/^(email|password|tel|url|number)$/.test(o)&&a.attr("type",o),e.attr("opt-type",o),"_number"==o)){var l=this.getDecimals();e.attr("opt-decimal",l);var d=parseFloat(n.min),h=parseFloat(n.max);isNaN(d)||e.attr("opt-min",d),isNaN(h)||e.attr("opt-max",h),p.isNotBlank(r)&&(r=parseFloat(r),r=isNaN(r)?"":(!isNaN(d)&&r<d&&(r=d),!isNaN(h)&&h<r&&(r=h),r.toFixed(l)))}return p.isNotBlank(r)&&(a.val(r),e.addClass("has-val")),a},g=function(t,e){p.isNotBlank(this.options.empty)&&e.attr("opt-empty",this.options.empty),p.isNotBlank(this.options.errmsg)&&e.attr("opt-errmsg",this.options.errmsg),i.renderFunction(e,"validate",this.options.validate)},v=function(t,e,i){e.attr("opt-autoheight","1"),(e=e.children(".ipt")).append("<div class='preview'><pre></pre></div>"),e.find("pre").text(i.val());var n=this.options||{},s=this._isRenderAsRem(),a=p.getFormatSize(n.minHeight,s),r=p.getFormatSize(n.maxHeight,s);a&&i.css("minHeight",a),r&&i.css("maxHeight",r)},b=function(t,e){var i=this,n=this.getValidate(),s=this.getErrorMsg();if(p.isFunction(n)){var a=function(t){!0===t?w.call(i,s||"内容不正确！"):!1===t?D.call(i):t?w.call(i,t):D.call(i),p.isFunction(e)&&setTimeout(e,0)},r=n(this,t,a);p.isNotNull(r)&&a(r)}else{var o=this.getDataType();if("_number"==o||"number"==o||"num"==o)if(isNaN(t))w.call(this,s||"数据格式不正确");else{var l=parseFloat(t),d=parseFloat(this.$el.attr("opt-min"));!isNaN(d)&&l<d&&w.call(this,s||"数据不正确，请输入大于等于"+d+"的值");var h=parseFloat(this.$el.attr("opt-max"));!isNaN(h)&&h<l&&w.call(this,s||"数据不正确，请输入小于等于"+h+"的值");var c=this.getDecimals();0<c&&this.input.val(l.toFixed(c))}else if("tel"==o)p.isMobile(t)&&p.isPhone(t)||w.call(this,s||"手机或电话号码不正确");else if("text"==o){var u=this.getMaxSize();0<u&&u<t.length&&w.call(this,s||"输入内容太长，允许最大长度为："+u)}else"email"==o?p.isEmail(t)||w.call(this,s||"电子邮箱格式不正确，请重新输入"):"mobile"==o?p.isMobile(t)||w.call(this,s||"手机号码不正确，必须是1开头的11位数字"):"phone"==o?p.isPhone(t)||w.call(this,s||"电话号码不正确"):"url"==o&&(p.isUrl(t)||w.call(this,s||"url格式不正确"));p.isFunction(e)&&setTimeout(e,0)}},y=function(t){if(t&&0<t.length?this.$el.addClass("has-val"):this.$el.removeClass("has-val"),this.$el.is(".show-size")){var e=this.getMaxSize();0<e&&this.inputTag.find(".size").text(t.length+"/"+e)}_.call(this,t)},_=function(t){if(this.isAutoHeight()){var e=this.inputTag.find(".preview pre");e&&0<e.length&&(t=(t||"").replace(/\n$/,"\n."),e.text(t));var i=this.input.get(0),n=p.toPx(this._isRenderAsRem()?"0.32rem":"32px"),s=function(){var t=e[0].scrollHeight;t=Math.max(t,n)+2,i.style.height=t+"px"};window.requestAnimationFrame?window.requestAnimationFrame(s):setTimeout(s,0)}},w=function(t){var e=this;this.lastErrorMsg=t;var i=this.$el.find(".errmsg");i&&0!=i.length||((i=$("<div class='errmsg'></div>").appendTo(this.$el)).insertAfter(this.inputTag),this._isRenderAsApp()||i.css("top",this.inputTag.height()+8)),i.html(t),this.$el.addClass("is-error"),i.removeClass("animate-in").removeClass("animate-out"),setTimeout(function(){i.addClass("animate-in")},0),this._isRenderAsApp()||(this.t_hideerror&&clearTimeout(this.t_hideerror),this.t_hideerror=setTimeout(function(){e.t_hideerror=null,i.addClass("animate-out")},3e3))},D=function(){var t=this;if(this.lastErrorMsg=null,this.hasError()){var e=this.$el.find(".errmsg").addClass("animate-out");setTimeout(function(){t.$el.removeClass("is-error"),e.removeClass("animate-in").removeClass("animate-out")},300)}},
T=function(t,e){return!!/[0-9]/.test(t.key)||("-"==t.key?!/\-/.test(e)&&0==e.length:"."==t.key&&(!/\./.test(e)&&0<e.length))};t?(window.UITextView=e,d.init(".ui-textview",e,s)):module.exports=s}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.combobox){var h=t?VRender.Component.ui:require("../../static/js/init"),c=h.fn,u=h.util,e=h.combobox=function(t,e){return h._select.call(this,t,e)},i=e.prototype=new h._select(!1);i.init=function(t,e){h._base.init.call(this,t,e),t=this.$el,this._isRenderAsApp()&&this.isNative()?t.find("select").on("change",v.bind(this)):(this._isRenderAsApp()&&t.on("tap",".dropdown",g.bind(this)),t.on("tap",".ipt",a.bind(this)),t.on("tap",".item",r.bind(this)),t.on("tap",".ui-more",o.bind(this))),t.is(".editable")&&(t.on("keydown","input",l.bind(this)),t.on("keyup","input",d.bind(this)),t.on("focusin","input",p.bind(this)),t.on("focusout","input",f.bind(this)))},i.val=function(t){if(u.isNull(t)){var e=this.getSelectedIndex(!0);return e&&0<e.length?this.getSelectedKey():this.isEditable()?this.$el.find(".ipt > input").val():null}var i=this._snapshoot(),n=I.call(this,t);return n?this.setSelectedIndex(n[0]):(this.setSelectedIndex(-1),this.isMatchRequired()||(this.$el.find(".ipt > input").val(t),A.call(this,u.isNotBlank(t)))),i.done(),this},i.getData=function(t){return t?(this.options.data=this._doAdapter(this.options.data),this.options.data):N.call(this)},i.setDataSilent=function(t){this.options.data=t,T.call(this)},i.setSelectedIndex=function(t){var e=this._snapshoot(),i=h._select.setSelectedIndex.call(this,t);u.each(this._getItems(),function(t,e){C(t,0<=i.indexOf(e))}),i&&0!=i.length||this.$el.find("select").val(""),x.call(this),e.done()},i.getPrompt=function(){return this.$el.children(".ipt").find(".prompt").text()},i.setPrompt=function(t){var e=this.$el.children(".ipt");e.find(".prompt").remove(),u.isNotBlank(t)&&$("<span class='prompt'></span>").appendTo(e).text(t)},i.addItem=function(s,a){a=u.getIndexValue(a),s=c.doAdapter.call(this,s,a)||{};var t=this.getData(!0),r=!1;0<=a&&k.call(this,t,function(t,e,i,n){if(a==e)return i.splice(n,0,s),!(r=!0)}),r||(0<t.length?t[t.length-1].push(s):t.push([s]));var e=this._getNewItem($,this._getItemContainer());return this._renderOneItem($,e,s,a),r&&0<=a&&(this._getItems().eq(a).before(e),h._select.updateSelection.call(this)),e},i.updateItem=function(r,o){var l=this;if(r=c.doAdapter.call(this,r,o),0<=(o=o||0===o?u.getIndexValue(o):this.getDataIndex(r))){var t=this.getData(!0),d=null;k.call(this,t,function(t,e,i,n){if(o==e){i.splice(n,1,r);var s=l._getNewItem($,l._getItemContainer());l._renderOneItem($,s,r,o);var a=l._getItems();return(d=a.eq(o).before(s).remove()).is(".selected")&&C(s,!0),!1}}),h._select.updateSelection.call(this),d&&d.is(".selected")&&x.call(this)}return o},i.removeItemAt=function(s){if(0<=(s=u.getIndexValue(s))){var t=this._getItems().eq(s);if(t&&0<t.length){var e=t.parent();t.remove(),0==e.children().length&&e.remove()}var a=this.getData(!0),r=null;return k.call(this,a,function(t,e,i,n){if(s==e)return r=i.splice(n,1),0==i.length&&u.remove(a,function(t){return t==i}),!1}),h._select.updateSelection.call(this),t.is(".selected")&&x.call(this),r}return null},i.isNative=function(){return 1==this.$el.attr("opt-native")},i.isEditable=function(){return this.$el.is(".editable")},i.isMatchRequired=function(){return 1==this.$el.attr("opt-match")},i.rerender=function(){var s=this;u.debounce("combobox_render-"+this.getViewId(),function(){var t=s.$el.find(".ipt > input"),e=t.val()||"",i=s.getSelectedIndex(),n=s._getItemContainer();n&&0<n.length&&s._renderItems($,n.empty(),s.getData()),s.setSelectedIndex(i),s.isEditable()&&s.getSelectedIndex()<0&&(t.val(e||""),A.call(s,u.isNotBlank(e)))})},i._getItemContainer=function(){return this.$el.children(".dropdown").children(".box")},i._renderItems=function(t,e,i){i=i||this.getData(!0),y.call(this,t,this.$el,e,i)},i._renderOneItem=function(t,e,i,n){this._isRenderAsApp()&&this.isNative()?e.text(this._getDataLabel(i,n)):h._items.renderOneItem.call(this,e,null,i,n)},i._getNewItem=function(t,e,i,n){if(this._isRenderAsApp()&&this.isNative()){var s=e.children("select");return t("<option class='item'></option>").appendTo(s)}var a=e.children(".grp").last();return a&&0!=a.length||(a=t("<div class='grp'></div>").appendTo(e)),t("<div class='item'></div>").appendTo(a)},i._getItems=function(t){var e=this._getItemContainer().find(".item");return t&&(e=e.filter(t)),e},i._isItemSelected=function(t){return t.is(".selected")||t.is(":selected")},i._setItemSelected=function(t,e){C.call(this,t,e)},i._loadBefore=function(){if(!this._isRenderAsApp()||!this.isNative()){var t=this._getItemContainer();if(t.find(".ui-load, .ui-more").remove(),this._isRenderAsApp()&&this.isNative()){var e=this._getLoadText();if(e=u.isNull(e)?"正在加载..":u.trimToEmpty(e)){var i=t.children("select");$("<option class='ui-load'></option>").appendTo(i).text(e)}}else h._itemsRender.renderLoadView.call(this,$,t)}},i._loadAfter=function(){if(!this._isRenderAsApp()||!this.isNative()){var t=this._getItemContainer();if(t.find(".ui-load").remove(),this.hasMore())if(this.$el.addClass("has-more"),this._isRenderAsApp()&&this.isNative()){var e=this._getMoreText();if(e=u.isNull(e)?"加载更多":u.trimToEmpty(e)){var i=t.children(".select");$("<option class='ui-more'></option>").appendTo(i).text(e)}}else h._itemsRender.renderMoreView.call(this,$,t);else this.$el.removeClass("has-more")}},i._snapshoot_shoot=function(t){t.selectedIndex=this.getSelectedIndex(),t.value=this.$el.find(".ipt > input").val()||"",t.data=this.getSelectedData()},i._snapshoot_compare=function(t){var e=this.$el.find(".ipt > input").val()||"";if(t.value!=e)return!1;var i=this.getSelectedIndex();return c.equalIndex(i,t.selectedIndex)},i._doAdapter=function(t){return F.call(this,t)};var n=function(t,e){h._selectRender.call(this,t,e)},s=n.prototype=new h._selectRender(!1);s.render=function(t,e){e.addClass("ui-combobox");var i=this.options||{};return this.isNative()&&e.attr("opt-native","1"),u.isTrue(i.needMatch)&&e.attr("opt-match","1"),e.attr("opt-box",i.container),b.call(this,t,e),e.append("<div class='dropdown'><div class='box'></div></div>"),h._selectRender.render.call(this,t,e),this},s.getSelectedData=function(t){return h._selectRender.getSelectedData.call(this,t,N.call(this))},s.isNative=function(){return u.isTrue(this.options.native)},s._getItemContainer=function(t,e){return e.children(".dropdown").children(".box")},s._renderItems=function(t,e){var i=this._getItemContainer(t,e);y.call(this,t,e,i,this.getData())},s._renderEmptyView=function(t,e){},s._renderLoadView=function(t,e){},s._setItemSelected=function(t,e){e?t.addClass("selected").attr("selected","selected"):t.removeClass("selected").removeAttr("selected")},s._doAdapter=function(t){return F.call(this,t)};var a=function(t){var e=$(t.target);if(this._isRenderAsApp()){if(this.isEditable()&&!e.is(".dropdownbtn"))return}else this.isEditable()&&e.is(".dropdownbtn")&&this.$el.find(".ipt > input").focus();M.call(this)},r=function(t){var e=$(t.currentTarget);if(e.is(".selected")&&!this.isMultiple())return!1;var i=this._snapshoot();return e.is(".selected")?C(e,!1):(this.isMultiple()||C(this._getItems(".selected"),!1),C(e,!0)),h._select.updateSelection.call(this),x.call(this),i.done(),this.isMultiple()||R.call(this),!1},o=function(t){this.more()},l=function(t){if(!this._isRenderAsApp()&&(M.call(this),this.$el.off("mouseenter").off("mouseleave"),38==t.which||40==t.which)){if(this.isMultiple())return;var e=this.getSelectedIndex();38==t.which?0<e&&(e-=1):40==t.which&&e<this.length()-1&&(e+=1),this.setSelectedIndex(e)}},d=function(t){var e=$(t.currentTarget);if(13==t.which){R.call(this);var i=this._snapshoot(),n=h._select.updateSelection.call(this);n&&0<n.length?x.call(this):this.isMatchRequired()&&e.val(""),e.select(),i.done()}else if(!u.isControlKey(t)||8==t.which){var s=e.val();A.call(this,s&&0<s.length);var a=I.call(this,s,!0),r=C(this._getItems(),!1);this.$el.find("select").val(""),a&&0<=a[0]&&C(r.eq(a[0]),!0)}},p=function(t){this.t_focus&&(clearTimeout(this.t_focus),this.t_focus=0)},f=function(t){var n=this,s=$(t.currentTarget);this.t_focus=setTimeout(function(){if(n.t_focus=0,S.call(n)){var t=s.val(),e=I.call(n,t,!1);if(e&&0<=e[0])n.setSelectedIndex(e[0]);else if(n.isMatchRequired())e=I.call(n,t,!0),n.setSelectedIndex(e?e[0]:-1);else{var i=n._snapshoot();n.setSelectedIndex(-1),s.val(t),A.call(n,t&&0<t.length),i.done()}R.call(n)}},200)},m=function(t){c.mouseDebounce(t,R.bind(this))},g=function(t){$(t.target).is(".dropdown")&&R.call(this)},v=function(t){var e=this._snapshoot();this._getItems().removeClass("selected"),h._select.updateSelection.call(this),x.call(this),e.done()},b=function(t,e){var i=this,n=t("<div class='ipt'></div>").appendTo(e),s=t("<input type='text'/>").appendTo(n),a=this.getSelectedData(!0);if(a&&0<a.length){e.addClass("has-val");var r=u.map(a,function(t){return i._getDataLabel(t)});s.val(r.join(",")||"")}u.isTrue(this.options.editable)?e.addClass("editable"):s.attr("readonly","readonly"),n.append("<button class='dropdownbtn'></button>"),n.append("<span class='prompt'>"+u.trimToEmpty(this.options.prompt)+"</span>")},y=function(t,e,i,n){var s=this;this._render_items=[],this._isRenderAsApp()&&this.isNative()?w.call(this,t,i,n):_.call(this,t,i,n),setTimeout(function(){s._render_items=null})},_=function(n,i,t){var s=this;if(t&&0!=t.length){var a=this._render_items||[],r=function(t,e){var i=n("<div class='item'></div>").appendTo(t);a.push({item:i,data:e,index:a.length}),D.call(s,n,i,e)},o=i.children(".grp").last();u.each(t,function(t,e){u.isArray(t)?(0<t.length&&(o=n("<div class='grp'></div>").appendTo(i),t.title&&n("<div class='title'></div>").appendTo(o).text(t.title),u.each(t,function(t,e){r(o,t)})),o=null):(o&&0!=o.length||(o=n("<div class='grp'></div>").appendTo(i)),r(o,t))})}},w=function(n,t,e){var s=this,i=t.children("select");if(i&&0!=i.length||(i=n("<select size='1'></select>").appendTo(t),this.isMultiple()?i.attr("multiple","multiple"):i.append("<option disabled='disabled' selected='selected'>请选择..</option>")),e&&0<e.length){var a=this._render_items||[],r=function(t,e){var i=n("<option class='item'></option>").appendTo(t);a.push({item:i,data:e,
index:a.length}),i.text(s._getDataLabel(e))};u.each(e,function(t){u.isArray(t)?u.each(t,function(t){r(i,t)}):r(i,t)})}},D=function(t,e,i,n){h._itemsRender.renderOneItem.call(this,t,e,e,i,n)},T=function(){var n=this;u.debounce("combobox_silent-"+this.getViewId(),function(){var t=n.getSelectedIndex(),e=n._getItemContainer();if(e&&0<e.length&&n._renderItems($,e.empty(),n.getData()),0<=t){var i=n._getItems().eq(t);i&&0<i.length&&C.call(n,i,!0)}})},x=function(){var e=this,t=this.getSelectedData(!0),i=u.map(t,function(t){return e._getDataLabel(t)});this.$el.find(".ipt > input").val(i.join(",")||""),A.call(this,t&&0<t.length)},I=function(r,o,l){var d=this;if(u.isBlank(r))return null;var h=null;return k.call(this,this.getData(!0),function(t,e,i,n){var s=d._getDataLabel(t)||"";if(r==s)return!(h=[e,t]);if(o&&r.length<s.length){var a=s.indexOf(r);if(0==a||0<a&&!l)return!(h=[e,t])}}),h},C=function(t,e){return e?t.addClass("selected").attr("selected","selected"):t.removeClass("selected").removeAttr("selected"),t},A=function(t){t?this.$el.addClass("has-val"):this.$el.removeClass("has-val")},S=function(){return this.$el.is(".show-dropdown")},M=function(){var t=this;if(!S.call(this)){var e=this.$el.addClass("show-dropdown");if(this._isRenderAsApp())$("html,body").addClass("ui-scrollless");else{e.on("mouseenter",m.bind(this)),e.on("mouseleave",m.bind(this));var i=e.children(".dropdown"),n=c.getDropdownHeight.call(this,i);u.offset(i,this._getScrollContainer(),0,n).isOverflowY&&e.addClass("show-before")}setTimeout(function(){t.t_focus&&(clearTimeout(t.t_focus),t.t_focus=0)},100),setTimeout(function(){e.addClass("animate-in")})}},R=function(){$("html,body").removeClass("ui-scrollless");var t=this.$el.addClass("animate-out");t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},k=function(t,e){for(var i=0,n=0;n<t.length;n++){var s=t[n];if(u.isArray(s)&&0<s.length)for(var a=0;a<s.length;a++){if(!1===e(s[a],i,s,a))return;i+=1}else{if(!1===e(s,i,t,n))return;i+=1}}},F=function(t){var n=this;if((t=u.toArray(t))._vr_adapter_flag)return t;var s=0,a=[],r=null;return u.each(t,function(t,e){if(u.isArray(t)){if(0<t.length){var i=u.map(t,function(t){return c.doAdapter.call(n,t,s++)});t.title&&(i.title=t.title),a.push(i)}r=null}else r||(r=[],a.push(r)),t=c.doAdapter.call(n,t,s++),r.push(t)}),a._vr_adapter_flag=!0,a},N=function(){var e=[];return u.each(this.getData(!0),function(t){u.isArray(t)?u.each(t,function(t){e.push(t)}):e.push(t)}),e};t?(window.UICombobox=e,h.init(".ui-combobox",e,n)):module.exports=n}}("undefined"!=typeof window),function(i){if(!i||!VRender.Component.ui.datepicker){var r=i?VRender.Component.ui:require("../../static/js/init"),f=(r.fn,r.util),I=["一","二","三","四","五","六","七","八","九","十","十一","十二"],m=["周日","周一","周二","周三","周四","周五","周六"],t=r.datepicker=function(t,e){return r._base.call(this,t,e)},e=t.prototype=new r._base(!1);e.init=function(t,e){if(r._base.init.call(this,t,e),this.$el.on("tap","header .title button",a.bind(this)),this.$el.on("tap","section td",o.bind(this)),this.$el.on("tap","footer .okbtn",l.bind(this)),this.$el.on("tap","footer .cancelbtn",d.bind(this)),this._isRenderAsApp()){this.$el.on("tap",function(t){return!1}),this.$el.on("tap","header .today",h.bind(this)),this.$el.on("tap","header .clear",c.bind(this));var i=this.$el.children("section");i.on("touchstart",u.bind(this)),i.on("touchmove",u.bind(this)),i.on("touchend",u.bind(this))}},e.getDate=function(t){if(!this.isRangeDate()){var e=f.toDate(this.$el.attr("data-dt"));return e&&f.isNotBlank(t)?f.toDateString(e,t):e}var i=f.toDate(this.$el.attr("data-start"));if(i){var n=f.toDate(this.$el.attr("data-end"))||new Date(i.getTime());return n=f.toDate(f.toDateString(n,"yyyy-MM-dd 23:59:59")),f.isNotBlank(t)&&(i=f.toDateString(i,t),n=f.toDateString(n,t)),[i,n]}return null},e.setDate=function(t){var e=this._snapshoot();if(this.isRangeDate()){var i=f.toDate(t),n=null;if(i){n=f.toDate(arguments[1])||new Date(i.getTime());k(i),k(n);k(i)<=k(n)?(i=f.toDateString(i,"yyyy-MM-dd"),n=f.toDateString(n,"yyyy-MM-dd")):i=n=null}this.$el.attr("data-start",i||""),this.$el.attr("data-end",n||"")}else{var s=f.toDate(t);this.$el.attr("data-dt",s?f.toDateString(s,"yyyy-MM-dd"):"")}e.compare()||this.rerender(this.getDate()),e.done()},e.getMinDate=function(){return f.toDate(this.$el.attr("opt-min"))},e.setMinDate=function(t){var e=f.toDate(t);k(e)!=k(this.getMinDate())&&(this.$el.attr("opt-min",e?f.toDateString(e,"yyyy-MM-dd"):""),this.rerender())},e.getMaxDate=function(){return f.toDate(this.$el.attr("opt-max"))},e.setMaxDate=function(t){var e=f.toDate(t);k(e)!=k(this.getMaxDate())&&(this.$el.attr("opt-max",e?f.toDateString(e,"yyyy-MM-dd"):""),this.rerender())},e.isRangeDate=function(){return this.$el.is(".is-range")},e.submit=function(){l.call(this)},e.cancel=function(){d.call(this)},e.rerender=function(e){var i=this;f.debounce("datepicker_render-"+this.getViewId(),function(){var t=i.lastSelectedDate||i.getDate();e=e||S.call(i),b.call(i,$,i.$el,t,e)})},e._snapshoot_shoot=function(t,e){t.selectedDate=e||this.getDate(),t.pickerDate=S.call(this),t.data=t.selectedDate},e._snapshoot_compare=function(t,e){var i=e||this.getDate();return i&&t.selectedDate?this.isRangeDate()?k(i[0])==k(t.selectedDate[0])&&k(i[1])==k(t.selectedDate[1]):k(i)==k(t.selectedDate):!(i||t.selectedDate)};var n=function(t,e){r._baseRender.call(this,t,e)},s=n.prototype=new r._baseRender(!1);s.render=function(t,e){r._baseRender.render.call(this,t,e),e.addClass("ui-datepicker");var i=this.options||{},n=f.toDate(i.min);n&&e.attr("opt-min",f.toDateString(n,"yyyy-MM-dd"));var s=f.toDate(i.max);s&&e.attr("opt-max",f.toDateString(s,"yyyy-MM-dd"));var a=M.call(this);return this.isRangeDate()?(e.addClass("is-range"),a&&(e.attr("data-start",f.toDateString(a[0],"yyyy-MM-dd")),e.attr("data-end",f.toDateString(a[1],"yyyy-MM-dd")))):a&&e.attr("data-dt",f.toDateString(a,"yyyy-MM-dd")),p.call(this,t,e),g.call(this,t,e),v.call(this,t,e),b.call(this,t,e,a),this},s.getMinDate=function(){return f.toDate(this.options.min)},s.getMaxDate=function(){return f.toDate(this.options.max)},s.isRangeDate=function(){return f.isTrue(this.options.range)};var a=function(t){var e=$(t.currentTarget),i=null;if(this.isRangeDate()&&!this._isRenderAsApp()){var n=e.parent();n.is(".s")?i=this.$el.find(".table.s"):n.is(".e")&&(i=this.$el.find(".table.e"))}else i=this.$el.find(".table.t0");var s=parseInt(i.attr("data-y")),a=parseInt(i.attr("data-m")),r=new Date(s,a,1);e.is(".y")?r.setFullYear(s+(e.is(".prev")?-1:1)):r.setMonth(a+(e.is(".prev")?-1:1)),i.attr("data-y",r.getFullYear()).attr("data-m",r.getMonth()),this.rerender()},o=function(t){var e=$(t.currentTarget);if(!e.is(".disabled"))if(this.isRangeDate()){if(this.selectedSnapshoot||(this.selectedSnapshoot=this._snapshoot()),this.lastSelectedDate&&1==this.lastSelectedDate.length){var i=f.toDate(e.attr("data-dt"));i.getTime()>=this.lastSelectedDate[0].getTime()?this.lastSelectedDate.push(i):this.lastSelectedDate.unshift(i)}else this.lastSelectedDate=[],this.lastSelectedDate.push(f.toDate(e.attr("data-dt")));this.rerender()}else{var n=this._snapshoot();this.$el.find("td.selected").removeClass("selected"),e.addClass("selected"),this.$el.attr("data-dt",e.attr("data-dt"));var s=f.toDate(e.attr("data-dt"));this.$el.find(".title .item .val").text(f.toDateString(s,"yyyy.MM.dd")),n.done()}},l=function(){if(this.isRangeDate()){if(this.lastSelectedDate&&0<this.lastSelectedDate.length){var t=this.lastSelectedDate[0],e=this.lastSelectedDate[1]||t;this.$el.attr("data-start",f.toDateString(t,"yyyy-MM-dd")),this.$el.attr("data-end",f.toDateString(e,"yyyy-MM-dd")),this.lastSelectedDate=null}A.call(this,!0)}this.trigger("submit",this.getDate())},d=function(){if(this.isRangeDate())if(this.lastSelectedDate=null,this.selectedSnapshoot){var t=this.selectedSnapshoot.getState();A.call(this);var e=t.selectedDate,i=e&&e[0],n=e&&e[1];this.$el.attr("data-start",i?f.toDateString(i,"yyyy-MM-dd"):""),this.$el.attr("data-end",n?f.toDateString(n,"yyyy-MM-dd"):""),this.rerender(t.pickerDate)}else this.rerender();this.trigger("cancel",this.getDate())},h=function(){this.rerender([new Date])},c=function(){var t=this._snapshoot();this.isRangeDate()?(A.call(this),this.$el.attr("data-start","").attr("data-end","")):this.$el.attr("data-dt",""),this.rerender(),t.done(),this.trigger("clear")},u=function(t){var e=t.touches&&t.touches[0];if("touchstart"==t.type)this.touchData={startX:e.pageX,startY:e.pageY},this.touchData.tableContainer=this.$el.find(".table.t0"),this.touchData.mainTable=this.touchData.tableContainer.children("table.body");else if("touchmove"==t.type){if(1<t.touches.length)return;var i=e.pageX-this.touchData.startX;if(!this.touchData.moving&&(Math.abs(i)<10||15<Math.abs(e.pageY-this.touchData.startY)))return;this.touchData.moving=!0,this.touchData.lastOffset=i,this.touchData.mainTable.css("transform","translate("+i+"px,0px)");var n=0<i?this.touchData.prevTable:this.touchData.nextTable;if(!n){var s=parseInt(this.touchData.tableContainer.attr("data-y")),a=parseInt(this.touchData.tableContainer.attr("data-m"));n=x($,this.$el.children("section")).addClass("t1"),0<i?(a-=1,this.touchData.prevTable=n):(a+=1,this.touchData.nextTable=n);var r=new Date(s,a,1),o=this.lastSelectedDate||this.getDate();D.call(this,$,this.$el,n,r,o)}this.touchData.contentWidth||(this.touchData.contentWidth=this.$el.children("section").width()),i+=this.touchData.contentWidth*(0<i?-1:1),n.css("transform","translate("+i+"px,0px)")}else if("touchend"==t.type&&this.touchData.moving){var l=0;20<Math.abs(this.touchData.lastOffset)&&(l+=this.touchData.contentWidth*(0<this.touchData.lastOffset?1:-1));var d="transform 200ms";this.touchData.mainTable.css("transition",d),this.touchData.mainTable.css("transform","translate("+l+"px,0px)"),0<this.touchData.lastOffset?(this.touchData.prevTable.css("transition",d),this.touchData.prevTable.css("transform","translate(0px,0px)")):(this.touchData.nextTable.css("transition",d),this.touchData.nextTable.css("transform","translate(0px,0px)"));var h=this.touchData;if(20<Math.abs(h.lastOffset)){var c=0<h.lastOffset?".prev.m":".next.m"
;this.$el.children("header").find(c).eq(0).tap()}setTimeout(function(){h.prevTable&&h.prevTable.remove(),h.nextTable&&h.nextTable.remove(),h.mainTable.css("transition",""),h.mainTable.css("transform","")},200)}},p=function(e,t){function i(){var t=e("<dl class='item'></dl>").appendTo(s);return t.append("<dt class='lbl'>-</dt><dd class='val'>-</dd>"),t.append("<button class='prev y'>&nbsp;</button>"),t.append("<button class='prev m'>&nbsp;</button>"),t.append("<button class='next m'>&nbsp;</button>"),t.append("<button class='next y'>&nbsp;</button>"),t}var n=e("<header></header>").appendTo(t),s=e("<div class='title'></div>").appendTo(n);this.isRangeDate()?(i().addClass("s").children(".lbl").html("开始日期<span class='y'></span>"),i().addClass("e").children(".lbl").html("结束日期<span class='y'></span>")):i(),this._isRenderAsApp()&&(n.append("<button class='today'><label>今天</label></button>"),n.append("<button class='clear'><label>清除</label></button>"))},g=function(t,e){var i=t("<section></section>").appendTo(e);this.isRangeDate()&&!this._isRenderAsApp()?(x(t,i).addClass("s"),x(t,i).addClass("e")):x(t,i).addClass("t0")},v=function(t,e){if(this.isRangeDate()){var i=t("<footer></footer>").appendTo(e);if(this._isRenderAsApp())C.call(this,i,{label:"使用日期",type:"primary",cls:"okbtn"});else{i.append("<div class='vals'><span class='s'>-</span> - <span class='e'>-</span></div>");var n=t("<div class='btns'></div>").appendTo(i);C.call(this,n,{label:"确定",type:"primary",cls:"okbtn"}),C.call(this,n,{label:"取消",type:"cancel",cls:"cancelbtn"})}}},b=function(t,e,i,n){i=f.toArray(i),(n=f.toArray(n))[0]instanceof Date||(n=[],this.isRangeDate()&&!this._isRenderAsApp()?(n.push(i[0]||new Date),n.push(i[1])):n.push(i[0]||new Date)),y.call(this,t,e,n,i),_.call(this,t,e,n,i),w.call(this,t,e,n,i),this.isRangeDate()&&!this._isRenderAsApp()||(R(n[0],new Date)?e.attr("cur-month","1"):e.removeAttr("cur-month"))},y=function(t,e,i,n){var s=e.children("header");if(this.isRangeDate()){var a,r,o="--",l="--",d=" ",h=" ";if(this._isRenderAsApp()){if(n&&0<n.length){a=n[0],r=n[1];var c=(new Date).getFullYear();a&&(a.getFullYear()!=c&&(d=a.getFullYear()),o=f.toDateString(a,"M月d日")+" "+m[a.getDay()]),r&&(r.getFullYear()!=c&&(h=r.getFullYear()),h=r.getFullYear()==c?" ":r.getFullYear(),l=f.toDateString(r,"M月d日")+" "+m[r.getDay()])}s.find(".item.s .y").text(d),s.find(".item.e .y").text(h)}else a=i&&i[0]||new Date,r=i&&i[1]||a,R(a,r)&&(r=new Date(r.getTime())).setMonth(r.getMonth()+1),o=a.getFullYear()+"年 "+I[a.getMonth()]+"月",l=r.getFullYear()+"年 "+I[r.getMonth()]+"月",T(t,e,a,r);s.find(".item.s .val").text(o),s.find(".item.e .val").text(l)}else{var u=i&&i[0]||new Date,p=u.getFullYear()+"年 "+I[u.getMonth()]+"月";s.find(".item .lbl").text(p),u=n&&n[0],s.find(".item .val").text(u?f.toDateString(u,"yyyy.MM.dd"):"-")}},_=function(t,e,i,n){if(this.isRangeDate()&&!this._isRenderAsApp()){var s=i&&i[0]||new Date,a=i&&i[1]||s;R(s,a)&&(a=new Date(a.getTime())).setMonth(a.getMonth()+1),D.call(this,t,e,e.find(".table.s"),s,n),D.call(this,t,e,e.find(".table.e"),a,n)}else{var r=i&&i[0]||new Date;D.call(this,t,e,e.find(".table.t0"),r,n)}},w=function(t,e,i,n){if(this.isRangeDate()&&!this._isRenderAsApp()){var s=" ",a=" ";n&&0<n.length&&(n[0]&&(s=f.toDateString(n[0],"yyyy.MM.dd")),n[1]&&(a=f.toDateString(n[1],"yyyy.MM.dd")));var r=e.find("footer .vals");r.children(".s").text(s),r.children(".e").text(a)}},D=function(t,e,i,n,s){var a=n.getFullYear(),r=n.getMonth();i.attr("data-y",a).attr("data-m",r);var o=new Date,l=k(o),d=s&&s[0],h=s&&s[1],c=k(d),u=k(h)||c,p=k(this.getMinDate()),f=k(this.getMaxDate())||21001231,m=new Date(a,r,1),g=m.getDay();m.setDate(g?2-g:-5);var v=(o.getFullYear()==a?"":a+"年 ")+I[r]+"月";i.find(".month").text(v);for(var b=i.find("table.body tbody").empty();;){for(var y=t("<tr></tr>").appendTo(b),_=0;_<7;_++){var w=m.getFullYear(),$=m.getMonth(),D=m.getDate(),T=1e4*w+100*$+D,x=t("<td></td>").appendTo(y);x.append("<span>"+D+"</span>"),x.attr("data-dt",w+"-"+($+1)+"-"+D),T==l&&x.addClass("today"),$!=r&&x.addClass("over"),($!=r||T<p||f<T)&&x.addClass("disabled"),c<=T&&T<=u&&(x.addClass("selected"),T==c&&x.addClass("start"),T==u&&x.addClass("end")),m.setDate(D+1)}if(m.getMonth()>r||m.getFullYear()>a)break}},T=function(t,e,i,n){var s=(e=e.children("header")).find(".item.s .next.y, .item.e .prev.y"),a=e.find(".item.s .next.m, .item.e .prev.m"),r=i.getFullYear(),o=i.getMonth(),l=n.getFullYear(),d=n.getMonth();100*(l-1)+d<=100*r+o?s.addClass("disabled"):s.removeClass("disabled"),l<r||r==l&&d-1<=o?a.addClass("disabled"):a.removeClass("disabled")},x=function(t,e){e=t("<div class='table'></div>").appendTo(e);var i=t("<table class='head'></table>").appendTo(e);return i.append("<thead><tr><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th><th>日</th></tr></thead>"),(i=t("<table class='body'></table>").appendTo(e)).append("<thead><tr><th colspan='7'><div class='month'>-</div></th></tr></thead>"),i.append("<tbody></tbody>"),e},C=function(t,e){i?r.button.create(f.extend({},e,{target:t})):new(require("../button/index"))(this.context,e).render(t)},A=function(t){this.lastSelectedDate=null,this.selectedSnapshoot&&(t?this.selectedSnapshoot.done():this.selectedSnapshoot.release(),this.selectedSnapshoot=null)},S=function(){var t=[];if(this.isRangeDate()&&!this._isRenderAsApp()){var e=this.$el.find(".table.s");t.push(new Date(parseInt(e.attr("data-y")),parseInt(e.attr("data-m")),1));var i=this.$el.find(".table.e");t.push(new Date(parseInt(i.attr("data-y")),parseInt(i.attr("data-m")),1))}else{var n=this.$el.find(".table.t0");t.push(new Date(parseInt(n.attr("data-y")),parseInt(n.attr("data-m")),1))}return t},M=function(t,e){var i=k(t),n=k(e);if(i&&n&&n<i)return null;if(this.isRangeDate()){var s=f.toDate(this.options.start);if(s){s=new Date(s.getTime());var a=f.toDate(this.options.end)||new Date(s.getTime());a=new Date(a?a.getTime():s.getTime());var r=k(s),o=k(a);if(r<=o&&(i&&r<i&&(s=t),n&&n<o&&(a=e),k(s)<=k(a)))return[s,a]}}else{var l=f.toDate(this.options.date);if(l){l=new Date(l.getTime());var d=k(l);return i&&d<i||n&&n<d?null:l}}return null},R=function(t,e){return!(!t||!e)&&(t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear())},k=function(t){return t?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};i?(window.UIDatePicker=t,r.init(".ui-datepicker",t,n)):module.exports=n}}("undefined"!=typeof window),function(o){if(!o||!VRender.Component.ui.dateinput){var a=o?VRender.Component.ui:require("../../static/js/init"),e=a.fn,l=a.util,t=a.dateinput=function(t,e){return a._base.call(this,t,e)},i=t.prototype=new a._base(!1);i.init=function(t,e){a._base.init.call(this,t,e);var i=this.inputTag=this.$el.children(".ipt");i.on("tap",".clear",d.bind(this)),this.$el.on("change",".ui-datepicker",c.bind(this)),this._isRenderAsApp()&&this.isNative()?p.call(this):i.on("tap",r.bind(this))},i.val=function(t,e){return l.isNull(t)?this.getDate(e&&e.format):(this.setDate(t),this)},i.getDate=function(t){var e=l.toDate(this.$el.attr("data-dt"));return e&&l.isNotBlank(t)?l.toDateString(e,t):e},i.setDate=function(t){var e=t?l.toDate(t):null;v.call(this,e)&&f.call(this,e,this.getMinDate(),this.getMaxDate())},i.getMinDate=function(){return l.toDate(this.$el.attr("opt-min"))},i.setMinDate=function(t){var e=l.toDate(t);y(e)!=y(this.getMinDate())&&(this.$el.attr("opt-min",e?l.toDateString(e,"yyyy-MM-dd"):""),f.call(this,this.getDate(),e,this.getMaxDate()))},i.getMaxDate=function(){return l.toDate(this.$el.attr("opt-max"))},i.setMaxDate=function(t){var e=l.toDate(t);y(e)!=y(this.getMaxDate())&&(this.$el.attr("opt-max",e?l.toDateString(e,"yyyy-MM-dd"):""),f.call(this,this.getDate(),this.getMinDate(),e))},i.getDateFormat=function(){var t=this.options;if(t.hasOwnProperty("dateFormat"))return t.dateFormat;if(t.hasOwnProperty("format"))return t.format;var e=this.$el.children(".format");return e&&0<e.length&&(t.dateFormat=e.text()||null,t.dateFormat&&e.is(".format-fn")&&(t.dateFormat=unescape(t.dateFormat),t.dateFormat="var Utils=VRender.Utils;return ("+t.dateFormat+");",t.dateFormat=new Function(t.dateFormat)()),e.remove()),t.dateFormat},i.setDateFormat=function(t){this.options.dateFormat=t,this.$el.children(".format").remove(),v.call(this,this.getDate())},i.getPrompt=function(){return this.inputTag.children(".prompt").text()},i.setPrompt=function(t){this.inputTag.children(".prompt").remove(),l.isNotNull(t)&&(t=l.trimToEmpty(t),$("<span class='prompt'></span>").appendTo(this.inputTag).text(t))},i.isNative=function(){return 1==this.$el.attr("opt-native")},i._snapshoot_shoot=function(t,e){t.data=e||this.getDate()},i._snapshoot_compare=function(t,e){return(e=e||this.getDate())&&t.data?e.getDate()==t.data.getDate()&&e.getMonth()==t.data.getMonth()&&e.getFullYear()==t.data.getFullYear():e==t.data};var n=function(t,e){a._baseRender.call(this,t,e)},s=n.prototype=new a._baseRender(!1);s.render=function(t,e){a._baseRender.render.call(this,t,e),e.addClass("ui-dateipt");var i=this.options||{};l.isTrue(i.native)&&e.attr("opt-native","1"),e.attr("opt-box",i.container);var n=l.toDate(i.min);e.attr("opt-min",n?l.toDateString(n,"yyyy-MM-dd"):null);var s=l.toDate(i.max);return e.attr("opt-max",s?l.toDateString(s,"yyyy-MM-dd"):null),u.call(this,t,e,l.toDate(i.date)),this},s.getDateFormat=function(){return this.options.dateFormat||this.options.format};var r=function(t){m.call(this)},d=function(t){return v.call(this,null)&&f.call(this,null,this.getMinDate(),this.getMaxDate()),this.trigger("clear"),!1},h=function(t){e.mouseDebounce(t,g.bind(this))},c=function(t){return!1},u=function(t,e,i){var n=t("<div class='ipt'></div>").appendTo(e),s=t("<input type='text' readonly='readonly'/>").appendTo(n);n.append("<span class='clear'></span>");var a=this.options.prompt;l.isNotBlank(a)&&t("<span class='prompt'></span>").appendTo(n).text(a);var r=this.getDateFormat();i&&(e.addClass("has-val").attr("data-dt",l.toDateString(i,"yyyy-MM-dd")),s.val(b(i,r)||"")),!o&&r&&(l.isFunction(r)?e.write("<div class='ui-hidden format format-fn'>"+escape(r)+"</div>"):e.write("<div class='ui-hidden format'>"+r+"</div>"))},p=function(){var t=$("<input class='origin-dateipt' type='date'/>").appendTo(this.inputTag);f.call(this,this.getDate(),this.getMinDate(),this.getMaxDate()),t.on("change",
function(t){v.call(this,l.toDate($(t.currentTarget).val()))}.bind(this))},f=function(e,i,n){var s=this;l.debounce("dateinput_picker-"+this.getViewId(),function(){if(s._isRenderAsApp()&&s.isNative()){var t=s.inputTag.children(".origin-dateipt");t.val(e?l.toDateString(e,"yyyy-MM-dd"):""),t.attr("min",i?l.toDateString(i,"yyyy-MM-dd"):""),t.attr("max",n?l.toDateString(n,"yyyy-MM-dd"):"")}else s.picker&&(s.picker.setMinDate(i),s.picker.setMaxDate(n),s.picker.setDate(e))})},m=function(){if(!this.picker){var t={};t.target=$("<div class='picker'></div>").appendTo(this.$el),t.date=this.getDate(),t.min=this.getMinDate(),t.max=this.getMaxDate(),this.picker=a.datepicker.create(t),this.picker.on("change",function(t,e){g.call(this),v.call(this,e)}.bind(this)),this.picker.on("clear",function(t){g.call(this),v.call(this,null)}.bind(this))}if(!this.$el.is(".show-picker")){var e=this.$el.addClass("show-picker");if(this._isRenderAsApp())$("html, body").addClass("ui-scrollless"),e.children(".picker").on("tap",g.bind(this));else{e.on("mouseenter",h.bind(this)),e.on("mouseleave",h.bind(this));var i=e.children(".picker");l.offset(i,this._getScrollContainer(),0,i[0].scrollHeight).isOverflowY&&e.addClass("show-before")}setTimeout(function(){e.addClass("animate-in")})}},g=function(){var t=this.$el.addClass("animate-out");this._isRenderAsApp()?($("html,body").removeClass("ui-scrollless"),t.children(".picker").off("tap")):t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},v=function(t){var e=this._snapshoot(),i=this.inputTag.find("input");return t?(this.$el.addClass("has-val").attr("data-dt",l.toDateString(t,"yyyy-MM-dd")),i.val(b(t,this.getDateFormat()))):(this.$el.removeClass("has-val").attr("data-dt",""),i.val("")),e.done()},b=function(t,e){return t?l.isFunction(e)?e(t):(l.isBlank(e)&&(e="yyyy-MM-dd"),l.toDateString(t,e)):""},y=function(t){return t instanceof Date?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};o?(window.UIDateInput=t,a.init(".ui-dateipt",t,n)):module.exports=n}}("undefined"!=typeof window),function(l){if(!l||!VRender.Component.ui.daterange){var d=l?VRender.Component.ui:require("../../static/js/init"),h=(d.fn,d.util),t=d.daterange=function(t,e){return d._base.call(this,t,e)},e=t.prototype=new d._base(!1);e.init=function(t,e){d._base.init.call(this,t,e);var i=this.inputTag=this.$el.children(".ipt");if(i.on("tap",".clear",u.bind(this)),this.$el.on("change",".ui-datepicker",c.bind(this)),this._isRenderAsApp()&&this.isNative())g.call(this);else if(i.on("tap",s.bind(this)),i.on("tap",".picker",function(t){return!1}),!this._isRenderAsApp()){var n=this.$el.children(".tools");n.on("tap",".item",a.bind(this)),n.on("tap",".label",r.bind(this)),n.on("mouseenter",o.bind(this)),n.on("mouseleave",o.bind(this))}},e.val=function(t,e){return h.isNull(t)?this.getDateRange(e&&e.format):(t=h.toArray(t),this.setDateRange(t[0],t[1]),this)},e.getDateRange=function(t){var e=this.getStartDate(),i=this.getEndDate();return e&&i?(h.isNotBlank(t)&&(e=h.toDateString(e,t),i=h.toDateString(i,t)),[e,i]):null},e.setDateRange=function(t,e){e=((t=h.toDate(t))?h.toDate(e):null)||t,w.call(this,t,e)&&(v.call(this,t,e),b.call(this,t,e,this.getMinDate(),this.getMaxDate()))},e.getStartDate=function(){return h.toDate(this.$el.attr("data-start"))},e.setStartDate=function(t){this.setDateRange(t,this.getEndDate())},e.getEndDate=function(){return h.toDate(this.$el.attr("data-end"))},e.setEndDate=function(t){this.setDateRange(this.getStartDate(),t)},e.getMinDate=function(){return h.toDate(this.$el.attr("opt-min"))},e.setMinDate=function(t){var e=h.toDate(t);C(e)!=C(this.getMinDate())&&(this.$el.attr("opt-min",e?h.toDateString(e,"yyyy-MM-dd"):""),b.call(this,this.getStartDate(),this.getEndDate(),e,this.getMaxDate()))},e.getMaxDate=function(){return h.toDate(this.$el.attr("opt-max"))},e.setMaxDate=function(t){var e=h.toDate(t);C(e)!=C(this.getMaxDate())&&(this.$el.attr("opt-max",e?h.toDateString(e,"yyyy-MM-dd"):""),b.call(this,this.getStartDate(),this.getEndDate(),this.getMinDate(),e))},e.getDateFormat=function(){var t=this.options;if(t.hasOwnProperty("dateFormat"))return t.dateFormat;if(t.hasOwnProperty("format"))return t.format;var e=this.$el.children(".format");return e&&0<e.length&&(t.dateFormat=e.text()||null,t.dateFormat&&e.is(".format-fn")&&(t.dateFormat=unescape(t.dateFormat),t.dateFormat="var Utils=VRender.Utils;return ("+t.dateFormat+");",t.dateFormat=new Function(t.dateFormat)()),e.remove()),t.dateFormat},e.setDateFormat=function(t){this.options.dateFormat=t,this.$el.children(".format").remove(),w.call(this,this.getStartDate(),this.getEndDate())},e.setShortcuts=function(t){f.call(this,this.$el,t)},e.isNative=function(){return 1==this.$el.attr("opt-native")},e._snapshoot_shoot=function(t){t.data=this.getDateRange(),t.min=this.getMinDate(),t.max=this.getMaxDate()},e._snapshoot_compare=function(t){var e=this.getDateRange();return t.data&&e?C(t.data[0])==C(e[0])&&C(t.data[1])==C(e[1]):!(t.data||e)};var i=function(t,e){d._baseRender.call(this,t,e)},n=i.prototype=new d._baseRender(!1);n.render=function(t,e){d._baseRender.render.call(this,t,e),e.addClass("ui-daterange");var i=this.options||{};h.isTrue(i.dropdown)&&e.addClass("tools-dropdown"),h.isTrue(i.native)&&e.attr("opt-native","1");var n=h.toDate(i.min);n&&e.attr("opt-min",h.toDateString(n,"yyyy-MM-dd"));var s=h.toDate(i.max);s&&e.attr("opt-max",h.toDateString(s,"yyyy-MM-dd"));var a=h.toDate(i.start),r=null;a&&(r=h.toDate(i.end)||new Date(a.getTime()),n&&C(n)>C(a)&&(a=n),s&&C(s)<C(r)&&(r=s),C(a)>C(r)&&(a=r=null));var o=parseInt(i.quickDef)||0;return a&&r?o=0:o&&(r=new Date,(a=new Date).setDate(a.getDate()-o)),a&&r&&(e.addClass("has-val"),e.attr("data-start",h.toDateString(a,"yyyy-MM-dd")),e.attr("data-end",h.toDateString(r,"yyyy-MM-dd"))),f.call(this,t,e,this.getShortcutDates(),o),m.call(this,t,e,a,r),this},n.getDateFormat=function(){return this.options.dateFormat||this.options.format},n.getShortcutDates=function(){return this.options.shortcuts||this.options.quickDates};var s=function(t){y.call(this)},a=function(t){var e=$(t.currentTarget);e.addClass("selected").siblings().removeClass("selected"),e.parent().parent().children(".label").text(e.text()),this.$el.removeClass("show-dropdown"),D.call(this,e.attr("data-val"))},r=function(t){this.$el.addClass("show-dropdown")},o=function(t){var e=this;this.t_shortcut&&clearTimeout(this.t_shortcut),"mouseleave"==t.type&&this.$el.is(".show-dropdown")&&(this.t_shortcut=setTimeout(function(){e.t_shortcut=0,e.$el.removeClass("show-dropdown")},1e3))},c=function(t){return!1},u=function(t){return w.call(this,null,null)&&(v.call(this,null,null),b.call(this,null,null,this.getMinDate(),this.getMaxDate())),!1},p=function(t){var e=$(t.currentTarget),i=h.toDate(e.val()),n=e.is(".start")?i:this.getStartDate(),s=e.is(".end")?i:this.getEndDate();w.call(this,n,s),v.call(this,n,s)},f=function(n,t,e,s){if(t.removeClass("has-tools").children(".tools").remove(),(e=x(e))&&0<e.length){t.addClass("has-tools");var i=n("<div class='tools'></div>").prependTo(t);i.append("<span class='label'>选择日期</span>");var a=n("<div class='items'></div>").appendTo(i);h.each(e,function(t){var e=parseInt(t.value)||0,i=n("<div class='item'></div>").appendTo(a);i.attr("data-val",e),i.text(h.isBlank(t.label)?"最近"+e+"天":t.label),e==s&&i.addClass("selected")})}},m=function(t,e,i,n){var s=t("<div class='ipt'></div>").appendTo(e),a=t("<input type='text' readonly='readonly'/>").appendTo(s);s.append("<span class='clear'></span>");var r=this.options.prompt;h.isNotBlank(r)&&t("<span class='prompt'></span>").appendTo(s).text(r);var o=this.getDateFormat();a.val(I(i,n,o)||""),!l&&o&&(h.isFunction(o)?e.write("<div class='format format-fn'>"+escape(o)+"</div>"):e.write("<div class='format'>"+o+"</div>"))},g=function(){var t=$("<input class='origin-dateipt start' type='date'/>").appendTo(this.inputTag),e=$("<input class='origin-dateipt end' type='date'/>").appendTo(this.inputTag);b.call(this,this.getStartDate(),this.getEndDate(),this.getMinDate(),this.getMaxDate()),t.on("change",p.bind(this)),e.on("change",p.bind(this))},v=function(t,e){var i=this.$el.children(".tools");if(i&&0<i.length){var n=i.children(".label").text("选择日期"),s=i.find(".item").removeClass("selected");if(t&&e&&0==h.getDays(e,new Date))for(var a=h.getDays(e,t)+1,r=0,o=s.length;r<o;r++){var l=s.eq(r);if(l.attr("data-val")==a){l.addClass("selected"),n.text(l.text());break}}}},b=function(i,n,s,a){var r=this;h.debounce("daterange_renderpicker-"+this.getViewId(),function(){if(r._isRenderAsApp()&&r.isNative()){var t=r.inputTag.children(".origin-dateipt.start"),e=r.inputTag.children(".origin-dateipt.end");t.val(i?h.toDateString(i,"yyyy-MM-dd"):""),e.val(n?h.toDateString(n,"yyyy-MM-dd"):""),s=s?h.toDateString(s,"yyyy-MM-dd"):"",a=a?h.toDateString(a,"yyyy-MM-dd"):"",t.attr("min",s).attr("max",a),e.attr("min",s).attr("max",a)}else r.picker&&(r.picker.setMinDate(s),r.picker.setMaxDate(a),r.picker.setDate(i,n))})},y=function(){if(!this.picker){var t={range:!0};t.target=$("<div class='picker'></div>").appendTo(this.inputTag),t.min=this.getMinDate(),t.max=this.getMaxDate(),t.start=this.getStartDate(),t.end=this.getEndDate(),this.picker=d.datepicker.create(t),this.picker.on("submit",function(t,e){_.call(this);var i=e&&e[0]||null,n=e&&e[1]||null;w.call(this,i,n)&&v.call(this,i,n)}.bind(this)),this.picker.on("cancel",function(t){_.call(this)}.bind(this))}if(!this.$el.is(".show-picker")){var e=this.$el.addClass("show-picker");if(this._isRenderAsApp())$("html, body").addClass("ui-scrollless"),this.inputTag.children(".picker").on("tap",function(t){_.call(this),this.picker&&this.picker.cancel()}.bind(this));else{var i=this.inputTag.children(".picker"),n=h.offset(i,this._getScrollContainer(),0,i[0].scrollHeight);n.isOverflowX&&e.addClass("show-right"),n.isOverflowY&&e.addClass("show-before")}setTimeout(function(){e.addClass("animate-in")})}},_=function(){var t=this.$el.addClass("animate-out");this._isRenderAsApp()&&($("html, body").removeClass("ui-scrollless"),this.$el.children(".picker").off("tap")),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before").removeClass(
"show-right"),t.removeClass("animate-in").removeClass("animate-out")},300)},w=function(t,e){var i=this._snapshoot(),n=this.inputTag.find("input");return t&&e?(this.$el.addClass("has-val"),this.$el.attr("data-start",h.toDateString(t,"yyyy-MM-dd")),this.$el.attr("data-end",h.toDateString(e,"yyyy-MM-dd")),n.val(I(t,e,this.getDateFormat())||"")):(this.$el.removeClass("has-val"),this.$el.attr("data-start","").attr("data-end",""),n.val("")),i.done()},D=function(t){if(0<(t=parseInt(t)||0)){var e=new Date,i=new Date;e.setDate(e.getDate()-t+1),w.call(this,e,i)&&b.call(this,e,i,this.getMinDate(),this.getMaxDate())}},T=function(t,e){return h.isFunction(e)?e(t):(h.isBlank(e)&&(e="yyyy-MM-dd"),h.toDateString(t,e))},x=function(t){var e=[];return h.each(h.toArray(t),function(t){h.isNotBlank(t)&&("object"!==_typeof(t)&&(t={value:t}),t.value=parseInt(t&&t.value)||0,0<t.value&&e.push(t))}),e},I=function(t,e,i){return t&&e?T(t,i)+" 至 "+T(e,i):""},C=function(t){return t instanceof Date?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};l?(window.UIDateRange=t,d.init(".ui-daterange",t,i)):module.exports=i}}("undefined"!=typeof window),function(l){if(!l||!VRender.Component.ui.datetime){var f=l?VRender.Component.ui:require("../../static/js/init"),e=f.fn,d=f.util,t=f.datetime=function(t,e){return f._base.call(this,t,e)},i=t.prototype=new f._base(!1);i.init=function(t,e){f._base.init.call(this,t,e);var i=this.inputTag=this.$el.children(".ipt");i.on("tap",a.bind(this)),i.on("tap",".clear",r.bind(this)),this.$el.on("change",".picker",function(t){return!1})},i.val=function(t,e){return d.isNull(t)?this.getDate(e&&e.format):(this.setDate(t),this)},i.getDate=function(t){var e=d.toDate(parseInt(this.$el.attr("data-dt")));return e&&d.isNotBlank(t)?d.toDateString(e,t):e},i.setDate=function(t){var e=t?d.toDate(t):null;T.call(this,e),this.picker&&y.call(this,this.picker,e)},i.getMinDate=function(){return d.toDate(parseInt(this.$el.attr("opt-min")))},i.setMinDate=function(t){var e=d.toDate(t);(e=e&&e.getTime()||"")!=this.$el.attr("opt-min")&&(this.$el.attr("opt-min",e),u.call(this))},i.getMaxDate=function(){return d.toDate(parseInt(this.$el.attr("opt-max")))},i.setMaxDate=function(t){var e=d.toDate(t);(e=e&&e.getTime()||"")!=this.$el.attr("opt-max")&&(this.$el.attr("opt-max",e),u.call(this))},i.getDateFormat=function(){var t=this.options;if(t.hasOwnProperty("dateFormat"))return t.dateFormat;if(t.hasOwnProperty("format"))return t.format;var e=this.$el.children(".format");return e&&0<e.length&&(t.dateFormat=e.text()||null,t.dateFormat&&e.is(".format-fn")&&(t.dateFormat=unescape(t.dateFormat),t.dateFormat="var Utils=VRender.Utils;return ("+t.dateFormat+");",t.dateFormat=new Function(t.dateFormat)()),e.remove()),t.dateFormat},i.setDateFormat=function(t){this.options.dateFormat=t,this.$el.children(".format").remove(),T.call(this,this.getDate())},i.getPrompt=function(){return this.inputTag.children(".prompt").text()},i.setPrompt=function(t){this.inputTag.children(".prompt").remove(),d.isNotNull(t)&&(t=d.trimToEmpty(t),$("<span class='prompt'></span>").appendTo(this.inputTag).text(t))},i.isSecondVisible=function(){return this.options.hasOwnProperty("showSecond")||(this.options.showSecond=!!this.$el.attr("opt-sec")),d.isTrue(this.options.showSecond)},i.setSecondVisible=function(t){(t=!!d.isNull(t)||d.isTrue(t))!=this.isSecondVisible()&&(this.options.showSecond=t,c.call(this))},i.getHours=function(){this.options.hasOwnProperty("hours")||(this.options.hours=this.$el.attr("opt-hours"));var t=e.getIntValues(this.options.hours,0,23);return t&&0<t.length?t:d.map(new Array(24),function(t,e){return e})},i.setHours=function(t){this.options.hours=t,u.call(this)},i.getMinutes=function(){this.options.hasOwnProperty("minutes")||(this.options.minutes=this.$el.attr("opt-minutes"));var t=e.getIntValues(this.options.minutes,0,59);return t&&0<t.length?t:d.map(new Array(60),function(t,e){return e})},i.setMinutes=function(t){this.options.minutes=t,u.call(this)},i.getSeconds=function(){this.options.hasOwnProperty("seconds")||(this.options.seconds=this.$el.attr("opt-seconds"));var t=e.getIntValues(this.options.seconds,0,59);return t&&0<t.length?t:d.map(new Array(60),function(t,e){return e})},i.setSeconds=function(t){this.options.seconds=t,u.call(this)},i._snapshoot_shoot=function(t,e){t.data=e||this.getDate()},i._snapshoot_compare=function(t,e){return(e=e||this.getDate())&&t.data?e.getTime()==t.data.getTime():e==t.data},i.rerender=function(){c.call(this)};var n=function(t,e){f._baseRender.call(this,t,e)},s=n.prototype=new f._baseRender(!1);s.render=function(t,e){f._baseRender.render.call(this,t,e),e.addClass("ui-datetime");var i=this.options||{};e.attr("opt-box",i.container),this.isSecondVisible()&&e.attr("opt-sec","1");var n=d.toDate(i.min);e.attr("opt-min",n?n.getTime():null);var s=d.toDate(i.max);return e.attr("opt-max",s?s.getTime():null),d.isArray(i.hours)&&e.attr("opt-hours",i.hours.join(",")||null),d.isArray(i.minutes)&&e.attr("opt-minutes",i.minutes.join(",")||null),d.isArray(i.seconds)&&e.attr("opt-seconds",i.seconds.join(",")||null),p.call(this,t,e,i.date),this},s.isSecondVisible=function(){return d.isTrue(this.options.showSecond)},s.getDateFormat=function(){return this.options.dateFormat||this.options.format};var a=function(t){g.call(this)},r=function(t){return T.call(this,null),this.picker&&(y.call(this,this.picker,null),D.call(this)),!1},o=function(t){e.mouseDebounce(t,v.bind(this))},h=function(t){var n=this;if("touchstart"==t.type)this.t_touchend&&clearTimeout(this.t_touchend),this.t_touchend=null;else if("touchend"==t.type&&this.beScrolled){this.beScrolled=!1;var e=b.call(this,this.picker),s=e&&e.getTime()||0;!function i(){n.t_touchend=setTimeout(function(){n.t_touchend=null;var t=b.call(n,n.picker),e=t&&t.getTime()||0;s==e?_.call(n,n.picker,t):(s=e,i())},200)}()}},c=function(){var t=this;d.debounce("datetime_render-"+this.getViewId(),function(){T.call(t,t.getDate()),t.picker&&m.call(t,t.picker.empty())})},u=function(){var t=this;this.picker&&d.debounce("datetime_render-"+this.getViewId(),function(){m.call(t,t.picker.empty())})},p=function(t,e,i){var n=t("<div class='ipt'></div>").appendTo(e),s=t("<input type='text' readonly='readonly'/>").appendTo(n);n.append("<span class='clear'></span>");var a=this.options.prompt;d.isNotBlank(a)&&t("<span class='prompt'></span>").appendTo(n).text(a);var r=this.getDateFormat();if(i=d.toDate(i)){var o=this.isSecondVisible();i.setMilliseconds(0),o||i.setSeconds(0),e.addClass("has-val").attr("data-dt",i.getTime()),s.val(I(i,this.getDateFormat(),o))}!l&&r&&(d.isFunction(r)?e.write("<div class='ui-hidden format format-fn'>"+escape(r)+"</div>"):e.write("<div class='ui-hidden format'>"+r+"</div>"))},m=function(t){if(this._isRenderAsApp()){var n=$("<div class='cols'></div>").appendTo(t),e=function(t,e){var i=$("<div class='col'></div>").appendTo(n);i.addClass(t),d.each(e,function(t){$("<div class='item'></div>").appendTo(i).text(t)})};e("year",C.call(this)),e("month",A.call(this)),e("day",[]),e("hour",this.getHours()),e("minute",this.getMinutes()),this.isSecondVisible()&&e("second",this.getSeconds())}else{f.datepicker.create({target:t,min:this.getMinDate(),max:this.getMaxDate()});var i=$("<div class='timebar'></div>").appendTo(t);f.combobox.create({target:i,name:"hour",data:this.getHours()});i.append("<span class='tip'>时</span>");f.combobox.create({target:i,name:"minute",data:this.getMinutes()});if(i.append("<span class='tip'>分</span>"),this.isSecondVisible()){f.combobox.create({target:i,name:"second",data:this.getSeconds()});i.append("<span class='tip'>秒</span>")}}var s=this.getDate();w.call(this,t,s?s.getFullYear():null,s?s.getMonth()+1:null),y.call(this,t,s),D.call(this,t)},g=function(){if(this.picker||(this.picker=$("<div class='picker'></div>").appendTo(this.$el),m.call(this,this.picker)),!this.$el.is(".show-picker")){var t=this.$el.addClass("show-picker"),e=this.picker;if(this._isRenderAsApp())$("html,body").addClass("ui-scrollless"),e.on("tap",function(t){$(t.target).is(".picker")&&v.call(this)}.bind(this)),e.on("touchstart",h.bind(this)),e.on("touchend",h.bind(this)),e.find(".col").on("scroll",function(t){this.beScrolled=!0;var e=$(t.currentTarget),i=e.children(),n=i.eq(0).height(),s=e.scrollTop(),a=parseInt(s/n);0<a&&s%n<n/2&&(a-=1);var r=i.eq(a);if(!r.is(".selected")){if(i.filter(".selected").removeClass("selected"),r.addClass("selected"),e.is(".year, .month")){var o=parseInt(this.picker.find(".col.year .selected").text()),l=parseInt(this.picker.find(".col.month .selected").text());w.call(this,this.picker,o,l)}D.call(this,this.picker);var d=b.call(this,this.picker);T.call(this,x.call(this,d))}}.bind(this));else t.on("mouseenter",o.bind(this)),t.on("mouseleave",o.bind(this)),e.on("change",function(t){var e=b.call(this,this.picker);return T.call(this,x.call(this,e)),D.call(this,this.picker),!1}.bind(this)),d.offset(e,this._getScrollContainer(),0,e[0].scrollHeight).isOverflowY&&t.addClass("show-before");_.call(this,e,this.getDate()),setTimeout(function(){t.addClass("animate-in")})}},v=function(){var t=this.$el.addClass("animate-out");this._isRenderAsApp()?($("html,body").removeClass("ui-scrollless"),this.picker.off("tap").off("touchstart").off("touchend"),this.picker.find(".col").off("scroll")):(t.off("mouseenter").off("mouseleave"),this.picker.off("change")),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},b=function(t){if(this._isRenderAsApp()){var e=t.children(".cols"),i=parseInt(e.children(".year").find(".selected").text())||0,n=parseInt(e.children(".month").find(".selected").text())||1,s=parseInt(e.children(".day").find(".selected").text())||1,a=parseInt(e.children(".hour").find(".selected").text())||0,r=parseInt(e.children(".minute").find(".selected").text())||0,o=parseInt(e.children(".second").find(".selected").text())||0;return new Date(i,n-1,s,a,r,o)}var l=f.datepicker.find(t)[0];if(!l)return null;var d=l.getDate();if(d){var h=VRender.Component,c=h.get(t.find("[name=hour]"));d.setHours(parseInt(c.getSelectedKey())||0);var u=h.get(t.find("[name=minute]"));if(d.setMinutes(parseInt(u.getSelectedKey())||0),this.isSecondVisible()){var p=h.get(t.find("[name=second]"))
;d.setSeconds(parseInt(p.getSelectedKey())||0)}}return d},y=function(t,e){if(this._isRenderAsApp()){var s=t.children(".cols");s.find(".selected").removeClass("selected");var i=function(t,e){var i=s.children("."+t),n=d.find(i.children(),function(t){return t.text()==e});n&&0<n.length&&n.addClass("selected")};e?(i("year",e.getFullYear()),i("month",e.getMonth()+1),i("day",e.getDate()),i("hour",e.getHours()),i("minute",e.getMinutes()),i("second",e.getSeconds())):i("year",(new Date).getFullYear())}else{var n=VRender.Component,a=f.datepicker.find(t)[0];a&&a.setDate(e);var r=n.get(t.find("[name=hour]"));r&&r.setSelectedKey(e?e.getHours():"");var o=n.get(t.find("[name=minute]"));o&&o.setSelectedKey(e?e.getMinutes():"");var l=n.get(t.find("[name=second]"));l&&l.setSelectedKey(e?e.getSeconds():"")}},_=function(t,e){function i(t,e){var i=a.children("."+t),n=d.find(i.children(),function(t){return t.text()==e});if(n&&0<n.length){var s=(n.index()+1)*n.height();i.scrollTop(s)}}var a=t.children(".cols");e?(i("year",e.getFullYear()),i("month",e.getMonth()+1),i("day",e.getDate()),i("hour",e.getHours()),i("minute",e.getMinutes()),i("second",e.getSeconds())):(a.children().scrollTop(0),i("year",(new Date).getFullYear()))},w=function(t,e,i){e||(e=(new Date).getFullYear());var n=S.call(this,e,i),s=t.find(".col.day"),a=s.find(".selected").text();s.empty(),d.each(n,function(t){var e=$("<div class='item'></div>").appendTo(s).text(t);t==a&&e.addClass("selected")})},D=function(t){},T=function(t){var e=this._snapshoot();if(t){this.$el.addClass("has-val").attr("data-dt",t.getTime());var i=this.isSecondVisible(),n=I(t,this.getDateFormat(),i);this.inputTag.find("input").val(n)}else this.$el.removeClass("has-val").attr("data-dt",""),this.inputTag.find("input").val("");e.done()},x=function(t){if(t){var e=t.getTime(),i=this.getMinDate();i&&i.getTime()>e&&(e=i.getTime(),t=new Date(e));var n=this.getMaxDate();n&&n.getTime()<e&&(e=n.getTime(),t=new Date(e))}return t||null},I=function(t,e,i){return t?d.isFunction(e)?e(t):(d.isBlank(e)&&(e=i?"yyyy-MM-dd HH:mm:ss":"yyyy-MM-dd HH:mm"),d.toDateString(t,e)):""},C=function(){for(var t=(new Date).getFullYear()+100,e=[],i=0;i<200;i++)e.push(t--);return e},A=function(){return[1,2,3,4,5,6,7,8,9,10,11,12]},S=function(t,e){var i=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28];return 2==e?(t%400==0||t%4==0&&t%100!=0)&&i.push(29):(i.push(29),i.push(30),0<=[1,3,5,7,10,12].indexOf(e)&&i.push(31)),i};l?(window.UIDateTime=t,f.init(".ui-datetime",t,n)):module.exports=n}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.timeinput){var n=t?VRender.Component.ui:require("../../static/js/init"),i=n.fn,g=n.util,e=n.timeinput=function(t,e){return n._base.call(this,t,e)},s=e.prototype=new n._base(!1);s.init=function(t,e){n._base.init.call(this,t,e);var i=this.inputTag=this.$el.children(".ipt");i.on("tap",o.bind(this)),i.on("tap",".clear",l.bind(this)),this._isRenderAsApp()||this.$el.on("tap",".picker .item",c.bind(this))},s.getTime=function(){return this.$el.attr("data-t")||""},s.setTime=function(t){var e=x(t,this.isSecondVisible());m.call(this,e),this.picker&&f.call(this,this.picker.empty())},s.getMinTime=function(){return this.$el.attr("opt-min")||""},s.setMinTime=function(t){var e=x(t,!0);this.$el.attr("opt-min",e),this.picker&&D.call(this,this.picker)},s.getMaxTime=function(){return this.$el.attr("opt-max")||""},s.setMaxTime=function(t){var e=x(t,!0);this.$el.attr("opt-max",e),this.picker&&D.call(this,this.picker)},s.isSecondVisible=function(){return this.options.hasOwnProperty("showSecond")||(this.options.showSecond=!!this.$el.attr("opt-sec")),g.isTrue(this.options.showSecond)},s.setSecondVisible=function(t){(t=!!g.isNull(t)||g.isTrue(t))!=this.isSecondVisible()&&(this.options.showSecond=t,rerender.call(this))},s.isUse12Hour=function(){return this.options.hasOwnProperty("use12Hour")||(this.options.use12Hour=!!this.$el.attr("opt-h12")),g.isTrue(this.options.use12Hour)},s.setUse12Hour=function(t){(t=!!g.isNull(t)||g.isTrue(t))!=this.isUse12Hour()&&(this.options.use12Hour=t,rerender.call(this))},s.getHours=function(){this.options.hasOwnProperty("hours")||(this.options.hours=this.$el.attr("opt-hours"));var t=this.isUse12Hour(),e=i.getIntValues(this.options.hours,0,t?11:23);return e&&0<e.length?e:g.map(new Array(t?12:24),function(t,e){return e})},s.setHours=function(t){this.options.hours=t,f.call(this)},s.getMinutes=function(){this.options.hasOwnProperty("minutes")||(this.options.minutes=this.$el.attr("opt-minutes"));var t=i.getIntValues(this.options.minutes,0,59);return t&&0<t.length?t:g.map(new Array(60),function(t,e){return e})},s.setMinutes=function(t){this.options.minutes=t,f.call(this)},s.getSeconds=function(){this.options.hasOwnProperty("seconds")||(this.options.seconds=this.$el.attr("opt-seconds"));var t=i.getIntValues(this.options.seconds,0,59);return t&&0<t.length?t:g.map(new Array(60),function(t,e){return e})},s.setSeconds=function(t){this.options.seconds=t,f.call(this)},s.isReadonly=function(){return 1==this.$el.attr("opt-readonly")},s.setReadonly=function(t){g.isNull(t)||g.isTrue(t)?this.$el.attr("opt-readonly","1"):this.$el.removeAttr("opt-readonly")},s.getPrompt=function(){return this.inputTag.find(".prompt").text()},s.setPrompt=function(t){this.inputTag.find(".prompt").remove(),g.isNotBlank(t)&&$("<span class='prompt'></span>").appendTo(this.inputTag).text(t)},s._snapshoot_shoot=function(t){t.data=this.getTime()},s._snapshoot_compare=function(t){return t.data==this.getTime()},s.rerender=function(){var t=this;g.debounce("timeinput_render-"+this.getViewId(),function(){m.call(t,t.getTime()),t.picker&&p.call(t,t.picker.empty())})};var a=function(t,e){n._baseRender.call(this,t,e)},r=a.prototype=new n._baseRender(!1);r.render=function(t,e){n._baseRender.render.call(this,t,e),e.addClass("ui-timeipt");var i=this.options||{};return e.attr("opt-box",i.container),this.isSecondVisible()&&e.attr("opt-sec","1"),this.isUse12Hour()&&e.attr("opt-h12","1"),g.isTrue(i.readonly)&&e.attr("opt-readonly","1"),e.attr("opt-min",x(i.min,!0)||null),e.attr("opt-max",x(i.max,!0)||null),g.isArray(i.hours)&&e.attr("opt-hours",i.hours.join(",")||null),g.isArray(i.minutes)&&e.attr("opt-minutes",i.minutes.join(",")||null),g.isArray(i.seconds)&&e.attr("opt-seconds",i.seconds.join(",")||null),u.call(this,t,e,i.time),this},r.isSecondVisible=function(){return g.isTrue(this.options.showSecond)},r.isUse12Hour=function(){return g.isTrue(this.options.use12Hour)};var o=function(t){this.isReadonly()||v.call(this)},l=function(t){return m.call(this,null),this.picker&&w.call(this,this.picker,""),!1},d=function(t){i.mouseDebounce(t,b.bind(this))},h=function(t){var i=this;if("touchstart"==t.type)this.t_touchend&&clearTimeout(this.t_touchend),this.t_touchend=null;else if("touchend"==t.type&&this.beScrolled){this.beScrolled=!1;var n=_.call(this,this.picker);!function e(){i.t_touchend=setTimeout(function(){i.t_touchend=null;var t=_.call(i,i.picker);n==t?y.call(i,i.picker,t):(n=t,e())},200)}()}},c=function(t){var e=$(t.currentTarget);if(!e.is(".selected")){e.addClass("selected").siblings().removeClass("selected"),D.call(this,this.picker);var i=_.call(this,this.picker);return m.call(this,T.call(this,i)),!1}},u=function(t,e,i){var n=t("<div class='ipt'></div>").appendTo(e),s=t("<input type='text' readonly='readonly'/>").appendTo(n);n.append("<span class='clear'></span>");var a=this.options.prompt;g.isNotBlank(a)&&t("<span class='prompt'></span>").appendTo(n).text(a),(i=x(i,this.isSecondVisible()))&&(s.val(this.isUse12Hour()?I(i):i),e.addClass("has-val").attr("data-t",i))},p=function(t){function e(t,e){var i=$("<div class='col'></div>").appendTo(n);i.addClass(t),g.each(e,function(t){$("<div class='item'></div>").appendTo(i).text(t)})}var n=$("<div class='cols'></div>").appendTo(t);e("hour",this.getHours()),e("minute",this.getMinutes()),this.isSecondVisible()&&e("second",this.getSeconds()),this.isUse12Hour()&&e("apm",["AM","PM"]),w.call(this,t,this.getTime()),D.call(this,t),this._isRenderAsApp()&&n.children(".col").on("scroll",function(t){this.beScrolled=!0;var e=$(t.currentTarget),i=e.children(),n=i.eq(0).height(),s=e.scrollTop(),a=parseInt(s/n);0<a&&s%n<n/2&&(a-=1);var r=i.eq(a);if(!r.is(".selected")){i.filter(".selected").removeClass("selected"),r.addClass("selected"),D.call(this,this.picker);var o=_.call(this,this.picker);m.call(this,T.call(this,o))}}.bind(this))},f=function(){var t=this;this.picker&&g.debounce("timeinput_renderpicker-"+this.getViewId(),function(){p.call(t,t.picker.empty())})},m=function(t){var e=this._snapshoot();this.$el.attr("data-t",t||"");var i=this.inputTag.find("input");t?(t=x(t,this.isSecondVisible()),i.val(this.isUse12Hour()?I(t):t),this.$el.addClass("has-val")):(i.val(""),this.$el.removeClass("has-val")),e.done()},v=function(){if(this.picker||(this.picker=$("<div class='picker'></div>").appendTo(this.$el),p.call(this,this.picker)),!this.$el.is(".show-picker")){var t=this.$el.addClass("show-picker"),e=this.picker;if(this._isRenderAsApp())$("html,body").addClass("ui-scrollless"),e.on("tap",function(t){$(t.target).is(".picker")&&b.call(this)}.bind(this)),e.on("touchstart",h.bind(this)),e.on("touchend",h.bind(this));else t.on("mouseenter",d.bind(this)),t.on("mouseleave",d.bind(this)),g.offset(e,this._getScrollContainer(),0,e[0].scrollHeight).isOverflowY&&t.addClass("show-before");y.call(this,e,this.getTime()),setTimeout(function(){t.addClass("animate-in")})}},b=function(){var t=this.$el.addClass("animate-out");this._isRenderAsApp()?($("html,body").removeClass("ui-scrollless"),this.picker.off("tap").off("touchstart").off("touchend")):t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},y=function(t,e){var a=this._isRenderAsApp(),r=t.children(".cols");if(e){var i=this.isUse12Hour(),n=function(t,e){var i=r.children("."+t),n=g.find(i.children(),function(t){return t.text()==e});if(n&&0<n.length){var s=n.index()*n.height();a&&(s+=n.height()),i.scrollTop(s)}};e=e.split(":");var s=parseInt(e[0])||0;n("hour",11<s&&i?s-12:s),n("minute",parseInt(e[1])||0),n("second",parseInt(e[2])||0),a&&i&&n("apm",s<12?"AM":"PM")
}else a&&r.children().scrollTop(0)},_=function(t){var e=t.children(".cols"),i=[],n=parseInt(e.children(".hour").find(".selected").text())||0;this.isUse12Hour()&&"PM"==e.children(".apm").find(".selected").text()&&(n+=12),i.push((n<10?"0":"")+n);var s=parseInt(e.children(".minute").find(".selected").text())||0;if(i.push((s<10?"0":"")+s),this.isSecondVisible()){var a=parseInt(e.children(".second").find(".selected").text())||0;i.push((a<10?"0":"")+a)}return i.join(":")},w=function(t,e){var s=t.children(".cols");if(s.find(".selected").removeClass("selected"),e){var i=function(t,e){var i=s.children("."+t),n=g.find(i.children(),function(t){return t.text()==e});n&&0<n.length&&n.addClass("selected")};e=e.split(":");var n=parseInt(e[0])||0;this.isUse12Hour()&&(i("apm",n<12?"AM":"PM"),11<n&&(n-=12)),i("hour",n),i("minute",parseInt(e[1])||0),this.isSecondVisible()&&i("second",parseInt(e[2])||0)}},D=function(t){var e=t.children(".cols"),i=(this.getMinTime()||"00:00:00").split(":"),n=(this.getMaxTime()||"23:59:59").split(":"),s=parseInt(i[0])||0,a=parseInt(i[1])||0,r=parseInt(i[2])||0,o=parseInt(n[0])||0,l=parseInt(n[1])||0,d=parseInt(n[2])||0,h="PM"==e.children(".apm").find(".selected").text(),c=-1,u=-1,p=1e4*s,f=1e4*o,m=0;g.each(e.children(".hour").children(),function(t){var e=(parseInt(t.text())||0)+(h?12:0),i=m+1e4*e;i<p||f<i?t.addClass("disabled"):t.removeClass("disabled"),t.is(".selected")&&(c=e)}),p+=100*a,f+=100*l,m+=c<0?0:1e4*c,g.each(e.children(".minute").children(),function(t){var e=parseInt(t.text())||0,i=m+100*e;i<p||f<i?t.addClass("disabled"):t.removeClass("disabled"),t.is(".selected")&&(u=e)}),p+=r,f+=d,m+=u<0?0:100*u,g.each(e.children(".second").children(),function(t){t.removeClass("disabled");var e=parseInt(t.text())||0,i=m+e;(i<p||f<i)&&t.addClass("disabled")}),g.each(e.children(".apm").children(),function(t){t.removeClass("disabled"),"AM"==t.text()&&11<s?t.addClass("disabled"):"PM"==t.text()&&o<12&&t.addClass("disabled")})},T=function(t){var e=this.getMinTime();e&&t<e&&(t=e);var i=this.getMaxTime();return i&&i<t&&(t=i),t},x=function(t,e){if(t){t=t.split(":");var i=Math.max(0,parseInt(t[0]))||0,n=Math.max(0,parseInt(t[1]))||0,s=Math.max(0,parseInt(t[2]))||0;59<s&&(n+=parseInt(s/60),s%=60),59<n&&(i+=parseInt(n/60),n%=60),23<i&&(i%=24);var a=[];return a.push((i<10?"0":"")+i),a.push((n<10?"0":"")+n),e&&a.push((s<10?"0":"")+s),a.join(":")}return""},I=function(t){if(t){t=t.split(":");var e=Math.max(0,parseInt(t[0]))||0;return 11<e&&(t[0]=e-12,t[0]<10&&(t[0]="0"+t[0])),C(e)+" "+t.join(":")}return""},C=function(t){return t<6?"凌晨":t<12?"上午":t<14?"中午":t<18?"下午":"晚上"};t?(window.UITimeInput=e,n.init(".ui-timeipt",e,a)):module.exports=a}}("undefined"!=typeof window),function(n){if(!n||!VRender.Component.ui.fileupload){var s=n?VRender.Component.ui:require("../../static/js/init"),t=s.fn,h=s.util,e=s.fileupload=function(t,e){return s._base.call(this,t,e)},i=e.prototype=new s._base(!1);i.init=function(t,e){s._base.init.call(this,t,e),this.$el.on("change","input",l.bind(this));var i=this.getBrowser();i&&i.on("tap.fileupload",o.bind(this))},i.browser=function(){this.$el.children("input").click()},i.remove=function(t){h.removeBy(this.files,"localId",t)},i.clear=function(){this.files=[]},i.upload=function(t,e,i){var n=this;return!this.isUploading&&(h.isFunction(t)?(i=t,t=e=null):h.isFunction(e)&&(i=e,e=null),h.isBlank(t)&&(t=this.getAction()),h.isBlank(t)?(y("上传失败：缺少 Action 信息！"),!1):this.files&&0<this.files.length?(this.isUploading=!0,void u.call(this,t,e,function(t,e){n.isUploading=!1,h.isFunction(i)&&i(t,e)})):(h.isFunction(i)&&i("没有文件信息"),!1))},i.cancel=function(){this.isUploading=!1,h.each(this.files,function(t){t.uploader&&(t.uploader.abort(),t.uploader=null)})},i.isEmpty=function(){return!this.files||0==this.files.length},i.getAction=function(){return this.$el.attr("opt-action")},i.setAction=function(t){this.$el.attr("opt-action",h.trimToEmpty(t))},i.getParams=function(){if(this.options.hasOwnProperty("params"))return this.options.params;var t=null;try{t=JSON.parse(this.$el.attr("opt-params"))}catch(t){}return this.options.params=t,this.options.params},i.setParams=function(t){this.options.params=t,this.$el.removeAttr("opt-params")},i.getUploadName=function(){return h.trimToNull(this.$el.attr("opt-upload"))||"file"},i.setUploadName=function(t){this.$el.attr("opt-upload",h.trimToEmpty(t))},i.getBrowser=function(){if(this.hasOwnProperty("browserBtn"))return this.browserBtn;if(this.options.hasOwnProperty("browser"))return this.options.browser;var t=this.$el.attr("opt-browser");return this.$el.removeAttr("opt-browser"),this.browserBtn=h.isBlank(t)?null:$(t),this.browserBtn},i.setBrowser=function(t){var e=this.getBrowser();e&&e.off("tap.fileupload"),this.browserBtn=h.isBlank(t)?null:t.$el||$(t),this.options.browser=null,this.$el.removeAttr("opt-browser"),initBrowserHandler.call(this,this.browserBtn),this.browserBtn&&this.browserBtn.on("tap.fileupload",o.bind(this))},i.getFilter=function(){return this.$el.attr("opt-filter")},i.setFilter=function(t){this.$el.attr("opt-filter",h.trimToEmpty(t));var e=this.$el.children("input"),i=FileUploadRender.getAccept.call(this);i?e.attr("accept",i):e.removeAttr("accept")},i.getLimit=function(){return parseInt(this.$el.attr("opt-limit"))||0},i.setLimit=function(t){t&&!isNaN(t)?this.$el.attr("opt-limit",t):this.$el.removeAttr("opt-limit")},i.isMultiple=function(){return"multiple"==this.$el.children("input").attr("multiple")},i.setMultiple=function(t){var e=this.$el.children("input");h.isNull(t)||h.isTrue(t)?e.attr("multiple","multiple"):e.removeAttr("multiple")},i.isAutoUpload=function(){return 1==this.$el.attr("opt-auto")},i.setAutoUpload=function(t){h.isNull(t)||h.isTrue(t)?this.$el.attr("opt-auto","1"):this.$el.removeAttr("opt-auto")},i.isMixed=function(){return 1==this.$el.attr("opt-mixed")},i.setMixed=function(t){h.isNull(t)||h.isTrue(t)?this.$el.attr("opt-mixed","1"):this.$el.removeAttr("opt-mixed")};var a=function(t,e){s._baseRender.call(this,t,e)},r=a.prototype=new s._baseRender(!1);r.render=function(t,e){s._baseRender.render.call(this,t,e),e.addClass("ui-fileupload").css("display","none");var i=this.options||{};return e.attr("opt-action",h.trimToNull(i.action)),e.attr("opt-upload",h.trimToNull(i.uploadName)),e.attr("opt-filter",this.getFilter()),e.attr("opt-limit",this.getLimit()||null),e.attr("opt-auto",this.isAutoUpload()?"1":null),e.attr("opt-mixed",this.isMixed()?"1":null),e.attr("opt-browser",this.getBrowser()),d.call(this,t,e),n||i.params&&e.attr("opt-params",JSON.stringify(i.params)),this},r.getBrowser=function(){if(!n){var t=this.options.browser;if(t){if("string"==typeof t)return t;if(h.isFunction(t.getViewId))return"[vid='"+t.getViewId()+"']"}}return null},r.getFilter=function(){return h.trimToNull(this.options.filter)},r.getLimit=function(){return Math.max(0,parseInt(this.options.limit))||0},r.isMultiple=function(){return t.isMultiple.call(this)},r.isAutoUpload=function(){return!this.options.hasOwnProperty("autoUpload")||h.isTrue(this.options.autoUpload)},r.isMixed=function(){return h.isTrue(this.options.mixed)};var o=function(){this.isUploading?y("正在上传，请稍候.."):this.browser()},l=function(t){var e=$(t.currentTarget),i=c.call(this,e[0].files);if(i&&0!=i.length){var n=Date.now(),s="multiple"==e.attr("multiple");if(s){this.files=h.toArray(this.files);for(var a=0;a<i.length;a++)i[a].localId=n++,this.files.push(i[a])}else i[0].localId=n++,this.files=[i[0]];e.remove();var r=$("<input type='file'/>").appendTo(this.$el);s&&r.attr("multiple","multiple"),r.attr("accept",e.attr("accept")),this.trigger("change",this.files),this.isAutoUpload()&&h.isNotBlank(this.getAction())&&this.upload()}},d=function(t,e){var i=t("<input type='file'/>").appendTo(e);this.isMultiple()&&i.attr("multiple","multiple"),i.attr("accept",h.trimToNull(v.call(this)))},c=function(t){var i=h.trimToNull(this.getFilter());i&&(i=/image|audio|video|excel|word|powerpoint|text/.test(i)?null:i.split(","));var e=this.getLimit();if(i||0<e)for(var n=0;n<t.length;n++){var s=t[n];if(i){var a=function(){var e=s.name.split(".");if(e=e[e.length-1],h.index(i,function(t){return h.endWith(t,e)})<0)return y("文件类型错误："+s.name),{v:!1}}();if("object"===_typeof(a))return a.v}if(0<e&&e<s.size)return y("允许文件大小上限为："+b(e)),!1}return t},u=function(t,e,i){var n=this,s=g.call(this,t),a=h.extend({},this.getParams(),e),r=0;h.each(this.files,function(t){r+=t.size,t.state=0}),this.totalSize=r,this.totalSend=0,p.call(this,s,a,this.files,function(t,e){t?n.trigger("error",t):(n.files=null,n.trigger("success",e)),h.isFunction(i)&&i(t,e)})},p=function(t,e,s,a){var r=this;if(1==s.length||this.isMixed())h.each(s,function(t){t.state=1}),f.call(this,t,e,s,function(e,t){var i=[];h.each(s,function(t){t.state=e?3:2,i.push(t.localId)}),(t=t||{}).localId=i.join(","),a(e,t)});else{var o=[],l=[];!function i(){var n=h.findBy(s,"state",0);n?(n.state=1,f.call(r,t,e,[n],function(t,e){t?(n.state=3,o.push(t)):(n.state=2,e.localId=n.localId,l.push(e)),i()})):(0==o.length&&(o=null),a(o,l))}()}},f=function(s,a,r,o){var l=this,d=m();d?(a=h.extend({},a),function(t,e,i){var n={type:"upload-before"};this.trigger(n,t,e),n.isPreventDefault?i("canceled"):i()}.call(this,r,a,function(t){if(t)o("canceled"==t?"已取消":t);else{(r[0].uploader=d).open("POST",s,!0),d.onload=function(t){(function(t,e,i){e[0].uploader=null,i(e.errorMsg,e.resultMsg)}).call(l,t,r,o)},d.onerror=function(t){(function(t,e,i){e[0].uploader=null,i(t)}).call(l,t,r,o)},d.onreadystatechange=function(t){(function(t,e){var i=e[0].uploader;if(4==i.readyState){var n=i.responseText;if(n)try{n=JSON.parse(n)}catch(t){}200==i.status?e.resultMsg=n||i.responseText:(console.error(i.responseText),e.errorMsg=n||i.responseText||"文件上传失败！")}}).call(l,t,r)},d.upload.onprogress=function(t){(function(t,e){this.totalSend+=t.loaded,this.totalSend>this.totalSize&&(this.totalSend=this.totalSize),this.trigger("progress",e,this.totalSend,this.totalSize)}).call(l,t,r)};var e=new FormData,i=l.getUploadName();for(var n in h.each(r,function(t){e.append(i,t),e.append("filename",t.name)}),a)e.append(n,a[n]);d.send(e)}})):o("当前浏览器版本较低，不支持该上传功能。或者使用其他浏览器（如：chrome）。")},m=function(){return window.XMLHttpRequest?new XMLHttpRequest:!!window.ActiveXObject&&new ActiveXObject(
"Microsoft.XMLHTTP")},g=function(t){return/^(\/|http)/.test(t)?t:"/upload?n="+t},v=function(){var t=this.getFilter();if(t){if("image"==t)return"image/*";if("audio"==t)return"audio/*";if("video"==t)return"video/*";if("excel"==t)return"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";if("word"==t)return"application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document";if("powerpoint"==t)return"application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation";if("text"==t)return"text/*"}return t},b=function(t){return(t=parseInt(t))&&0<t?t<1024?t+"B":(t/=1024)<1024?t.toFixed(2)+"KB":(t/=1024)<1024?t.toFixed(2)+"MB":(t/=1024)<1024?t.toFixed(2)+"GB":(t/=1024).toFixed(2)+"TB":""},y=function(t,e){s.tooltip.create({type:"danger",content:t,duration:e})};n?(window.UIFileUpload=e,s.init(".ui-fileupload",e,a)):module.exports=a}}("undefined"!=typeof window),function(o){if(!o||!VRender.Component.ui.formview){var l=o?VRender.Component.ui:require("../../static/js/init"),h=l.fn,c=l.util,e="vertical",i="horizontial",t=l.formview=function(t,e){return l._base.call(this,t,e)},n=t.prototype=new l._base(!1);n.init=function(t,e){l._base.init.call(this,t,e),this.$el.children(".btnbar").on("tap",".ui-btn",r.bind(this)),this.$el.on("keydown",".form-item > .content > dd > div > *",d.bind(this)),this.$el.on("focusout",".form-item > .content > dd > div > *",u.bind(this)),this.$el.on("change",".form-item > .content > dd > div > *",m.bind(this)),this.$el.on("keydown",".ui-textview > .ipt > *",p.bind(this)),this.$el.on("focusout",".ui-textview > .ipt > *",f.bind(this)),this._isRenderAsApp()||(this.$el.on("mouseenter",".form-item > .content > dd > div > *",g.bind(this)),this.$el.on("mouseleave",".form-item > .content > dd > div > *",g.bind(this)))},n.validate=function(n){var t=this,s=[],e=this._getItems(),a=e.length;c.each(e,function(e,i){w.call(t,e,null,function(t){t&&s.push({index:i,name:e.attr("name"),message:t}),(a-=1)<=0&&c.isFunction(n)&&n(0<s.length&&s)})})},n.submit=function(n,s){var a=this;if(this.$el.is(".is-loading"))return!1;c.isFunction(n)&&(s=n,n=null),c.isBlank(n)&&(n=this.getAction()),this.$el.addClass("is-loading");var r=this.$el.find(".btnbar .is-submit .ui-btn");c.each(r,function(t){VRender.Component.get(t).waiting()});function e(t,e,i){a.$el.removeClass("is-loading"),c.each(r,function(t){VRender.Component.get(t).waiting(0)}),c.isFunction(s)&&s(t,e,i),n&&a.trigger("action_after",t,e,i)}this.validate(function(t){!t&&n?O.call(a,n,e):e(t)})},n.add=function(t,e,i){var n=this.$el.children(".items"),s=$("<div class='form-item'></div>").appendTo(n);s.attr("name",c.trimToNull(t));var a=$("<dl class='content'></dl>").appendTo(s),r=$("<dt></dt>").appendTo(a);if(r.text(c.trimToEmpty(e)),r.css("width",c.trimToEmpty(this.getLabelWidth())),a.append("<dd><div></div></dd>"),0<=(i=c.getIndexValue(i))){var o=n.children();i<o.length-1&&o.eq(i).before(s)}return new L(this,s)},n.get=function(e){if(c.isBlank(e))return null;var t=c.find(this._getItems(),function(t){return t.attr("name")==e});return t?new L(this,t):null},n.getAt=function(t){if(0<=(t=c.getIndexValue(t))){var e=this._getItems().eq(t);return e?new L(this,e):null}return null},n.delete=function(e){if(c.isBlank(e))return null;var t=c.find(this._getItems(),function(t){return t.attr("name")==e});return t&&t.remove(),t},n.deleteAt=function(t){if(0<=(t=c.getIndexValue(t))){var e=this._getItems().eq(t);return e&&e.remove(),e}return null},n.getFormData=function(){var n={};return n=c.extend(n,this.getParams()),c.each(this._getItems(),function(t){var e=t.attr("name");if(!c.isBlank(e)){var i=t.children(".content").children("dd").children().children();i.is("input, textarea")?n[e]=i.val()||"":(i=VRender.Component.get(i)||VRender.FrontComponent.get(i))&&(i instanceof l.dateinput?n[e]=i.getDate("yyyy-MM-dd"):i instanceof l.daterange?n[e]=i.getDateRange("yyyy-MM-dd"):i instanceof l.combobox?n[e]=i.val():i instanceof l._select?n[e]=i.getSelectedKey():c.isFunction(i.getValue)?n[e]=i.getValue():c.isFunction(i.val)&&(c.isFunction(i.isChecked)&&!i.isChecked()||(n[e]=i.val())))}}),n},n.setFormData=function(a){var r=this;a=a||{},c.each(this._getItems(),function(t){var e=t.attr("name");if(!c.isBlank(e)&&a.hasOwnProperty(e)){var i=a[e],n=t.children(".content").children("dd").children().children();if(n.is("input, textarea"))n.val(i||""),D.call(r,t,n);else{var s=VRender.Component.get(n);s&&(s instanceof l._select?(s.setSelectedKey(i),I.call(r,t,s)):c.isFunction(s.val)&&(s.val(i||""),w.call(r,t,n)))}}})},n.getColumns=function(){return this._isRenderAsApp()?1:this.options.hasOwnProperty("columns")?parseInt(this.options.columns)||1:(this.options.columns=parseInt(this.$el.attr("opt-cols"))||1,this.$el.removeAttr("opt-cols"),this.options.columns)},n.setColumns=function(t){if(!this._isRenderAsApp()){var i=parseInt(t)||1;i<1&&(i=1),this.options.columns=i,this.$el.removeAttr("opt-cols"),c.each(this._getItems(),function(t){var e=parseInt(t.attr("opt-col"))||1;e<i?t.css("width",(100*e/i).toFixed(6)+"%"):t.css("width","")})}},n.getAction=function(){return this.$el.attr("opt-action")},n.setAction=function(t){this.$el.attr("opt-action",c.trimToEmpty(t))},n.getParams=function(){if(this.options.hasOwnProperty("params"))return this.options.params;var t=null;try{t=JSON.parse(this.$el.attr("opt-params"))}catch(t){}return this.options.params=t,this.options.params},n.setParams=function(t){this.options.params=t,this.$el.removeAttr("opt-params")},n.getMethod=function(){return this.$el.attr("opt-method")},n.setMethod=function(t){this.$el.attr("opt-method",c.trimToEmpty(t))},n.getLabelWidth=function(){if(this.options.hasOwnProperty("labelWidth"))return this.options.labelWidth;var t=this.$el.attr("opt-lw");return this.options.width=c.getFormatSize(t,this.isRenderAsRem()),this.$el.removeAttr("opt-lw"),this.options.labelWidth},n.setLabelWidth=function(t){this.options.labelWidth=t,this.$el.removeAttr("opt-lw")},n.getLabelAlign=function(){var t=this.$el.attr("opt-la");return/^(center|right)$/.test(t)?t:"left"},n.setLabelAlign=function(t){var e=/^(center|right)$/.test(t)?e:"left";this.options.labelAlign=e,this.$el.attr("opt-la",e)},n.getOrientation=function(){return this.$el.attr("opt-orientate")},n.setOrientation=function(t){e!=t&&i!=t&&(t=this._isRenderAsApp()?e:i),this.$el.removeClass(e),this.$el.removeClass(i),this.$el.addClass(t).attr("opt-orientate",t)},n.setButtons=function(t){_.call(this,$,this.$el,c.toArray(t))},n._getItems=function(){return this.$el.children(".items").children()};var s=function(t,e){l._baseRender.call(this,t,e)},a=s.prototype=new l._baseRender(!1);a.render=function(t,e){l._baseRender.render.call(this,t,e),e.addClass("ui-formview");var i=this.options||{};v.call(this,t,e);var n=this.getLabelAlign();n&&"left"!=n&&e.attr("opt-la",n),e.attr("opt-action",c.trimToNull(i.action)),e.attr("opt-method",c.trimToNull(i.method));var s=this.getOrientation();if(e.addClass(s).attr("opt-orientate",s),!o){i.params&&e.attr("opt-params",JSON.stringify(i.params));var a=this.getColumns();1<a&&e.attr("opt-cols",a);var r=this.getLabelWidth();r&&e.attr("opt-lw",r)}return this},a.renderData=function(){},a.add=function(t,e,i){var n=c.toArray(this.options.data),s={name:t,label:e};return 0<=(i=c.getIndexValue(i))&&i<n.length?n.splice(i,0,s):n.push(s),this.options.data=n,new L(s)},a.get=function(t){if(c.isBlank(t))return null;var e=c.toArray(this.options.data),i=c.findBy(e,"name",t);return i?new L(i):null},a.getAt=function(t){t=c.getIndexValue(t);var e=c.toArray(this.options.data);return 0<=t&&t<e.length?new L(e[t]):null},a.delete=function(t){if(c.isBlank(t))return null;var e=c.toArray(this.options.data),i=c.deleteBy(e,"name",t);return i&&0<i.length?1<i.length?i:i[0]:null},a.deleteAt=function(t){t=c.getIndexValue(t);var e=c.toArray(this.options.data);return 0<=t&&t<e.length?e.splice(t,1)[0]:null},a.getColumns=function(){return this._isRenderAsApp()?1:parseInt(this.options.columns)||1},a.getLabelWidth=function(){return this.hasOwnProperty("labelWidth")||(this.labelWidth=c.getFormatSize(this.options.labelWidth,this._isRenderAsRem())),this.labelWidth},a.getLabelAlign=function(){if(!this.hasOwnProperty("labelAlign")){var t=this.options.labelAlign;this.labelAlign=/^(left|right|center)$/.test(t)?t:null}return this.labelAlign},a.getOrientation=function(){var t=this.options.orientation;return e==t||i==t?t:this._isRenderAsApp()?e:i};var r=function(t){var e=$(t.currentTarget);e.parent().is(".is-submit")&&this.submit();var i=e.attr("name");i&&(this.trigger("btn_"+i),this.trigger("btnclick",i,e))},d=function(t){var e=$(t.currentTarget);if(e.is("input, textarea")){var i=c.parentUntil(e,".form-item");N.call(this,i)}},u=function(t){var e=$(t.currentTarget);if(e.is("input, textarea")){var i=c.parentUntil(e,".form-item");D.call(this,i,e)}},p=function(t){c.parentUntil(t.currentTarget,".form-item").removeClass("is-error")},f=function(t){var e=$(t.currentTarget),i=c.parentUntil(e,".form-item"),n=VRender.Component.get(e.parent().parent());x.call(this,i,n)},m=function(t){var e=$(t.currentTarget);if(!e.is("input, textarea, .ui-textview")){var i=c.parentUntil(e,".form-item");w.call(this,i)}},g=function(t){var e=c.parentUntil(t.currentTarget,".form-item");e.is(".is-error")&&(P.call(this,e),"mouseenter"==t.type?e.children(".errmsg").removeClass("animate-out"):V.call(this,e))},v=function(t,e){b.call(this,t,e,this.options.data),_.call(this,t,e,this.options.buttons)},b=function(n,s,t){var a=this,r=s.children(".items").empty();r&&0!=r.length||(r=n("<div class='items'></div>").appendTo(s));var o=this.getColumns();c.each(c.toArray(t),function(t){var e=n("<div class='form-item'></div>").appendTo(r);y.call(a,n,s,e,t);var i=parseInt(t.colspan)||1;e.attr("opt-col",i),1<o&&i<o&&e.css("width",(100*i/o).toFixed(6)+"%")})},y=function(t,e,i,n){c.isNotBlank(n.name)&&i.attr("name",n.name),c.isTrue(n.required)&&i.attr("opt-required","1");var s=c.trimToNull(n.empty);s&&i.attr("opt-empty",s),c.isNotNull(n.visible)&&!c.isTrue(n.visible)&&i.attr("opt-hide","1");var a=t("<dl class='content'></dl>").appendTo(i),r=t("<dt></dt>").appendTo(a);r.text(c.trimToEmpty(n.label));var o=this.getLabelWidth();o&&r.css("width",o)
;var l=t("<dd></dd>").appendTo(a);l=t("<div></div>").appendTo(l);var d=n.content;d&&(c.isFunction(d.render)?d.render(l):d.hasOwnProperty("$el")?l.append(d.$el):l.append(d)),h.renderFunction.call(this,i,"validate",n.validate)},_=function(i,t,e){var n=this;if(t.children(".btnbar").remove(),e&&0<e.length){var s=i("<div class='btnbar'></div>").appendTo(t),a=this.getLabelWidth();a&&!this._isRenderAsApp()&&s.css("paddingLeft",a),c.each(e,function(t){var e=i("<div></div>").appendTo(s);("submit"==t.type&&e.addClass("is-submit"),o)?new l.button(c.extend({},t,{target:e})):new(require("../button/index"))(n.context,t).render(e)})}},w=function(t,e,i){if(1==t.attr("opt-hide"))return c.isFunction(i)?i(!1):null;e||(e=t.children(".content").children("dd").children().children()),e.is("input, textarea")?D.call(this,t,e,i):(e=VRender.Component.get(e)||VRender.FrontComponent.get(e)||e)instanceof l.textview?x.call(this,t,e,i):e instanceof l.dateinput?A.call(this,t,e,i):e instanceof l.daterange?S.call(this,t,e,i):e instanceof l.combobox?C.call(this,t,e,i):e instanceof l._select?I.call(this,t,e,i):c.isFunction(e.getValue)?T.call(this,t,e,e.getValue(),i):c.isFunction(e.val)?T.call(this,t,e,e.val(),i):c.isFunction(i)&&i(!1)},D=function(t,e,i){M.call(this,t,e.val(),i)},T=function(t,e,i,n){M.call(this,t,i,n)},x=function(t,e,i){var n=this;e.validate(function(){e.hasError()?(t.addClass("is-error"),t.children(".errmsg").remove()):(t.removeClass("is-error"),M.call(n,t,e.val(),i))})},I=function(t,e,i){M.call(this,t,e.getSelectedKey(),i)},C=function(t,e,i){e.isEditable()?M.call(this,t,e.val(),i):M.call(this,t,e.getSelectedKey(),i)},A=function(t,e,i){M.call(this,t,e.getDate(),i)},S=function(t,e,i){M.call(this,t,e.getDateRange(),i)},M=function(i,t,n){var s=this;if(c.isBlank(t)){var e=1==i.attr("opt-required")?i.attr("opt-empty")||"不能为空":null;k.call(this,i,e,n)}else{var a=R.call(this,i);c.isFunction(a)?a(t,function(t){var e=!!t&&(!0===t?"内容不正确":c.trimToNull(t));k.call(s,i,e,n)}):k.call(this,i,!1,n)}},R=function(t){var e=t.data("validate");if(!e){var i=t.children(".ui-fn[name='validate']");if(i&&0<i.length){var n=i.text();c.isNotBlank(n)&&(e=new Function("var Utils=VRender.Utils;return ("+unescape(n)+");")()),i.remove()}e||(e="1"),t.data("validate",e)}return e},k=function(t,e,i){e?F.call(this,t,e):N.call(this,t),c.isFunction(i)&&i(e)},F=function(t,e){t.addClass("is-error");var i=t.children(".errmsg");i&&0!=i.length||(i=$("<div class='errmsg'></div>").appendTo(t)),i.html(e),i.removeClass("animate-in").removeClass("animate-out"),setTimeout(function(){i.addClass("animate-in")}),this._isRenderAsApp()||V.call(this,t)},N=function(t){if(P.call(this,t),t.is(".is-error")){var e=t.children(".errmsg");e.addClass("animate-out"),setTimeout(function(){t.removeClass("is-error"),e.removeClass("animate-in").removeClass("animate-out")},300)}},V=function(t){P.call(this,t);var e=setTimeout(function(){t.removeAttr("t-err"),t.children(".errmsg").addClass("animate-out")},3e3);t.attr("t-err",e)},P=function(t){var e=parseInt(t.attr("t-err"));e&&(clearTimeout(e),t.removeAttr("t-err"))},O=function(e,i){var n=this.getFormData(),s=this.getMethod();B.call(this,n,function(t){t?i(t,null,n):/post|put|delete/.test(s)?VRender.send(e,n,function(t,e){i(t,e,n)}):VRender.fetch(e,n,function(t,e){i(t,e,n)})})},B=function(t,e){var i={type:"action_before"};this.trigger(i,t),i.isPreventDefault?e("canceled"):e()},L=function(t){this.data=t,this.data.visible=!0},E=L.prototype=new Object;E.getName=function(){return this.data.name},E.setName=function(t){return this.data.name=t,this},E.getLabel=function(){return this.data.label},E.setLabel=function(t){return this.data.label=t,this},E.content=function(t){return this.data.content=t,this},E.required=function(t){return this.data.required=!!c.isNull(t)||c.isTrue(t),this},E.visible=function(t){return this.data.visible=!!c.isNull(t)||c.isTrue(t),this},E.show=function(){return this.data.visible=!0,this},E.hide=function(){return this.data.visible=!1,this},E.emptyMsg=function(t){return this.data.empty=t,this},E.validate=function(t){return this.data.validate=t,this},E.colspan=function(t){return this.datas.colspan=t,this},o?(window.UIFormView=t,l.init(".ui-formview",t,s)):module.exports=s}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.tooltip){var n=t?VRender.Component.ui:require("../../static/js/init"),i=(n.fn,n.util),e=n.tooltip=function(t,e){return n._base.call(this,t,e)},s=e.prototype=new n._base(!1);s.init=function(t,e){n._base.init.call(this,t,e),this.open()},s.open=function(){u.call(this),this._isRenderAsApp()?0<this.$el.find(".closebtn").length&&this.$el.on("tap",o.bind(this)):(this.$el.on("tap",".closebtn",l.bind(this)),this.$el.on("tap",".content",d.bind(this)),this.$el.on("mouseenter",h.bind(this)),this.$el.on("mouseleave",h.bind(this)))},s.close=function(){p.call(this)};var a=function(t,e){n._baseRender.call(this,t,e)},r=a.prototype=new n._baseRender(!1);r.render=function(t,e){n._baseRender.render.call(this,t,e),e.addClass("ui-tooltip");var i=this.getType();return i&&e.addClass("show-icon").attr("opt-type",i),e.attr("opt-duration",this.getDuration()),c.call(this,t,e),this},r.getType=function(){return"danger"==this.options.type?"error":/^(success|warn|error|info)$/i.test(this.options.type)?this.options.type:null},r.getDuration=function(){return i.isBlank(this.options.duration)?null:isNaN(this.options.duration)?null:parseInt(this.options.duration)||0},r.isClosable=function(){return!!i.isNull(this.options.closable)||i.isTrue(this.options.closable)};var o=function(t){$(t.target).is(this.$el)&&p.call(this)},l=function(){p.call(this)},d=function(){this.$el.addClass("active")},h=function(t){"mouseenter"==t.type?this.t_close&&(clearTimeout(this.t_close),this.t_close=null):(this.$el.removeClass("active"),f.call(this))},c=function(t,e){var i=t("<div class='container'></div>").appendTo(e),n=t("<i class='img'></i>").appendTo(i),s=t("<div class='content'></div>").appendTo(i);this.options.hasOwnProperty("focusHtmlContent")?s.html(this.options.focusHtmlContent||"无"):s.text(this.options.content||"无"),this.isClosable()&&i.append("<div class='closebtn'></div>"),this.options.icon&&(e.addClass("show-icon"),n.css("backgroundImage","url("+this.options.icon+")"))},u=function(){var t=$("body").children(".ui-tooltip-wrap");t&&0!=t.length||(t=$("<div class='ui-tooltip-wrap'></div>").appendTo("body"));var e=this.$el.appendTo(t);setTimeout(function(){e.addClass("animate-in")},50),f.call(this)},p=function(){var e=this.$el.addClass("animate-out");setTimeout(function(){e.removeClass("animate-in").removeClass("animate-out"),e.remove();var t=$("body").children(".ui-tooltip-wrap");0==t.children().length&&t.remove()},500),this.trigger("close")},f=function(){var t=this;this.t_close&&(clearTimeout(this.t_close),this.t_close=null);var e=this.$el.attr("opt-duration");0<(e=i.isBlank(e)?3e3:parseInt(e)||0)&&(this.t_close=setTimeout(function(){t.t_close=null,p.call(t)},e))};t?(window.UITooltip=e,n.init(".ui-tooltip",e,a)):module.exports=a}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.notice){var n=t?VRender.Component.ui:require("../../static/js/init"),r=(n.fn,n.util),e=n.notice=function(t,e){return n._base.call(this,t,e)},i=e.prototype=new n._base(!1);i.init=function(t,e){n._base.init.call(this,t,e),this.open()},i.open=function(){h.call(this),this.$el.on("tap",".closebtn",o.bind(this)),this._isRenderAsApp()||(this.$el.on("mouseenter",l.bind(this)),this.$el.on("mouseleave",l.bind(this)))},i.close=function(){c.call(this)};var s=function(t,e){n._baseRender.call(this,t,e)},a=s.prototype=new n._baseRender(!1);a.render=function(t,e){n._baseRender.render.call(this,t,e),e.addClass("ui-notice");var i=this.getType();return i&&e.addClass("show-icon").attr("opt-type",i),e.attr("opt-duration",this.getDuration()),d.call(this,t,e),this},a.getType=function(){return"danger"==this.options.type&&(this.options.type="error"),/^(success|warn|error|info)$/i.test(this.options.type)?this.options.type:null},a.getDuration=function(){return r.isBlank(this.options.duration)?null:isNaN(this.options.duration)?null:parseInt(this.options.duration)||0},a.isClosable=function(){return!!r.isNull(this.options.closable)||r.isTrue(this.options.closable)};var o=function(){c.call(this)},l=function(t){"mouseenter"==t.type?this.t_close&&(clearTimeout(this.t_close),this.t_close=null):u.call(this)},d=function(t,e){var i=t("<div class='container'></div>").appendTo(e),n=t("<i class='img'></i>").appendTo(i),s=r.trimToNull(this.options.title);s&&t("<div class='title'></div>").appendTo(i).text(s);var a=t("<div class='content'></div>").appendTo(i);a=t("<div></div>").appendTo(a),this.options.hasOwnProperty("focusHtmlContent")?a.html(this.options.focusHtmlContent||"无内容"):a.text(this.options.content||"无内容"),this.isClosable()&&i.append("<div class='closebtn'></div>"),this.options.icon&&(e.addClass("show-icon"),n.css("backgroundImage","url("+this.options.icon+")"))},h=function(){var t=$("body").children(".ui-notice-wrap");t&&0!=t.length||(t=$("<div class='ui-notice-wrap'></div>").appendTo("body"));var s=this.$el;this._isRenderAsApp()?t.append(s):t.prepend(s),setTimeout(function(){s.addClass("animate-in")},50),this._isRenderAsApp()&&setTimeout(function(){var t=s.find(".content"),e=t.children(),i=(t.width(),e.width()-t.width());if(0<i){t.addClass("over");var n=Math.max(5e3,20*i);e.css("animation","ui-notice-animate "+n+"ms infinite linear")}},1e3),u.call(this)},c=function(){var e=this.$el.addClass("animate-out");setTimeout(function(){e.removeClass("animate-in").removeClass("animate-out"),e.remove();var t=$("body").children(".ui-notice-wrap");0==t.children().length&&t.remove()},1500),this.trigger("close")},u=function(){var t=this;this.t_close&&(clearTimeout(this.t_close),this.t_close=null);var e=this.$el.attr("opt-duration");0<(e=r.isBlank(e)?1e4:parseInt(e)||0)&&(this.t_close=setTimeout(function(){t.t_close=null,c.call(t)},e))};t?(window.UINotice=e,n.init(".ui-notice",e,s)):module.exports=s}}("undefined"!=typeof window),function(r){if(!r||!VRender.Component.ui.dialog){var o=r?VRender.Component.ui:require("../../static/js/init"),l=(o.fn,o.util),d=[],h=[{name:"cancel",label:"取消",type:"cancel"},{name:"ok",label:"确定",type:"primary"}],
c=[{name:"ok",label:"确定",type:"primary"},{name:"cancel",label:"取消",type:"cancel"}],s=o.dialog=function(t,e){return o._base.call(this,t,e)},t=s.prototype=new o._base(!1);s.create=function(t){if(!(t=t||{}).target){var e=$("body").children(".ui-dialog-wrap");e&&0!=e.length||(e=$("<div class='ui-dialog-wrap'></div>").appendTo($("body"))),t.target=e}return VRender.Component.create(t,s,i)},s.close=function(t,e,i){if(t.is(".ui-dialog")||(t=l.parentUntil(t,".ui-dialog")),t&&0<t.length){var n=VRender.Component.get(t);n&&n instanceof s&&n.close(e,i)}},t.init=function(t,e){o._base.init.call(this,t,e);var i=this.dialogView=this.$el.children().children();i.children("header").on("tap",".closebtn",a.bind(this)),i.children("footer").on("tap",".btnbar > .btn",u.bind(this));var n=T.call(this);n&&0<n.length&&n.on("tap",p.bind(this)),this._isRenderAsApp()?this.$el.on("tap",f.bind(this)):w.call(this),_.call(this)},t.open=function(){if(this.isopened)return this;this.isopened=!0;var t=$("body").addClass("ui-scrollless");0==t.children(".ui-dialog-mask").length&&t.append("<div class='ui-dialog-mask'></div>"),this.$el.css("display","").addClass("show-dialog"),d.push(this),this._getContentView().trigger("dialog_open");var e=this.$el.attr("opt-trans");if(e){var i=this.$el.addClass(e+"-open");setTimeout(function(){i.addClass(e+"-opened")}),setTimeout(function(){i.removeClass(e+"-open").removeClass(e+"-opened")},300)}return this.trigger("opened"),this},t.close=function(t,n){var s=this;if(this.isopened){l.isFunction(t)&&(n=t,t=!1);var e={type:"dialog_close"};if(this._getContentView().trigger(e),t||!e.isPreventDefault){this.isopened=!1;var a=this.$el.removeClass("show-dialog"),r=a.attr("opt-trans");r&&(a.addClass(r+"-close"),setTimeout(function(){a.addClass(r+"-closed")})),setTimeout(function(){r&&a.removeClass(r+"-close").removeClass(r+"-closed");var t=$("body").children(".ui-dialog-wrap");s.$el.parent().is(t)&&s.$el.remove();for(var e=d.length-1;0<=e;e--)d[e]===s&&d.splice(e,1);if(0==d.length){var i=$("body").removeClass("ui-scrollless").children(".ui-dialog-mask").fadeOut(200);setTimeout(function(){i.remove()},200)}l.isFunction(n)&&n()},r?200:0),this.trigger("closed")}}},t.getTitle=function(){return this.dialogView.children("header").find(".title").text()},t.setTitle=function(t){t=l.isBlank(t)?"&nbsp;":t,this.dialogView.children("header").find(".title").html(t)},t.getContent=function(){var t=this._getContentView();return t&&(t=VRender.Component.get(t)||t),t},t.setContent=function(t){b.call(this,$,this.$el,t),_.call(this)},t.setButtons=function(t){y.call(this,$,this.$el,t)},t.getSize=function(){return this.$el.attr("opt-size")||"normal"},t.setSize=function(t){/^small|big|auto$/.test(t)?this.$el.attr("opt-size",t):this.$el.removeAttr("opt-size")},t.isFill=function(){return 1==this.$el.attr("opt-fill")},t.setFill=function(t){l.isNull(t)||l.isTrue(t)?this.$el.attr("opt-fill","1"):this.$el.removeAttr("opt-fill")},t.isOpen=function(){return!!this.isopened},t.destory=function(){var t=this;this.close(!0,function(){t.$el.remove()})},t.waiting=function(t,e){var i=null;l.isNotBlank(e)&&((i=this.dialogView.children("footer").find(".btnbar > .btn[name='"+e+"']"))&&0<i.length||(i=null));var n=i&&parseInt(i.attr("opt-wait"))||0;n=l.isNull(t)||!0===t?n||-1:t?isNaN(t)?l.isTrue(t)?n||-1:0:Math.max(0,parseInt(t)):0,x.call(this,n,i)},t.setButtonValue=function(t,e){if(l.isNotBlank(t)&&l.isNotNull(e)){var i=this.dialogView.children("footer").find(".btnbar > .btn[name='"+t+"']");i&&0<i.length&&(i=VRender.Component.get(i.children()))&&i.setLabel(e)}},t._getContentView=function(){return this.dialogView.children("section").children(".container").children()},t._isTouchCloseable=function(){return!1!==this.options.touchCloseEnabled};var i=function(t,e){o._baseRender.call(this,t,e)},e=i.prototype=new o._baseRender(!1);e.render=function(t,e){o._baseRender.render.call(this,t,e),e.addClass("ui-dialog").css("display","none"),e.attr("opt-trans","translate");var i=this.options||{};/^small|big|auto$/.test(i.size)&&e.attr("opt-size",i.size),l.isTrue(i.fill)&&e.attr("opt-fill","1"),e.attr("opt-active",l.trimToNull(this.getActiveButton()));var n=t("<div class='dialog-container'></div>").appendTo(e),s=t("<div class='dialog-view'></div>").appendTo(n);return m.call(this,t,e,s),g.call(this,t,e,s),v.call(this,t,e,s),this},e.getTitle=function(){var t=this.options.title;return l.isNull(t)?"标题":l.isBlank(t)?"&nbsp;":t},e.getActiveButton=function(){var t=this.options.openbtn;if(!r&&t){if("string"==typeof t)return t;if(l.isFunction(t.getViewId))return"[vid='"+t.getViewId()+"']"}return null};var a=function(t){this.close()},u=function(t){var e=this,i=$(t.currentTarget);if(!i.is(".disabled, .waiting")){var n=i.attr("name")||"";n&&this._getContentView().trigger("dialog_btn_"+n,n,this);var s=!1;if(n){var a="btn_"+n;this.hasListen(a)&&(s=!0,this.trigger(a,n,this))}this.hasListen("btnclk")&&(s=!0,this.trigger("btnclk",n,this));var r=i.attr("opt-wait");r||0==r?(r=parseInt(r)||0,x.call(this,r,i),0<r&&(this.closeTimerId=setTimeout(function(){e.closeTimerId=0,e.close()},r))):s||/^ok|cancel|submit|close|save|finish$/.test(n)&&this.close(/^cancel|close$/.test(n))}},p=function(t){this.isMounted()?this.open():this.activeBtn.off("tap",arguments.callee)},n=function(){this.isMounted()?this.dialogView.children("section").children(".container").css("maxHeight",$(window).height()-200):$(window).off("resize._"+this.getViewId())},f=function(t){$(t.target).is(this.$el)&&this._isTouchCloseable()&&this.close()},m=function(t,e,i){var n=t("<header></header>").appendTo(i);t("<div class='title'></div>").appendTo(n).html(this.getTitle()),n.append("<button class='closebtn'>x</button>")},g=function(t,e,i){i.append("<section></section>");var n=this.options.content||this.options.view;b.call(this,t,e,n)},v=function(t,e,i){i.append("<footer></footer>"),y.call(this,t,e,this.options.buttons)},b=function(t,e,i){var n=D(e).children("section").empty();n=t("<div class='container'></div>").appendTo(n),l.isNotBlank(i)&&(l.isFunction(i.render)?i.render(n):i.$el?i.$el.appendTo(n):n.append(i))},y=function(i,t,e){var n=this;t.removeClass("has-btns");var s=D(t).children("footer");if(s.children(".btnbar").remove(),e||(e=this._isRenderAsApp()?c:h,e=JSON.parse(JSON.stringify(e))),(e=l.toArray(e))&&0<e.length){t.addClass("has-btns");var a=i("<div class='btnbar'></div>").appendTo(s);a.attr("opt-len",e.length),l.each(e,function(t){var e=i("<div class='btn'></div>").appendTo(a);(e.attr("name",t.name),!0===t.waitclose?e.attr("opt-wait","-1"):!t.waitclose&&0!==t.waitclose||isNaN(t.waitclose)||e.attr("opt-wait",Math.max(0,parseInt(t.waitclose))),r)?o.button.create(l.extend({},t,{target:e})):new(require("../button/index"))(n.context,t).render(e)})}},_=function(){var i=this,t=this._getContentView();t&&0<t.length&&(t.off("submit_to_dialog"),t.on("submit_to_dialog",function(t,e){i.trigger("view_submit",e),i.close()}))},w=function(){var t="resize._"+this.getViewId(),e=$(window).off(t);"auto"==this.getSize()&&(e.on(t,n.bind(this)),n.call(this))},D=function(t){return t.children(".dialog-container").children(".dialog-view")},T=function(){this.options.hasOwnProperty("openbtn")||(this.options.openbtn=this.$el.attr("opt-active"),this.$el.removeAttr("opt-active"));var t=this.options.openbtn;return t?t.$el?t.$el:$(t):null},x=function t(e,i){var n=this,s=i?VRender.Component.get(i.children()):null;e?(s?(i.addClass("waiting"),s.waiting()):this.$el.addClass("waiting"),0<e&&setTimeout(function(){t.call(n,!1,i)},e)):s?(i.removeClass("waiting"),s.waiting(!1)):this.$el.removeClass("waiting")};r?(window.UIDialog=s,o.init(".ui-dialog",s,i)):module.exports=i}}("undefined"!=typeof window),function(n){if(!n||!VRender.Component.ui.confirm){var s=n?VRender.Component.ui:require("../../static/js/init"),r=(s.fn,s.util),t=s.confirm=function(t,e){return s._base.call(this,t,e)},e=t.prototype=new s._base(!1);e.init=function(t,e){s._base.init.call(this,t,e),this.open()},e.open=function(){c.call(this),this.$el.on("tap",".closebtn",o.bind(this)),this.$el.on("tap",".btnbar .ui-btn",l.bind(this))},e.close=function(){u.call(this)},e.onSubmit=function(t){return this.submitHandler=t,this},e.onCancel=function(t){return this.cancelHandler=t,this};var i=function(t,e){s._baseRender.call(this,t,e)},a=i.prototype=new s._baseRender(!1);a.render=function(t,e){return s._baseRender.render.call(this,t,e),e.addClass("ui-confirm"),d.call(this,t,e),this},a.getConfirmLabel=function(){return r.trimToNull(this.options.confirmLabel)||"确认"},a.getCancelLabel=function(){return r.trimToNull(this.options.cancelLabel)||"取消"};var o=function(t){f.call(this)},l=function(t){"ok"==$(t.currentTarget).attr("name")?p.call(this):f.call(this)},d=function(t,e){var i=t("<div class='container'></div>").appendTo(e),n=r.trimToNull(this.options.title);n&&t("<div class='title'></div>").appendTo(i).text(n);var s=t("<div class='content'></div>").appendTo(i);s=t("<div></div>").appendTo(s),this.options.hasOwnProperty("focusHtmlContent")?s.html(this.options.focusHtmlContent||"无内容"):s.text(this.options.content||"无内容");var a=t("<div class='btnbar'></div>").appendTo(i);h(t,a,{name:"ok",label:this.getConfirmLabel(),type:"primary"}),h(t,a,{name:"cancel",label:this.getCancelLabel()}),t("<span class='closebtn'></span>").appendTo(i)},h=function(t,e,i){(e=t("<div></div>").appendTo(e),n)?s.button.create(r.extend(i,{target:e})):new(require("../button/index"))(this.context,i).render(e)},c=function(){var t=$("body").children(".ui-confirm-wrap");t&&0!=t.length||(t=$("<div class='ui-confirm-wrap'></div>").appendTo("body"));var e=this.$el.appendTo(t);setTimeout(function(){e.addClass("animate-in")},50)},u=function(){var e=this.$el.addClass("animate-out");setTimeout(function(){e.removeClass("animate-in").removeClass("animate-out"),e.remove();var t=$("body").children(".ui-confirm-wrap");0==t.children().length&&t.remove()},500),this.trigger("close")},p=function(){u.call(this),r.isFunction(this.submitHandler)&&this.submitHandler(),this.trigger("submit")},f=function(){u.call(this),r.isFunction(this.cancelHandler)&&this.cancelHandler(),this.trigger("cancel")};n?(window.UIConfirm=t,s.init(".ui-confirm",t,i)):module.exports=i}}("undefined"!=typeof window),function(a){if(
!a||!VRender.Component.ui.popupmenu){var r=a?VRender.Component.ui:require("../../static/js/init"),s=r.fn,o=r.util,t=r.popupmenu=function(t,e){return r._items.call(this,t,e)},e=t.prototype=new r._items(!1);e.init=function(t,e){r._items.init.call(this,t,e),this.options.autoLoad=!1,this.setActionTarget(this.getActionTarget()),this.$el.on("tap",d.bind(this)),this.$el.on("tap",".menu",h.bind(this)),this.$el.on("tap",".more",c.bind(this)),this._isRenderAsApp()?this.$el.on("tap",".back",u.bind(this)):(this.$el.on("mouseenter",".menu",p.bind(this)),this.$el.on("mouseleave",".menu",f.bind(this)),this.$el.on("mouseenter",".menu-container > .btn",m.bind(this)),this.$el.on("mouseleave",".menu-container > .btn",g.bind(this)))},e.open=function(){var t=this,e=this.$el.show();y.call(this,e),this._isRenderAsApp()?($("body").addClass("ui-scrollless"),setTimeout(function(){e.addClass("animate-open")})):setTimeout(function(){$("body").on("tap._"+t.getViewId(),function(){t.close(),t.trigger("cancel")})})},e.close=function(){var t=this.$el;this._isRenderAsApp()?($("body").removeClass("ui-scrollless"),t.removeClass("animate-open"),t.children(".menu-container").last().height(0),setTimeout(function(){t.empty().hide()},300)):(t.empty().hide(),$("body").off("tap._"+this.getViewId()))},e.destory=function(){var t=this;this.close(),setTimeout(function(){t.$el.remove()},300)},e.getActionTarget=function(){return this.options.hasOwnProperty("actionTarget")||(this.options.actionTarget=o.trimToNull(this.$el.attr("opt-target")),this.$el.removeAttr("opt-target")),this.options.actionTarget},e.setActionTarget=function(t){if(this.actionTarget!=t){var e=(o.trimToNull(this.getActionType())||"click")+"._"+this.getViewId();this.actionTarget&&("string"==typeof this.actionTarget?$("body").off(e,this.actionTarget):this.actionTarget.off(e)),this.actionTarget=t,this.actionTarget&&("string"==typeof this.actionTarget?$("body").on(e,this.actionTarget,l.bind(this)):(this.actionTarget=$(this.actionTarget),this.actionTarget.on(e,l.bind(this)))),this.$el.removeAttr("opt-target")}},e.getActionType=function(){return this.options.hasOwnProperty("actionType")||(this.options.actionType=o.trimToNull(this.$el.attr("opt-trigger")),this.$el.removeAttr("opt-trigger")),this.options.actionType},e.setActionType=function(t){this.options.actionType=t,this.$el.removeAttr("opt-trigger")},e.getIconField=function(){return this.options.hasOwnProperty("iconField")||(this.options.iconField=o.trimToNull(this.$el.attr("opt-ic"))||"icon",this.$el.removeAttr("opt-ic")),this.options.iconField},e.setIconField=function(t){this.options.iconField=t,this.$el.removeAttr("opt-ic")},e.getIconFunction=function(){return s.getFunction.call(this,"iconFunction","icfunc")},e.setIconFunction=function(t){this.options.iconFunction=t,this.$el.children(".ui-fn[name='icfunc']").remove()},e.getOffsetLeft=function(){return this.options.hasOwnProperty("offsetLeft")||(this.options.offsetLeft=this.$el.attr("opt-offsetl"),this.$el.removeAttr("opt-offsetl")),this.options.offsetLeft?o.getFormatSize(this.options.offsetLeft,this._isRenderAsRem()):null},e.setOffsetLeft=function(t){this.options.offsetLeft=t,this.$el.removeAttr("opt-offsetl")},e.getOffsetTop=function(){return this.options.hasOwnProperty("offsetTop")||(this.options.offsetTop=this.$el.attr("opt-offsett"),this.$el.removeAttr("opt-offsett")),this.options.offsetTop?o.getFormatSize(this.options.offsetTop,this._isRenderAsRem()):null},e.setOffsetTop=function(t){this.options.offsetTop=t,this.$el.removeAttr("opt-offsett")},e._getChildrenField=function(){return"children"},e._getDisabledField=function(){return"disabled"},e._getIcon=function(t){var e=this.getIconFunction();if(o.isFunction(e))return e(t);var i=this.getIconField();return t&&i?t[i]:null},e._isDisabled=function(t){if(t){var e=this._getDisabledField();return!(!e||!o.isTrue(t[e]))}return!0},e._isChecked=function(t){return!!t&&!!t.checked},e._checkIfEmpty=function(){};var i=function(t,e){r._itemsRender.call(this,t,e)},n=i.prototype=new r._itemsRender(!1);n.render=function(t,e){r._baseRender.render.call(this,t,e),e.addClass("ui-popupmenu");var i=this.options||{};if(!a){var n=i.actionTarget;n&&("string"==typeof n?e.attr("opt-target",o.trimToEmpty(n)):o.isFunction(n.getViewId)&&e.attr("opt-target","[vid='"+n.getViewId()+"']")),i.actionType&&e.attr("opt-trigger",i.actionType);var s=i.iconFunction;o.isFunction(s)?BaseRender.fn.renderFunction(e,"icfunc",s):i.iconField&&e.attr("opt-ic",i.iconField),i.childrenField&&e.attr("opt-child",i.childrenField),i.disabledField&&e.attr("opt-disable",i.disabledField),i.offsetLeft&&e.attr("opt-offsetl",i.offsetLeft),i.offsetTop&&e.attr("opt-offsett",i.offsetTop)}return this},n.doAdapter=function(t,e){var i=this;if(o.isArray(t)){var n=o.map(t,function(t){return s.doAdapter.call(i,t)});return t.title&&(backend?n.unshift({__group__:t.title}):n.title=t.title),n}return s.doAdapter.call(this,t,e)},n._renderItems=function(t,e){},n._renderEmptyView=function(){},n._renderLoadView=function(){};var l=function(t){this.isMounted(this.$el)?this.open():this.setActionTarget(null)},d=function(t){return this._isRenderAsApp()&&$(t.target).is(".ui-popupmenu")&&(this.close(),this.trigger("cancel")),!1},h=function(t){var i=this,e=$(t.currentTarget);if(!e.is(".disabled"))if(e.is(".has-child"))this._isRenderAsApp()&&y.call(this,e);else{var n=M.call(this,e);if(n.toggle)if(n.checked)n.toggleRadio||(n.checked=!1);else{!function e(t){t&&0<t.length&&o.each(t,function(t){o.isArray(t)?e(t):(t.toggle===n.toggle&&(t.checked=!1),e(k.call(i,t)))})}(this.getData()),n.checked=!0}this.trigger("itemclick",n),this.close()}},c=function(t){var e=$(t.currentTarget),i=e.parent().parent().parent(),n=I.call(this),s=C.call(this);s.p_no=parseInt(e.attr("page-no"))||1,s.p_no+=1;var a=i.data("itemData");s.pid=this._getDataKey(a),e.parent().remove();var r=a?k.call(this,a):this.getData();r.pop(),x.call(this,i,n,s,function(t,e){e&&0<e.length&&o.each(e,function(t){r.push(t)})})},u=function(t){var e=$(t.currentTarget).parent();e.height(0);var i=e.prev();i.height(0),setTimeout(function(){e.remove(),i.height(i.get(0).scrollHeight)},120)},p=function(t){var e=$(t.currentTarget);if(!e.is(".disabled")){var i=e.parent().parent().parent(),n=i.find(".hover");if(n&&0<n.length){n.removeClass("hover"),D.call(this,i);var s=parseInt(n.attr("t-hover"));s&&(clearTimeout(s),n.removeAttr("t-hover"))}e.addClass("hover"),e.is(".has-child")&&y.call(this,e)}},f=function(t){var e=$(t.currentTarget),i=e.data("submenu");if(!i||0==i.length){var n=setTimeout(function(){e.removeClass("hover"),e.removeAttr("t-hover")},100);e.attr("t-hover",n)}},m=function(t){var r=$(t.currentTarget),o=r.parent();o.attr("t_scroll",setTimeout(function(){var i=o.children(".menus"),n=o.height()-i.height(),s=parseInt(o.attr("scroll-top"))||0,a=r.is(".up")?5:-5;!function e(){var t=setTimeout(function(){var t=s+a;r.is(".up")?0<t&&(t=0):t<n&&(t=n),s!=t&&(s=t,o.attr("scroll-top",s),i.css("transform","translate(0px, "+s+"px)")),e()},50);o.attr("t_scroll",t)}()},200))},g=function(t){var e=$(t.currentTarget).parent(),i=parseInt(e.attr("t_scroll"));i&&(clearTimeout(i),e.removeAttr("t_scroll"))},v=function(n,t){var s=this;if(t&&0!=t.length){var a=n.children(".grp").last();if(o.each(t,function(t,e){if(o.isArray(t)&&0<t.length)a=$("<div class='grp'></div>").appendTo(n),t.title&&$("<div class='title'></div>").appendTo(a).text(t.title),o.each(t,function(t,e){if(0===e&&t.__group__)$("<div class='title'></div>").appendTo(a).text(t.__group__);else if("more"==t.__type__){var i=$("<div class='more'></div>").appendTo(a);i.attr("page-no",t.page),i.text(s.options.moreText||"加载更多")}else{var n=$("<div class='menu'></div>").appendTo(a);b.call(s,n,t)}}),a=null;else{a&&0!=a.length||(a=$("<div class='grp'></div>").appendTo(n));var i=$("<div class='menu'></div>").appendTo(a);b.call(s,i,t)}}),this._isRenderAsApp()){var e=n.parent();e.height(0),setTimeout(function(){e.height(e.get(0).scrollHeight)})}}},b=function(t,e){t.data("itemData",e);var i=this._getIcon(e);o.isNotBlank(i)&&$("<i></i>").appendTo(t).css("backgroundImage","url("+i+")");var n=$("<div></div>").appendTo(t),s=this.getItemRenderer();if(o.isFunction(s)){var a=s($,n,e);o.isNotNull(a)&&n.empty().append(a)}else{var r=this._getDataLabel(e);n.text(o.trimToEmpty(r))}k.call(this,e)&&t.addClass("has-child"),this._isDisabled(e)&&t.addClass("disabled").attr("disabled","disabled"),this._isChecked(e)&&t.addClass("checked")},y=function(t){var e=M.call(this,t),i=R.call(this,t),n=_.call(this,t,e,i);if(o.isNull(n)){if(!T.call(this,t))return}else if(!(n&&0<n.length||T.call(this,t)))return;var s=$("<div class='menu-container'></div>").appendTo(this.$el);s.append("<div class='btn up'></div><div class='btn down'></div>"),this._isRenderAsApp()&&!A(t)&&$("<div class='back'></div>").appendTo(s).text(this.options.backText||"返回");var a=$("<div class='menus'></div>").appendTo(s);v.call(this,a,n),t.data("submenu",s),s.data("itemData",e),w.call(this,t,s),this.trigger("open",e)},_=function(t,e,i){var n={type:"open_before"};this.trigger(n,e,i),n.hasOwnProperty("returnValue")&&(i=n.returnValue);var s=i?o.toArray(i):null;e&&(e[this._getChildrenField()]=s);return s},w=function(t,e){if(!this._isRenderAsApp()){var i=A(t);if(i)e.css("left",this.getOffsetLeft()||""),e.css("top",this.getOffsetTop()||"");else{var n=t.offset();n.top-=3,n.left+=t.outerWidth()+1,e.offset(n)}var s=o.offset(e),a=s.windowHeight;if(i&&(a-=s.top),e.css("maxHeight",a+"px"),!i){var r=e.offset();s.isOverflowX&&(r.left-=s.width+t.outerWidth()),s.isOverflowY&&(r.top-=s.top+s.height-s.windowHeight),e.offset({left:r.left,top:r.top})}e.height()<e.children(".menus").height()&&e.addClass("scroll").css("minHeight","80px")}},D=function(t){for(var e=this.$el.children(".menu-container"),i=t.index(),n=e.length-1;0<=n;n--){if(n<=i)return;e.eq(n).remove()}},T=function(a){var r=this,t=I.call(this);if(o.isBlank(t))return!1;var e=C.call(this)||{};return e.p_no=1,e.pid=S.call(this,a),setTimeout(function(){var s=a.data("submenu");x.call(r,s,t,e,function(t,e){var i=!1;if(e&&0!=e.length||(i=!0,(e=[{label:"没有选项"}])[0][r._getDisabledField()]=!0),A(a))r.options.data=e;else{var n=M.call(r,a);n&&(n[r._getChildrenField()]=e)}i&&v.call(r,s.children(".menus"),e)})},0),!0},
x=function(t,e,i,n){var s=this,a=t.children(".menus"),r=$("<div class='grp'></div>").appendTo(a);$("<div class='loading'></div>").appendTo(r).append(this.options.loadingText||"正在加载..."),VRender.Component.load.call(this,e,i,function(t,e){r.remove();var i=t?null:o.toArray(e);i&&0<i.length&&(i[0].children=[],s.hasMore()&&i.push([{__type__:"more",page:s._pageInfo.page}]),v.call(s,a,i)),n(t,i)})},I=function(){return this.lastLoadApi?this.lastLoadApi:this.options.hasOwnProperty("api")?this.options.api:this.$el.attr("api-name")},C=function(){if(this.lastLoadParams)return this.lastLoadParams;if(this.options.hasOwnProperty("params"))return this.options.params;try{return JSON.parse(this.$el.attr("api-params")||null)}catch(t){}return null},A=function(t){return t.is(".ui-popupmenu")},S=function(t){return this._getDataKey(M.call(this,t))},M=function(t){return A(t)?null:t.data("itemData")},R=function(t){if(A(t))return this.getData();var e=M.call(this,t);return k.call(this,e)},k=function(t){if(t){var e=this._getChildrenField();if(o.isArray(t[e]))return t[e]}return null};a?(window.UIPopupMenu=t,r.init(".ui-popupmenu",t,i)):module.exports=i}}("undefined"!=typeof window);