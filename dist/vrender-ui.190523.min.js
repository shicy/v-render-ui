"use strict";!function(n){if(!n||!VRender.Component.ui){var l=n?VRender.Utils:require(""+__vrender__).Utils,a={doAdapter:function(t,e){if(t&&t._vr_adapter_flag)return t;var i=this.options.dataAdapter||this.options.adapter;return l.isFunction(this.getDataAdapter)&&(i=this.getDataAdapter()),l.isFunction(i)&&(t=i(t,e))&&(t._vr_adapter_flag=!0),t},getDataKey:function(t){if(l.isBlank(t))return null;if(l.isPrimitive(t))return t;var e=this.options.keyField;return l.isFunction(this.getKeyField)&&(e=this.getKeyField()),l.isNotBlank(e)?t[e]:t.hasOwnProperty("id")?t.id:t.hasOwnProperty("code")?t.code:t.hasOwnProperty("value")?t.value:null},getDataLabel:function(t,e){var i=this.options.labelFunction;if(l.isFunction(this.getLabelFunction)&&(i=this.getLabelFunction()),l.isFunction(i))return i.call(this,t,e);if(l.isBlank(t))return"";if(l.isPrimitive(t))return""+t;var n=this.options.labelField;return l.isFunction(this.getLabelField)&&(n=this.getLabelField()),l.isNotBlank(n)?l.isNull(t[n])?"":t[n]:t.hasOwnProperty("label")?l.isNull(t.label)?"":t.label:t.hasOwnProperty("name")?l.isNull(t.name)?"":t.name:t.hasOwnProperty("value")?l.isNull(t.value)?"":t.value:""+t},getMapData:function(t){var e=this.options.dataMapper||this.options.mapper;if(l.isFunction(this.getDataMapper)&&(e=this.getDataMapper()),l.isFunction(e))return e(t);if(l.isNull(t))return null;if(l.isPrimitive(t))return t;var i={};return t.hasOwnProperty("id")&&(i.id=t.id),t.hasOwnProperty("code")&&(i.code=t.code),t.hasOwnProperty("name")&&(i.name=t.name),t.hasOwnProperty("value")&&(i.value=t.value),t.hasOwnProperty("label")&&(i.label=t.label),i},isMultiple:function(){return this.options.hasOwnProperty("multiple")?l.isTrue(this.options.multiple):l.isTrue(this.options.multi)},renderData:function(t,e){if(l.isFunction(this.getMapData)&&(e=this.getMapData(e)),e)if(l.isPrimitive(e))t.attr("data-v",e);else for(var i in e)t.attr("data-"+i,l.trimToEmpty(e[i]))},renderFunction:function(t,e,i){!n&&l.isNotBlank(e)&&l.isFunction(i)&&t.write("<div class='ui-fn' style='display:none' name='"+e+"' fn-state='"+(i._state||"")+"' fn-data='"+(i._data||"")+"'>"+escape(i)+"</div>")},getFunction:function(t,e){if(this.options.hasOwnProperty(t))return this.options[t];if(this.hasOwnProperty(t))return this[t];if(e&&this.options.hasOwnProperty(e))return this.options[e];var i=null,n=this.$el.children(".ui-fn[name='"+(e||t)+"']");if(n&&0<n.length){if(i=n.text(),l.isNotBlank(i)&&((i=new Function("var Utils=VRender.Utils;return ("+unescape(i)+");")())._state=n.attr("fn-state")||null,i._data=n.attr("fn-data")||null,i._data))try{i._data=JSON.parse(i._data)}catch(t){}n.remove()}return this[t]=i},renderSubView:function(t,e){e&&(l.isFunction(e.render)?e.render(t):t.append(e.$el||e))},load:function(t,e,a){var s=this;if(t=t||this.lastLoadApi||this.$el.attr("api-name"),l.isBlank(t))return!1;var r=this.$el.addClass("is-loading"),o=this.loadTimerId=Date.now();return Component.load.call(this,t,e,function(t,e){if(o==s.loadTimerId){r.removeClass("is-loading");var i=l.isFunction(s.getPaginator)&&s.getPaginator();if(i&&l.isFunction(i.set)){var n=s._pageInfo||{};i.set(n.total,n.page,n.size)}l.isFunction(a)&&a(t,e)}}),!0},getIntValues:function(t,e,i){l.isArray(t)||(t=l.isBlank(t)?[]:(""+t).split(",")),e=l.isNull(e)?Number.NEGATIVE_INFINITY:e,i=l.isNull(i)?Number.POSITIVE_INFINITY:i;var n=[];return l.each(t,function(t){isNaN(t)||(t=parseInt(t),!isNaN(t)&&n.indexOf(t)<0&&e<=t&&t<=i&&n.push(t))}),n},equalIndex:function(t,e){if(t=a.getIntValues(t,0),e=a.getIntValues(e,0),t.length!=e.length)return!1;t.sort(function(t,e){return t-e}),e.sort(function(t,e){return t-e});for(var i=0,n=t.length;i<n;i++)if(t[i]!=e[i])return!1;return!0},snapshoot:function(){var n={},a={},s=this,t={};return this._rootSnapshoot||(this._rootSnapshoot=t),t.shoot=function(t,e){if(t=t||n,l.isFunction(s._snapshoot_shoot)){var i=Array.prototype.slice.call(arguments);i[0]=t,s._snapshoot_shoot.apply(s,i)}else t.data=s.getData()},t.compare=function(t){var e=Array.prototype.slice.call(arguments);return l.isFunction(s._snapshoot_compare)?s._snapshoot_compare.apply(s,[n].concat(e)):(this.shoot.apply(this,[a].concat(e)),n.data==a.data)},t.done=function(t){var e=!1;if(s._rootSnapshoot==this){var i=Array.prototype.slice.call(arguments);this.compare.apply(this,i)||(this.shoot.apply(this,[a].concat(i)),l.isFunction(s._snapshoot_change)&&s._snapshoot_change(a.data,n.data),s.trigger("change",a.data,n.data),s.$el.trigger("change",a.data,n.data),e=!0)}return this.release(),e},t.release=function(){s._rootSnapshoot==this&&(s._rootSnapshoot=null)},t.getState=function(){return n},t.shoot(n),a.data=n.data,t},getDropdownHeight:function(t,e){var i=0;i=this._isRenderAsApp()?.8*$(window).height():parseInt(t.css("maxHeight"))||e||300;var n=t.get(0).scrollHeight;return n<i&&(i=n),i},mouseDebounce:function(t,e){var i=$(t.currentTarget),n=parseInt(i.attr("timerid"));n&&(clearTimeout(n),i.removeAttr("timerid")),"mouseleave"==t.type&&(n=setTimeout(function(){i.removeAttr("timerid"),e()},500),i.attr("timerid",n))}};if(n){var s=VRender.Component;a.init=function(i,n,e){s.register(i,n),n.create=function(t){return s.create(t,n,e)},n.find=function(t){return s.find(t,i,n)},n.findMe=function(t){var e=s.find(t,i,n);return e&&e[0]||null},n.instance=function(t){return s.instance(t,i)},n.prototype._create=function(t){return t=t||{},l.isFunction(this.isWidthEnabled)&&(t.widthDisabled=!this.isWidthEnabled()),l.isFunction(this.isHeightEnabled)&&(t.heightDisabled=!this.isHeightEnabled()),s.create(t,null,e)}},a.isElement=function(t){return t instanceof Element||t instanceof $}}n?(VRender.Component.ui={util:l,fn:a},VRender.Component.ui.init=a.init):(exports.util=l,exports.fn=a,require("./base"),require("./items"),require("./selectable"))}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui._base){var e=t?VRender.Component.ui:require("./init"),a=e.fn,s=e.util,i=function(){},n=i.prototype=t?new VRender.EventEmitter:new Object;n._doAdapter=function(t){return t?a.doAdapter.call(this,t):null},n._isRenderAsApp=function(){return t?VRender.ENV.isApp:(this.hasOwnProperty("_isApp")||(this._isApp=!1,this.context&&s.isFunction(this.context.isRenderAsApp)&&(this._isApp=this.context.isRenderAsApp())),this._isApp)},n._isRenderAsIphone=function(){return t?VRender.ENV.isIphone:(this.hasOwnProperty("_isIphone")||(this._isIphone=!1,this.context&&s.isFunction(this.context.isRenderAsIphone)&&(this._isIphone=this.context.isRenderAsIphone())),this._isIphone)},n._isRenderAsRem=function(){return t?VRender.ENV.useRem:(this.hasOwnProperty("_isRem")||(this._isRem=!1,this.context&&s.isFunction(this.context.isRenderAsRem)&&(this._isRem=this.context.isRenderAsRem())),this._isRem)},n.getData=function(){return this.options.data=this._doAdapter(this.options.data),this.options.data},n._getDataKey=function(t){return a.getDataKey.call(this,t)},n._getDataLabel=function(t){return a.getDataLabel.call(this,t)};var r=e._base=function(t,e){if(0<arguments.length){a.isElement(t)||(e=null,t=this._create(t));var i=VRender.Component.get(t);if(i)return i;var n=this.$el=$(t);return n.data(VRender.Component.bindName,this),this.options=e||{},this.init(n,this.options),this}},o=r.prototype=new i;r.init=function(t,e){var i=this;d.call(this,t,e),setTimeout(function(){p.call(i)})},r.getInitParams=function(){if(!this.initParams){var t=null;if(this.options.hasOwnProperty("params"))t=this.options.params;else try{t=JSON.parse(this.$el.attr("api-params")||null),this.$el.removeAttr("api-params")}catch(t){}this.initParams=s.extend({},t)}return s.extend({},this.initParams)},r.isAutoLoad=function(){return this.options.hasOwnProperty("autoLoad")||(this.options.autoLoad=this.$el.attr("api-autoload")),this.$el.removeAttr("api-autoload"),s.isTrue(this.options.autoLoad)},o.init=function(t,e){r.init.call(this,t,e)},o.getViewId=function(){return this.$el.attr("vid")},o.getInitParams=function(){return r.getInitParams.call(this)},o.setData=function(t){this.options.data=t,this.rerender()},o.getDataAdapter=function(){return a.getFunction.call(this,"dataAdapter","adapter")},o.setDataAdapter=function(t){this.options.dataAdapter=t,delete this.options.adapter,this.$el.children(".ui-fn[name='adapter']").remove(),this.rerender()},o.getDataMapper=function(){return a.getFunction.call(this,"dataMapper","mapper")},o.setDataMapper=function(t){this.options.dataMapper=t,delete this.options.mapper,this.$el.children(".ui-fn[name='mapper']").remove(),this.rerender()},o.isDisabled=function(){return this.$el.is(".disabled")},o.setDisabled=function(t){s.isNull(t)||s.isTrue(t)?this.$el.addClass("disabled").attr("disabled","disabled"):this.$el.removeClass("disabled").removeAttr("disabled","disabled")},o.setVisible=function(t){s.isNull(t)||s.isTrue(t)?this.$el.removeClass("ui-hidden"):this.$el.addClass("ui-hidden")},o.destory=function(){this.$el.remove()},o.rerender=function(){},o.isMounted=function(){return 0<$("body").find(this.$el).length},o._snapshoot=function(){return a.snapshoot.call(this)},o._getScrollContainer=function(){return this.$el.attr("opt-box")},o.load=function(t,e,i){var n=this;return s.isFunction(this._loadBefore)&&this._loadBefore(t,e),a.load.call(this,t,e,function(t,e){t||(s.isFunction(n.setData)?n.setData(e):n.options.data=e),setTimeout(function(){s.isFunction(n._loadAfter)&&n._loadAfter(t,e),s.isFunction(i)&&i(t,e),n.trigger("loaded",t,e)})})},o.reload=function(t,e){s.isFunction(t)&&(e=t,t=null);var i=this.lastLoadParams||{};return!isNaN(t)&&0<t&&(i.p_no=t),this.load(this.lastLoadApi,i,e)},o.isLoading=function(){return this.$el.is(".is-loading")};var l=e._baseRender=function(t,e){this.context=e?t:null,this.options=e||t||{}},u=l.prototype=new i;l.render=function(t,e){e.addClass("vrender-ui"),this.renderData(t,e),a.renderFunction.call(this,e,"adapter",this.getDataAdapter()),a.renderFunction.call(this,e,"mapper",this.getDataMapper())},u.render=function(t,e){return l.render.call(this,t,e),this},u.renderData=function(t,e){a.renderData.call(this,e,this.getData())},u.getDataAdapter=function(){return this.options.dataAdapter||this.options.adapter},u.getDataMapper=function(){return this.options.dataMapper||this.options.mapper},u.getMapData=function(t){return a.getMapData.call(this,t)};var d=function(t,e){t.attr("id",s.trimToNull(e.id)||void 0),t.attr("name",s.trimToNull(e.name)||void 0);var i=e.className||e.cls;if(s.isNotBlank(i)&&t.addClass(i),s.isNotBlank(e.style)&&t.addClass(e.style),e.hasOwnProperty("disabled")&&this.setDisabled(s.isTrue(e.disabled)),!1===e.visible||"gone"===e.visible?t.css("display","none"):"hidden"===e.visible&&t.css("visibility","hidden"),t.attr("ref",s.trimToNull(e.ref)||void 0),!e.data){var n=t.attr("data-items");if(n)try{e.data=JSON.parse(unescape(n))}catch(t){}}this.$el.removeAttr("data-items")},p=function(){var t=this;if(r.isAutoLoad.call(this)&&s.isFunction(this.load)){var e=this.options.api||this.$el.attr("api-name"),i=$.extend({},this.getInitParams()),n=s.isFunction(this.getPaginator)&&this.getPaginator();n&&(!i.p_no&&s.isFunction(n.getPage)&&(i.p_no=n.getPage()),!i.p_size&&s.isFunction(n.getSize)&&(i.p_size=n.getSize())),this.load(e,i,function(){setTimeout(function(){h.call(t)})})}},h=function(){function t(t){s.isFunction(i.setSelectedIndex)&&i.setSelectedIndex(t)}function e(t){s.isFunction(i.setSelectedKey)&&i.setSelectedKey(t)}var i=this,n=this.options||{};n.hasOwnProperty("selectedIndex")?t(n.selectedIndex):s.isNotBlank(this.$el.attr("data-tryindex"))?t(this.$el.attr("data-tryindex")):n.hasOwnProperty("selectedId")?e(n.selectedId):s.isNotBlank(this.$el.attr("data-tryid"))&&e(this.$el.attr("data-tryid")),delete n.selectedIndex,delete n.selectedId,this.$el.removeAttr("data-tryindex"),this.$el.removeAttr("data-tryid")}}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui._items){var e=t?VRender.Component.ui:require("./init");(e._items=function(t,e){}).prototype=new Object,(e._itemsRender=function(t,e){}).prototype=new Object}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui._select){var e=t?VRender.Component.ui:require("./init");(e._select=function(t,e){}).prototype=new Object,(e._selectRender=function(t,e){}).prototype=new Object}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.group){var n=t?VRender.Component.ui:require("../../static/js/init"),d=n.util,e="vertical",p="horizontial",i=n.group=function(t,e){return n._base.call(this,t,e)},a=i.prototype=new n._base;a.getOrientation=function(){return this.$el.attr("opt-orientation")},a.setOrientation=function(t){this.$el.removeClass(p).removeClass(e),this.$el.removeAttr("opt-orientation"),t!==p&&t!==e||this.$el.addClass(t).attr("opt-orientation",t),s.call(this)},a.getGap=function(){return this.$el.attr("opt-gap")||0},a.setGap=function(t){this.$el.attr("opt-gap",d.trimToEmpty(t)),s.call(this)},a.getAlign=function(){return this.$el.attr("opt-align")},a.setAlign=function(t){this.$el.attr("opt-align",d.trimToEmpty(t)),s.call(this)},a.append=function(t){var e=this;if(!arguments||0==arguments.length)return this;for(var i=0,n=arguments.length;i<n;i++){var a=arguments[i];d.isArray(a)?a.forEach(function(t){e.add(t)}):this.add(a)}return this},a.add=function(t,e){if(d.isNotBlank(t)){var i=t.$el||t;this.getOrientation()&&(i=$("<div class='grp-item'></div>").append(i)),e=isNaN(e)||""===e?-1:parseInt(e);var n=this.$el.children();0<=e&&e<n.length?n.eq(e).before(i):this.$el.append(i),s.call(this)}return t},a.removeAt=function(t){var e=this.$el.children().eq(t).remove();return s.call(this),e.children()};var s=function(){var t=this;d.debounce("group_layout-"+this.getViewId(),function(){c.call(t,$,t.$el)})},r=function(t,e){n._baseRender.call(this,t,e)},o=r.prototype=new n._baseRender;o.render=function(t,e){n._baseRender.render.call(this,t,e),e.addClass("ui-group");var i=this.getOrientation();return i&&(e.addClass(i),e.attr("opt-orientation",i)),e.attr("opt-gap",this.getGap()),e.attr("opt-align",this.getAlign()),l.call(this,t,e),this},o.getOrientation=function(){var t=this.options.orientation;return t==p||t==e?t:null},o.getGap=function(){return this.options.gap},o.getAlign=function(){return this.options.align};var l=function(t,e){h.call(this,t,e,u.call(this))},u=function(){return this.options.children||this.options.subViews||this.options.views},h=function(i,n,t){t=d.toArray(t);var a=this.getOrientation();d.each(t,function(t){if(d.isNotNull(t)){var e=n;a&&(e=i("<div class='grp-item'></div>").appendTo(n)),d.isFunction(t.render)?t.render(e):e.append(t.$el||t)}}),c.call(this,i,n)},c=function(t,e){var i="",n="",a="",s="",r="",o=d.getFormatSize(this.getGap(),this._isRenderAsRem())||"";this.getOrientation()==p?(r="inline-block",i=o):n=o;var l=this.getAlign()||"";l=l.toLowerCase(),/left/.test(l)?a="left":/center/.test(l)?a="center":/right/.test(l)&&(a="right"),/top/.test(l)?s="top":/middle/.test(l)?s="middle":/bottom/.test(l)&&(s="bottom"),e.css("text-align",a);var u=e.children();u.css("display",r),u.css("vertical-align",s),u.css("margin-left",i).css("margin-top",n),u.eq(0).css("margin-left","").css("margin-top","")};t?(window.UIGroup=i,n.init(".ui-group",i,r)):module.exports=r}}("undefined"!=typeof window);