"use strict";!function(n){if(!n||!VRender.Component.ui){var l=n?VRender.Utils:require(""+__vrender__).Utils,s={doAdapter:function(t,e){if(t&&t._vr_adapter_flag)return t;var i=this.options.dataAdapter||this.options.adapter;return l.isFunction(this.getDataAdapter)&&(i=this.getDataAdapter()),l.isFunction(i)&&(t=i(t,e))&&(t._vr_adapter_flag=!0),t},getDataKey:function(t){if(l.isBlank(t))return null;if(l.isPrimitive(t))return t;var e=this.options.keyField;return l.isFunction(this.getKeyField)&&(e=this.getKeyField()),l.isNotBlank(e)?t[e]:t.hasOwnProperty("id")?t.id:t.hasOwnProperty("code")?t.code:t.hasOwnProperty("value")?t.value:null},getDataLabel:function(t,e){var i=this.options.labelFunction;if(l.isFunction(this.getLabelFunction)&&(i=this.getLabelFunction()),l.isFunction(i))return i.call(this,t,e);if(l.isBlank(t))return"";if(l.isPrimitive(t))return""+t;var n=this.options.labelField;return l.isFunction(this.getLabelField)&&(n=this.getLabelField()),l.isNotBlank(n)?l.isNull(t[n])?"":t[n]:t.hasOwnProperty("label")?l.isNull(t.label)?"":t.label:t.hasOwnProperty("name")?l.isNull(t.name)?"":t.name:t.hasOwnProperty("value")?l.isNull(t.value)?"":t.value:""+t},getMapData:function(t){var e=this.options.dataMapper||this.options.mapper;if(l.isFunction(this.getDataMapper)&&(e=this.getDataMapper()),l.isFunction(e))return e(t);if(l.isNull(t))return null;if(l.isPrimitive(t))return t;var i={};return t.hasOwnProperty("id")&&(i.id=t.id),t.hasOwnProperty("code")&&(i.code=t.code),t.hasOwnProperty("name")&&(i.name=t.name),t.hasOwnProperty("value")&&(i.value=t.value),t.hasOwnProperty("label")&&(i.label=t.label),i},isMultiple:function(){return this.options.hasOwnProperty("multiple")?l.isTrue(this.options.multiple):l.isTrue(this.options.multi)},renderData:function(t,e){if(l.isFunction(this.getMapData)&&(e=this.getMapData(e)),e)if(l.isPrimitive(e))t.attr("data-v",e);else for(var i in e)t.attr("data-"+i,l.trimToEmpty(e[i]))},renderFunction:function(t,e,i){!n&&l.isNotBlank(e)&&l.isFunction(i)&&t.write("<div class='ui-fn' style='display:none' name='"+e+"' fn-state='"+(i._state||"")+"' fn-data='"+(i._data||"")+"'>"+escape(i)+"</div>")},getFunction:function(t,e){if(this.options.hasOwnProperty(t))return this.options[t];if(this.hasOwnProperty(t))return this[t];if(e&&this.options.hasOwnProperty(e))return this.options[e];var i=null,n=this.$el.children(".ui-fn[name='"+(e||t)+"']");if(n&&0<n.length){if(i=n.text(),l.isNotBlank(i)&&((i=new Function("var Utils=VRender.Utils;return ("+unescape(i)+");")())._state=n.attr("fn-state")||null,i._data=n.attr("fn-data")||null,i._data))try{i._data=JSON.parse(i._data)}catch(t){}n.remove()}return this[t]=i},renderSubView:function(t,e){e&&(l.isFunction(e.render)?e.render(t):t.append(e.$el||e))},getIntValues:function(t,e,i){l.isArray(t)||(t=l.isBlank(t)?[]:(""+t).split(",")),e=l.isNull(e)?Number.NEGATIVE_INFINITY:e,i=l.isNull(i)?Number.POSITIVE_INFINITY:i;var n=[];return l.each(t,function(t){isNaN(t)||(t=parseInt(t),!isNaN(t)&&n.indexOf(t)<0&&e<=t&&t<=i&&n.push(t))}),n},equalIndex:function(t,e){if(t=s.getIntValues(t,0),e=s.getIntValues(e,0),t.length!=e.length)return!1;t.sort(function(t,e){return t-e}),e.sort(function(t,e){return t-e});for(var i=0,n=t.length;i<n;i++)if(t[i]!=e[i])return!1;return!0}};if(n){var d=VRender.Component;s.init=function(i,n,e){d.register(i,n),n.create=function(t){return d.create(t,n,e)},n.find=function(t){return d.find(t,i,n)},n.findMe=function(t){var e=d.find(t,i,n);return e&&e[0]||null},n.instance=function(t){return d.instance(t,i)},n.prototype._create=function(t){return t=t||{},l.isFunction(this.isWidthEnabled)&&(t.widthDisabled=!this.isWidthEnabled()),l.isFunction(this.isHeightEnabled)&&(t.heightDisabled=!this.isHeightEnabled()),d.create(t,null,e)}},s.isElement=function(t){return t instanceof Element||t instanceof $},s.load=function(t,e,s){var a=this;if(t=t||this.lastLoadApi||this.$el.attr("api-name"),l.isBlank(t))return!1;var r=this.$el.addClass("is-loading"),o=this.loadTimerId=Date.now();return d.load.call(this,t,e,function(t,e){if(o==a.loadTimerId){r.removeClass("is-loading");var i=l.isFunction(a.getPaginator)&&a.getPaginator();if(i&&l.isFunction(i.set)){var n=a._pageInfo||{};i.set(n.total,n.page,n.size)}l.isFunction(s)&&s(t,e)}}),!0},s.snapshoot=function(){var n={},s={},a=this,t={};return this._rootSnapshoot||(this._rootSnapshoot=t),t.shoot=function(t,e){if(t=t||n,l.isFunction(a._snapshoot_shoot)){var i=Array.prototype.slice.call(arguments);i[0]=t,a._snapshoot_shoot.apply(a,i)}else t.data=a.getData()},t.compare=function(t){var e=Array.prototype.slice.call(arguments);return l.isFunction(a._snapshoot_compare)?a._snapshoot_compare.apply(a,[n].concat(e)):(this.shoot.apply(this,[s].concat(e)),n.data==s.data)},t.done=function(t){var e=!1;if(a._rootSnapshoot==this){var i=Array.prototype.slice.call(arguments);this.compare.apply(this,i)||(this.shoot.apply(this,[s].concat(i)),l.isFunction(a._snapshoot_change)&&a._snapshoot_change(s.data,n.data),a.trigger("change",s.data,n.data),a.$el.trigger("change",s.data,n.data),e=!0)}return this.release(),e},t.release=function(){a._rootSnapshoot==this&&(a._rootSnapshoot=null)},t.getState=function(){return n},t.shoot(n),s.data=n.data,t},s.getDropdownHeight=function(t,e){var i=0;i=this._isRenderAsApp()?.8*$(window).height():parseInt(t.css("maxHeight"))||e||300;var n=t.get(0).scrollHeight;return n<i&&(i=n),i},s.mouseDebounce=function(t,e){var i=$(t.currentTarget),n=parseInt(i.attr("timerid"));n&&(clearTimeout(n),i.removeAttr("timerid")),"mouseleave"==t.type&&(n=setTimeout(function(){i.removeAttr("timerid"),e()},500),i.attr("timerid",n))}}n?(VRender.Component.ui={util:l,fn:s},VRender.Component.ui.init=s.init):(exports.util=l,exports.fn=s,require("./base"),require("./items"),require("./selectable"))}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui._base){var e=t?VRender.Component.ui:require("./init"),s=e.fn,a=e.util,i=function(){},n=i.prototype=t?new VRender.EventEmitter:new Object;n._doAdapter=function(t){return t?s.doAdapter.call(this,t):null},n._isRenderAsApp=function(){return t?VRender.ENV.isApp:(this.hasOwnProperty("_isApp")||(this._isApp=!1,this.context&&a.isFunction(this.context.isRenderAsApp)&&(this._isApp=this.context.isRenderAsApp())),this._isApp)},n._isRenderAsIphone=function(){return t?VRender.ENV.isIphone:(this.hasOwnProperty("_isIphone")||(this._isIphone=!1,this.context&&a.isFunction(this.context.isRenderAsIphone)&&(this._isIphone=this.context.isRenderAsIphone())),this._isIphone)},n._isRenderAsRem=function(){return t?VRender.ENV.useRem:(this.hasOwnProperty("_isRem")||(this._isRem=!1,this.context&&a.isFunction(this.context.isRenderAsRem)&&(this._isRem=this.context.isRenderAsRem())),this._isRem)},n.getData=function(){return this.options.data=this._doAdapter(this.options.data),this.options.data},n._getDataKey=function(t){return s.getDataKey.call(this,t)},n._getDataLabel=function(t){return s.getDataLabel.call(this,t)};var r=e._base=function(t,e){if(0<arguments.length&&!1!==t){s.isElement(t)||(e=null,t=this._create(t));var i=VRender.Component.get(t);if(i)return i;var n=this.$el=$(t);n.data(VRender.Component.bindName,this),this.options=e||{},this.init(n,this.options)}},o=r.prototype=new i;r.init=function(t,e){var i=this;u.call(this,t,e),setTimeout(function(){h.call(i)})},r.getInitParams=function(){if(!this.initParams){var t=null;if(this.options.hasOwnProperty("params"))t=this.options.params;else try{t=JSON.parse(this.$el.attr("api-params")||null),this.$el.removeAttr("api-params")}catch(t){}this.initParams=a.extend({},t)}return a.extend({},this.initParams)},r.isAutoLoad=function(){return this.options.hasOwnProperty("autoLoad")||(this.options.autoLoad=this.$el.attr("api-autoload")),this.$el.removeAttr("api-autoload"),a.isTrue(this.options.autoLoad)},o.init=function(t,e){r.init.call(this,t,e)},o.getViewId=function(){return this.$el.attr("vid")},o.getInitParams=function(){return r.getInitParams.call(this)},o.setData=function(t){this.options.data=t,this.rerender()},o.getDataAdapter=function(){return s.getFunction.call(this,"dataAdapter","adapter")},o.setDataAdapter=function(t){this.options.dataAdapter=t,delete this.options.adapter,this.$el.children(".ui-fn[name='adapter']").remove(),this.rerender()},o.getDataMapper=function(){return s.getFunction.call(this,"dataMapper","mapper")},o.setDataMapper=function(t){this.options.dataMapper=t,delete this.options.mapper,this.$el.children(".ui-fn[name='mapper']").remove(),this.rerender()},o.isDisabled=function(){return this.$el.is(".disabled")},o.setDisabled=function(t){a.isNull(t)||a.isTrue(t)?this.$el.addClass("disabled").attr("disabled","disabled"):this.$el.removeClass("disabled").removeAttr("disabled","disabled")},o.setVisible=function(t){a.isNull(t)||a.isTrue(t)?this.$el.removeClass("ui-hidden"):this.$el.addClass("ui-hidden")},o.destory=function(){this.$el.remove()},o.rerender=function(){},o.isMounted=function(){return 0<$("body").find(this.$el).length},o._snapshoot=function(){return s.snapshoot.call(this)},o._getScrollContainer=function(){return this.$el.attr("opt-box")},o.load=function(t,e,i){var n=this;return a.isFunction(this._loadBefore)&&this._loadBefore(t,e),s.load.call(this,t,e,function(t,e){t||(a.isFunction(n.setData)?n.setData(e):n.options.data=e),setTimeout(function(){a.isFunction(n._loadAfter)&&n._loadAfter(t,e),a.isFunction(i)&&i(t,e),n.trigger("loaded",t,e)})})},o.reload=function(t,e){a.isFunction(t)&&(e=t,t=null);var i=this.lastLoadParams||{};return!isNaN(t)&&0<t&&(i.p_no=t),this.load(this.lastLoadApi,i,e)},o.isLoading=function(){return this.$el.is(".is-loading")};var l=e._baseRender=function(t,e){0<arguments.length&&!1!==t&&(this.context=e?t:null,this.options=e||t||{})},d=l.prototype=new i;l.render=function(t,e){e.addClass("vrender-ui"),this.renderData(t,e),s.renderFunction.call(this,e,"adapter",this.getDataAdapter()),s.renderFunction.call(this,e,"mapper",this.getDataMapper())},d.render=function(t,e){return l.render.call(this,t,e),this},d.renderData=function(t,e){s.renderData.call(this,e,this.getData())},d.getDataAdapter=function(){return this.options.dataAdapter||this.options.adapter},d.getDataMapper=function(){return this.options.dataMapper||this.options.mapper},d.getMapData=function(t){return s.getMapData.call(this,t)};var u=function(t,e){t.attr("id",a.trimToNull(e.id)||void 0),t.attr("name",a.trimToNull(e.name)||void 0);var i=e.className||e.cls;if(a.isNotBlank(i)&&t.addClass(i),a.isNotBlank(e.style)&&t.addClass(e.style),e.hasOwnProperty("disabled")&&this.setDisabled(a.isTrue(e.disabled)),!1===e.visible||"gone"===e.visible?t.css("display","none"):"hidden"===e.visible&&t.css("visibility","hidden"),t.attr("ref",a.trimToNull(e.ref)||void 0),!e.data){var n=t.attr("data-items");if(n)try{e.data=JSON.parse(unescape(n))}catch(t){}}this.$el.removeAttr("data-items")},h=function(){var t=this;if(r.isAutoLoad.call(this)&&a.isFunction(this.load)){var e=this.options.api||this.$el.attr("api-name"),i=$.extend({},this.getInitParams()),n=a.isFunction(this.getPaginator)&&this.getPaginator();n&&(!i.p_no&&a.isFunction(n.getPage)&&(i.p_no=n.getPage()),!i.p_size&&a.isFunction(n.getSize)&&(i.p_size=n.getSize())),this.load(e,i,function(){setTimeout(function(){c.call(t)})})}},c=function(){function t(t){a.isFunction(i.setSelectedIndex)&&i.setSelectedIndex(t)}function e(t){a.isFunction(i.setSelectedKey)&&i.setSelectedKey(t)}var i=this,n=this.options||{};n.hasOwnProperty("selectedIndex")?t(n.selectedIndex):a.isNotBlank(this.$el.attr("data-tryindex"))?t(this.$el.attr("data-tryindex")):n.hasOwnProperty("selectedId")?e(n.selectedId):a.isNotBlank(this.$el.attr("data-tryid"))&&e(this.$el.attr("data-tryid")),delete n.selectedIndex,delete n.selectedId,this.$el.removeAttr("data-tryindex"),this.$el.removeAttr("data-tryid")}}}("undefined"!=typeof window),function(l){if(!l||!VRender.Component.ui._items){var i=l?VRender.Component.ui:require("./init"),o=i.fn,d=i.util,s=i._items=function(t,e){return i._base.call(this,t,e)},t=s.prototype=new i._base(!1);s.init=function(t,e){i._base.init.call(this,t,e),this._initPager(),this._checkIfEmpty()},s.doAdapter=function(t){a.doAdapter.call(this,t)},s.renderItems=function(t,e){a.renderItems.call(this,$,t,e),this._checkIfEmpty()},s.renderOneItem=function(t,e,i,n){return a.renderOneItem.call(this,$,t,e,i,n)},s.addItem=function(t,e,i){e=d.getIndexValue(e),t=o.doAdapter.call(this,t,e),i=i||this.getData();var n=null,s=this._getItemContainer();if(s&&0<s.length){if(n=this._getNewItem($,s,t,e)){if(0<=e&&e<i.length){var a=this._getItems();a&&0<a.length&&a.eq(e).before(n)}this._renderOneItem($,n,t,e)}this._checkIfEmpty()}return 0<=e&&e<i.length?i.splice(e,0,t):i.push(t),n},s.updateItem=function(t,e,i){if(t=o.doAdapter.call(this,t,e),0<=(e=e||0===e?d.getIndexValue(e):this.getDataIndex(t)))if(e<(i=i||this.getData()).length){var n=this._getItemContainer();if(n&&0<n.length){var s=this._getItems(),a=this._getNewItem($,n,t,e);a?(s.eq(e).before(a).remove(),this._renderOneItem($,a,t,e)):s.eq(e).remove()}this._checkIfEmpty(),i.splice(e,1,t)}else e=-1;return e},s.removeItem=function(t,e,i){if(t&&0<t.length)e=t.index();else{if((e=d.getIndexValue(e))<0)return null;var n=this._getItems();n&&n.length>e&&(t=n.eq(e))}return t&&0<t.length&&(t.remove(),this._checkIfEmpty()),(i=i||this.getData())&&e<i.length?i.splice(e,1):null},s.initPager=function(){if(this.options.hasOwnProperty("pager"))this.setPaginator(this.options.pager);else{var t=this.$el.attr("opt-pager");t&&(t=$(t))&&0<t.length&&(t=VRender.Component.get(t)||VRender.FrontComponent.get(t)||t,this.setPaginator(t)),this.$el.removeAttr("opt-pager")}},s.setPager=function(s){var a=this;this.pager&&d.isFunction(this.pager.off)&&this.pager.off("change"),(this.pager=s)&&d.isFunction(s.on)&&s.on("change",function(t,e){var i=$.extend({},a.lastLoadParams);i.p_no=e&&e.page,i.p_size=e&&e.size,!i.p_no&&d.isFunction(s.getPage)&&(i.p_no=s.getPage()),!i.p_size&&d.isFunction(s.getSize)&&(i.p_size=s.getSize());var n=a._pageInfo||{};i.p_no==n.page&&i.p_size==n.size||a.load(a.lastLoadApi,i)})},s.checkIfEmpty=function(){var t=this._getItems();t&&0<t.length?this.$el.removeClass("is-empty"):this.$el.addClass("is-empty")},s.isDisabled=function(t){if("number"!=typeof t)return"string"==typeof t?this.isDisabled(this.getIndexByName(t)):this.$el.is(".disabled");var e=this._getItemAt(t);return!e||e.is(".disabled")},s.setDisabled=function(t,e){if("string"==typeof e)return this.setDisabled(t,this.getIndexByName(e));var i=this.$el;if("number"==typeof e&&(i=this._getItemAt(e)),i&&((t=!(!d.isNull(t)&&!d.isTrue(t)))?i.addClass("disabled").attr("disabled","disabled"):i.removeClass("disabled").removeAttr("disabled"),d.isFunction(this.getDisableField))){var n=this.getDisableField();if(n){var s=this._getItemData(i);s&&(s[n]=t)}}},t.init=function(t,e){return s.init.call(this,t,e)},t.setData=function(t){this.options.data=this._doAdapter(t),this.rerender()},t.getDataAt=function(t){if((t=d.getIndexValue(t))<0)return null;var e=this.getData()||[];return t<e.length?e[t]:null},t.getDataIndex=function(e){var i=this,t=this.getData();if(t&&0<t.length){var n=this._getDataKey(e);return d.index(t,function(t){return t==e||i._getDataKey(t)==n})}return-1},t.getDataByKey=function(t){return this.getDataAt(this.getIndexByKey(t))},t.getIndexByKey=function(e){var i=this,t=this.getData();return t&&0<t.length?d.index(t,function(t){return i._getDataKey(t)==e}):-1},t.getDataByName=function(t){return this.getDataAt(this.getIndexByName(t))},t.getIndexByName=function(t){var e=this.getData();return e&&0<e.length?d.indexBy(e,"name",t):-1},t.getKeyField=function(){return this.options.keyField||this.$el.attr("opt-key")},t.setKeyField=function(t){t=d.trimToEmpty(t),this.getKeyField()!=t&&(this.options.keyField=t,this.$el.attr("opt-key",this.options.keyField),this.rerender())},t.getLabelField=function(){return this.options.labelField||this.$el.attr("opt-lbl")},t.setLabelField=function(t){t=d.trimToEmpty(t),this.getLabelField()!=t&&(this.options.labelField=t,this.$el.attr("opt-lbl",this.options.labelField),this.rerender())},t.getLabelFunction=function(){return o.getFunction.call(this,"labelFunction","lblfunc")},t.setLabelFunction=function(t){this.getLabelFunction()!=t&&(this.options.labelFunction=t,this.$el.children(".ui-fn[name='lblfunc']").remove(),this.rerender())},t.getItemRenderer=function(){return this.options.hasOwnProperty("renderer")?this.options.renderer:o.getFunction.call(this,"itemRenderer","irender")},t.setItemRenderer=function(t){this.getItemRenderer()!=t&&(this.options.itemRenderer=t,delete this.options.renderer,this.$el.children(".ui-fn[name='irender']").remove(),this.rerender())},t.getPaginator=function(){return this.pager},t.setPaginator=function(t){s.setPager.call(this,t)},t.length=function(){return d.toArray(this.getData()).length},t.isDisabled=function(t){return s.isDisabled.call(this,t)},t.setDisabled=function(t,e){s.setDisabled.call(this,t,e)},t.addItem=function(t,e){return s.addItem.call(this,t,e)},t.updateItem=function(t,e){return s.updateItem.call(this,t,e)},t.removeItem=function(t){return this.removeItemAt(this.getDataIndex(t))},t.removeItemAt=function(t){return s.removeItem.call(this,null,t)},t.addOrUpdateItem=function(t){var e=this.getDataIndex(t);0<=e?this.updateItem(t,e):this.addItem(t,e)},t.getItemData=function(t){var e=$(t);if(e&&0<e.length){var i=this._getItemContainer();if(i&&0<i.length){for(t=e.parent();;){if(!t||0==t.length){e=null;break}if(t.is(i))break;t=(e=t).parent()}if(e&&0<e.length)return this._getItemData(e)}}return null},t.more=function(n){var s=this;if(this.lastLoadApi&&this.hasMore()&&!this.isLoading()){var t=d.extend({},this.lastLoadParams);return t.p_no=parseInt(this._pageInfo&&this._pageInfo.page)||0,t.p_no+=1,d.isFunction(this._moreBefore)?this._moreBefore(this.lastLoadApi,t):d.isFunction(this._loadBefore)&&this._loadBefore(this.lastLoadApi,t),o.load.call(this,this.lastLoadApi,t,function(t,e){if(!t&&d.isArray(e))if(d.isFunction(s.addItem))d.each(e,function(t){s.addItem(t)});else{var i=s.options.data||[];s.options.data=i.concat(e)}setTimeout(function(){d.isFunction(s._moreAfter)?s._moreAfter(t,e):d.isFunction(s._loadAfter)&&s._loadAfter(t,e),d.isFunction(n)&&n(t,e),s.trigger("loaded",t,e)})}),!0}return!1},t.loadPage=function(t,e){if(this.lastLoadApi&&!this.isLoading()){var i=d.extend({},this.lastLoadParams);i.p_no=parseInt(t)||1,this.load(null,i,e)}},t.hasMore=function(){return!!this._pageInfo&&(parseInt(this._pageInfo.page)||1)*(parseInt(this._pageInfo.size)||20)<(parseInt(this._pageInfo.total)||0)},t.isEmpty=function(){if(this.$el.is(".is-empty"))return!0;var t=this.getData();return!t||0==t.length},t.rerender=function(){var e=this;d.debounce("ui_render-"+this.getViewId(),function(){var t=e._getItemContainer();t&&0<t.length&&e._renderItems($,t.empty(),e.getData())})},t._doAdapter=function(t){return s.doAdapter.call(this,t)},t._getItemContainer=function(){return this.$el},t._getNewItem=function(t,e,i,n){return t("<li></li>").appendTo(e)},t._renderItems=function(t,e,i){s.renderItems.call(this,e,i)},t._renderOneItem=function(t,e,i,n){return s.renderOneItem.call(this,e,null,i,n)},t._isDisabled=function(t,e){if(t){var i=this.options;i.hasOwnProperty("disableField")||(i.disableField=this.$el.attr("opt-disabled"));var n=i.disableField;if(n&&t.hasOwnProperty(n))return d.isTrue(t[n])}return!1},t._getItems=function(t){var e=this._getItemContainer();if(e&&0<e.length)return e.children(t)},t._getItemAt=function(n){return 0<=(n=d.getIndexValue(n))?d.find(this._getItems(),function(t,e){var i=parseInt(t.attr("opt-ind"));return isNaN(i)&&(i=e),n==i}):null},t._getItemData=function(t,e){var i=t.data("itemData");if(!i){var n=this.getData();d.isArray(n)&&((isNaN(e)||!e&&0!==e)&&(e=parseInt(t.attr("opt-ind")),isNaN(e)&&(e=t.index())),i=n[e])}return d.isEmpty(i)?null:i},t._initPager=function(){s.initPager.call(this)},t._checkIfEmpty=function(){s.checkIfEmpty.call(this)},t._getLoadText=function(){return this.options.loadingText},t._getLoadView=function(){return this.options.loadingView},t._getMoreText=function(){return this.options.moreText},t._getMoreView=function(){return this.options.moreView},t._getEmptyText=function(){return this.options.emptyText||this.options.empty},t._getEmptyView=function(){return this.options.emptyView};var a=i._itemsRender=function(t,e){i._baseRender.call(this,t,e)},e=a.prototype=new i._baseRender(!1);a.render=function(t,e){i._baseRender.render.call(this,t,e),e.attr("opt-key",d.trimToNull(this.getKeyField())),e.attr("opt-lbl",d.trimToNull(this.getLabelField())),e.attr("opt-disable",d.trimToNull(this.options.disableField)),o.renderFunction(e,"lblfunc",this.getLabelFunction()),o.renderFunction(e,"irender",this.getItemRenderer()),this._renderItems(t,e),this._renderEmptyView(t,e),this._renderLoadView(t,e),this._renderPager(t,e)},a.renderData=function(t,e,i){if(0<(i=d.toArray(i)||[]).length){var n=this.getDataMapper();d.isFunction(n)&&(i=d.map(i,n))}e.attr("data-items",escape(JSON.stringify(i)))},a.renderItems=function(n,s,t){var a=this;if((t=t||this.getData())&&0<t.length){var r=this._render_items=[];d.each(t,function(t,e){var i=a._getNewItem(n,s,t,e);i&&(r.push({item:i,data:t,index:e}),a._renderOneItem(n,i,t,e))}),setTimeout(function(){a._render_items=null})}},a.renderOneItem=function(t,e,i,n,s){l?e.data("itemData",n):this.renderItemData(t,e,n),this._isDisabled(n,s)&&e.addClass("disabled").attr("disabled","disabled"),i=i||e;var a=this.getItemRenderer();if(d.isFunction(a)){var r=null;r=(a._state,a.call(this,t,e,n,s)),d.isNotNull(r)&&i.empty().append(r)}else{var o=this._getDataLabel(n,s);i.html(d.isNull(o)?"":o)}},a.renderPager=function(t,e,i){l||(!i&&d.isFunction(this.getPaginator)&&(i=this.getPaginator()),i&&("string"==typeof i?e.attr("opt-pager",d.trimToNull(i)):d.isFunction(i.getViewId)&&e.attr("opt-pager","[vid='"+i.getViewId()+"']")))},a.renderEmptyView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-empty");var s=d.isFunction(this._getEmptyView)?this._getEmptyView():this.options.emptyView;if(s)o.renderSubView.call(this,n,s);else{(s=t("<div></div>").appendTo(n)).addClass((i||"ui")+"-emptydef");var a=this.options.emptyText||this.options.empty;d.isFunction(this._getEmptyText)&&(a=this._getEmptyText()),(a=d.isNull(a)?"没有数据":d.trimToEmpty(a))&&t("<p></p>").appendTo(s).text(a)}return n},a.renderLoadView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-load");var s=d.isFunction(this._getLoadView)?this._getLoadView():this.options.loadingView;if(s)o.renderSubView.call(this,n,s);else{var a=t("<div></div>").appendTo(n);a.addClass((i||"ui")+"-loaddef");var r=d.isFunction(this._getLoadText)?this._getLoadText():this.options.loadingText;(r=d.isNull(r)?"正在加载..":d.trimToEmpty(r))&&t("<p></p>").appendTo(a).html(r)}return n},a.renderMoreView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-more"),this._pageInfo&&n.attr("page-no",this._pageInfo.page);var s=d.isFunction(this._getMoreView)?this._getMoreView():this.options.moreView;if(s)o.renderSubView.call(this,n,s);else{var a=t("<div></div>").appendTo(n);a.addClass((i||"ui")+"-moredef");var r=d.isFunction(this._getMoreText)?this._getMoreText():this.options.moreText;(r=d.isNull(r)?"加载更多":d.trimToEmpty(r))&&t("<p></p>").appendTo(a).html(r)}return n},a.doAdapter=function(t){var i=this;return(t=d.toArray(t))._vr_adapter_flag||((t=d.map(t,function(t,e){return o.doAdapter.call(i,t,e)}))._vr_adapter_flag=!0),t},e.render=function(t,e){a.render.call(this,t,e)},e.renderData=function(t,e){l||a.renderData.call(this,t,e,this.getData())},e.renderItemData=function(t,e,i){o.renderData.call(this,t,e,i)},e._renderItems=function(t,e){var i=this._getItemContainer(t,e);i&&a.renderItems.call(this,t,i)},e._getNewItem=function(t,e,i,n){return t("<li></li>").appendTo(e)},e._renderOneItem=function(t,e,i,n){a.renderOneItem.call(this,t,e,null,i,n)},e._renderPager=function(t,e){a.renderPager.call(this,t,e)},e._renderEmptyView=function(t,e){a.renderEmptyView.call(this,t,e)},e._renderLoadView=function(t,e){a.renderLoadView.call(this,t,e)},e._renderMoreView=function(t,e){a.renderMoreView.call(this,t,e)},e.getPaginator=function(){return this.options.paginator||this.options.pager},e.getKeyField=function(){return this.options.keyField},e.getLabelField=function(){return this.options.labelField},e.getLabelFunction=function(){return this.options.labelFunction},e.getItemRenderer=function(){return this.options.itemRenderer},e._getItemContainer=function(t,e){return e},e._isDisabled=function(t,e){if(t){var i=this.options.disableField||"disabled";if(i&&t.hasOwnProperty(i))return d.isTrue(t[i])}return!1},e._getDataLabel=function(t,e){return o.getDataLabel.call(this,t,e)},e._doAdapter=function(t){return a.doAdapter.call(this,t)}}}("undefined"!=typeof window),function(r){if(!r||!VRender.Component.ui._select){var i=r?VRender.Component.ui:require("./init"),o=i.fn,l=i.util,s=i._select=function(t,e){return i._items.call(this,t,e)},t=s.prototype=new i._items(!1);s.init=function(t,e){return i._items.init.call(this,t,e)},s.getSelectedIndex=function(t){var n=this,s=this.$el.attr("data-inds");if(l.isNull(s)){s=[];var a=this.$el.attr("data-ids");l.isNull(a)?l.each(this.getData(),function(t,e){n._isSelected(t,e,[],[])&&s.push(e)}):0<a.length&&(a=a.split(","),l.each(this.getData(),function(t,e){var i=n._getDataKey(t);0<=l.index(a,function(t){return t==i})&&s.push(e)}))}else s=o.getIntValues(s,0);return this.isMultiple()?0<s.length?s:null:t?0<s.length?[s[0]]:null:0<s.length?s[0]:-1},s.setSelectedIndex=function(t){var e=l.isFunction(this.length)?this.length()-1:null,i=o.getIntValues(t,0,e);return 1<i.length&&!this.isMultiple()&&(i=[i[0]]),this.$el.attr("data-inds",i.join(",")),this.$el.removeAttr("data-ids"),i},s.getSelectedKey=function(t){var i=this,n=this.$el.attr("data-ids"),e=this.$el.attr("data-inds");if(l.isNotNull(e)){if(n=[],0<(e=o.getIntValues(e,0)).length){var s=this.getData()||[];l.each(e,function(t){var e=t<s.length?s[t]:null;e&&n.push(i._getDataKey(e))})}}else l.isNull(n)?(n=[],l.each(this.getData(),function(t,e){i._isSelected(t,e,[],[])&&n.push(i._getDataKey(t))})):l.isArray(n)||(n=n.split(","));if(!n||0==n.length)return null;var a=[];return l.each(n,function(t){!t&&0!==t||a.push(isNaN(t)?t:parseInt(t))}),0==a.length?null:this.isMultiple()?a:t?[a[0]]:a[0]},s.setSelectedKey=function(n){var s=this;l.isArray(n)||(n=l.isBlank(n)?[]:l.trimToEmpty(n).split(","));var a=[];l.each(this.getData(),function(t,e){var i=s._getDataKey(t);0<=l.index(n,function(t){return t==i})&&a.push(e)}),this.setSelectedIndex(a)},s.getSelectedData=function(t,e){var i=this,n=this.getSelectedIndex(!0),s=[];n||(s=this.getSelectedKey(!0)||[]);var a=[];return e=e||this.getData(),l.each(e,function(t,e){i._isSelected(t,e,n,s)&&a.push(t)}),0==a.length?null:this.isMultiple()?a:t?[a[0]]:a[0]},s.updateSelection=function(){var i=this,n=[];return l.each(this._getItems(),function(t,e){i._isItemSelected(t)&&n.push(e)}),s.setSelectedIndex.call(this,n),n},s.addItem=function(t,e){return i._itemsRender.addItem.call(this,t,e)},s.updateItem=function(t,e){return i._itemsRender.updateItem.call(this,t,e)},s.removeItem=function(t,e){return i._itemsRender.removeItem.call(this,t,e)},t.init=function(t,e){return s.init.call(this,t,e)},t.isMultiple=function(){return"multiple"==this.$el.attr("multiple")},t.setMultiple=function(t){t=!(!l.isNull(t)&&!l.isTrue(t)),this.isMultiple()!=t&&(t?this.$el.attr("multiple","multiple"):this.$el.removeAttr("multiple"),this.rerender())},t.getSelectedIndex=function(t){return s.getSelectedIndex.call(this,t)},t.setSelectedIndex=function(t){var i=this,e=this._snapshoot(),n=ComponentSelect.setSelectedIndex.call(this,t);return l.each(this._getItems(),function(t,e){i._setItemSelected(t,0<=n.indexOf(e))}),e.done(),n},t.getSelectedKey=function(t){return s.getSelectedKey.call(this,t)},t.setSelectedKey=function(t){return s.setSelectedKey.call(this,t)},t.getSelectedData=function(t){return s.getSelectedData.call(this,t)},t.isSelectedIndex=function(t){return!((t=l.getIndexValue(t))<0)&&this._isSelected(this.getDataAt(t),t)},t.isSelectedKey=function(e){if(l.isBlank(e))return!1;var t=this.getSelectedKey(!0);return 0<=l.index(t,function(t){return t==e})},t.isAllSelected=function(){var t=this.length();if(0<t){var e=this.getSelectedIndex(!0);return e&&e.length==t}return!1},t.addItem=function(t,e){var i=s.addItem.call(this,t,e);return i&&s.updateSelection.call(this),i},t.updateItem=function(t,e){return 0<=(e=s.updateItem.call(this,t,e))&&s.updateSelection.call(this),e},t.removeItem=function(t){return(t=s.removeItem.call(this,t))&&s.updateSelection.call(this),t},t.removeItemAt=function(t){var e=s.removeItem.call(this,null,t);return e&&s.updateSelection.call(this),e},t._isSelected=function(t,e,i,n){return a.isSelected.call(this,t,e,i,n)},t._isItemSelected=function(t){return t.is(".selected")},t._setItemSelected=function(t,e){e?t.addClass("selected"):t.removeClass("selected")},t._snapshoot_shoot=function(t,e,i){t.selectedIndex=e||this.getSelectedIndex(),t.selectedData=i||this.getSelectedData(),t.data=t.selectedData},t._snapshoot_compare=function(t,e){return e||(e=this.getSelectedIndex(!0)),o.equalIndex(t.selectedIndex,e)};var a=i._selectRender=function(t,e){i._itemsRender.call(this,t,e)},e=a.prototype=new i._itemsRender(!1);a.render=function(t,e){i._itemsRender.render.call(this,t,e),this.isMultiple()&&e.attr("multiple","multiple"),this.renderSelection(t,e)},a.renderSelection=function(t,e,i){var n=this,s=this.getSelectedIndex(!0),a=this.getSelectedKey(!0);s&&e.attr("data-inds",s.join(",")),a&&e.attr("data-ids",a.join(",")),!r&&this.options.apiName&&(s&&e.attr("data-tryindex",s.join(",")),a&&e.attr("data-tryid",a.join(","))),i&&0<i.length&&(a=a||[],l.each(i,function(t,e){n._isSelected(t.data,t.index,s,a)&&(l.isFunction(n._setItemSelected)?n._setItemSelected(t.item,!0):t.item.addClass("selected"))}))},a.getSelectedIndex=function(t){var e=this.options.selectedIndex;if(l.isBlank(e))return t||this.isMultiple()?null:-1;l.isArray(e)||(e=(""+e).split(","));var i=[];return l.each(e,function(t){if(!isNaN(t)){var e=parseInt(t);!isNaN(e)&&0<=e&&i.push(e)}}),this.isMultiple()?0<i.length?i:null:i&&0<i.length?t?[i[0]]:i[0]:-1},a.getSelectedKey=function(t){var e=this.options.selectedKey;if(l.isBlank(e))return t||this.isMultiple()?[]:null;l.isArray(e)||(e=(""+e).split(","));var i=[];return l.each(e,function(t){!t&&0!==t||i.push(isNaN(t)?t:parseInt(t))}),0==i.length?null:this.isMultiple()?i:t?[i[0]]:i[0]},a.getSelectedData=function(t,e){var i=[];if((e=e||this.getData())&&0<e.length)for(var n=this.getSelectedIndex(!0),s=this.getSelectedKey(!0)||[],a=0,r=e.length;a<r;a++){var o=e[a];this._isSelected(o,a,n,s)&&i.push(o)}return 0==i.length?null:this.isMultiple()?i:t?[i[0]]:i[0]},a.isSelected=function(t,e,i,n){if(i||n||(i=this.getSelectedIndex(!0),n=this.getSelectedKey(!0)||[]),i)return!((e=l.getIndexValue(e))<0)&&0<=i.indexOf(e);if(n){var s=this._getDataKey(t);return 0<=l.index(n,function(t){return t==s})}return!1},a.isAllSelected=function(t){if((t=t||this.getData())&&0<t.length){for(var e=this.getSelectedIndex(!0),i=this.getSelectedKey(!0)||[],n=0,s=t.length;n<s;n++)if(!this._isSelected(t[n],n,e,i))return!1;return!0}return!1},e.render=function(t,e){a.render.call(this,t,e)},e.renderSelection=function(t,e){a.renderSelection.call(this,t,e,this._render_items)},e.getSelectedIndex=function(t){return a.getSelectedIndex.call(this,t)},e.getSelectedKey=function(t){return a.getSelectedKey.call(this,t)},e.getSelectedData=function(t){return a.getSelectedData.call(this,t)},e.isMultiple=function(){return o.isMultiple.call(this)},e.isAllSelected=function(){return a.isAllSelected.call(this)},e._isSelected=function(t,e,i,n){return a.isSelected.call(this,t,e,i,n)},e._setItemSelected=function(t,e){e?t.addClass("selected"):t.removeClass("selected")}}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.group){var n=t?VRender.Component.ui:require("../../static/js/init"),u=n.util,e="vertical",h="horizontial",i=n.group=function(t,e){return n._base.call(this,t,e)},s=i.prototype=new n._base(!1);s.getOrientation=function(){return this.$el.attr("opt-orientation")},s.setOrientation=function(t){this.$el.removeClass(h).removeClass(e),this.$el.removeAttr("opt-orientation"),t!==h&&t!==e||this.$el.addClass(t).attr("opt-orientation",t),a.call(this)},s.getGap=function(){return this.$el.attr("opt-gap")||0},s.setGap=function(t){this.$el.attr("opt-gap",u.trimToEmpty(t)),a.call(this)},s.getAlign=function(){return this.$el.attr("opt-align")},s.setAlign=function(t){this.$el.attr("opt-align",u.trimToEmpty(t)),a.call(this)},s.append=function(t){var e=this;if(!arguments||0==arguments.length)return this;for(var i=0,n=arguments.length;i<n;i++){var s=arguments[i];u.isArray(s)?s.forEach(function(t){e.add(t)}):this.add(s)}return this},s.add=function(t,e){if(u.isNotBlank(t)){var i=t.$el||t;this.getOrientation()&&(i=$("<div class='grp-item'></div>").append(i)),e=isNaN(e)||""===e?-1:parseInt(e);var n=this.$el.children();0<=e&&e<n.length?n.eq(e).before(i):this.$el.append(i),a.call(this)}return t},s.removeAt=function(t){var e=this.$el.children().eq(t).remove();return a.call(this),e.children()};var a=function(){var t=this;u.debounce("group_layout-"+this.getViewId(),function(){p.call(t,$,t.$el)})},r=function(t,e){n._baseRender.call(this,t,e)},o=r.prototype=new n._baseRender(!1);o.render=function(t,e){n._baseRender.render.call(this,t,e),e.addClass("ui-group");var i=this.getOrientation();return i&&(e.addClass(i),e.attr("opt-orientation",i)),e.attr("opt-gap",this.getGap()),e.attr("opt-align",this.getAlign()),l.call(this,t,e),this},o.getOrientation=function(){var t=this.options.orientation;return t==h||t==e?t:null},o.getGap=function(){return this.options.gap},o.getAlign=function(){return this.options.align};var l=function(t,e){c.call(this,t,e,d.call(this))},d=function(){return this.options.children||this.options.subViews||this.options.views},c=function(i,n,t){t=u.toArray(t);var s=this.getOrientation();u.each(t,function(t){if(u.isNotNull(t)){var e=n;s&&(e=i("<div class='grp-item'></div>").appendTo(n)),u.isFunction(t.render)?t.render(e):e.append(t.$el||t)}}),p.call(this,i,n)},p=function(t,e){var i="",n="",s="",a="",r="",o=u.getFormatSize(this.getGap(),this._isRenderAsRem())||"";this.getOrientation()==h?(r="inline-block",i=o):n=o;var l=this.getAlign()||"";l=l.toLowerCase(),/left/.test(l)?s="left":/center/.test(l)?s="center":/right/.test(l)&&(s="right"),/top/.test(l)?a="top":/middle/.test(l)?a="middle":/bottom/.test(l)&&(a="bottom"),e.css("text-align",s);var d=e.children();d.css("display",r),d.css("vertical-align",a),d.css("margin-left",i).css("margin-top",n),d.eq(0).css("margin-left","").css("margin-top","")};t?(window.UIGroup=i,window.UIHGroup=function(t){return new i(u.extend(t,{orientation:h}))},window.UIVGroup=function(t){return new i(u.extend(t,{orientation:e}))},n.init(".ui-group",i,r)):module.exports=r}}("undefined"!=typeof window),function(o){if(!o||!VRender.Component.ui.button){var l=o?VRender.Component.ui:require("../../static/js/init"),d=l.util,u=["ui-btn-default","ui-btn-primary","ui-btn-success","ui-btn-danger","ui-btn-warn","ui-btn-info","ui-btn-link","ui-btn-text"],h=["bigger","big","normal","small","tiny"],t=l.button=function(t,e){return l._base.call(this,t,e)},e=t.prototype=new l._base(!1);e.init=function(t,e){l._base.init.call(this,t,e),this._isRenderAsApp()&&t.on("tap",".dropdown",r.bind(this)),t.on("tap",".btn",s.bind(this)),t.on("tap",".dropdownbtn",a.bind(this)),t.on("tap",".dropdown li",c.bind(this))},e.getLabel=function(){return this.options.label},e.setLabel=function(t){this.options.label=t;var e=this.$el.children(".btn");e.children("span").remove(),d.isNotBlank(t)&&$("<span></span>").appendTo(e).text(d.trimToEmpty(t)||" ")},e.waiting=function(t){t=d.isNull(t)||!0===t?parseInt(this.$el.attr("opt-wait"))||-1:Math.max(0,parseInt(t))||0,m.call(this,t)},e.isWaiting=function(){return this.$el.is(".waiting")},e.setWaiting=function(t){t=!0===t||d.isNull(t)?-1:Math.max(0,parseInt(t))||0,this.$el.attr("opt-wait",t)};var i=function(t,e){l._baseRender.call(this,t,e)},n=i.prototype=new l._baseRender(!1);n.render=function(t,e){l._baseRender.render.call(this,t,e),e.addClass("ui-btn");var i=this.options||{},n=i.size;n&&0<=h.indexOf(n)&&e.addClass(n);var s=i.style||"";u.indexOf(s)<0&&e.addClass(I(i.type)),d.isTrue(i.toggle)&&e.attr("opt-toggle","1"),d.isNotBlank(i.link)&&e.attr("data-lnk",d.trimToNull(i.link));var a=t("<button class='btn'></button>").appendTo(e),r=b.call(this);d.isNotBlank(r)&&t("<i class='icon'></i>").appendTo(a).css(o?"backgroundImage":"background-image","url("+r+")");return d.isNotBlank(i.label)&&t("<span></span>").appendTo(a).text(d.trimToEmpty(i.label)||" "),f.call(this,t,e),g.call(this,t,e),this},n.getItems=function(){return d.toArray(this.options.items)};var s=function(t){if(!this.$el.is(".disabled, .waiting")){var e=this.$el,i=e.attr("data-lnk");if(i)window.open(i,"_self");else{var n=1==e.attr("opt-toggle");if(e.is(".has-items")){if(!n)return void v.call(this)}else n&&(1==e.attr("active")?e.removeAttr("active"):e.attr("active","1"));this.trigger("tap",e.attr("name"));var s=parseInt(e.attr("opt-wait"));s&&m.call(this,s)}}},a=function(t){return this.$el.is(".disabled, .waiting")||v.call(this),!1},r=function(t){$(t.target).is(".dropdown")&&_.call(this)},c=function(t){var e=$(t.currentTarget),i=e.attr("name")||"";return 1==this.$el.attr("opt-toggle")&&(this.$el.attr("name",i),this.$el.children(".btn").find("span").text(e.text())),this.trigger("tap",e.attr("name")),_.call(this),!1},p=function(t){l.fn.mouseDebounce(t,_.bind(this))},f=function(t,e){var i=y.call(this);i&&e.attr("opt-wait",i),d.isTrue(this.options.waiting)&&e.addClass("waiting")},g=function(i,t){t.removeClass("has-items"),t.children(".dropdownbtn").remove(),t.children(".dropdown").remove();var e=this.getItems();if(e&&0<e.length){t.addClass("has-items"),t.append("<span class='dropdownbtn'>&nbsp;</span>");var n=i("<div class='dropdown'></div>").appendTo(t),s=i("<ul></ul>").appendTo(n);d.each(e,function(t){if(d.isNotBlank(t)){d.isPrimitive(t)&&(t={label:t});var e=i("<li></li>").appendTo(s);t.name&&e.attr("name",t.name),i("<span></span>").appendTo(e).text(d.trimToEmpty(t.label)||" ")}})}},m=function(t){var e=this;if(this.t_wait&&(clearTimeout(this.t_wait),this.t_wait=0),t){var i=this.$el.addClass("waiting");0<t&&(this.t_wait=setTimeout(function(){e.t_wait=0,i.removeClass("waiting")},t))}else this.$el.removeClass("waiting")},v=function(){if(!this.$el.is(".show-dropdown")){var t=this.$el.addClass("show-dropdown");if(this._isRenderAsApp())$("html,body").addClass("ui-scrollless");else{t.on("mouseenter",p.bind(this)),t.on("mouseleave",p.bind(this));var e=t.children(".dropdown"),i=l.fn.getDropdownHeight.call(this,e);d.offset(e,this._getScrollContainer(),0,i).isOverflowY&&t.addClass("show-before")}setTimeout(function(){t.addClass("animate-in")})}},_=function(){if(this.$el.is(".show-dropdown")){var t=this.$el.addClass("animate-out");this._isRenderAsApp()?$("html,body").removeClass("ui-scrollless"):t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)}},I=function(t){if(d.isNotBlank(t)){if(0<=["ok","submit","save","primary","major"].indexOf(t))return"ui-btn-primary";if(0<=["danger","error"].indexOf(t))return"ui-btn-danger";if(0<=["success","complete","finish"].indexOf(t))return"ui-btn-success";if(0<=["warn","warning"].indexOf(t))return"ui-btn-warn";if(0<=["info","highlight"].indexOf(t))return"ui-btn-info";if("text"===t)return"ui-btn-text";if("link"===t)return"ui-btn-link"}return"ui-btn-default"},b=function(){var t=this.options.icon;if(!0===t){var e=this.options.type;"success"==e||"submit"==e?t="012b.png":"warn"==e?t="013b.png":"error"==e||"danger"==e?t="014b.png":"info"==e&&(t="015b.png"),!0!==t&&(t="/vrender-ui/icons/"+t)}return"string"==typeof t?t:null},y=function(){var t=0,e=this.options||{};return e.hasOwnProperty("waitTime")?t=e.waitTime:e.hasOwnProperty("wait")&&(t=e.wait),!0===t?-1:Math.max(0,parseInt(t))||0};o?(window.UIButton=t,l.init(".ui-btn",t,i)):module.exports=i}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.checkbox){var s=t?VRender.Component.ui:require("../../static/js/init"),a=s.util,e=s.checkbox=function(t,e){return s._select.call(this,t,e)},i=e.prototype=new s._select(!1);i.init=function(t,e){s._select.init.call(this,t,e),this.input=this.$el.children("input"),this.input.on("change",r.bind(this))},i.val=function(t){return a.isNotNull(t)&&this.input.val(t),this.input.val()},i.isChecked=function(){return this.input.is(":checked")},i.setChecked=function(t){var e=!!a.isNull(t)||a.isTrue(t);this.input[0].checked=e,this.input.trigger("change")},i.getLabel=function(){return this.$el.children("span").text()},i.setLabel=function(t){this.$el.children("span").remove(),a.isNotBlank(t)&&$("<span></span>").appendTo(this.$el).text(t)};var n=function(t,e){s._selectRender.call(this,t,e)};(n.prototype=new s._selectRender(!1)).render=function(t,e){s._selectRender.render.call(this,t,e),e.addClass("ui-chkbox");var i=this.options||{},n=t("<input type='checkbox'/>").appendTo(e);return a.isNotNull(i.value)&&n.val(i.value),a.isTrue(i.checked)&&(e.addClass("checked"),n.attr("checked","checked")),a.isNotNull(i.label)&&t("<span></span>").appendTo(e).text(i.label),n.attr("name",a.trimToNull(i.name)),this};var r=function(t){$(t.currentTarget).is(":checked")?this.$el.addClass("checked"):this.$el.removeClass("checked")};t?(window.UICheckbox=e,s.init(".ui-chkbox",e,n)):module.exports=n}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.combobox){var u=t?VRender.Component.ui:require("../../static/js/init"),h=u.fn,c=u.util,e=u.combobox=function(t,e){return u._select.call(this,t,e)},i=e.prototype=new u._select(!1);i.init=function(t,e){u._base.init.call(this,t,e),t=this.$el,this._isRenderAsApp()&&this.isNative()?t.find("select").on("change",v.bind(this)):(this._isRenderAsApp()&&t.on("tap",".dropdown",m.bind(this)),t.on("tap",".ipt",a.bind(this)),t.on("tap",".item",r.bind(this)),t.on("tap",".ui-more",o.bind(this))),t.is(".editable")&&(t.on("keydown","input",l.bind(this)),t.on("keyup","input",d.bind(this)),t.on("focusin","input",p.bind(this)),t.on("focusout","input",f.bind(this)))},i.val=function(t){if(c.isNull(t)){var e=this.getSelectedIndex(!0);return e&&0<e?this.getSelectedKey():this.isEditable()?this.$el.find(".ipt > input").val():null}var i=this._snapshoot(),n=D.call(this,t);return n?this.setSelectedIndex(n[0]):(this.setSelectedIndex(-1),this.isMatchRequired()||(this.$el.find(".ipt > input").val(t),N.call(this,c.isNotBlank(t)))),i.done(),this},i.getData=function(t){return t?(this.options.data=this._doAdapter(this.options.data),this.options.data):k.call(this)},i.setDataSilent=function(t){this.options.data=t,x.call(this)},i.setSelectedIndex=function(t){var e=this._snapshoot(),i=u._select.setSelectedIndex.call(this,t);c.each(this._getItems(),function(t,e){S(t,0<=i.indexOf(e))}),i&&0!=i.length||this.$el.find("select").val(""),A.call(this),e.done()},i.getPrompt=function(){return this.$el.children(".ipt").find(".prompt").text()},i.setPrompt=function(t){var e=this.$el.children(".ipt");e.find(".prompt").remove(),c.isNotBlank(t)&&$("<span class='prompt'></span>").appendTo(e).text(t)},i.addItem=function(s,a){a=c.getIndexValue(a),s=h.doAdapter.call(this,s,a)||{};var t=this.getData(!0),r=!1;0<=a&&R.call(this,t,function(t,e,i,n){if(a==e)return i.splice(n,0,s),!(r=!0)}),r||(0<t.length?t[t.length-1].push(s):t.push([s]));var e=this._getNewItem($,this._getItemContainer());return this._renderOneItem($,e,s,a),r&&0<=a&&(this._getItems().eq(a).before(e),u._select.updateSelection.call(this)),e},i.updateItem=function(r,o){var l=this;if(r=h.doAdapter.call(this,r,o),0<=(o=o||0===o?c.getIndexValue(o):this.getDataIndex(r))){var t=this.getData(!0),d=null;R.call(this,t,function(t,e,i,n){if(o==e){i.splice(n,1,r);var s=l._getNewItem($,l._getItemContainer());l._renderOneItem($,s,r,o);var a=l._getItems();return(d=a.eq(o).before(s).remove()).is(".selected")&&S(s,!0),!1}}),u._select.updateSelection.call(this),d&&d.is(".selected")&&A.call(this)}return o},i.removeItemAt=function(s){if(0<=(s=c.getIndexValue(s))){var t=this._getItems().eq(s);if(t&&0<t.length){var e=t.parent();t.remove(),0==e.children().length&&e.remove()}var a=this.getData(!0),r=null;return R.call(this,a,function(t,e,i,n){if(s==e)return r=i.splice(n,1),0==i.length&&c.remove(a,function(t){return t==i}),!1}),u._select.updateSelection.call(this),t.is(".selected")&&A.call(this),r}return null},i.isNative=function(){return 1==this.$el.attr("opt-native")},i.isEditable=function(){return this.$el.is(".editable")},i.isMatchRequired=function(){return 1==this.$el.attr("opt-match")},i.rerender=function(){var s=this;c.debounce("combobox_render-"+this.getViewId(),function(){var t=s.$el.find(".ipt > input"),e=t.val()||"",i=s.getSelectedIndex(),n=s._getItemContainer();n&&0<n.length&&s._renderItems($,n.empty(),s.getData()),s.setSelectedIndex(i),s.isEditable()&&s.getSelectedIndex()<0&&(t.val(e||""),N.call(s,c.isNotBlank(e)))})},i._getItemContainer=function(){return this.$el.children(".dropdown").children(".box")},i._renderItems=function(t,e,i){i=i||this.getData(!0),I.call(this,t,this.$el,e,i)},i._renderOneItem=function(t,e,i,n){this._isRenderAsApp()&&this.isNative()?e.text(this._getDataLabel(i,n)):u._items.renderOneItem.call(this,e,null,i,n)},i._getNewItem=function(t,e,i,n){if(this._isRenderAsApp()&&this.isNative()){var s=e.children("select");return t("<option class='item'></option>").appendTo(s)}var a=e.children(".grp").last();return a&&0!=a.length||(a=t("<div class='grp'></div>").appendTo(e)),t("<div class='item'></div>").appendTo(a)},i._getItems=function(t){var e=this._getItemContainer().find(".item");return t&&(e=e.filter(t)),e},i._isItemSelected=function(t){return t.is(".selected")||t.is(":selected")},i._setItemSelected=function(t,e){S.call(this,t,e)},i._loadBefore=function(){if(!this._isRenderAsApp()||!this.isNative()){var t=this._getItemContainer();if(t.find(".ui-load, .ui-more").remove(),this._isRenderAsApp()&&this.isNative()){var e=this._getLoadText();if(e=c.isNull(e)?"正在加载..":c.trimToEmpty(e)){var i=t.children("select");$("<option class='ui-load'></option>").appendTo(i).text(e)}}else u._itemsRender.renderLoadView.call(this,$,t)}},i._loadAfter=function(){if(!this._isRenderAsApp()||!this.isNative()){var t=this._getItemContainer();if(t.find(".ui-load").remove(),this.hasMore())if(this.$el.addClass("has-more"),this._isRenderAsApp()&&this.isNative()){var e=this._getMoreText();if(e=c.isNull(e)?"加载更多":c.trimToEmpty(e)){var i=t.children(".select");$("<option class='ui-more'></option>").appendTo(i).text(e)}}else u._itemsRender.renderMoreView.call(this,$,t);else this.$el.removeClass("has-more")}},i._snapshoot_shoot=function(t){t.selectedIndex=this.getSelectedIndex(),t.value=this.$el.find(".ipt > input").val()||"",t.data=this.getSelectedData()},i._snapshoot_compare=function(t){var e=this.$el.find(".ipt > input").val()||"";if(t.value!=e)return!1;var i=this.getSelectedIndex();return h.equalIndex(i,t.selectedIndex)},i._doAdapter=function(t){return V.call(this,t)};var n=function(t,e){u._selectRender.call(this,t,e)},s=n.prototype=new u._selectRender(!1);s.render=function(t,e){e.addClass("ui-combobox");var i=this.options||{};return this.isNative()&&e.attr("opt-native","1"),c.isTrue(i.needMatch)&&e.attr("opt-match","1"),e.attr("opt-box",i.container),_.call(this,t,e),e.append("<div class='dropdown'><div class='box'></div></div>"),u._selectRender.render.call(this,t,e),this},s.getSelectedData=function(t){return u._selectRender.getSelectedData.call(this,t,k.call(this))},s.isNative=function(){return c.isTrue(this.options.native)},s._getItemContainer=function(t,e){return e.children(".dropdown").children(".box")},s._renderItems=function(t,e){var i=this._getItemContainer(t,e);I.call(this,t,e,i,this.getData())},s._renderEmptyView=function(t,e){},s._renderLoadView=function(t,e){},s._setItemSelected=function(t,e){e?t.addClass("selected").attr("selected","selected"):t.removeClass("selected").removeAttr("selected")},s._doAdapter=function(t){return V.call(this,t)};var a=function(t){var e=$(t.target);if(this._isRenderAsApp()){if(this.isEditable()&&!e.is(".dropdownbtn"))return}else this.isEditable()&&e.is(".dropdownbtn")&&this.$el.find(".ipt > input").focus();C.call(this)},r=function(t){var e=$(t.currentTarget);if(e.is(".selected")&&!this.isMultiple())return!1;var i=this._snapshoot();return e.is(".selected")?S(e,!1):(this.isMultiple()||S(this._getItems(".selected"),!1),S(e,!0)),u._select.updateSelection.call(this),A.call(this),i.done(),this.isMultiple()||F.call(this),!1},o=function(t){this.more()},l=function(t){if(!this._isRenderAsApp()&&(C.call(this),this.$el.off("mouseenter").off("mouseleave"),38==t.which||40==t.which)){if(this.isMultiple())return;var e=this.getSelectedIndex();38==t.which?0<e&&(e-=1):40==t.which&&e<this.length()-1&&(e+=1),this.setSelectedIndex(e)}},d=function(t){var e=$(t.currentTarget);if(13==t.which){F.call(this);var i=this._snapshoot(),n=u._select.updateSelection.call(this);n&&0<n.length?A.call(this):this.isMatchRequired()&&e.val(""),e.select(),i.done()}else if(!c.isControlKey(t)||8==t.which){var s=e.val();N.call(this,s&&0<s.length);var a=D.call(this,s,!0),r=S(this._getItems(),!1);this.$el.find("select").val(""),a&&0<=a[0]&&S(r.eq(a[0]),!0)}},p=function(t){this.t_focus&&(clearTimeout(this.t_focus),this.t_focus=0)},f=function(t){var n=this,s=$(t.currentTarget);this.t_focus=setTimeout(function(){if(n.t_focus=0,T.call(n)){var t=s.val(),e=D.call(n,t,!1);if(e&&0<=e[0])n.setSelectedIndex(e[0]);else if(n.isMatchRequired())e=D.call(n,t,!0),n.setSelectedIndex(e?e[0]:-1);else{var i=n._snapshoot();n.setSelectedIndex(-1),s.val(t),N.call(n,t&&0<t.length),i.done()}F.call(n)}},200)},g=function(t){h.mouseDebounce(t,F.bind(this))},m=function(t){$(t.target).is(".dropdown")&&F.call(this)},v=function(t){var e=this._snapshoot();this._getItems().removeClass("selected"),u._select.updateSelection.call(this),A.call(this),e.done()},_=function(t,e){var i=this,n=t("<div class='ipt'></div>").appendTo(e),s=t("<input type='text'/>").appendTo(n),a=this.getSelectedData(!0);if(a&&0<a.length){e.addClass("has-val");var r=c.map(a,function(t){return i._getDataLabel(t)});s.val(r.join(",")||"")}c.isTrue(this.options.editable)?e.addClass("editable"):s.attr("readonly","readonly"),n.append("<button class='dropdownbtn'></button>"),n.append("<span class='prompt'>"+c.trimToEmpty(this.options.prompt)+"</span>")},I=function(t,e,i,n){var s=this;this._render_items=[],this._isRenderAsApp()&&this.isNative()?y.call(this,t,i,n):b.call(this,t,i,n),setTimeout(function(){s._render_items=null})},b=function(n,i,t){var s=this;if(t&&0!=t.length){var a=this._render_items||[],r=function(t,e){var i=n("<div class='item'></div>").appendTo(t);a.push({item:i,data:e,index:a.length}),w.call(s,n,i,e)},o=i.children(".grp").last();c.each(t,function(t,e){c.isArray(t)?(0<t.length&&(o=n("<div class='grp'></div>").appendTo(i),t.title&&n("<div class='title'></div>").appendTo(o).text(t.title),c.each(t,function(t,e){r(o,t)})),o=null):(o&&0!=o.length||(o=n("<div class='grp'></div>").appendTo(i)),r(o,t))})}},y=function(n,t,e){var s=this,i=t.children("select");if(i&&0!=i.length||(i=n("<select size='1'></select>").appendTo(t),this.isMultiple()?i.attr("multiple","multiple"):i.append("<option disabled='disabled' selected='selected'>请选择..</option>")),e&&0<e.length){var a=this._render_items||[],r=function(t,e){var i=n("<option class='item'></option>").appendTo(t);a.push({item:i,data:e,index:a.length}),i.text(s._getDataLabel(e))};c.each(e,function(t){c.isArray(t)?c.each(t,function(t){r(i,t)}):r(i,t)})}},w=function(t,e,i,n){u._itemsRender.renderOneItem.call(this,t,e,e,i,n)},x=function(){var n=this;c.debounce("combobox_silent-"+this.getViewId(),function(){var t=n.getSelectedIndex(),e=n._getItemContainer();if(e&&0<e.length&&n._renderItems($,e.empty(),n.getData()),0<=t){var i=n._getItems().eq(t);i&&0<i.length&&S.call(n,i,!0)}})},A=function(){var e=this,t=this.getSelectedData(!0),i=c.map(t,function(t){return e._getDataLabel(t)});this.$el.find(".ipt > input").val(i.join(",")||""),N.call(this,t&&0<t.length)},D=function(r,o,l){var d=this;if(c.isBlank(r))return null;var u=null;return R.call(this,this.getData(!0),function(t,e,i,n){var s=d._getDataLabel(t)||"";if(r==s)return!(u=[e,t]);if(o&&r.length<s.length){var a=s.indexOf(r);if(0==a||0<a&&!l)return!(u=[e,t])}}),u},S=function(t,e){return e?t.addClass("selected").attr("selected","selected"):t.removeClass("selected").removeAttr("selected"),t},N=function(t){t?this.$el.addClass("has-val"):this.$el.removeClass("has-val")},T=function(){return this.$el.is(".show-dropdown")},C=function(){var t=this;if(!T.call(this)){var e=this.$el.addClass("show-dropdown");if(this._isRenderAsApp())$("html,body").addClass("ui-scrollless");else{e.on("mouseenter",g.bind(this)),e.on("mouseleave",g.bind(this));var i=e.children(".dropdown"),n=h.getDropdownHeight.call(this,i);c.offset(i,this._getScrollContainer(),0,n).isOverflowY&&e.addClass("show-before")}setTimeout(function(){t.t_focus&&(clearTimeout(t.t_focus),t.t_focus=0)},100),setTimeout(function(){e.addClass("animate-in")})}},F=function(){$("html,body").removeClass("ui-scrollless");var t=this.$el.addClass("animate-out");t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},R=function(t,e){for(var i=0,n=0;n<t.length;n++){var s=t[n];if(c.isArray(s)&&0<s.length)for(var a=0;a<s.length;a++){if(!1===e(s[a],i,s,a))return;i+=1}else{if(!1===e(s,i,t,n))return;i+=1}}},V=function(t){var n=this;if((t=c.toArray(t))._vr_adapter_flag)return t;var s=0,a=[],r=null;return c.each(t,function(t,e){if(c.isArray(t)){if(0<t.length){var i=c.map(t,function(t){return h.doAdapter.call(n,t,s++)});t.title&&(i.title=t.title),a.push(i)}r=null}else r||(r=[],a.push(r)),t=h.doAdapter.call(n,t,s++),r.push(t)}),a._vr_adapter_flag=!0,a},k=function(){var e=[];return c.each(this.getData(!0),function(t){c.isArray(t)?c.each(t,function(t){e.push(t)}):e.push(t)}),e};t?(window.UICombobox=e,u.init(".ui-combobox",e,n)):module.exports=n}}("undefined"!=typeof window);