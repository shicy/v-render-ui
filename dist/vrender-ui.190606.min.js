"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(n){if(!n||!VRender.Component.ui){var l=n?VRender.Utils:require(""+__vrender__).Utils,a={doAdapter:function(t,e){if(t&&t._vr_adapter_flag)return t;var i=this.options.dataAdapter||this.options.adapter;return l.isFunction(this.getDataAdapter)&&(i=this.getDataAdapter()),l.isFunction(i)&&(t=i(t,e))&&(t._vr_adapter_flag=!0),t},getDataKey:function(t){if(l.isBlank(t))return null;if(l.isPrimitive(t))return t;var e=this.options.keyField;return l.isFunction(this.getKeyField)&&(e=this.getKeyField()),l.isNotBlank(e)?t[e]:t.hasOwnProperty("id")?t.id:t.hasOwnProperty("code")?t.code:t.hasOwnProperty("value")?t.value:null},getDataLabel:function(t,e){var i=this.options.labelFunction;if(l.isFunction(this.getLabelFunction)&&(i=this.getLabelFunction()),l.isFunction(i))return i.call(this,t,e);if(l.isBlank(t))return"";if(l.isPrimitive(t))return""+t;var n=this.options.labelField;return l.isFunction(this.getLabelField)&&(n=this.getLabelField()),l.isNotBlank(n)?l.isNull(t[n])?"":t[n]:t.hasOwnProperty("label")?l.isNull(t.label)?"":t.label:t.hasOwnProperty("name")?l.isNull(t.name)?"":t.name:t.hasOwnProperty("value")?l.isNull(t.value)?"":t.value:""+t},getMapData:function(t){var e=this.options.dataMapper||this.options.mapper;if(l.isFunction(this.getDataMapper)&&(e=this.getDataMapper()),l.isFunction(e))return e(t);if(l.isNull(t))return null;if(l.isPrimitive(t))return t;var i={};return t.hasOwnProperty("id")&&(i.id=t.id),t.hasOwnProperty("code")&&(i.code=t.code),t.hasOwnProperty("name")&&(i.name=t.name),t.hasOwnProperty("value")&&(i.value=t.value),t.hasOwnProperty("label")&&(i.label=t.label),i},isMultiple:function(){return this.options.hasOwnProperty("multiple")?l.isTrue(this.options.multiple):l.isTrue(this.options.multi)},renderData:function(t,e){if(l.isFunction(this.getMapData)&&(e=this.getMapData(e)),e)if(l.isPrimitive(e))t.attr("data-v",e);else for(var i in e)t.attr("data-"+i,l.trimToEmpty(e[i]))},renderFunction:function(t,e,i){!n&&l.isNotBlank(e)&&l.isFunction(i)&&t.write("<div class='ui-fn' style='display:none' name='"+e+"' fn-state='"+(i._state||"")+"' fn-data='"+(i._data||"")+"'>"+escape(i)+"</div>")},getFunction:function(t,e){if(this.options.hasOwnProperty(t))return this.options[t];if(this.hasOwnProperty(t))return this[t];if(e&&this.options.hasOwnProperty(e))return this.options[e];var i=null,n=this.$el.children(".ui-fn[name='"+(e||t)+"']");if(n&&0<n.length){if(i=n.text(),l.isNotBlank(i)&&((i=new Function("var Utils=VRender.Utils;return ("+unescape(i)+");")())._state=n.attr("fn-state")||null,i._data=n.attr("fn-data")||null,i._data))try{i._data=JSON.parse(i._data)}catch(t){}n.remove()}return this[t]=i},renderSubView:function(t,e){e&&(l.isFunction(e.render)?e.render(t):t.append(e.$el||e))},getIntValues:function(t,e,i){l.isArray(t)||(t=l.isBlank(t)?[]:(""+t).split(",")),e=l.isNull(e)?Number.NEGATIVE_INFINITY:e,i=l.isNull(i)?Number.POSITIVE_INFINITY:i;var n=[];return l.each(t,function(t){isNaN(t)||(t=parseInt(t),!isNaN(t)&&n.indexOf(t)<0&&e<=t&&t<=i&&n.push(t))}),n},equalIndex:function(t,e){if(t=a.getIntValues(t,0),e=a.getIntValues(e,0),t.length!=e.length)return!1;t.sort(function(t,e){return t-e}),e.sort(function(t,e){return t-e});for(var i=0,n=t.length;i<n;i++)if(t[i]!=e[i])return!1;return!0}};if(n){var d=VRender.Component;a.init=function(i,n,e){d.register(i,n),n.create=function(t){return d.create(t,n,e)},n.find=function(t){return d.find(t,i,n)},n.findMe=function(t){var e=d.find(t,i,n);return e&&e[0]||null},n.instance=function(t){return d.instance(t,i)},n.prototype._create=function(t){return t=t||{},l.isFunction(this.isWidthEnabled)&&(t.widthDisabled=!this.isWidthEnabled()),l.isFunction(this.isHeightEnabled)&&(t.heightDisabled=!this.isHeightEnabled()),d.create(t,null,e)}},a.isElement=function(t){return t instanceof Element||t instanceof $},a.load=function(t,e,a){var s=this;if(t=t||this.lastLoadApi||this.$el.attr("api-name"),l.isBlank(t))return!1;var r=this.$el.addClass("is-loading"),o=this.loadTimerId=Date.now();return d.load.call(this,t,e,function(t,e){if(o==s.loadTimerId){r.removeClass("is-loading");var i=l.isFunction(s.getPaginator)&&s.getPaginator();if(i&&l.isFunction(i.set)){var n=s._pageInfo||{};i.set(n.total,n.page,n.size)}l.isFunction(a)&&a(t,e)}}),!0},a.snapshoot=function(){var n={},a={},s=this,t={};return this._rootSnapshoot||(this._rootSnapshoot=t),t.shoot=function(t,e){if(t=t||n,l.isFunction(s._snapshoot_shoot)){var i=Array.prototype.slice.call(arguments);i[0]=t,s._snapshoot_shoot.apply(s,i)}else t.data=s.getData()},t.compare=function(t){var e=Array.prototype.slice.call(arguments);return l.isFunction(s._snapshoot_compare)?s._snapshoot_compare.apply(s,[n].concat(e)):(this.shoot.apply(this,[a].concat(e)),n.data==a.data)},t.done=function(t){var e=!1;if(s._rootSnapshoot==this){var i=Array.prototype.slice.call(arguments);this.compare.apply(this,i)||(this.shoot.apply(this,[a].concat(i)),l.isFunction(s._snapshoot_change)&&s._snapshoot_change(a.data,n.data),s.trigger("change",a.data,n.data),s.$el.trigger("change",a.data,n.data),e=!0)}return this.release(),e},t.release=function(){s._rootSnapshoot==this&&(s._rootSnapshoot=null)},t.getState=function(){return n},t.shoot(n),a.data=n.data,t},a.getDropdownHeight=function(t,e){var i=0;i=this._isRenderAsApp()?.8*$(window).height():parseInt(t.css("maxHeight"))||e||300;var n=t.get(0).scrollHeight;return n<i&&(i=n),i},a.mouseDebounce=function(t,e){var i=$(t.currentTarget),n=parseInt(i.attr("timerid"));n&&(clearTimeout(n),i.removeAttr("timerid")),"mouseleave"==t.type&&(n=setTimeout(function(){i.removeAttr("timerid"),e()},500),i.attr("timerid",n))}}n?(VRender.Component.ui={util:l,fn:a},VRender.Component.ui.init=a.init):(exports.util=l,exports.fn=a,require("./base"),require("./items"),require("./selectable"))}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui._base){var e=t?VRender.Component.ui:require("./init"),a=e.fn,s=e.util,i=function(){},n=i.prototype=t?new VRender.EventEmitter:new Object;n._doAdapter=function(t){return t?a.doAdapter.call(this,t):null},n._isRenderAsApp=function(){return t?VRender.ENV.isApp:(this.hasOwnProperty("_isApp")||(this._isApp=!1,this.context&&s.isFunction(this.context.isRenderAsApp)&&(this._isApp=this.context.isRenderAsApp())),this._isApp)},n._isRenderAsIphone=function(){return t?VRender.ENV.isIphone:(this.hasOwnProperty("_isIphone")||(this._isIphone=!1,this.context&&s.isFunction(this.context.isRenderAsIphone)&&(this._isIphone=this.context.isRenderAsIphone())),this._isIphone)},n._isRenderAsRem=function(){return t?VRender.ENV.useRem:(this.hasOwnProperty("_isRem")||(this._isRem=!1,this.context&&s.isFunction(this.context.isRenderAsRem)&&(this._isRem=this.context.isRenderAsRem())),this._isRem)},n.getData=function(){return this.options.data=this._doAdapter(this.options.data),this.options.data},n._getDataKey=function(t){return a.getDataKey.call(this,t)},n._getDataLabel=function(t){return a.getDataLabel.call(this,t)};var r=e._base=function(t,e){if(0<arguments.length&&!1!==t){a.isElement(t)||(e=null,t=this._create(t));var i=VRender.Component.get(t);if(i)return i;var n=this.$el=$(t);n.data(VRender.Component.bindName,this),this.options=e||{},this.init(n,this.options)}},o=r.prototype=new i;r.init=function(t,e){var i=this;h.call(this,t,e),setTimeout(function(){c.call(i)})},r.getInitParams=function(){if(!this.initParams){var t=null;if(this.options.hasOwnProperty("params"))t=this.options.params;else try{t=JSON.parse(this.$el.attr("api-params")||null),this.$el.removeAttr("api-params")}catch(t){}this.initParams=s.extend({},t)}return s.extend({},this.initParams)},r.isAutoLoad=function(){return this.options.hasOwnProperty("autoLoad")||(this.options.autoLoad=this.$el.attr("api-autoload")),this.$el.removeAttr("api-autoload"),s.isTrue(this.options.autoLoad)},o.init=function(t,e){r.init.call(this,t,e)},o.getViewId=function(){return this.$el.attr("vid")},o.getInitParams=function(){return r.getInitParams.call(this)},o.setData=function(t){this.options.data=t,this.rerender()},o.getDataAdapter=function(){return a.getFunction.call(this,"dataAdapter","adapter")},o.setDataAdapter=function(t){this.options.dataAdapter=t,delete this.options.adapter,this.$el.children(".ui-fn[name='adapter']").remove(),this.rerender()},o.getDataMapper=function(){return a.getFunction.call(this,"dataMapper","mapper")},o.setDataMapper=function(t){this.options.dataMapper=t,delete this.options.mapper,this.$el.children(".ui-fn[name='mapper']").remove(),this.rerender()},o.isDisabled=function(){return this.$el.is(".disabled")},o.setDisabled=function(t){s.isNull(t)||s.isTrue(t)?this.$el.addClass("disabled").attr("disabled","disabled"):this.$el.removeClass("disabled").removeAttr("disabled","disabled")},o.setVisible=function(t){s.isNull(t)||s.isTrue(t)?this.$el.removeClass("ui-hidden"):this.$el.addClass("ui-hidden")},o.destory=function(){this.$el.remove()},o.rerender=function(){},o.isMounted=function(){return 0<$("body").find(this.$el).length},o._snapshoot=function(){return a.snapshoot.call(this)},o._getScrollContainer=function(){return this.$el.attr("opt-box")},o.load=function(t,e,i){var n=this;return s.isFunction(this._loadBefore)&&this._loadBefore(t,e),a.load.call(this,t,e,function(t,e){t||(s.isFunction(n.setData)?n.setData(e):n.options.data=e),setTimeout(function(){s.isFunction(n._loadAfter)&&n._loadAfter(t,e),s.isFunction(i)&&i(t,e),n.trigger("loaded",t,e)})})},o.reload=function(t,e){s.isFunction(t)&&(e=t,t=null);var i=this.lastLoadParams||{};return!isNaN(t)&&0<t&&(i.p_no=t),this.load(this.lastLoadApi,i,e)},o.isLoading=function(){return this.$el.is(".is-loading")};var l=e._baseRender=function(t,e){0<arguments.length&&!1!==t&&(this.context=e?t:null,this.options=e||t||{})},d=l.prototype=new i;l.render=function(t,e){e.addClass("vrender-ui"),this.renderData(t,e),a.renderFunction.call(this,e,"adapter",this.getDataAdapter()),a.renderFunction.call(this,e,"mapper",this.getDataMapper())},d.render=function(t,e){return l.render.call(this,t,e),this},d.renderData=function(t,e){a.renderData.call(this,e,this.getData())},d.getDataAdapter=function(){return this.options.dataAdapter||this.options.adapter},d.getDataMapper=function(){return this.options.dataMapper||this.options.mapper},d.getMapData=function(t){return a.getMapData.call(this,t)};var h=function(t,e){t.attr("id",s.trimToNull(e.id)||void 0),t.attr("name",s.trimToNull(e.name)||void 0);var i=e.className||e.cls;if(s.isNotBlank(i)&&t.addClass(i),s.isNotBlank(e.style)&&t.addClass(e.style),e.hasOwnProperty("disabled")&&this.setDisabled(s.isTrue(e.disabled)),!1===e.visible||"gone"===e.visible?t.css("display","none"):"hidden"===e.visible&&t.css("visibility","hidden"),t.attr("ref",s.trimToNull(e.ref)||void 0),!e.data){var n=t.attr("data-items");if(n)try{e.data=JSON.parse(unescape(n))}catch(t){}}this.$el.removeAttr("data-items")},c=function(){var t=this;if(r.isAutoLoad.call(this)&&s.isFunction(this.load)){var e=this.options.api||this.$el.attr("api-name"),i=$.extend({},this.getInitParams()),n=s.isFunction(this.getPaginator)&&this.getPaginator();n&&(!i.p_no&&s.isFunction(n.getPage)&&(i.p_no=n.getPage()),!i.p_size&&s.isFunction(n.getSize)&&(i.p_size=n.getSize())),this.load(e,i,function(){setTimeout(function(){u.call(t)})})}},u=function(){function t(t){s.isFunction(i.setSelectedIndex)&&i.setSelectedIndex(t)}function e(t){s.isFunction(i.setSelectedKey)&&i.setSelectedKey(t)}var i=this,n=this.options||{};n.hasOwnProperty("selectedIndex")?t(n.selectedIndex):s.isNotBlank(this.$el.attr("data-tryindex"))?t(this.$el.attr("data-tryindex")):n.hasOwnProperty("selectedId")?e(n.selectedId):s.isNotBlank(this.$el.attr("data-tryid"))&&e(this.$el.attr("data-tryid")),delete n.selectedIndex,delete n.selectedId,this.$el.removeAttr("data-tryindex"),this.$el.removeAttr("data-tryid")}}}("undefined"!=typeof window),function(l){if(!l||!VRender.Component.ui._items){var i=l?VRender.Component.ui:require("./init"),o=i.fn,d=i.util,a=i._items=function(t,e){return i._base.call(this,t,e)},t=a.prototype=new i._base(!1);a.init=function(t,e){i._base.init.call(this,t,e),this._initPager(),this._checkIfEmpty()},a.doAdapter=function(t){s.doAdapter.call(this,t)},a.renderItems=function(t,e){s.renderItems.call(this,$,t,e),this._checkIfEmpty()},a.renderOneItem=function(t,e,i,n){return s.renderOneItem.call(this,$,t,e,i,n)},a.addItem=function(t,e,i){e=d.getIndexValue(e),t=o.doAdapter.call(this,t,e),i=i||this.getData();var n=null,a=this._getItemContainer();if(a&&0<a.length){if(n=this._getNewItem($,a,t,e)){if(0<=e&&e<i.length){var s=this._getItems();s&&0<s.length&&s.eq(e).before(n)}this._renderOneItem($,n,t,e)}this._checkIfEmpty()}return 0<=e&&e<i.length?i.splice(e,0,t):i.push(t),n},a.updateItem=function(t,e,i){if(t=o.doAdapter.call(this,t,e),0<=(e=e||0===e?d.getIndexValue(e):this.getDataIndex(t)))if(e<(i=i||this.getData()).length){var n=this._getItemContainer();if(n&&0<n.length){var a=this._getItems(),s=this._getNewItem($,n,t,e);s?(a.eq(e).before(s).remove(),this._renderOneItem($,s,t,e)):a.eq(e).remove()}this._checkIfEmpty(),i.splice(e,1,t)}else e=-1;return e},a.removeItem=function(t,e,i){if(t&&0<t.length)e=t.index();else{if((e=d.getIndexValue(e))<0)return null;var n=this._getItems();n&&n.length>e&&(t=n.eq(e))}return t&&0<t.length&&(t.remove(),this._checkIfEmpty()),(i=i||this.getData())&&e<i.length?i.splice(e,1):null},a.initPager=function(){if(this.options.hasOwnProperty("pager"))this.setPaginator(this.options.pager);else{var t=this.$el.attr("opt-pager");t&&(t=$(t))&&0<t.length&&(t=VRender.Component.get(t)||VRender.FrontComponent.get(t)||t,this.setPaginator(t)),this.$el.removeAttr("opt-pager")}},a.setPager=function(a){var s=this;this.pager&&d.isFunction(this.pager.off)&&this.pager.off("change"),(this.pager=a)&&d.isFunction(a.on)&&a.on("change",function(t,e){var i=$.extend({},s.lastLoadParams);i.p_no=e&&e.page,i.p_size=e&&e.size,!i.p_no&&d.isFunction(a.getPage)&&(i.p_no=a.getPage()),!i.p_size&&d.isFunction(a.getSize)&&(i.p_size=a.getSize());var n=s._pageInfo||{};i.p_no==n.page&&i.p_size==n.size||s.load(s.lastLoadApi,i)})},a.checkIfEmpty=function(){var t=this._getItems();t&&0<t.length?this.$el.removeClass("is-empty"):this.$el.addClass("is-empty")},a.isDisabled=function(t){if("number"!=typeof t)return"string"==typeof t?this.isDisabled(this.getIndexByName(t)):this.$el.is(".disabled");var e=this._getItemAt(t);return!e||e.is(".disabled")},a.setDisabled=function(t,e){if("string"==typeof e)return this.setDisabled(t,this.getIndexByName(e));var i=this.$el;if("number"==typeof e&&(i=this._getItemAt(e)),i&&((t=!(!d.isNull(t)&&!d.isTrue(t)))?i.addClass("disabled").attr("disabled","disabled"):i.removeClass("disabled").removeAttr("disabled"),d.isFunction(this.getDisableField))){var n=this.getDisableField();if(n){var a=this._getItemData(i);a&&(a[n]=t)}}},t.init=function(t,e){return a.init.call(this,t,e)},t.setData=function(t){this.options.data=this._doAdapter(t),this.rerender()},t.getDataAt=function(t){if((t=d.getIndexValue(t))<0)return null;var e=this.getData()||[];return t<e.length?e[t]:null},t.getDataIndex=function(e){var i=this,t=this.getData();if(t&&0<t.length){var n=this._getDataKey(e);return d.index(t,function(t){return t==e||i._getDataKey(t)==n})}return-1},t.getDataByKey=function(t){return this.getDataAt(this.getIndexByKey(t))},t.getIndexByKey=function(e){var i=this,t=this.getData();return t&&0<t.length?d.index(t,function(t){return i._getDataKey(t)==e}):-1},t.getDataByName=function(t){return this.getDataAt(this.getIndexByName(t))},t.getIndexByName=function(t){var e=this.getData();return e&&0<e.length?d.indexBy(e,"name",t):-1},t.getKeyField=function(){return this.options.keyField||this.$el.attr("opt-key")},t.setKeyField=function(t){t=d.trimToEmpty(t),this.getKeyField()!=t&&(this.options.keyField=t,this.$el.attr("opt-key",this.options.keyField),this.rerender())},t.getLabelField=function(){return this.options.labelField||this.$el.attr("opt-lbl")},t.setLabelField=function(t){t=d.trimToEmpty(t),this.getLabelField()!=t&&(this.options.labelField=t,this.$el.attr("opt-lbl",this.options.labelField),this.rerender())},t.getLabelFunction=function(){return o.getFunction.call(this,"labelFunction","lblfunc")},t.setLabelFunction=function(t){this.getLabelFunction()!=t&&(this.options.labelFunction=t,this.$el.children(".ui-fn[name='lblfunc']").remove(),this.rerender())},t.getItemRenderer=function(){return this.options.hasOwnProperty("renderer")?this.options.renderer:o.getFunction.call(this,"itemRenderer","irender")},t.setItemRenderer=function(t){this.getItemRenderer()!=t&&(this.options.itemRenderer=t,delete this.options.renderer,this.$el.children(".ui-fn[name='irender']").remove(),this.rerender())},t.getPaginator=function(){return this.pager},t.setPaginator=function(t){a.setPager.call(this,t)},t.length=function(){return d.toArray(this.getData()).length},t.isDisabled=function(t){return a.isDisabled.call(this,t)},t.setDisabled=function(t,e){a.setDisabled.call(this,t,e)},t.addItem=function(t,e){return a.addItem.call(this,t,e)},t.updateItem=function(t,e){return a.updateItem.call(this,t,e)},t.removeItem=function(t){return this.removeItemAt(this.getDataIndex(t))},t.removeItemAt=function(t){return a.removeItem.call(this,null,t)},t.addOrUpdateItem=function(t){var e=this.getDataIndex(t);0<=e?this.updateItem(t,e):this.addItem(t,e)},t.getItemData=function(t){var e=$(t);if(e&&0<e.length){var i=this._getItemContainer();if(i&&0<i.length){for(t=e.parent();;){if(!t||0==t.length){e=null;break}if(t.is(i))break;t=(e=t).parent()}if(e&&0<e.length)return this._getItemData(e)}}return null},t.more=function(n){var a=this;if(this.lastLoadApi&&this.hasMore()&&!this.isLoading()){var t=d.extend({},this.lastLoadParams);return t.p_no=parseInt(this._pageInfo&&this._pageInfo.page)||0,t.p_no+=1,d.isFunction(this._moreBefore)?this._moreBefore(this.lastLoadApi,t):d.isFunction(this._loadBefore)&&this._loadBefore(this.lastLoadApi,t),o.load.call(this,this.lastLoadApi,t,function(t,e){if(!t&&d.isArray(e))if(d.isFunction(a.addItem))d.each(e,function(t){a.addItem(t)});else{var i=a.options.data||[];a.options.data=i.concat(e)}setTimeout(function(){d.isFunction(a._moreAfter)?a._moreAfter(t,e):d.isFunction(a._loadAfter)&&a._loadAfter(t,e),d.isFunction(n)&&n(t,e),a.trigger("loaded",t,e)})}),!0}return!1},t.loadPage=function(t,e){if(this.lastLoadApi&&!this.isLoading()){var i=d.extend({},this.lastLoadParams);i.p_no=parseInt(t)||1,this.load(null,i,e)}},t.hasMore=function(){return!!this._pageInfo&&(parseInt(this._pageInfo.page)||1)*(parseInt(this._pageInfo.size)||20)<(parseInt(this._pageInfo.total)||0)},t.isEmpty=function(){if(this.$el.is(".is-empty"))return!0;var t=this.getData();return!t||0==t.length},t.rerender=function(){var e=this;d.debounce("ui_render-"+this.getViewId(),function(){var t=e._getItemContainer();t&&0<t.length&&e._renderItems($,t.empty(),e.getData())})},t._doAdapter=function(t){return a.doAdapter.call(this,t)},t._getItemContainer=function(){return this.$el},t._getNewItem=function(t,e,i,n){return t("<li></li>").appendTo(e)},t._renderItems=function(t,e,i){a.renderItems.call(this,e,i)},t._renderOneItem=function(t,e,i,n){return a.renderOneItem.call(this,e,null,i,n)},t._isDisabled=function(t,e){if(t){var i=this.options;i.hasOwnProperty("disableField")||(i.disableField=this.$el.attr("opt-disabled"));var n=i.disableField;if(n&&t.hasOwnProperty(n))return d.isTrue(t[n])}return!1},t._getItems=function(t){var e=this._getItemContainer();if(e&&0<e.length)return e.children(t)},t._getItemAt=function(n){return 0<=(n=d.getIndexValue(n))?d.find(this._getItems(),function(t,e){var i=parseInt(t.attr("opt-ind"));return isNaN(i)&&(i=e),n==i}):null},t._getItemData=function(t,e){var i=t.data("itemData");if(!i){var n=this.getData();d.isArray(n)&&((isNaN(e)||!e&&0!==e)&&(e=parseInt(t.attr("opt-ind")),isNaN(e)&&(e=t.index())),i=n[e])}return d.isEmpty(i)?null:i},t._initPager=function(){a.initPager.call(this)},t._checkIfEmpty=function(){a.checkIfEmpty.call(this)},t._getLoadText=function(){return this.options.loadingText},t._getLoadView=function(){return this.options.loadingView},t._getMoreText=function(){return this.options.moreText},t._getMoreView=function(){return this.options.moreView},t._getEmptyText=function(){return this.options.emptyText||this.options.empty},t._getEmptyView=function(){return this.options.emptyView};var s=i._itemsRender=function(t,e){i._baseRender.call(this,t,e)},e=s.prototype=new i._baseRender(!1);s.render=function(t,e){i._baseRender.render.call(this,t,e),e.attr("opt-key",d.trimToNull(this.getKeyField())),e.attr("opt-lbl",d.trimToNull(this.getLabelField())),e.attr("opt-disable",d.trimToNull(this.options.disableField)),o.renderFunction(e,"lblfunc",this.getLabelFunction()),o.renderFunction(e,"irender",this.getItemRenderer()),this._renderItems(t,e),this._renderEmptyView(t,e),this._renderLoadView(t,e),this._renderPager(t,e)},s.renderData=function(t,e,i){if(0<(i=d.toArray(i)||[]).length){var n=this.getDataMapper();d.isFunction(n)&&(i=d.map(i,n))}e.attr("data-items",escape(JSON.stringify(i)))},s.renderItems=function(n,a,t){var s=this;if((t=t||this.getData())&&0<t.length){var r=this._render_items=[];d.each(t,function(t,e){var i=s._getNewItem(n,a,t,e);i&&(r.push({item:i,data:t,index:e}),s._renderOneItem(n,i,t,e))}),setTimeout(function(){s._render_items=null})}},s.renderOneItem=function(t,e,i,n,a){l?e.data("itemData",n):this.renderItemData(t,e,n),this._isDisabled(n,a)&&e.addClass("disabled").attr("disabled","disabled"),i=i||e;var s=this.getItemRenderer();if(d.isFunction(s)){var r=null;r=(s._state,s.call(this,t,e,n,a)),d.isNotNull(r)&&i.empty().append(r)}else{var o=this._getDataLabel(n,a);i.html(d.isNull(o)?"":o)}},s.renderPager=function(t,e,i){l||(!i&&d.isFunction(this.getPaginator)&&(i=this.getPaginator()),i&&("string"==typeof i?e.attr("opt-pager",d.trimToNull(i)):d.isFunction(i.getViewId)&&e.attr("opt-pager","[vid='"+i.getViewId()+"']")))},s.renderEmptyView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-empty");var a=d.isFunction(this._getEmptyView)?this._getEmptyView():this.options.emptyView;if(a)o.renderSubView.call(this,n,a);else{(a=t("<div></div>").appendTo(n)).addClass((i||"ui")+"-emptydef");var s=this.options.emptyText||this.options.empty;d.isFunction(this._getEmptyText)&&(s=this._getEmptyText()),(s=d.isNull(s)?"没有数据":d.trimToEmpty(s))&&t("<p></p>").appendTo(a).text(s)}return n},s.renderLoadView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-load");var a=d.isFunction(this._getLoadView)?this._getLoadView():this.options.loadingView;if(a)o.renderSubView.call(this,n,a);else{var s=t("<div></div>").appendTo(n);s.addClass((i||"ui")+"-loaddef");var r=d.isFunction(this._getLoadText)?this._getLoadText():this.options.loadingText;(r=d.isNull(r)?"正在加载..":d.trimToEmpty(r))&&t("<p></p>").appendTo(s).html(r)}return n},s.renderMoreView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-more"),this._pageInfo&&n.attr("page-no",this._pageInfo.page);var a=d.isFunction(this._getMoreView)?this._getMoreView():this.options.moreView;if(a)o.renderSubView.call(this,n,a);else{var s=t("<div></div>").appendTo(n);s.addClass((i||"ui")+"-moredef");var r=d.isFunction(this._getMoreText)?this._getMoreText():this.options.moreText;(r=d.isNull(r)?"加载更多":d.trimToEmpty(r))&&t("<p></p>").appendTo(s).html(r)}return n},s.doAdapter=function(t){var i=this;return(t=d.toArray(t))._vr_adapter_flag||((t=d.map(t,function(t,e){return o.doAdapter.call(i,t,e)}))._vr_adapter_flag=!0),t},e.render=function(t,e){s.render.call(this,t,e)},e.renderData=function(t,e){l||s.renderData.call(this,t,e,this.getData())},e.renderItemData=function(t,e,i){o.renderData.call(this,t,e,i)},e._renderItems=function(t,e){var i=this._getItemContainer(t,e);i&&s.renderItems.call(this,t,i)},e._getNewItem=function(t,e,i,n){return t("<li></li>").appendTo(e)},e._renderOneItem=function(t,e,i,n){s.renderOneItem.call(this,t,e,null,i,n)},e._renderPager=function(t,e){s.renderPager.call(this,t,e)},e._renderEmptyView=function(t,e){s.renderEmptyView.call(this,t,e)},e._renderLoadView=function(t,e){s.renderLoadView.call(this,t,e)},e._renderMoreView=function(t,e){s.renderMoreView.call(this,t,e)},e.getPaginator=function(){return this.options.paginator||this.options.pager},e.getKeyField=function(){return this.options.keyField},e.getLabelField=function(){return this.options.labelField},e.getLabelFunction=function(){return this.options.labelFunction},e.getItemRenderer=function(){return this.options.itemRenderer},e._getItemContainer=function(t,e){return e},e._isDisabled=function(t,e){if(t){var i=this.options.disableField||"disabled";if(i&&t.hasOwnProperty(i))return d.isTrue(t[i])}return!1},e._getDataLabel=function(t,e){return o.getDataLabel.call(this,t,e)},e._doAdapter=function(t){return s.doAdapter.call(this,t)}}}("undefined"!=typeof window),function(r){if(!r||!VRender.Component.ui._select){var i=r?VRender.Component.ui:require("./init"),o=i.fn,l=i.util,a=i._select=function(t,e){return i._items.call(this,t,e)},t=a.prototype=new i._items(!1);a.init=function(t,e){return i._items.init.call(this,t,e)},a.getSelectedIndex=function(t){var n=this,a=this.$el.attr("data-inds");if(l.isNull(a)){a=[];var s=this.$el.attr("data-ids");l.isNull(s)?l.each(this.getData(),function(t,e){n._isSelected(t,e,[],[])&&a.push(e)}):0<s.length&&(s=s.split(","),l.each(this.getData(),function(t,e){var i=n._getDataKey(t);0<=l.index(s,function(t){return t==i})&&a.push(e)}))}else a=o.getIntValues(a,0);return this.isMultiple()?0<a.length?a:null:t?0<a.length?[a[0]]:null:0<a.length?a[0]:-1},a.setSelectedIndex=function(t){var e=l.isFunction(this.length)?this.length()-1:null,i=o.getIntValues(t,0,e);return 1<i.length&&!this.isMultiple()&&(i=[i[0]]),this.$el.attr("data-inds",i.join(",")),this.$el.removeAttr("data-ids"),i},a.getSelectedKey=function(t){var i=this,n=this.$el.attr("data-ids"),e=this.$el.attr("data-inds");if(l.isNotNull(e)){if(n=[],0<(e=o.getIntValues(e,0)).length){var a=this.getData()||[];l.each(e,function(t){var e=t<a.length?a[t]:null;e&&n.push(i._getDataKey(e))})}}else l.isNull(n)?(n=[],l.each(this.getData(),function(t,e){i._isSelected(t,e,[],[])&&n.push(i._getDataKey(t))})):l.isArray(n)||(n=n.split(","));if(!n||0==n.length)return null;var s=[];return l.each(n,function(t){!t&&0!==t||s.push(isNaN(t)?t:parseInt(t))}),0==s.length?null:this.isMultiple()?s:t?[s[0]]:s[0]},a.setSelectedKey=function(n){var a=this;l.isArray(n)||(n=l.isBlank(n)?[]:l.trimToEmpty(n).split(","));var s=[];l.each(this.getData(),function(t,e){var i=a._getDataKey(t);0<=l.index(n,function(t){return t==i})&&s.push(e)}),this.setSelectedIndex(s)},a.getSelectedData=function(t,e){var i=this,n=this.getSelectedIndex(!0),a=[];n||(a=this.getSelectedKey(!0)||[]);var s=[];return e=e||this.getData(),l.each(e,function(t,e){i._isSelected(t,e,n,a)&&s.push(t)}),0==s.length?null:this.isMultiple()?s:t?[s[0]]:s[0]},a.updateSelection=function(){var i=this,n=[];return l.each(this._getItems(),function(t,e){i._isItemSelected(t)&&n.push(e)}),a.setSelectedIndex.call(this,n),n},a.addItem=function(t,e){return i._itemsRender.addItem.call(this,t,e)},a.updateItem=function(t,e){return i._itemsRender.updateItem.call(this,t,e)},a.removeItem=function(t,e){return i._itemsRender.removeItem.call(this,t,e)},t.init=function(t,e){return a.init.call(this,t,e)},t.isMultiple=function(){return"multiple"==this.$el.attr("multiple")},t.setMultiple=function(t){t=!(!l.isNull(t)&&!l.isTrue(t)),this.isMultiple()!=t&&(t?this.$el.attr("multiple","multiple"):this.$el.removeAttr("multiple"),this.rerender())},t.getSelectedIndex=function(t){return a.getSelectedIndex.call(this,t)},t.setSelectedIndex=function(t){var i=this,e=this._snapshoot(),n=ComponentSelect.setSelectedIndex.call(this,t);return l.each(this._getItems(),function(t,e){i._setItemSelected(t,0<=n.indexOf(e))}),e.done(),n},t.getSelectedKey=function(t){return a.getSelectedKey.call(this,t)},t.setSelectedKey=function(t){return a.setSelectedKey.call(this,t)},t.getSelectedData=function(t){return a.getSelectedData.call(this,t)},t.isSelectedIndex=function(t){return!((t=l.getIndexValue(t))<0)&&this._isSelected(this.getDataAt(t),t)},t.isSelectedKey=function(e){if(l.isBlank(e))return!1;var t=this.getSelectedKey(!0);return 0<=l.index(t,function(t){return t==e})},t.isAllSelected=function(){var t=this.length();if(0<t){var e=this.getSelectedIndex(!0);return e&&e.length==t}return!1},t.addItem=function(t,e){var i=a.addItem.call(this,t,e);return i&&a.updateSelection.call(this),i},t.updateItem=function(t,e){return 0<=(e=a.updateItem.call(this,t,e))&&a.updateSelection.call(this),e},t.removeItem=function(t){return(t=a.removeItem.call(this,t))&&a.updateSelection.call(this),t},t.removeItemAt=function(t){var e=a.removeItem.call(this,null,t);return e&&a.updateSelection.call(this),e},t._isSelected=function(t,e,i,n){return s.isSelected.call(this,t,e,i,n)},t._isItemSelected=function(t){return t.is(".selected")},t._setItemSelected=function(t,e){e?t.addClass("selected"):t.removeClass("selected")},t._snapshoot_shoot=function(t,e,i){t.selectedIndex=e||this.getSelectedIndex(),t.selectedData=i||this.getSelectedData(),t.data=t.selectedData},t._snapshoot_compare=function(t,e){return e||(e=this.getSelectedIndex(!0)),o.equalIndex(t.selectedIndex,e)};var s=i._selectRender=function(t,e){i._itemsRender.call(this,t,e)},e=s.prototype=new i._itemsRender(!1);s.render=function(t,e){i._itemsRender.render.call(this,t,e),this.isMultiple()&&e.attr("multiple","multiple"),this.renderSelection(t,e)},s.renderSelection=function(t,e,i){var n=this,a=this.getSelectedIndex(!0),s=this.getSelectedKey(!0);a&&e.attr("data-inds",a.join(",")),s&&e.attr("data-ids",s.join(",")),!r&&this.options.apiName&&(a&&e.attr("data-tryindex",a.join(",")),s&&e.attr("data-tryid",s.join(","))),i&&0<i.length&&(s=s||[],l.each(i,function(t,e){n._isSelected(t.data,t.index,a,s)&&(l.isFunction(n._setItemSelected)?n._setItemSelected(t.item,!0):t.item.addClass("selected"))}))},s.getSelectedIndex=function(t){var e=this.options.selectedIndex;if(l.isBlank(e))return t||this.isMultiple()?null:-1;l.isArray(e)||(e=(""+e).split(","));var i=[];return l.each(e,function(t){if(!isNaN(t)){var e=parseInt(t);!isNaN(e)&&0<=e&&i.push(e)}}),this.isMultiple()?0<i.length?i:null:i&&0<i.length?t?[i[0]]:i[0]:-1},s.getSelectedKey=function(t){var e=this.options.selectedKey;if(l.isBlank(e))return t||this.isMultiple()?[]:null;l.isArray(e)||(e=(""+e).split(","));var i=[];return l.each(e,function(t){!t&&0!==t||i.push(isNaN(t)?t:parseInt(t))}),0==i.length?null:this.isMultiple()?i:t?[i[0]]:i[0]},s.getSelectedData=function(t,e){var i=[];if((e=e||this.getData())&&0<e.length)for(var n=this.getSelectedIndex(!0),a=this.getSelectedKey(!0)||[],s=0,r=e.length;s<r;s++){var o=e[s];this._isSelected(o,s,n,a)&&i.push(o)}return 0==i.length?null:this.isMultiple()?i:t?[i[0]]:i[0]},s.isSelected=function(t,e,i,n){if(i||n||(i=this.getSelectedIndex(!0),n=this.getSelectedKey(!0)||[]),i)return!((e=l.getIndexValue(e))<0)&&0<=i.indexOf(e);if(n){var a=this._getDataKey(t);return 0<=l.index(n,function(t){return t==a})}return!1},s.isAllSelected=function(t){if((t=t||this.getData())&&0<t.length){for(var e=this.getSelectedIndex(!0),i=this.getSelectedKey(!0)||[],n=0,a=t.length;n<a;n++)if(!this._isSelected(t[n],n,e,i))return!1;return!0}return!1},e.render=function(t,e){s.render.call(this,t,e)},e.renderSelection=function(t,e){s.renderSelection.call(this,t,e,this._render_items)},e.getSelectedIndex=function(t){return s.getSelectedIndex.call(this,t)},e.getSelectedKey=function(t){return s.getSelectedKey.call(this,t)},e.getSelectedData=function(t){return s.getSelectedData.call(this,t)},e.isMultiple=function(){return o.isMultiple.call(this)},e.isAllSelected=function(){return s.isAllSelected.call(this)},e._isSelected=function(t,e,i,n){return s.isSelected.call(this,t,e,i,n)},e._setItemSelected=function(t,e){e?t.addClass("selected"):t.removeClass("selected")}}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.group){var n=t?VRender.Component.ui:require("../../static/js/init"),h=n.util,e="vertical",c="horizontial",i=n.group=function(t,e){return n._base.call(this,t,e)},a=i.prototype=new n._base(!1);a.getOrientation=function(){return this.$el.attr("opt-orientation")},a.setOrientation=function(t){this.$el.removeClass(c).removeClass(e),this.$el.removeAttr("opt-orientation"),t!==c&&t!==e||this.$el.addClass(t).attr("opt-orientation",t),s.call(this)},a.getGap=function(){return this.$el.attr("opt-gap")||0},a.setGap=function(t){this.$el.attr("opt-gap",h.trimToEmpty(t)),s.call(this)},a.getAlign=function(){return this.$el.attr("opt-align")},a.setAlign=function(t){this.$el.attr("opt-align",h.trimToEmpty(t)),s.call(this)},a.append=function(t){var e=this;if(!arguments||0==arguments.length)return this;for(var i=0,n=arguments.length;i<n;i++){var a=arguments[i];h.isArray(a)?a.forEach(function(t){e.add(t)}):this.add(a)}return this},a.add=function(t,e){if(h.isNotBlank(t)){var i=t.$el||t;this.getOrientation()&&(i=$("<div class='grp-item'></div>").append(i)),e=isNaN(e)||""===e?-1:parseInt(e);var n=this.$el.children();0<=e&&e<n.length?n.eq(e).before(i):this.$el.append(i),s.call(this)}return t},a.removeAt=function(t){var e=this.$el.children().eq(t).remove();return s.call(this),e.children()};var s=function(){var t=this;h.debounce("group_layout-"+this.getViewId(),function(){p.call(t,$,t.$el)})},r=function(t,e){n._baseRender.call(this,t,e)},o=r.prototype=new n._baseRender(!1);o.render=function(t,e){n._baseRender.render.call(this,t,e),e.addClass("ui-group");var i=this.getOrientation();return i&&(e.addClass(i),e.attr("opt-orientation",i)),e.attr("opt-gap",this.getGap()),e.attr("opt-align",this.getAlign()),l.call(this,t,e),this},o.getOrientation=function(){var t=this.options.orientation;return t==c||t==e?t:null},o.getGap=function(){return this.options.gap},o.getAlign=function(){return this.options.align};var l=function(t,e){u.call(this,t,e,d.call(this))},d=function(){return this.options.children||this.options.subViews||this.options.views},u=function(i,n,t){t=h.toArray(t);var a=this.getOrientation();h.each(t,function(t){if(h.isNotNull(t)){var e=n;a&&(e=i("<div class='grp-item'></div>").appendTo(n)),h.isFunction(t.render)?t.render(e):e.append(t.$el||t)}}),p.call(this,i,n)},p=function(t,e){var i="",n="",a="",s="",r="",o=h.getFormatSize(this.getGap(),this._isRenderAsRem())||"";this.getOrientation()==c?(r="inline-block",i=o):n=o;var l=this.getAlign()||"";l=l.toLowerCase(),/left/.test(l)?a="left":/center/.test(l)?a="center":/right/.test(l)&&(a="right"),/top/.test(l)?s="top":/middle/.test(l)?s="middle":/bottom/.test(l)&&(s="bottom"),e.css("text-align",a);var d=e.children();d.css("display",r),d.css("vertical-align",s),d.css("margin-left",i).css("margin-top",n),d.eq(0).css("margin-left","").css("margin-top","")};t?(window.UIGroup=i,window.UIHGroup=function(t){return new i(h.extend(t,{orientation:c}))},window.UIVGroup=function(t){return new i(h.extend(t,{orientation:e}))},n.init(".ui-group",i,r)):module.exports=r}}("undefined"!=typeof window),function(o){if(!o||!VRender.Component.ui.button){var l=o?VRender.Component.ui:require("../../static/js/init"),d=l.util,h=["ui-btn-default","ui-btn-primary","ui-btn-success","ui-btn-danger","ui-btn-warn","ui-btn-info","ui-btn-link","ui-btn-text"],c=["bigger","big","normal","small","tiny"],t=l.button=function(t,e){return l._base.call(this,t,e)},e=t.prototype=new l._base(!1);e.init=function(t,e){l._base.init.call(this,t,e),this._isRenderAsApp()&&t.on("tap",".dropdown",r.bind(this)),t.on("tap",".btn",a.bind(this)),t.on("tap",".dropdownbtn",s.bind(this)),t.on("tap",".dropdown li",u.bind(this))},e.getLabel=function(){return this.options.label},e.setLabel=function(t){this.options.label=t;var e=this.$el.children(".btn");e.children("span").remove(),d.isNotBlank(t)&&$("<span></span>").appendTo(e).text(d.trimToEmpty(t)||" ")},e.waiting=function(t){t=d.isNull(t)||!0===t?parseInt(this.$el.attr("opt-wait"))||-1:Math.max(0,parseInt(t))||0,m.call(this,t)},e.isWaiting=function(){return this.$el.is(".waiting")},e.setWaiting=function(t){t=!0===t||d.isNull(t)?-1:Math.max(0,parseInt(t))||0,this.$el.attr("opt-wait",t)};var i=function(t,e){l._baseRender.call(this,t,e)},n=i.prototype=new l._baseRender(!1);n.render=function(t,e){l._baseRender.render.call(this,t,e),e.addClass("ui-btn");var i=this.options||{},n=i.size;n&&0<=c.indexOf(n)&&e.addClass(n);var a=i.style||"";h.indexOf(a)<0&&e.addClass(D(i.type)),d.isTrue(i.toggle)&&e.attr("opt-toggle","1"),d.isNotBlank(i.link)&&e.attr("data-lnk",d.trimToNull(i.link));var s=t("<button class='btn'></button>").appendTo(e),r=b.call(this);d.isNotBlank(r)&&t("<i class='icon'></i>").appendTo(s).css(o?"backgroundImage":"background-image","url("+r+")");return d.isNotBlank(i.label)&&t("<span></span>").appendTo(s).text(d.trimToEmpty(i.label)||" "),f.call(this,t,e),g.call(this,t,e),this},n.getItems=function(){return d.toArray(this.options.items)};var a=function(t){if(!this.$el.is(".disabled, .waiting")){var e=this.$el,i=e.attr("data-lnk");if(i)window.open(i,"_self");else{var n=1==e.attr("opt-toggle");if(e.is(".has-items")){if(!n)return void v.call(this)}else n&&(1==e.attr("active")?e.removeAttr("active"):e.attr("active","1"));this.trigger("tap",e.attr("name"));var a=parseInt(e.attr("opt-wait"));a&&m.call(this,a)}}},s=function(t){return this.$el.is(".disabled, .waiting")||v.call(this),!1},r=function(t){$(t.target).is(".dropdown")&&y.call(this)},u=function(t){var e=$(t.currentTarget),i=e.attr("name")||"";return 1==this.$el.attr("opt-toggle")&&(this.$el.attr("name",i),this.$el.children(".btn").find("span").text(e.text())),this.trigger("tap",e.attr("name")),y.call(this),!1},p=function(t){l.fn.mouseDebounce(t,y.bind(this))},f=function(t,e){var i=_.call(this);i&&e.attr("opt-wait",i),d.isTrue(this.options.waiting)&&e.addClass("waiting")},g=function(i,t){t.removeClass("has-items"),t.children(".dropdownbtn").remove(),t.children(".dropdown").remove();var e=this.getItems();if(e&&0<e.length){t.addClass("has-items"),t.append("<span class='dropdownbtn'>&nbsp;</span>");var n=i("<div class='dropdown'></div>").appendTo(t),a=i("<ul></ul>").appendTo(n);d.each(e,function(t){if(d.isNotBlank(t)){d.isPrimitive(t)&&(t={label:t});var e=i("<li></li>").appendTo(a);t.name&&e.attr("name",t.name),i("<span></span>").appendTo(e).text(d.trimToEmpty(t.label)||" ")}})}},m=function(t){var e=this;if(this.t_wait&&(clearTimeout(this.t_wait),this.t_wait=0),t){var i=this.$el.addClass("waiting");0<t&&(this.t_wait=setTimeout(function(){e.t_wait=0,i.removeClass("waiting")},t))}else this.$el.removeClass("waiting")},v=function(){if(!this.$el.is(".show-dropdown")){var t=this.$el.addClass("show-dropdown");if(this._isRenderAsApp())$("html,body").addClass("ui-scrollless");else{t.on("mouseenter",p.bind(this)),t.on("mouseleave",p.bind(this));var e=t.children(".dropdown"),i=l.fn.getDropdownHeight.call(this,e);d.offset(e,this._getScrollContainer(),0,i).isOverflowY&&t.addClass("show-before")}setTimeout(function(){t.addClass("animate-in")})}},y=function(){if(this.$el.is(".show-dropdown")){var t=this.$el.addClass("animate-out");this._isRenderAsApp()?$("html,body").removeClass("ui-scrollless"):t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)}},D=function(t){if(d.isNotBlank(t)){if(0<=["ok","submit","save","primary","major"].indexOf(t))return"ui-btn-primary";if(0<=["danger","error"].indexOf(t))return"ui-btn-danger";if(0<=["success","complete","finish"].indexOf(t))return"ui-btn-success";if(0<=["warn","warning"].indexOf(t))return"ui-btn-warn";if(0<=["info","highlight"].indexOf(t))return"ui-btn-info";if("text"===t)return"ui-btn-text";if("link"===t)return"ui-btn-link"}return"ui-btn-default"},b=function(){var t=this.options.icon;if(!0===t){var e=this.options.type;"success"==e||"submit"==e?t="012b.png":"warn"==e?t="013b.png":"error"==e||"danger"==e?t="014b.png":"info"==e&&(t="015b.png"),!0!==t&&(t="/vrender-ui/icons/"+t)}return"string"==typeof t?t:null},_=function(){var t=0,e=this.options||{};return e.hasOwnProperty("waitTime")?t=e.waitTime:e.hasOwnProperty("wait")&&(t=e.wait),!0===t?-1:Math.max(0,parseInt(t))||0};o?(window.UIButton=t,l.init(".ui-btn",t,i)):module.exports=i}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.checkbox){var a=t?VRender.Component.ui:require("../../static/js/init"),s=a.util,e=a.checkbox=function(t,e){return a._select.call(this,t,e)},i=e.prototype=new a._select(!1);i.init=function(t,e){a._select.init.call(this,t,e),this.input=this.$el.children("input"),this.input.on("change",r.bind(this))},i.val=function(t){return s.isNotNull(t)&&this.input.val(t),this.input.val()},i.isChecked=function(){return this.input.is(":checked")},i.setChecked=function(t){var e=!!s.isNull(t)||s.isTrue(t);this.input[0].checked=e,this.input.trigger("change")},i.getLabel=function(){return this.$el.children("span").text()},i.setLabel=function(t){this.$el.children("span").remove(),s.isNotBlank(t)&&$("<span></span>").appendTo(this.$el).text(t)};var n=function(t,e){a._selectRender.call(this,t,e)};(n.prototype=new a._selectRender(!1)).render=function(t,e){a._selectRender.render.call(this,t,e),e.addClass("ui-chkbox");var i=this.options||{},n=t("<input type='checkbox'/>").appendTo(e);return s.isNotNull(i.value)&&n.val(i.value),s.isTrue(i.checked)&&(e.addClass("checked"),n.attr("checked","checked")),s.isNotNull(i.label)&&t("<span></span>").appendTo(e).text(i.label),n.attr("name",s.trimToNull(i.name)),this};var r=function(t){$(t.currentTarget).is(":checked")?this.$el.addClass("checked"):this.$el.removeClass("checked")};t?(window.UICheckbox=e,a.init(".ui-chkbox",e,n)):module.exports=n}}("undefined"!=typeof window),function(t){if(!t||!VRender.Component.ui.combobox){var h=t?VRender.Component.ui:require("../../static/js/init"),c=h.fn,u=h.util,e=h.combobox=function(t,e){return h._select.call(this,t,e)},i=e.prototype=new h._select(!1);i.init=function(t,e){h._base.init.call(this,t,e),t=this.$el,this._isRenderAsApp()&&this.isNative()?t.find("select").on("change",v.bind(this)):(this._isRenderAsApp()&&t.on("tap",".dropdown",m.bind(this)),t.on("tap",".ipt",s.bind(this)),t.on("tap",".item",r.bind(this)),t.on("tap",".ui-more",o.bind(this))),t.is(".editable")&&(t.on("keydown","input",l.bind(this)),t.on("keyup","input",d.bind(this)),t.on("focusin","input",p.bind(this)),t.on("focusout","input",f.bind(this)))},i.val=function(t){if(u.isNull(t)){var e=this.getSelectedIndex(!0);return e&&0<e?this.getSelectedKey():this.isEditable()?this.$el.find(".ipt > input").val():null}var i=this._snapshoot(),n=S.call(this,t);return n?this.setSelectedIndex(n[0]):(this.setSelectedIndex(-1),this.isMatchRequired()||(this.$el.find(".ipt > input").val(t),M.call(this,u.isNotBlank(t)))),i.done(),this},i.getData=function(t){return t?(this.options.data=this._doAdapter(this.options.data),this.options.data):N.call(this)},i.setDataSilent=function(t){this.options.data=t,I.call(this)},i.setSelectedIndex=function(t){var e=this._snapshoot(),i=h._select.setSelectedIndex.call(this,t);u.each(this._getItems(),function(t,e){T(t,0<=i.indexOf(e))}),i&&0!=i.length||this.$el.find("select").val(""),x.call(this),e.done()},i.getPrompt=function(){return this.$el.children(".ipt").find(".prompt").text()},i.setPrompt=function(t){var e=this.$el.children(".ipt");e.find(".prompt").remove(),u.isNotBlank(t)&&$("<span class='prompt'></span>").appendTo(e).text(t)},i.addItem=function(a,s){s=u.getIndexValue(s),a=c.doAdapter.call(this,a,s)||{};var t=this.getData(!0),r=!1;0<=s&&R.call(this,t,function(t,e,i,n){if(s==e)return i.splice(n,0,a),!(r=!0)}),r||(0<t.length?t[t.length-1].push(a):t.push([a]));var e=this._getNewItem($,this._getItemContainer());return this._renderOneItem($,e,a,s),r&&0<=s&&(this._getItems().eq(s).before(e),h._select.updateSelection.call(this)),e},i.updateItem=function(r,o){var l=this;if(r=c.doAdapter.call(this,r,o),0<=(o=o||0===o?u.getIndexValue(o):this.getDataIndex(r))){var t=this.getData(!0),d=null;R.call(this,t,function(t,e,i,n){if(o==e){i.splice(n,1,r);var a=l._getNewItem($,l._getItemContainer());l._renderOneItem($,a,r,o);var s=l._getItems();return(d=s.eq(o).before(a).remove()).is(".selected")&&T(a,!0),!1}}),h._select.updateSelection.call(this),d&&d.is(".selected")&&x.call(this)}return o},i.removeItemAt=function(a){if(0<=(a=u.getIndexValue(a))){var t=this._getItems().eq(a);if(t&&0<t.length){var e=t.parent();t.remove(),0==e.children().length&&e.remove()}var s=this.getData(!0),r=null;return R.call(this,s,function(t,e,i,n){if(a==e)return r=i.splice(n,1),0==i.length&&u.remove(s,function(t){return t==i}),!1}),h._select.updateSelection.call(this),t.is(".selected")&&x.call(this),r}return null},i.isNative=function(){return 1==this.$el.attr("opt-native")},i.isEditable=function(){return this.$el.is(".editable")},i.isMatchRequired=function(){return 1==this.$el.attr("opt-match")},i.rerender=function(){var a=this;u.debounce("combobox_render-"+this.getViewId(),function(){var t=a.$el.find(".ipt > input"),e=t.val()||"",i=a.getSelectedIndex(),n=a._getItemContainer();n&&0<n.length&&a._renderItems($,n.empty(),a.getData()),a.setSelectedIndex(i),a.isEditable()&&a.getSelectedIndex()<0&&(t.val(e||""),M.call(a,u.isNotBlank(e)))})},i._getItemContainer=function(){return this.$el.children(".dropdown").children(".box")},i._renderItems=function(t,e,i){i=i||this.getData(!0),D.call(this,t,this.$el,e,i)},i._renderOneItem=function(t,e,i,n){this._isRenderAsApp()&&this.isNative()?e.text(this._getDataLabel(i,n)):h._items.renderOneItem.call(this,e,null,i,n)},i._getNewItem=function(t,e,i,n){if(this._isRenderAsApp()&&this.isNative()){var a=e.children("select");return t("<option class='item'></option>").appendTo(a)}var s=e.children(".grp").last();return s&&0!=s.length||(s=t("<div class='grp'></div>").appendTo(e)),t("<div class='item'></div>").appendTo(s)},i._getItems=function(t){var e=this._getItemContainer().find(".item");return t&&(e=e.filter(t)),e},i._isItemSelected=function(t){return t.is(".selected")||t.is(":selected")},i._setItemSelected=function(t,e){T.call(this,t,e)},i._loadBefore=function(){if(!this._isRenderAsApp()||!this.isNative()){var t=this._getItemContainer();if(t.find(".ui-load, .ui-more").remove(),this._isRenderAsApp()&&this.isNative()){var e=this._getLoadText();if(e=u.isNull(e)?"正在加载..":u.trimToEmpty(e)){var i=t.children("select");$("<option class='ui-load'></option>").appendTo(i).text(e)}}else h._itemsRender.renderLoadView.call(this,$,t)}},i._loadAfter=function(){if(!this._isRenderAsApp()||!this.isNative()){var t=this._getItemContainer();if(t.find(".ui-load").remove(),this.hasMore())if(this.$el.addClass("has-more"),this._isRenderAsApp()&&this.isNative()){var e=this._getMoreText();if(e=u.isNull(e)?"加载更多":u.trimToEmpty(e)){var i=t.children(".select");$("<option class='ui-more'></option>").appendTo(i).text(e)}}else h._itemsRender.renderMoreView.call(this,$,t);else this.$el.removeClass("has-more")}},i._snapshoot_shoot=function(t){t.selectedIndex=this.getSelectedIndex(),t.value=this.$el.find(".ipt > input").val()||"",t.data=this.getSelectedData()},i._snapshoot_compare=function(t){var e=this.$el.find(".ipt > input").val()||"";if(t.value!=e)return!1;var i=this.getSelectedIndex();return c.equalIndex(i,t.selectedIndex)},i._doAdapter=function(t){return k.call(this,t)};var n=function(t,e){h._selectRender.call(this,t,e)},a=n.prototype=new h._selectRender(!1);a.render=function(t,e){e.addClass("ui-combobox");var i=this.options||{};return this.isNative()&&e.attr("opt-native","1"),u.isTrue(i.needMatch)&&e.attr("opt-match","1"),e.attr("opt-box",i.container),y.call(this,t,e),e.append("<div class='dropdown'><div class='box'></div></div>"),h._selectRender.render.call(this,t,e),this},a.getSelectedData=function(t){return h._selectRender.getSelectedData.call(this,t,N.call(this))},a.isNative=function(){return u.isTrue(this.options.native)},a._getItemContainer=function(t,e){return e.children(".dropdown").children(".box")},a._renderItems=function(t,e){var i=this._getItemContainer(t,e);D.call(this,t,e,i,this.getData())},a._renderEmptyView=function(t,e){},a._renderLoadView=function(t,e){},a._setItemSelected=function(t,e){e?t.addClass("selected").attr("selected","selected"):t.removeClass("selected").removeAttr("selected")},a._doAdapter=function(t){return k.call(this,t)};var s=function(t){var e=$(t.target);if(this._isRenderAsApp()){if(this.isEditable()&&!e.is(".dropdownbtn"))return}else this.isEditable()&&e.is(".dropdownbtn")&&this.$el.find(".ipt > input").focus();A.call(this)},r=function(t){var e=$(t.currentTarget);if(e.is(".selected")&&!this.isMultiple())return!1;var i=this._snapshoot();return e.is(".selected")?T(e,!1):(this.isMultiple()||T(this._getItems(".selected"),!1),T(e,!0)),h._select.updateSelection.call(this),x.call(this),i.done(),this.isMultiple()||F.call(this),!1},o=function(t){this.more()},l=function(t){if(!this._isRenderAsApp()&&(A.call(this),this.$el.off("mouseenter").off("mouseleave"),38==t.which||40==t.which)){if(this.isMultiple())return;var e=this.getSelectedIndex();38==t.which?0<e&&(e-=1):40==t.which&&e<this.length()-1&&(e+=1),this.setSelectedIndex(e)}},d=function(t){var e=$(t.currentTarget);if(13==t.which){F.call(this);var i=this._snapshoot(),n=h._select.updateSelection.call(this);n&&0<n.length?x.call(this):this.isMatchRequired()&&e.val(""),e.select(),i.done()}else if(!u.isControlKey(t)||8==t.which){var a=e.val();M.call(this,a&&0<a.length);var s=S.call(this,a,!0),r=T(this._getItems(),!1);this.$el.find("select").val(""),s&&0<=s[0]&&T(r.eq(s[0]),!0)}},p=function(t){this.t_focus&&(clearTimeout(this.t_focus),this.t_focus=0)},f=function(t){var n=this,a=$(t.currentTarget);this.t_focus=setTimeout(function(){if(n.t_focus=0,C.call(n)){var t=a.val(),e=S.call(n,t,!1);if(e&&0<=e[0])n.setSelectedIndex(e[0]);else if(n.isMatchRequired())e=S.call(n,t,!0),n.setSelectedIndex(e?e[0]:-1);else{var i=n._snapshoot();n.setSelectedIndex(-1),a.val(t),M.call(n,t&&0<t.length),i.done()}F.call(n)}},200)},g=function(t){c.mouseDebounce(t,F.bind(this))},m=function(t){$(t.target).is(".dropdown")&&F.call(this)},v=function(t){var e=this._snapshoot();this._getItems().removeClass("selected"),h._select.updateSelection.call(this),x.call(this),e.done()},y=function(t,e){var i=this,n=t("<div class='ipt'></div>").appendTo(e),a=t("<input type='text'/>").appendTo(n),s=this.getSelectedData(!0);if(s&&0<s.length){e.addClass("has-val");var r=u.map(s,function(t){return i._getDataLabel(t)});a.val(r.join(",")||"")}u.isTrue(this.options.editable)?e.addClass("editable"):a.attr("readonly","readonly"),n.append("<button class='dropdownbtn'></button>"),n.append("<span class='prompt'>"+u.trimToEmpty(this.options.prompt)+"</span>")},D=function(t,e,i,n){var a=this;this._render_items=[],this._isRenderAsApp()&&this.isNative()?_.call(this,t,i,n):b.call(this,t,i,n),setTimeout(function(){a._render_items=null})},b=function(n,i,t){var a=this;if(t&&0!=t.length){var s=this._render_items||[],r=function(t,e){var i=n("<div class='item'></div>").appendTo(t);s.push({item:i,data:e,index:s.length}),w.call(a,n,i,e)},o=i.children(".grp").last();u.each(t,function(t,e){u.isArray(t)?(0<t.length&&(o=n("<div class='grp'></div>").appendTo(i),t.title&&n("<div class='title'></div>").appendTo(o).text(t.title),u.each(t,function(t,e){r(o,t)})),o=null):(o&&0!=o.length||(o=n("<div class='grp'></div>").appendTo(i)),r(o,t))})}},_=function(n,t,e){var a=this,i=t.children("select");if(i&&0!=i.length||(i=n("<select size='1'></select>").appendTo(t),this.isMultiple()?i.attr("multiple","multiple"):i.append("<option disabled='disabled' selected='selected'>请选择..</option>")),e&&0<e.length){var s=this._render_items||[],r=function(t,e){var i=n("<option class='item'></option>").appendTo(t);s.push({item:i,data:e,index:s.length}),i.text(a._getDataLabel(e))};u.each(e,function(t){u.isArray(t)?u.each(t,function(t){r(i,t)}):r(i,t)})}},w=function(t,e,i,n){h._itemsRender.renderOneItem.call(this,t,e,e,i,n)},I=function(){var n=this;u.debounce("combobox_silent-"+this.getViewId(),function(){var t=n.getSelectedIndex(),e=n._getItemContainer();if(e&&0<e.length&&n._renderItems($,e.empty(),n.getData()),0<=t){var i=n._getItems().eq(t);i&&0<i.length&&T.call(n,i,!0)}})},x=function(){var e=this,t=this.getSelectedData(!0),i=u.map(t,function(t){return e._getDataLabel(t)});this.$el.find(".ipt > input").val(i.join(",")||""),M.call(this,t&&0<t.length)},S=function(r,o,l){var d=this;if(u.isBlank(r))return null;var h=null;return R.call(this,this.getData(!0),function(t,e,i,n){var a=d._getDataLabel(t)||"";if(r==a)return!(h=[e,t]);if(o&&r.length<a.length){var s=a.indexOf(r);if(0==s||0<s&&!l)return!(h=[e,t])}}),h},T=function(t,e){return e?t.addClass("selected").attr("selected","selected"):t.removeClass("selected").removeAttr("selected"),t},M=function(t){t?this.$el.addClass("has-val"):this.$el.removeClass("has-val")},C=function(){return this.$el.is(".show-dropdown")},A=function(){var t=this;if(!C.call(this)){var e=this.$el.addClass("show-dropdown");if(this._isRenderAsApp())$("html,body").addClass("ui-scrollless");else{e.on("mouseenter",g.bind(this)),e.on("mouseleave",g.bind(this));var i=e.children(".dropdown"),n=c.getDropdownHeight.call(this,i);u.offset(i,this._getScrollContainer(),0,n).isOverflowY&&e.addClass("show-before")}setTimeout(function(){t.t_focus&&(clearTimeout(t.t_focus),t.t_focus=0)},100),setTimeout(function(){e.addClass("animate-in")})}},F=function(){$("html,body").removeClass("ui-scrollless");var t=this.$el.addClass("animate-out");t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},R=function(t,e){for(var i=0,n=0;n<t.length;n++){var a=t[n];if(u.isArray(a)&&0<a.length)for(var s=0;s<a.length;s++){if(!1===e(a[s],i,a,s))return;i+=1}else{if(!1===e(a,i,t,n))return;i+=1}}},k=function(t){var n=this;if((t=u.toArray(t))._vr_adapter_flag)return t;var a=0,s=[],r=null;return u.each(t,function(t,e){if(u.isArray(t)){if(0<t.length){var i=u.map(t,function(t){return c.doAdapter.call(n,t,a++)});t.title&&(i.title=t.title),s.push(i)}r=null}else r||(r=[],s.push(r)),t=c.doAdapter.call(n,t,a++),r.push(t)}),s._vr_adapter_flag=!0,s},N=function(){var e=[];return u.each(this.getData(!0),function(t){u.isArray(t)?u.each(t,function(t){e.push(t)}):e.push(t)}),e};t?(window.UICombobox=e,h.init(".ui-combobox",e,n)):module.exports=n}}("undefined"!=typeof window),function(i){if(!i||!VRender.Component.ui.datepicker){var r=i?VRender.Component.ui:require("../../static/js/init"),f=(r.fn,r.util),S=["一","二","三","四","五","六","七","八","九","十","十一","十二"],g=["周日","周一","周二","周三","周四","周五","周六"],t=r.datepicker=function(t,e){return r._base.call(this,t,e)},e=t.prototype=new r._base(!1);e.init=function(t,e){if(r._base.init.call(this,t,e),this.$el.on("tap","header .title button",s.bind(this)),this.$el.on("tap","section td",o.bind(this)),this.$el.on("tap","footer .okbtn",l.bind(this)),this.$el.on("tap","footer .cancelbtn",d.bind(this)),this._isRenderAsApp()){this.$el.on("tap",function(t){return!1}),this.$el.on("tap","header .today",h.bind(this)),this.$el.on("tap","header .clear",c.bind(this));var i=this.$el.children("section");i.on("touchstart",u.bind(this)),i.on("touchmove",u.bind(this)),i.on("touchend",u.bind(this))}},e.getDate=function(t){if(!this.isRangeDate()){var e=f.toDate(this.$el.attr("data-dt"));return e&&f.isNotBlank(t)?f.toDateString(e,t):e}var i=f.toDate(this.$el.attr("data-start"));if(i){var n=f.toDate(this.$el.attr("data-end"))||new Date(i.getTime());return n=f.toDate(f.toDateString(n,"yyyy-MM-dd 23:59:59")),f.isNotBlank(t)&&(i=f.toDateString(i,t),n=f.toDateString(n,t)),[i,n]}return null},e.setDate=function(t){var e=this._snapshoot();if(this.isRangeDate()){var i=f.toDate(t),n=null;if(i){n=f.toDate(arguments[1])||new Date(i.getTime());R(i),R(n);R(i)<=R(n)?(i=f.toDateString(i,"yyyy-MM-dd"),n=f.toDateString(n,"yyyy-MM-dd")):i=n=null}this.$el.attr("data-start",i||""),this.$el.attr("data-end",n||"")}else{var a=f.toDate(t);this.$el.attr("data-dt",a?f.toDateString(a,"yyyy-MM-dd"):"")}e.compare()||this.rerender(this.getDate()),e.done()},e.getMinDate=function(){return f.toDate(this.$el.attr("opt-min"))},e.setMinDate=function(t){var e=f.toDate(t);R(e)!=R(this.getMinDate())&&(this.$el.attr("opt-min",e?f.toDateString(e,"yyyy-MM-dd"):""),this.rerender())},e.getMaxDate=function(){return f.toDate(this.$el.attr("opt-max"))},e.setMaxDate=function(t){var e=f.toDate(t);R(e)!=R(this.getMaxDate())&&(this.$el.attr("opt-max",e?f.toDateString(e,"yyyy-MM-dd"):""),this.rerender())},e.isRangeDate=function(){return this.$el.is(".is-range")},e.submit=function(){l.call(this)},e.cancel=function(){d.call(this)},e.rerender=function(e){var i=this;f.debounce("datepicker_render-"+this.getViewId(),function(){var t=i.lastSelectedDate||i.getDate();e=e||C.call(i),y.call(i,$,i.$el,t,e)})},e._snapshoot_shoot=function(t,e){t.selectedDate=e||this.getDate(),t.pickerDate=C.call(this),t.data=t.selectedDate},e._snapshoot_compare=function(t,e){var i=e||this.getDate();return i&&t.selectedDate?this.isRangeDate()?R(i[0])==R(t.selectedDate[0])&&R(i[1])==R(t.selectedDate[1]):R(i)==R(t.selectedDate):!(i||t.selectedDate)};var n=function(t,e){r._baseRender.call(this,t,e)},a=n.prototype=new r._baseRender(!1);a.render=function(t,e){r._baseRender.render.call(this,t,e),e.addClass("ui-datepicker");var i=this.options||{},n=f.toDate(i.min);n&&e.attr("opt-min",f.toDateString(n,"yyyy-MM-dd"));var a=f.toDate(i.max);a&&e.attr("opt-max",f.toDateString(a,"yyyy-MM-dd"));var s=A.call(this);return this.isRangeDate()?(e.addClass("is-range"),s&&(e.attr("data-start",f.toDateString(s[0],"yyyy-MM-dd")),e.attr("data-end",f.toDateString(s[1],"yyyy-MM-dd")))):s&&e.attr("data-dt",f.toDateString(s,"yyyy-MM-dd")),p.call(this,t,e),m.call(this,t,e),v.call(this,t,e),y.call(this,t,e,s),this},a.getMinDate=function(){return f.toDate(this.options.min)},a.getMaxDate=function(){return f.toDate(this.options.max)},a.isRangeDate=function(){return f.isTrue(this.options.range)};var s=function(t){var e=$(t.currentTarget),i=null;if(this.isRangeDate()&&!this._isRenderAsApp()){var n=e.parent();n.is(".s")?i=this.$el.find(".table.s"):n.is(".e")&&(i=this.$el.find(".table.e"))}else i=this.$el.find(".table.t0");var a=parseInt(i.attr("data-y")),s=parseInt(i.attr("data-m")),r=new Date(a,s,1);e.is(".y")?r.setFullYear(a+(e.is(".prev")?-1:1)):r.setMonth(s+(e.is(".prev")?-1:1)),i.attr("data-y",r.getFullYear()).attr("data-m",r.getMonth()),this.rerender()},o=function(t){var e=$(t.currentTarget);if(!e.is(".disabled"))if(this.isRangeDate()){if(this.selectedSnapshoot||(this.selectedSnapshoot=this._snapshoot()),this.lastSelectedDate&&1==this.lastSelectedDate.length){var i=f.toDate(e.attr("data-dt"));i.getTime()>=this.lastSelectedDate[0].getTime()?this.lastSelectedDate.push(i):this.lastSelectedDate.unshift(i)}else this.lastSelectedDate=[],this.lastSelectedDate.push(f.toDate(e.attr("data-dt")));this.rerender()}else{var n=this._snapshoot();this.$el.find("td.selected").removeClass("selected"),e.addClass("selected"),this.$el.attr("data-dt",e.attr("data-dt"));var a=f.toDate(e.attr("data-dt"));this.$el.find(".title .item .val").text(f.toDateString(a,"yyyy.MM.dd")),n.done()}},l=function(){if(this.isRangeDate()){if(this.lastSelectedDate&&0<this.lastSelectedDate.length){var t=this.lastSelectedDate[0],e=this.lastSelectedDate[1]||t;this.$el.attr("data-start",f.toDateString(t,"yyyy-MM-dd")),this.$el.attr("data-end",f.toDateString(e,"yyyy-MM-dd")),this.lastSelectedDate=null}M.call(this,!0)}this.trigger("submit",this.getDate())},d=function(){if(this.isRangeDate())if(this.lastSelectedDate=null,this.selectedSnapshoot){var t=this.selectedSnapshoot.getState();M.call(this);var e=t.selectedDate,i=e&&e[0],n=e&&e[1];this.$el.attr("data-start",i?f.toDateString(i,"yyyy-MM-dd"):""),this.$el.attr("data-end",n?f.toDateString(n,"yyyy-MM-dd"):""),this.rerender(t.pickerDate)}else this.rerender();this.trigger("cancel",this.getDate())},h=function(){this.rerender([new Date])},c=function(){var t=this._snapshoot();this.isRangeDate()?(M.call(this),this.$el.attr("data-start","").attr("data-end","")):this.$el.attr("data-dt",""),this.rerender(),t.done(),this.trigger("clear")},u=function(t){var e=t.touches&&t.touches[0];if("touchstart"==t.type)this.touchData={startX:e.pageX,startY:e.pageY},this.touchData.tableContainer=this.$el.find(".table.t0"),this.touchData.mainTable=this.touchData.tableContainer.children("table.body");else if("touchmove"==t.type){if(1<t.touches.length)return;var i=e.pageX-this.touchData.startX;if(!this.touchData.moving&&(Math.abs(i)<10||15<Math.abs(e.pageY-this.touchData.startY)))return;this.touchData.moving=!0,this.touchData.lastOffset=i,this.touchData.mainTable.css("transform","translate("+i+"px,0px)");var n=0<i?this.touchData.prevTable:this.touchData.nextTable;if(!n){var a=parseInt(this.touchData.tableContainer.attr("data-y")),s=parseInt(this.touchData.tableContainer.attr("data-m"));n=x($,this.$el.children("section")).addClass("t1"),0<i?(s-=1,this.touchData.prevTable=n):(s+=1,this.touchData.nextTable=n);var r=new Date(a,s,1),o=this.lastSelectedDate||this.getDate();w.call(this,$,this.$el,n,r,o)}this.touchData.contentWidth||(this.touchData.contentWidth=this.$el.children("section").width()),i+=this.touchData.contentWidth*(0<i?-1:1),n.css("transform","translate("+i+"px,0px)")}else if("touchend"==t.type&&this.touchData.moving){var l=0;20<Math.abs(this.touchData.lastOffset)&&(l+=this.touchData.contentWidth*(0<this.touchData.lastOffset?1:-1));var d="transform 200ms";this.touchData.mainTable.css("transition",d),this.touchData.mainTable.css("transform","translate("+l+"px,0px)"),0<this.touchData.lastOffset?(this.touchData.prevTable.css("transition",d),this.touchData.prevTable.css("transform","translate(0px,0px)")):(this.touchData.nextTable.css("transition",d),this.touchData.nextTable.css("transform","translate(0px,0px)"));var h=this.touchData;if(20<Math.abs(h.lastOffset)){var c=0<h.lastOffset?".prev.m":".next.m";this.$el.children("header").find(c).eq(0).tap()}setTimeout(function(){h.prevTable&&h.prevTable.remove(),h.nextTable&&h.nextTable.remove(),h.mainTable.css("transition",""),h.mainTable.css("transform","")},200)}},p=function(e,t){function i(){var t=e("<dl class='item'></dl>").appendTo(a);return t.append("<dt class='lbl'>-</dt><dd class='val'>-</dd>"),t.append("<button class='prev y'>&nbsp;</button>"),t.append("<button class='prev m'>&nbsp;</button>"),t.append("<button class='next m'>&nbsp;</button>"),t.append("<button class='next y'>&nbsp;</button>"),t}var n=e("<header></header>").appendTo(t),a=e("<div class='title'></div>").appendTo(n);this.isRangeDate()?(i().addClass("s").children(".lbl").html("开始日期<span class='y'></span>"),i().addClass("e").children(".lbl").html("结束日期<span class='y'></span>")):i(),this._isRenderAsApp()&&(n.append("<button class='today'><label>今天</label></button>"),n.append("<button class='clear'><label>清除</label></button>"))},m=function(t,e){var i=t("<section></section>").appendTo(e);this.isRangeDate()&&!this._isRenderAsApp()?(x(t,i).addClass("s"),x(t,i).addClass("e")):x(t,i).addClass("t0")},v=function(t,e){if(this.isRangeDate()){var i=t("<footer></footer>").appendTo(e);if(this._isRenderAsApp())T.call(this,i,{label:"使用日期",type:"primary",cls:"okbtn"});else{i.append("<div class='vals'><span class='s'>-</span> - <span class='e'>-</span></div>");var n=t("<div class='btns'></div>").appendTo(i);T.call(this,n,{label:"确定",type:"primary",cls:"okbtn"}),T.call(this,n,{label:"取消",type:"cancel",cls:"cancelbtn"})}}},y=function(t,e,i,n){i=f.toArray(i),(n=f.toArray(n))[0]instanceof Date||(n=[],this.isRangeDate()&&!this._isRenderAsApp()?(n.push(i[0]||new Date),n.push(i[1])):n.push(i[0]||new Date)),D.call(this,t,e,n,i),b.call(this,t,e,n,i),_.call(this,t,e,n,i),this.isRangeDate()&&!this._isRenderAsApp()||(F(n[0],new Date)?e.attr("cur-month","1"):e.removeAttr("cur-month"))},D=function(t,e,i,n){var a=e.children("header");if(this.isRangeDate()){var s,r,o="--",l="--",d=" ",h=" ";if(this._isRenderAsApp()){if(n&&0<n.length){s=n[0],r=n[1];var c=(new Date).getFullYear();s&&(s.getFullYear()!=c&&(d=s.getFullYear()),o=f.toDateString(s,"M月d日")+" "+g[s.getDay()]),r&&(r.getFullYear()!=c&&(h=r.getFullYear()),h=r.getFullYear()==c?" ":r.getFullYear(),l=f.toDateString(r,"M月d日")+" "+g[r.getDay()])}a.find(".item.s .y").text(d),a.find(".item.e .y").text(h)}else s=i&&i[0]||new Date,r=i&&i[1]||s,F(s,r)&&(r=new Date(r.getTime())).setMonth(r.getMonth()+1),o=s.getFullYear()+"年 "+S[s.getMonth()]+"月",l=r.getFullYear()+"年 "+S[r.getMonth()]+"月",I(t,e,s,r);a.find(".item.s .val").text(o),a.find(".item.e .val").text(l)}else{var u=i&&i[0]||new Date,p=u.getFullYear()+"年 "+S[u.getMonth()]+"月";a.find(".item .lbl").text(p),u=n&&n[0],a.find(".item .val").text(u?f.toDateString(u,"yyyy.MM.dd"):"-")}},b=function(t,e,i,n){if(this.isRangeDate()&&!this._isRenderAsApp()){var a=i&&i[0]||new Date,s=i&&i[1]||a;F(a,s)&&(s=new Date(s.getTime())).setMonth(s.getMonth()+1),w.call(this,t,e,e.find(".table.s"),a,n),w.call(this,t,e,e.find(".table.e"),s,n)}else{var r=i&&i[0]||new Date;w.call(this,t,e,e.find(".table.t0"),r,n)}},_=function(t,e,i,n){if(this.isRangeDate()&&!this._isRenderAsApp()){var a=" ",s=" ";n&&0<n.length&&(n[0]&&(a=f.toDateString(n[0],"yyyy.MM.dd")),n[1]&&(s=f.toDateString(n[1],"yyyy.MM.dd")));var r=e.find("footer .vals");r.children(".s").text(a),r.children(".e").text(s)}},w=function(t,e,i,n,a){var s=n.getFullYear(),r=n.getMonth();i.attr("data-y",s).attr("data-m",r);var o=new Date,l=R(o),d=a&&a[0],h=a&&a[1],c=R(d),u=R(h)||c,p=R(this.getMinDate()),f=R(this.getMaxDate())||21001231,g=new Date(s,r,1),m=g.getDay();g.setDate(m?2-m:-5);var v=(o.getFullYear()==s?"":s+"年 ")+S[r]+"月";i.find(".month").text(v);for(var y=i.find("table.body tbody").empty();;){for(var D=t("<tr></tr>").appendTo(y),b=0;b<7;b++){var _=g.getFullYear(),w=g.getMonth(),I=g.getDate(),x=1e4*_+100*w+I,$=t("<td></td>").appendTo(D);$.append("<span>"+I+"</span>"),$.attr("data-dt",_+"-"+(w+1)+"-"+I),x==l&&$.addClass("today"),w!=r&&$.addClass("over"),(w!=r||x<p||f<x)&&$.addClass("disabled"),c<=x&&x<=u&&($.addClass("selected"),x==c&&$.addClass("start"),x==u&&$.addClass("end")),g.setDate(I+1)}if(g.getMonth()>r||g.getFullYear()>s)break}},I=function(t,e,i,n){var a=(e=e.children("header")).find(".item.s .next.y, .item.e .prev.y"),s=e.find(".item.s .next.m, .item.e .prev.m"),r=i.getFullYear(),o=i.getMonth(),l=n.getFullYear(),d=n.getMonth();100*(l-1)+d<=100*r+o?a.addClass("disabled"):a.removeClass("disabled"),l<r||r==l&&d-1<=o?s.addClass("disabled"):s.removeClass("disabled")},x=function(t,e){e=t("<div class='table'></div>").appendTo(e);var i=t("<table class='head'></table>").appendTo(e);return i.append("<thead><tr><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th><th>日</th></tr></thead>"),(i=t("<table class='body'></table>").appendTo(e)).append("<thead><tr><th colspan='7'><div class='month'>-</div></th></tr></thead>"),i.append("<tbody></tbody>"),e},T=function(t,e){i?r.button.create(f.extend({},e,{target:t})):new(require("../button/index"))(this.context,e).render(t)},M=function(t){this.lastSelectedDate=null,this.selectedSnapshoot&&(t?this.selectedSnapshoot.done():this.selectedSnapshoot.release(),this.selectedSnapshoot=null)},C=function(){var t=[];if(this.isRangeDate()&&!this._isRenderAsApp()){var e=this.$el.find(".table.s");t.push(new Date(parseInt(e.attr("data-y")),parseInt(e.attr("data-m")),1));var i=this.$el.find(".table.e");t.push(new Date(parseInt(i.attr("data-y")),parseInt(i.attr("data-m")),1))}else{var n=this.$el.find(".table.t0");t.push(new Date(parseInt(n.attr("data-y")),parseInt(n.attr("data-m")),1))}return t},A=function(t,e){var i=R(t),n=R(e);if(i&&n&&n<i)return null;if(this.isRangeDate()){var a=f.toDate(this.options.start);if(a){a=new Date(a.getTime());var s=f.toDate(this.options.end)||new Date(a.getTime());s=new Date(s?s.getTime():a.getTime());var r=R(a),o=R(s);if(r<=o&&(i&&r<i&&(a=t),n&&n<o&&(s=e),R(a)<=R(s)))return[a,s]}}else{var l=f.toDate(this.options.date);if(l){l=new Date(l.getTime());var d=R(l);return i&&d<i||n&&n<d?null:l}}return null},F=function(t,e){return!(!t||!e)&&(t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear())},R=function(t){return t?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};i?(window.UIDatePicker=t,r.init(".ui-datepicker",t,n)):module.exports=n}}("undefined"!=typeof window),function(o){if(!o||!VRender.Component.ui.dateinput){var s=o?VRender.Component.ui:require("../../static/js/init"),e=s.fn,l=s.util,t=s.dateinput=function(t,e){return s._base.call(this,t,e)},i=t.prototype=new s._base(!1);i.init=function(t,e){s._base.init.call(this,t,e);var i=this.inputTag=this.$el.children(".ipt");i.on("tap",".clear",d.bind(this)),this.$el.on("change",".ui-datepicker",c.bind(this)),this._isRenderAsApp()&&this.isNative()?p.call(this):i.on("tap",r.bind(this))},i.val=function(t,e){return l.isNull(t)?this.getDate(e&&e.format):(this.setDate(t),this)},i.getDate=function(t){var e=l.toDate(this.$el.attr("data-dt"));return e&&l.isNotBlank(t)?l.toDateString(e,t):e},i.setDate=function(t){var e=t?l.toDate(t):null;v.call(this,e)&&f.call(this,e,this.getMinDate(),this.getMaxDate())},i.getMinDate=function(){return l.toDate(this.$el.attr("opt-min"))},i.setMinDate=function(t){var e=l.toDate(t);D(e)!=D(this.getMinDate())&&(this.$el.attr("opt-min",e?l.toDateString(e,"yyyy-MM-dd"):""),f.call(this,this.getDate(),e,this.getMaxDate()))},i.getMaxDate=function(){return l.toDate(this.$el.attr("opt-max"))},i.setMaxDate=function(t){var e=l.toDate(t);D(e)!=D(this.getMaxDate())&&(this.$el.attr("opt-max",e?l.toDateString(e,"yyyy-MM-dd"):""),f.call(this,this.getDate(),this.getMinDate(),e))},i.getDateFormat=function(){var t=this.options;if(t.hasOwnProperty("dateFormat"))return t.dateFormat;if(t.hasOwnProperty("format"))return t.format;var e=this.$el.children(".format");return e&&0<e.length&&(t.dateFormat=e.text()||null,t.dateFormat&&e.is(".format-fn")&&(t.dateFormat=unescape(t.dateFormat),t.dateFormat="var Utils=VRender.Utils;return ("+t.dateFormat+");",t.dateFormat=new Function(t.dateFormat)()),e.remove()),t.dateFormat},i.setDateFormat=function(t){this.options.dateFormat=t,this.$el.children(".format").remove(),v.call(this,this.getDate())},i.getPrompt=function(){return this.inputTag.children(".prompt").text()},i.setPrompt=function(t){this.inputTag.children(".prompt").remove(),l.isNotNull(t)&&(t=l.trimToEmpty(t),$("<span class='prompt'></span>").appendTo(this.inputTag).text(t))},i.isNative=function(){return 1==this.$el.attr("opt-native")},i._snapshoot_shoot=function(t,e){t.data=e||this.getDate()},i._snapshoot_compare=function(t,e){return(e=e||this.getDate())&&t.data?e.getDate()==t.data.getDate()&&e.getMonth()==t.data.getMonth()&&e.getFullYear()==t.data.getFullYear():e==t.data};var n=function(t,e){s._baseRender.call(this,t,e)},a=n.prototype=new s._baseRender(!1);a.render=function(t,e){s._baseRender.render.call(this,t,e),e.addClass("ui-dateipt");var i=this.options||{};l.isTrue(i.native)&&e.attr("opt-native","1"),e.attr("opt-box",i.container);var n=l.toDate(i.min);e.attr("opt-min",n?l.toDateString(n,"yyyy-MM-dd"):null);var a=l.toDate(i.max);return e.attr("opt-max",a?l.toDateString(a,"yyyy-MM-dd"):null),u.call(this,t,e,l.toDate(i.date)),this},a.getDateFormat=function(){return this.options.dateFormat||this.options.format};var r=function(t){g.call(this)},d=function(t){return v.call(this,null)&&f.call(this,null,this.getMinDate(),this.getMaxDate()),this.trigger("clear"),!1},h=function(t){e.mouseDebounce(t,m.bind(this))},c=function(t){return!1},u=function(t,e,i){var n=t("<div class='ipt'></div>").appendTo(e),a=t("<input type='text' readonly='readonly'/>").appendTo(n);n.append("<span class='clear'></span>");var s=this.options.prompt;l.isNotBlank(s)&&t("<span class='prompt'></span>").appendTo(n).text(s);var r=this.getDateFormat();i&&(e.addClass("has-val").attr("data-dt",l.toDateString(i,"yyyy-MM-dd")),a.val(y(i,r)||"")),!o&&r&&(l.isFunction(r)?e.write("<div class='ui-hidden format format-fn'>"+escape(r)+"</div>"):e.write("<div class='ui-hidden format'>"+r+"</div>"))},p=function(){var t=$("<input class='origin-dateipt' type='date'/>").appendTo(this.inputTag);f.call(this,this.getDate(),this.getMinDate(),this.getMaxDate()),t.on("change",function(t){v.call(this,l.toDate($(t.currentTarget).val()))}.bind(this))},f=function(e,i,n){var a=this;l.debounce("dateinput_picker-"+this.getViewId(),function(){if(a._isRenderAsApp()&&a.isNative()){var t=a.inputTag.children(".origin-dateipt");t.val(e?l.toDateString(e,"yyyy-MM-dd"):""),t.attr("min",i?l.toDateString(i,"yyyy-MM-dd"):""),t.attr("max",n?l.toDateString(n,"yyyy-MM-dd"):"")}else a.picker&&(a.picker.setMinDate(i),a.picker.setMaxDate(n),a.picker.setDate(e))})},g=function(){if(!this.picker){var t={};t.target=$("<div class='picker'></div>").appendTo(this.$el),t.date=this.getDate(),t.min=this.getMinDate(),t.max=this.getMaxDate(),this.picker=s.datepicker.create(t),this.picker.on("change",function(t,e){m.call(this),v.call(this,e)}.bind(this)),this.picker.on("clear",function(t){m.call(this),v.call(this,null)}.bind(this))}if(!this.$el.is(".show-picker")){var e=this.$el.addClass("show-picker");if(this._isRenderAsApp())$("html, body").addClass("ui-scrollless"),e.children(".picker").on("tap",m.bind(this));else{e.on("mouseenter",h.bind(this)),e.on("mouseleave",h.bind(this));var i=e.children(".picker");l.offset(i,this._getScrollContainer(),0,i[0].scrollHeight).isOverflowY&&e.addClass("show-before")}setTimeout(function(){e.addClass("animate-in")})}},m=function(){var t=this.$el.addClass("animate-out");this._isRenderAsApp()?($("html,body").removeClass("ui-scrollless"),t.children(".picker").off("tap")):t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},v=function(t){var e=this._snapshoot(),i=this.inputTag.find("input");return t?(this.$el.addClass("has-val").attr("data-dt",l.toDateString(t,"yyyy-MM-dd")),i.val(y(t,this.getDateFormat()))):(this.$el.removeClass("has-val").attr("data-dt",""),i.val("")),e.done()},y=function(t,e){return t?l.isFunction(e)?e(t):(l.isBlank(e)&&(e="yyyy-MM-dd"),l.toDateString(t,e)):""},D=function(t){return t instanceof Date?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};o?(window.UIDateInput=t,s.init(".ui-dateipt",t,n)):module.exports=n}}("undefined"!=typeof window),function(l){if(!l||!VRender.Component.ui.daterange){var d=l?VRender.Component.ui:require("../../static/js/init"),h=(d.fn,d.util),t=d.daterange=function(t,e){return d._base.call(this,t,e)},e=t.prototype=new d._base(!1);e.init=function(t,e){d._base.init.call(this,t,e);var i=this.inputTag=this.$el.children(".ipt");if(i.on("tap",".clear",u.bind(this)),this.$el.on("change",".ui-datepicker",c.bind(this)),this._isRenderAsApp()&&this.isNative())m.call(this);else if(i.on("tap",a.bind(this)),i.on("tap",".picker",function(t){return!1}),!this._isRenderAsApp()){var n=this.$el.children(".tools");n.on("tap",".item",s.bind(this)),n.on("tap",".label",r.bind(this)),n.on("mouseenter",o.bind(this)),n.on("mouseleave",o.bind(this))}},e.val=function(t,e){return h.isNull(t)?this.getDateRange(e&&e.format):(t=h.toArray(t),this.setDateRange(t[0],t[1]),this)},e.getDateRange=function(t){var e=this.getStartDate(),i=this.getEndDate();return e&&i?(h.isNotBlank(t)&&(e=h.toDateString(e,t),i=h.toDateString(i,t)),[e,i]):null},e.setDateRange=function(t,e){e=((t=h.toDate(t))?h.toDate(e):null)||t,_.call(this,t,e)&&(v.call(this,t,e),y.call(this,t,e,this.getMinDate(),this.getMaxDate()))},e.getStartDate=function(){return h.toDate(this.$el.attr("data-start"))},e.setStartDate=function(t){this.setDateRange(t,this.getEndDate())},e.getEndDate=function(){return h.toDate(this.$el.attr("data-end"))},e.setEndDate=function(t){this.setDateRange(this.getStartDate(),t)},e.getMinDate=function(){return h.toDate(this.$el.attr("opt-min"))},e.setMinDate=function(t){var e=h.toDate(t);T(e)!=T(this.getMinDate())&&(this.$el.attr("opt-min",e?h.toDateString(e,"yyyy-MM-dd"):""),y.call(this,this.getStartDate(),this.getEndDate(),e,this.getMaxDate()))},e.getMaxDate=function(){return h.toDate(this.$el.attr("opt-max"))},e.setMaxDate=function(t){var e=h.toDate(t);T(e)!=T(this.getMaxDate())&&(this.$el.attr("opt-max",e?h.toDateString(e,"yyyy-MM-dd"):""),y.call(this,this.getStartDate(),this.getEndDate(),this.getMinDate(),e))},e.getDateFormat=function(){var t=this.options;if(t.hasOwnProperty("dateFormat"))return t.dateFormat;if(t.hasOwnProperty("format"))return t.format;var e=this.$el.children(".format");return e&&0<e.length&&(t.dateFormat=e.text()||null,t.dateFormat&&e.is(".format-fn")&&(t.dateFormat=unescape(t.dateFormat),t.dateFormat="var Utils=VRender.Utils;return ("+t.dateFormat+");",t.dateFormat=new Function(t.dateFormat)()),e.remove()),t.dateFormat},e.setDateFormat=function(t){this.options.dateFormat=t,this.$el.children(".format").remove(),_.call(this,this.getStartDate(),this.getEndDate())},e.setShortcuts=function(t){f.call(this,this.$el,t)},e.isNative=function(){return 1==this.$el.attr("opt-native")},e._snapshoot_shoot=function(t){t.data=this.getDateRange(),t.min=this.getMinDate(),t.max=this.getMaxDate()},e._snapshoot_compare=function(t){var e=this.getDateRange();return t.data&&e?T(t.data[0])==T(e[0])&&T(t.data[1])==T(e[1]):!(t.data||e)};var a=function(t){D.call(this)},s=function(t){var e=$(t.currentTarget);e.addClass("selected").siblings().removeClass("selected"),e.parent().parent().children(".label").text(e.text()),this.$el.removeClass("show-dropdown"),w.call(this,e.attr("data-val"))},r=function(t){this.$el.addClass("show-dropdown")},o=function(t){var e=this;this.t_shortcut&&clearTimeout(this.t_shortcut),"mouseleave"==t.type&&this.$el.is(".show-dropdown")&&(this.t_shortcut=setTimeout(function(){e.t_shortcut=0,e.$el.removeClass("show-dropdown")},1e3))},c=function(t){return!1},u=function(t){return _.call(this,null,null)&&(v.call(this,null,null),y.call(this,null,null,this.getMinDate(),this.getMaxDate())),!1},i=function(t){var e=$(t.currentTarget),i=h.toDate(e.val()),n=e.is(".start")?i:this.getStartDate(),a=e.is(".end")?i:this.getEndDate();_.call(this,n,a),v.call(this,n,a)},n=function(t,e){d._baseRender.call(this,t,e)},p=n.prototype=new d._baseRender(!1);p.render=function(t,e){d._baseRender.render.call(this,t,e),e.addClass("ui-daterange");var i=this.options||{};h.isTrue(i.dropdown)&&e.addClass("tools-dropdown"),h.isTrue(i.native)&&e.attr("opt-native","1");var n=h.toDate(i.min);n&&e.attr("opt-min",h.toDateString(n,"yyyy-MM-dd"));var a=h.toDate(i.max);a&&e.attr("opt-max",h.toDateString(a,"yyyy-MM-dd"));var s=h.toDate(i.start),r=null;s&&(r=h.toDate(i.end)||new Date(s.getTime()),n&&T(n)>T(s)&&(s=n),a&&T(a)<T(r)&&(r=a),T(s)>T(r)&&(s=r=null));var o=parseInt(i.quickDef)||0;return s&&r?o=0:o&&(r=new Date,(s=new Date).setDate(s.getDate()-o)),s&&r&&(e.addClass("has-val"),e.attr("data-start",h.toDateString(s,"yyyy-MM-dd")),e.attr("data-end",h.toDateString(r,"yyyy-MM-dd"))),f.call(this,t,e,this.getShortcutDates(),o),g.call(this,t,e,s,r),this},p.getDateFormat=function(){return this.options.dateFormat||this.options.format},p.getShortcutDates=function(){return this.options.shortcuts||this.options.quickDates};var f=function(n,t,e,a){if(t.removeClass("has-tools").children(".tools").remove(),(e=x(e))&&0<e.length){t.addClass("has-tools");var i=n("<div class='tools'></div>").prependTo(t);i.append("<span class='label'>选择日期</span>");var s=n("<div class='items'></div>").appendTo(i);h.each(e,function(t){var e=parseInt(t.value)||0,i=n("<div class='item'></div>").appendTo(s);i.attr("data-val",e),i.text(h.isBlank(t.label)?"最近"+e+"天":t.label),e==a&&i.addClass("selected")})}},g=function(t,e,i,n){var a=t("<div class='ipt'></div>").appendTo(e),s=t("<input type='text' readonly='readonly'/>").appendTo(a);a.append("<span class='clear'></span>");var r=this.options.prompt;h.isNotBlank(r)&&t("<span class='prompt'></span>").appendTo(a).text(r);var o=this.getDateFormat();s.val(S(i,n,o)||""),!l&&o&&(h.isFunction(o)?e.write("<div class='format format-fn'>"+escape(o)+"</div>"):e.write("<div class='format'>"+o+"</div>"))},m=function(){var t=$("<input class='origin-dateipt start' type='date'/>").appendTo(this.inputTag),e=$("<input class='origin-dateipt end' type='date'/>").appendTo(this.inputTag);y.call(this,this.getStartDate(),this.getEndDate(),this.getMinDate(),this.getMaxDate()),t.on("change",i.bind(this)),e.on("change",i.bind(this))},v=function(t,e){var i=this.$el.children(".tools");if(i&&0<i.length){var n=i.children(".label").text("选择日期"),a=i.find(".item").removeClass("selected");if(t&&e&&0==h.getDays(e,new Date))for(var s=h.getDays(e,t)+1,r=0,o=a.length;r<o;r++){var l=a.eq(r);if(l.attr("data-val")==s){l.addClass("selected"),n.text(l.text());break}}}},y=function(i,n,a,s){var r=this;h.debounce("daterange_renderpicker-"+this.getViewId(),function(){if(r._isRenderAsApp()&&r.isNative()){var t=r.inputTag.children(".origin-dateipt.start"),e=r.inputTag.children(".origin-dateipt.end");t.val(i?h.toDateString(i,"yyyy-MM-dd"):""),e.val(n?h.toDateString(n,"yyyy-MM-dd"):""),a=a?h.toDateString(a,"yyyy-MM-dd"):"",s=s?h.toDateString(s,"yyyy-MM-dd"):"",t.attr("min",a).attr("max",s),e.attr("min",a).attr("max",s)}else r.picker&&(r.picker.setMinDate(a),r.picker.setMaxDate(s),r.picker.setDate(i,n))})},D=function(){if(!this.picker){var t={range:!0};t.target=$("<div class='picker'></div>").appendTo(this.inputTag),t.min=this.getMinDate(),t.max=this.getMaxDate(),t.start=this.getStartDate(),t.end=this.getEndDate(),this.picker=d.datepicker.create(t),this.picker.on("submit",function(t,e){b.call(this);var i=e&&e[0]||null,n=e&&e[1]||null;_.call(this,i,n)&&v.call(this,i,n)}.bind(this)),this.picker.on("cancel",function(t){b.call(this)}.bind(this))}if(!this.$el.is(".show-picker")){var e=this.$el.addClass("show-picker");if(this._isRenderAsApp())$("html, body").addClass("ui-scrollless"),this.inputTag.children(".picker").on("tap",function(t){b.call(this),this.picker&&this.picker.cancel()}.bind(this));else{var i=this.inputTag.children(".picker"),n=h.offset(i,this._getScrollContainer(),0,i[0].scrollHeight);n.isOverflowX&&e.addClass("show-right"),n.isOverflowY&&e.addClass("show-before")}setTimeout(function(){e.addClass("animate-in")})}},b=function(){var t=this.$el.addClass("animate-out");this._isRenderAsApp()&&($("html, body").removeClass("ui-scrollless"),this.$el.children(".picker").off("tap")),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before").removeClass("show-right"),t.removeClass("animate-in").removeClass("animate-out")},300)},_=function(t,e){var i=this._snapshoot(),n=this.inputTag.find("input");return t&&e?(this.$el.addClass("has-val"),this.$el.attr("data-start",h.toDateString(t,"yyyy-MM-dd")),this.$el.attr("data-end",h.toDateString(e,"yyyy-MM-dd")),n.val(S(t,e,this.getDateFormat())||"")):(this.$el.removeClass("has-val"),this.$el.attr("data-start","").attr("data-end",""),n.val("")),i.done()},w=function(t){if(0<(t=parseInt(t)||0)){var e=new Date,i=new Date;e.setDate(e.getDate()-t+1),_.call(this,e,i)&&y.call(this,e,i,this.getMinDate(),this.getMaxDate())}},I=function(t,e){return h.isFunction(e)?e(t):(h.isBlank(e)&&(e="yyyy-MM-dd"),h.toDateString(t,e))},x=function(t){var e=[];return h.each(h.toArray(t),function(t){h.isNotBlank(t)&&("object"!==_typeof(t)&&(t={value:t}),t.value=parseInt(t&&t.value)||0,0<t.value&&e.push(t))}),e},S=function(t,e,i){return t&&e?I(t,i)+" 至 "+I(e,i):""},T=function(t){return t instanceof Date?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};l?(window.UIDateRange=t,d.init(".ui-daterange",t,n)):module.exports=n}}("undefined"!=typeof window),function(l){if(!l||!VRender.Component.ui.datetime){var f=l?VRender.Component.ui:require("../../static/js/init"),e=f.fn,d=f.util,t=f.datetime=function(t,e){return f._base.call(this,t,e)},i=t.prototype=new f._base(!1);i.init=function(t,e){f._base.init.call(this,t,e);var i=this.inputTag=this.$el.children(".ipt");i.on("tap",s.bind(this)),i.on("tap",".clear",r.bind(this)),this.$el.on("change",".picker",function(t){return!1})},i.val=function(t,e){return d.isNull(t)?this.getDate(e&&e.format):(this.setDate(t),this)},i.getDate=function(t){var e=d.toDate(parseInt(this.$el.attr("data-dt")));return e&&d.isNotBlank(t)?d.toDateString(e,t):e},i.setDate=function(t){var e=t?d.toDate(t):null;I.call(this,e),this.picker&&D.call(this,this.picker,e)},i.getMinDate=function(){return d.toDate(parseInt(this.$el.attr("opt-min")))},i.setMinDate=function(t){var e=d.toDate(t);(e=e&&e.getTime()||"")!=this.$el.attr("opt-min")&&(this.$el.attr("opt-min",e),u.call(this))},i.getMaxDate=function(){return d.toDate(parseInt(this.$el.attr("opt-max")))},i.setMaxDate=function(t){var e=d.toDate(t);(e=e&&e.getTime()||"")!=this.$el.attr("opt-max")&&(this.$el.attr("opt-max",e),u.call(this))},i.getDateFormat=function(){var t=this.options;if(t.hasOwnProperty("dateFormat"))return t.dateFormat;if(t.hasOwnProperty("format"))return t.format;var e=this.$el.children(".format");return e&&0<e.length&&(t.dateFormat=e.text()||null,t.dateFormat&&e.is(".format-fn")&&(t.dateFormat=unescape(t.dateFormat),t.dateFormat="var Utils=VRender.Utils;return ("+t.dateFormat+");",t.dateFormat=new Function(t.dateFormat)()),e.remove()),t.dateFormat},i.setDateFormat=function(t){this.options.dateFormat=t,this.$el.children(".format").remove(),I.call(this,this.getDate())},i.getPrompt=function(){return this.inputTag.children(".prompt").text()},i.setPrompt=function(t){this.inputTag.children(".prompt").remove(),d.isNotNull(t)&&(t=d.trimToEmpty(t),$("<span class='prompt'></span>").appendTo(this.inputTag).text(t))},i.isSecondVisible=function(){return this.options.hasOwnProperty("showSecond")||(this.options.showSecond=!!this.$el.attr("opt-sec")),d.isTrue(this.options.showSecond)},i.setSecondVisible=function(t){(t=!!d.isNull(t)||d.isTrue(t))!=this.isSecondVisible()&&(this.options.showSecond=t,c.call(this))},i.getHours=function(){this.options.hasOwnProperty("hours")||(this.options.hours=this.$el.attr("opt-hours"));var t=e.getIntValues(this.options.hours,0,23);return t&&0<t.length?t:d.map(new Array(24),function(t,e){return e})},i.setHours=function(t){this.options.hours=t,u.call(this)},i.getMinutes=function(){this.options.hasOwnProperty("minutes")||(this.options.minutes=this.$el.attr("opt-minutes"));var t=e.getIntValues(this.options.minutes,0,59);return t&&0<t.length?t:d.map(new Array(60),function(t,e){return e})},i.setMinutes=function(t){this.options.minutes=t,u.call(this)},i.getSeconds=function(){this.options.hasOwnProperty("seconds")||(this.options.seconds=this.$el.attr("opt-seconds"));var t=e.getIntValues(this.options.seconds,0,59);return t&&0<t.length?t:d.map(new Array(60),function(t,e){return e})},i.setSeconds=function(t){this.options.seconds=t,u.call(this)},i._snapshoot_shoot=function(t,e){t.data=e||this.getDate()},i._snapshoot_compare=function(t,e){return(e=e||this.getDate())&&t.data?e.getTime()==t.data.getTime():e==t.data},i.rerender=function(){c.call(this)};var n=function(t,e){f._baseRender.call(this,t,e)},a=n.prototype=new f._baseRender(!1);a.render=function(t,e){f._baseRender.render.call(this,t,e),e.addClass("ui-datetime");var i=this.options||{};e.attr("opt-box",i.container),this.isSecondVisible()&&e.attr("opt-sec","1");var n=d.toDate(i.min);e.attr("opt-min",n?n.getTime():null);var a=d.toDate(i.max);return e.attr("opt-max",a?a.getTime():null),d.isArray(i.hours)&&e.attr("opt-hours",i.hours.join(",")||null),d.isArray(i.minutes)&&e.attr("opt-minutes",i.minutes.join(",")||null),d.isArray(i.seconds)&&e.attr("opt-seconds",i.seconds.join(",")||null),p.call(this,t,e,i.date),this},a.isSecondVisible=function(){return d.isTrue(this.options.showSecond)},a.getDateFormat=function(){return this.options.dateFormat||this.options.format};var s=function(t){m.call(this)},r=function(t){return I.call(this,null),this.picker&&(D.call(this,this.picker,null),w.call(this)),!1},o=function(t){e.mouseDebounce(t,v.bind(this))},h=function(t){var n=this;if("touchstart"==t.type)this.t_touchend&&clearTimeout(this.t_touchend),this.t_touchend=null;else if("touchend"==t.type&&this.beScrolled){this.beScrolled=!1;var e=y.call(this,this.picker),a=e&&e.getTime()||0;!function i(){n.t_touchend=setTimeout(function(){n.t_touchend=null;var t=y.call(n,n.picker),e=t&&t.getTime()||0;a==e?b.call(n,n.picker,t):(a=e,i())},200)}()}},c=function(){var t=this;d.debounce("datetime_render-"+this.getViewId(),function(){I.call(t,t.getDate()),t.picker&&g.call(t,t.picker.empty())})},u=function(){var t=this;this.picker&&d.debounce("datetime_render-"+this.getViewId(),function(){g.call(t,t.picker.empty())})},p=function(t,e,i){var n=t("<div class='ipt'></div>").appendTo(e),a=t("<input type='text' readonly='readonly'/>").appendTo(n);n.append("<span class='clear'></span>");var s=this.options.prompt;d.isNotBlank(s)&&t("<span class='prompt'></span>").appendTo(n).text(s);var r=this.getDateFormat();if(i=d.toDate(i)){var o=this.isSecondVisible();i.setMilliseconds(0),o||i.setSeconds(0),e.addClass("has-val").attr("data-dt",i.getTime()),a.val(S(i,this.getDateFormat(),o))}!l&&r&&(d.isFunction(r)?e.write("<div class='ui-hidden format format-fn'>"+escape(r)+"</div>"):e.write("<div class='ui-hidden format'>"+r+"</div>"))},g=function(t){if(this._isRenderAsApp()){var n=$("<div class='cols'></div>").appendTo(t),e=function(t,e){var i=$("<div class='col'></div>").appendTo(n);i.addClass(t),d.each(e,function(t){$("<div class='item'></div>").appendTo(i).text(t)})};e("year",T.call(this)),e("month",M.call(this)),e("day",[]),e("hour",this.getHours()),e("minute",this.getMinutes()),this.isSecondVisible()&&e("second",this.getSeconds())}else{f.datepicker.create({target:t,min:this.getMinDate(),max:this.getMaxDate()});var i=$("<div class='timebar'></div>").appendTo(t);f.combobox.create({target:i,name:"hour",data:this.getHours()});i.append("<span class='tip'>时</span>");f.combobox.create({target:i,name:"minute",data:this.getMinutes()});if(i.append("<span class='tip'>分</span>"),this.isSecondVisible()){f.combobox.create({target:i,name:"second",data:this.getSeconds()});i.append("<span class='tip'>秒</span>")}}var a=this.getDate();_.call(this,t,a?a.getFullYear():null,a?a.getMonth()+1:null),D.call(this,t,a),w.call(this,t)},m=function(){if(this.picker||(this.picker=$("<div class='picker'></div>").appendTo(this.$el),g.call(this,this.picker)),!this.$el.is(".show-picker")){var t=this.$el.addClass("show-picker"),e=this.picker;if(this._isRenderAsApp())$("html,body").addClass("ui-scrollless"),e.on("tap",function(t){$(t.target).is(".picker")&&v.call(this)}.bind(this)),e.on("touchstart",h.bind(this)),e.on("touchend",h.bind(this)),e.find(".col").on("scroll",function(t){this.beScrolled=!0;var e=$(t.currentTarget),i=e.children(),n=i.eq(0).height(),a=e.scrollTop(),s=parseInt(a/n);0<s&&a%n<n/2&&(s-=1);var r=i.eq(s);if(!r.is(".selected")){if(i.filter(".selected").removeClass("selected"),r.addClass("selected"),e.is(".year, .month")){var o=parseInt(this.picker.find(".col.year .selected").text()),l=parseInt(this.picker.find(".col.month .selected").text());_.call(this,this.picker,o,l)}w.call(this,this.picker);var d=y.call(this,this.picker);I.call(this,x.call(this,d))}}.bind(this));else t.on("mouseenter",o.bind(this)),t.on("mouseleave",o.bind(this)),e.on("change",function(t){var e=y.call(this,this.picker);return I.call(this,x.call(this,e)),w.call(this,this.picker),!1}.bind(this)),d.offset(e,this._getScrollContainer(),0,e[0].scrollHeight).isOverflowY&&t.addClass("show-before");b.call(this,e,this.getDate()),setTimeout(function(){t.addClass("animate-in")})}},v=function(){var t=this.$el.addClass("animate-out");this._isRenderAsApp()?($("html,body").removeClass("ui-scrollless"),this.picker.off("tap").off("touchstart").off("touchend"),this.picker.find(".col").off("scroll")):(t.off("mouseenter").off("mouseleave"),this.picker.off("change")),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},y=function(t){if(this._isRenderAsApp()){var e=t.children(".cols"),i=parseInt(e.children(".year").find(".selected").text())||0,n=parseInt(e.children(".month").find(".selected").text())||1,a=parseInt(e.children(".day").find(".selected").text())||1,s=parseInt(e.children(".hour").find(".selected").text())||0,r=parseInt(e.children(".minute").find(".selected").text())||0,o=parseInt(e.children(".second").find(".selected").text())||0;return new Date(i,n-1,a,s,r,o)}var l=f.datepicker.find(t)[0];if(!l)return null;var d=l.getDate();if(d){var h=VRender.Component,c=h.get(t.find("[name=hour]"));d.setHours(parseInt(c.getSelectedKey())||0);var u=h.get(t.find("[name=minute]"));if(d.setMinutes(parseInt(u.getSelectedKey())||0),this.isSecondVisible()){var p=h.get(t.find("[name=second]"));d.setSeconds(parseInt(p.getSelectedKey())||0)}}return d},D=function(t,e){if(this._isRenderAsApp()){var a=t.children(".cols");a.find(".selected").removeClass("selected");var i=function(t,e){var i=a.children("."+t),n=d.find(i.children(),function(t){return t.text()==e});n&&0<n.length&&n.addClass("selected")};e?(i("year",e.getFullYear()),i("month",e.getMonth()+1),i("day",e.getDate()),i("hour",e.getHours()),i("minute",e.getMinutes()),i("second",e.getSeconds())):i("year",(new Date).getFullYear())}else{var n=VRender.Component,s=f.datepicker.find(t)[0];s&&s.setDate(e);var r=n.get(t.find("[name=hour]"));r&&r.setSelectedKey(e?e.getHours():"");var o=n.get(t.find("[name=minute]"));o&&o.setSelectedKey(e?e.getMinutes():"");var l=n.get(t.find("[name=second]"));l&&l.setSelectedKey(e?e.getSeconds():"")}},b=function(t,e){function i(t,e){var i=s.children("."+t),n=d.find(i.children(),function(t){return t.text()==e});if(n&&0<n.length){var a=(n.index()+1)*n.height();i.scrollTop(a)}}var s=t.children(".cols");e?(i("year",e.getFullYear()),i("month",e.getMonth()+1),i("day",e.getDate()),i("hour",e.getHours()),i("minute",e.getMinutes()),i("second",e.getSeconds())):(s.children().scrollTop(0),i("year",(new Date).getFullYear()))},_=function(t,e,i){e||(e=(new Date).getFullYear());var n=C.call(this,e,i),a=t.find(".col.day"),s=a.find(".selected").text();a.empty(),d.each(n,function(t){var e=$("<div class='item'></div>").appendTo(a).text(t);t==s&&e.addClass("selected")})},w=function(t){},I=function(t){var e=this._snapshoot();if(t){this.$el.addClass("has-val").attr("data-dt",t.getTime());var i=this.isSecondVisible(),n=S(t,this.getDateFormat(),i);this.inputTag.find("input").val(n)}else this.$el.removeClass("has-val").attr("data-dt",""),this.inputTag.find("input").val("");e.done()},x=function(t){if(t){var e=t.getTime(),i=this.getMinDate();i&&i.getTime()>e&&(e=i.getTime(),t=new Date(e));var n=this.getMaxDate();n&&n.getTime()<e&&(e=n.getTime(),t=new Date(e))}return t||null},S=function(t,e,i){return t?d.isFunction(e)?e(t):(d.isBlank(e)&&(e=i?"yyyy-MM-dd HH:mm:ss":"yyyy-MM-dd HH:mm"),d.toDateString(t,e)):""},T=function(){for(var t=(new Date).getFullYear()+100,e=[],i=0;i<200;i++)e.push(t--);return e},M=function(){return[1,2,3,4,5,6,7,8,9,10,11,12]},C=function(t,e){var i=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28];return 2==e?(t%400==0||t%4==0&&t%100!=0)&&i.push(29):(i.push(29),i.push(30),0<=[1,3,5,7,10,12].indexOf(e)&&i.push(31)),i};l?(window.UIDateTime=t,f.init(".ui-datetime",t,n)):module.exports=n}}("undefined"!=typeof window);